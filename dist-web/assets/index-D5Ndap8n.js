const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/event-DXqYWlmG.js","assets/core-BEOw45JP.js","assets/TransactionsPage-9Nfe5BFE.js","assets/vendor-router-D4Yqsbqz.js","assets/vendor-react-BdxwsYZ-.js","assets/StatusSegment-CEARGZK6.js","assets/EmptyState-r3axvhwz.js","assets/RowActionsMenu-L_ZpjB9G.js","assets/RowActionsMenu-Bun0gHPS.css","assets/CopyIcon-VW8NgKZB.js","assets/vendor-query-CI0tl4qS.js","assets/vendor-db-BMy7eggi.js","assets/vendor-forms-Bf8hyTk9.js","assets/Badge-qzDJyl-k.css","assets/ProjectsPage-BsiI5lu0.js","assets/ProjectDetailPage-DwUoWVpg.js","assets/ClientsPage-BiBp9T-x.js","assets/ClientDetailPage-BcOJlqo9.js","assets/ReportsPage-DxUoYKJ-.js","assets/index-CgBI8Fxv.js","assets/fonts-B2QO5WSf.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js","assets/index-D_McaMIz.css","assets/SettingsPage-D_RqSdH7.js","assets/ProfileDetailPage-DVGFPyum.js","assets/DownloadPage-Ce2qf3KL.js","assets/DownloadPage-CFbLEbM2.css","assets/ThemeDemo-C7AHMsWb.js","assets/ThemeDemo-Bhg6x5uI.css","assets/ExpensesPage-CNEOVnFb.js","assets/ExpensesPage-7T9WuaQu.css","assets/ProfileExpensesPage-ClhhYSZG.js","assets/ProfileExpensesPage-Do4RQ_Se.css","assets/ReceiptsPage-DuGSzMRC.js","assets/monthDetection-B8c3NUzb.js","assets/ReceiptsPage-CM_FS-8y.css","assets/ExpensesOverviewPage-D1DAoxGN.js","assets/ExpensesOverviewPage-hL7sKboG.css","assets/ExpensesForecastPage-BURJDXJL.js","assets/ExpensesForecastPage-CuC7jCa8.css","assets/RetainersPage-t9GrXl2n.js","assets/RetainersPage-BcVQb_m3.css","assets/index-CuN65GBh.js","assets/index-gpB07fR4.css","assets/index-Cue02Wwm.js","assets/index-BniSt1ZC.css","assets/MonthCloseChecklistPage-D3YeiyN2.js","assets/MonthCloseChecklistPage-BdLD6WfS.css","assets/LandingPage-DNWp3vNi.js","assets/LandingPage-DMp7jaW4.css"])))=>i.map(i=>d[i]);
import{r as _,j as s,R as Ye,L as kl,u as Sv,a as ru,c as jv,b as Pe,d as Av,O as Dv,e as Nv}from"./vendor-router-D4Yqsbqz.js";import{a as Mv,b as Cv}from"./vendor-react-BdxwsYZ-.js";import{u as se,a as re,b as pe,Q as Ev,c as Tv}from"./vendor-query-CI0tl4qS.js";import{D as Iv}from"./vendor-db-BMy7eggi.js";import{g as Go,s as zo,p as Rv,a as _v,$ as Ov,b as Xp,o as Vn,c as te,_ as St,u as Qa,C as _e,l as Uv,d as cu,n as Li,e as pp,f as hp,Z as _l}from"./vendor-forms-Bf8hyTk9.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&u(b)}).observe(document,{childList:!0,subtree:!0});function c(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(d){if(d.ep)return;d.ep=!0;const h=c(d);fetch(d.href,h)}})();const Lv="modulepreload",zv=function(a){return"/"+a},yp={},Ce=function(l,c,u){let d=Promise.resolve();if(c&&c.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),g=b?.nonce||b?.getAttribute("nonce");d=p(c.map(m=>{if(m=zv(m),m in yp)return;yp[m]=!0;const y=m.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":Lv,y||(w.as="script"),w.crossOrigin="",w.href=m,g&&w.setAttribute("nonce",g),document.head.appendChild(w),y)return new Promise((j,D)=>{w.addEventListener("load",j),w.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${m}`)))})}))}function h(b){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=b,window.dispatchEvent(g),!g.defaultPrevented)throw b}return d.then(b=>{for(const g of b||[])g.status==="rejected"&&h(g.reason);return l().catch(h)})};var ko={exports:{}},Ol={},Bo={exports:{}},qo={};var gp;function kv(){return gp||(gp=1,(function(a){function l(U,Q){var $=U.length;U.push(Q);e:for(;0<$;){var fe=$-1>>>1,G=U[fe];if(0<d(G,Q))U[fe]=Q,U[$]=G,$=fe;else break e}}function c(U){return U.length===0?null:U[0]}function u(U){if(U.length===0)return null;var Q=U[0],$=U.pop();if($!==Q){U[0]=$;e:for(var fe=0,G=U.length,xe=G>>>1;fe<xe;){var Z=2*(fe+1)-1,V=U[Z],W=Z+1,yt=U[W];if(0>d(V,$))W<G&&0>d(yt,V)?(U[fe]=yt,U[W]=$,fe=W):(U[fe]=V,U[Z]=$,fe=Z);else if(W<G&&0>d(yt,$))U[fe]=yt,U[W]=$,fe=W;else break e}}return Q}function d(U,Q){var $=U.sortIndex-Q.sortIndex;return $!==0?$:U.id-Q.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var b=Date,g=b.now();a.unstable_now=function(){return b.now()-g}}var p=[],m=[],y=1,x=null,w=3,j=!1,D=!1,C=!1,O=!1,z=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function P(U){for(var Q=c(m);Q!==null;){if(Q.callback===null)u(m);else if(Q.startTime<=U)u(m),Q.sortIndex=Q.expirationTime,l(p,Q);else break;Q=c(m)}}function Y(U){if(C=!1,P(U),!D)if(c(p)!==null)D=!0,X||(X=!0,be());else{var Q=c(m);Q!==null&&ge(Y,Q.startTime-U)}}var X=!1,F=-1,ne=5,de=-1;function ve(){return O?!0:!(a.unstable_now()-de<ne)}function le(){if(O=!1,X){var U=a.unstable_now();de=U;var Q=!0;try{e:{D=!1,C&&(C=!1,k(F),F=-1),j=!0;var $=w;try{t:{for(P(U),x=c(p);x!==null&&!(x.expirationTime>U&&ve());){var fe=x.callback;if(typeof fe=="function"){x.callback=null,w=x.priorityLevel;var G=fe(x.expirationTime<=U);if(U=a.unstable_now(),typeof G=="function"){x.callback=G,P(U),Q=!0;break t}x===c(p)&&u(p),P(U)}else u(p);x=c(p)}if(x!==null)Q=!0;else{var xe=c(m);xe!==null&&ge(Y,xe.startTime-U),Q=!1}}break e}finally{x=null,w=$,j=!1}Q=void 0}}finally{Q?be():X=!1}}}var be;if(typeof T=="function")be=function(){T(le)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ye=ae.port2;ae.port1.onmessage=le,be=function(){ye.postMessage(null)}}else be=function(){z(le,0)};function ge(U,Q){F=z(function(){U(a.unstable_now())},Q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(U){U.callback=null},a.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<U?Math.floor(1e3/U):5},a.unstable_getCurrentPriorityLevel=function(){return w},a.unstable_next=function(U){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var $=w;w=Q;try{return U()}finally{w=$}},a.unstable_requestPaint=function(){O=!0},a.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=w;w=U;try{return Q()}finally{w=$}},a.unstable_scheduleCallback=function(U,Q,$){var fe=a.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?fe+$:fe):$=fe,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=$+G,U={id:y++,callback:Q,priorityLevel:U,startTime:$,expirationTime:G,sortIndex:-1},$>fe?(U.sortIndex=$,l(m,U),c(p)===null&&U===c(m)&&(C?(k(F),F=-1):C=!0,ge(Y,$-fe))):(U.sortIndex=G,l(p,U),D||j||(D=!0,X||(X=!0,be()))),U},a.unstable_shouldYield=ve,a.unstable_wrapCallback=function(U){var Q=w;return function(){var $=w;w=Q;try{return U.apply(this,arguments)}finally{w=$}}}})(qo)),qo}var vp;function Bv(){return vp||(vp=1,Bo.exports=kv()),Bo.exports}var xp;function qv(){if(xp)return Ol;xp=1;var a=Bv(),l=Mv(),c=Cv();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(u(188))}function m(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return p(r),e;if(o===i)return p(r),t;o=o.sibling}throw Error(u(188))}if(n.return!==i.return)n=r,i=o;else{for(var f=!1,v=r.child;v;){if(v===n){f=!0,n=r,i=o;break}if(v===i){f=!0,i=r,n=o;break}v=v.sibling}if(!f){for(v=o.child;v;){if(v===n){f=!0,n=o,i=r;break}if(v===i){f=!0,i=o,n=r;break}v=v.sibling}if(!f)throw Error(u(189))}}if(n.alternate!==i)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),T=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=le&&e[le]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case z:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case X:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case T:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case P:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case ne:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var ge=Array.isArray,U=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},fe=[],G=-1;function xe(e){return{current:e}}function Z(e){0>G||(e.current=fe[G],fe[G]=null,G--)}function V(e,t){G++,fe[G]=e.current,e.current=t}var W=xe(null),yt=xe(null),Mt=xe(null),cn=xe(null);function Kn(e,t){switch(V(Mt,t),V(yt,e),V(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zm(t),e=km(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(W),V(W,e)}function Ct(){Z(W),Z(yt),Z(Mt)}function Fn(e){e.memoizedState!==null&&V(cn,e);var t=W.current,n=km(t,e.type);t!==n&&(V(yt,e),V(W,n))}function vn(e){yt.current===e&&(Z(W),Z(yt)),cn.current===e&&(Z(cn),El._currentValue=$)}var jn,Ga;function on(e){if(jn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jn=t&&t[1]||"",Ga=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jn+e+Ga}var Se=!1;function K(e,t){if(!e||Se)return"";Se=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(L){var R=L}Reflect.construct(e,[],H)}else{try{H.call()}catch(L){R=L}e.call(H.prototype)}}else{try{throw Error()}catch(L){R=L}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(L){if(L&&R&&typeof L.stack=="string")return[L.stack,R.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),f=o[0],v=o[1];if(f&&v){var A=f.split(`
`),I=v.split(`
`);for(r=i=0;i<A.length&&!A[i].includes("DetermineComponentFrameRoot");)i++;for(;r<I.length&&!I[r].includes("DetermineComponentFrameRoot");)r++;if(i===A.length||r===I.length)for(i=A.length-1,r=I.length-1;1<=i&&0<=r&&A[i]!==I[r];)r--;for(;1<=i&&0<=r;i--,r--)if(A[i]!==I[r]){if(i!==1||r!==1)do if(i--,r--,0>r||A[i]!==I[r]){var B=`
`+A[i].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=i&&0<=r);break}}}finally{Se=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?on(n):""}function oe(e,t){switch(e.tag){case 26:case 27:case 5:return on(e.type);case 16:return on("Lazy");case 13:return e.child!==t&&t!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return K(e.type,!1);case 11:return K(e.type.render,!1);case 1:return K(e.type,!0);case 31:return on("Activity");default:return""}}function We(e){try{var t="",n=null;do t+=oe(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var at=Object.prototype.hasOwnProperty,un=a.unstable_scheduleCallback,Le=a.unstable_cancelCallback,Kl=a.unstable_shouldYield,ty=a.unstable_requestPaint,kt=a.unstable_now,ny=a.unstable_getCurrentPriorityLevel,pu=a.unstable_ImmediatePriority,hu=a.unstable_UserBlockingPriority,Fl=a.unstable_NormalPriority,ay=a.unstable_LowPriority,yu=a.unstable_IdlePriority,iy=a.log,ly=a.unstable_setDisableYieldValue,Hi=null,Bt=null;function Gn(e){if(typeof iy=="function"&&ly(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Hi,e)}catch{}}var qt=Math.clz32?Math.clz32:cy,sy=Math.log,ry=Math.LN2;function cy(e){return e>>>=0,e===0?32:31-(sy(e)/ry|0)|0}var Gl=256,Zl=262144,Xl=4194304;function Sa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var v=i&134217727;return v!==0?(i=v&~o,i!==0?r=Sa(i):(f&=v,f!==0?r=Sa(f):n||(n=v&~e,n!==0&&(r=Sa(n))))):(v=i&~o,v!==0?r=Sa(v):f!==0?r=Sa(f):n||(n=i&~e,n!==0&&(r=Sa(n)))),r===0?0:t!==0&&t!==r&&(t&o)===0&&(o=r&-r,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:r}function Pi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function oy(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gu(){var e=Xl;return Xl<<=1,(Xl&62914560)===0&&(Xl=4194304),e}function Ar(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function uy(e,t,n,i,r,o){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,A=e.expirationTimes,I=e.hiddenUpdates;for(n=f&~n;0<n;){var B=31-qt(n),H=1<<B;v[B]=0,A[B]=-1;var R=I[B];if(R!==null)for(I[B]=null,B=0;B<R.length;B++){var L=R[B];L!==null&&(L.lane&=-536870913)}n&=~H}i!==0&&vu(e,i,0),o!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function vu(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-qt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function xu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-qt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function bu(e,t){var n=t&-t;return n=(n&42)!==0?1:Dr(n),(n&(e.suspendedLanes|t))!==0?0:n}function Dr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wu(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:rp(e.type))}function Su(e,t){var n=Q.p;try{return Q.p=e,t()}finally{Q.p=n}}var Zn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Zn,Et="__reactProps$"+Zn,Za="__reactContainer$"+Zn,Mr="__reactEvents$"+Zn,dy="__reactListeners$"+Zn,fy="__reactHandles$"+Zn,ju="__reactResources$"+Zn,Qi="__reactMarker$"+Zn;function Cr(e){delete e[gt],delete e[Et],delete e[Mr],delete e[dy],delete e[fy]}function Xa(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Za]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ym(e);e!==null;){if(n=e[gt])return n;e=Ym(e)}return t}e=n,n=e.parentNode}return null}function Ja(e){if(e=e[gt]||e[Za]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Yi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function $a(e){var t=e[ju];return t||(t=e[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[Qi]=!0}var Au=new Set,Du={};function ja(e,t){Wa(e,t),Wa(e+"Capture",t)}function Wa(e,t){for(Du[e]=t,e=0;e<t.length;e++)Au.add(t[e])}var my=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},Mu={};function py(e){return at.call(Mu,e)?!0:at.call(Nu,e)?!1:my.test(e)?Mu[e]=!0:(Nu[e]=!0,!1)}function $l(e,t,n){if(py(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Wl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hy(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(f){n=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Er(e){if(!e._valueTracker){var t=Cu(e)?"checked":"value";e._valueTracker=hy(e,t,""+e[t])}}function Eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Cu(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yy=/[\n"\\]/g;function Xt(e){return e.replace(yy,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tr(e,t,n,i,r,o,f,v){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Zt(t)):e.value!==""+Zt(t)&&(e.value=""+Zt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Ir(e,f,Zt(t)):n!=null?Ir(e,f,Zt(n)):i!=null&&e.removeAttribute("value"),r==null&&o!=null&&(e.defaultChecked=!!o),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Zt(v):e.removeAttribute("name")}function Tu(e,t,n,i,r,o,f,v){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Er(e);return}n=n!=null?""+Zt(n):"",t=t!=null?""+Zt(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=v?e.checked:!!i,e.defaultChecked=!!i,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Er(e)}function Ir(e,t,n){t==="number"&&es(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ei(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Zt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Iu(e,t,n){if(t!=null&&(t=""+Zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Zt(n):""}function Ru(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(u(92));if(ge(i)){if(1<i.length)throw Error(u(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Zt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Er(e)}function ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||gy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ou(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&_u(e,r,i)}else for(var o in t)t.hasOwnProperty(o)&&_u(e,o,t[o])}function Rr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ts(e){return xy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dn(){}var _r=null;function Or(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ni=null,ai=null;function Uu(e){var t=Ja(e);if(t&&(e=t.stateNode)){var n=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(Tr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Et]||null;if(!r)throw Error(u(90));Tr(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Eu(i)}break e;case"textarea":Iu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ei(e,!!n.multiple,t,!1)}}}var Ur=!1;function Lu(e,t,n){if(Ur)return e(t,n);Ur=!0;try{var i=e(t);return i}finally{if(Ur=!1,(ni!==null||ai!==null)&&(Ps(),ni&&(t=ni,e=ai,ai=ni=null,Uu(t),e)))for(t=0;t<e.length;t++)Uu(e[t])}}function Ki(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Et]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lr=!1;if(Nn)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Lr=!1}var Xn=null,zr=null,ns=null;function zu(){if(ns)return ns;var e,t=zr,n=t.length,i,r="value"in Xn?Xn.value:Xn.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===r[o-i];i++);return ns=r.slice(e,1<i?1-i:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function is(){return!0}function ku(){return!1}function Tt(e){function t(n,i,r,o,f){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(o):o[v]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?is:ku,this.isPropagationStopped=ku,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),t}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=Tt(Aa),Gi=x({},Aa,{view:0,detail:0}),by=Tt(Gi),kr,Br,Zi,ss=x({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zi&&(Zi&&e.type==="mousemove"?(kr=e.screenX-Zi.screenX,Br=e.screenY-Zi.screenY):Br=kr=0,Zi=e),kr)},movementY:function(e){return"movementY"in e?e.movementY:Br}}),Bu=Tt(ss),wy=x({},ss,{dataTransfer:0}),Sy=Tt(wy),jy=x({},Gi,{relatedTarget:0}),qr=Tt(jy),Ay=x({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=Tt(Ay),Ny=x({},Aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),My=Tt(Ny),Cy=x({},Aa,{data:0}),qu=Tt(Cy),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iy[e])?!!t[e]:!1}function Hr(){return Ry}var _y=x({},Gi,{key:function(e){if(e.key){var t=Ey[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ty[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Oy=Tt(_y),Uy=x({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hu=Tt(Uy),Ly=x({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),zy=Tt(Ly),ky=x({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),By=Tt(ky),qy=x({},ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=Tt(qy),Py=x({},Aa,{newState:0,oldState:0}),Vy=Tt(Py),Qy=[9,13,27,32],Pr=Nn&&"CompositionEvent"in window,Xi=null;Nn&&"documentMode"in document&&(Xi=document.documentMode);var Yy=Nn&&"TextEvent"in window&&!Xi,Pu=Nn&&(!Pr||Xi&&8<Xi&&11>=Xi),Vu=" ",Qu=!1;function Yu(e,t){switch(e){case"keyup":return Qy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ku(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function Ky(e,t){switch(e){case"compositionend":return Ku(t);case"keypress":return t.which!==32?null:(Qu=!0,Vu);case"textInput":return e=t.data,e===Vu&&Qu?null:e;default:return null}}function Fy(e,t){if(ii)return e==="compositionend"||!Pr&&Yu(e,t)?(e=zu(),ns=zr=Xn=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pu&&t.locale!=="ko"?null:t.data;default:return null}}var Gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gy[e.type]:t==="textarea"}function Gu(e,t,n,i){ni?ai?ai.push(i):ai=[i]:ni=i,t=Zs(t,"onChange"),0<t.length&&(n=new ls("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ji=null,$i=null;function Zy(e){Im(e,0)}function rs(e){var t=Yi(e);if(Eu(t))return e}function Zu(e,t){if(e==="change")return t}var Xu=!1;if(Nn){var Vr;if(Nn){var Qr="oninput"in document;if(!Qr){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Qr=typeof Ju.oninput=="function"}Vr=Qr}else Vr=!1;Xu=Vr&&(!document.documentMode||9<document.documentMode)}function $u(){Ji&&(Ji.detachEvent("onpropertychange",Wu),$i=Ji=null)}function Wu(e){if(e.propertyName==="value"&&rs($i)){var t=[];Gu(t,$i,e,Or(e)),Lu(Zy,t)}}function Xy(e,t,n){e==="focusin"?($u(),Ji=t,$i=n,Ji.attachEvent("onpropertychange",Wu)):e==="focusout"&&$u()}function Jy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs($i)}function $y(e,t){if(e==="click")return rs(t)}function Wy(e,t){if(e==="input"||e==="change")return rs(t)}function eg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:eg;function Wi(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!at.call(t,r)||!Ht(e[r],t[r]))return!1}return!0}function ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function td(e,t){var n=ed(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ed(n)}}function nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=es(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=es(e.document)}return t}function Yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tg=Nn&&"documentMode"in document&&11>=document.documentMode,li=null,Kr=null,el=null,Fr=!1;function id(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fr||li==null||li!==es(i)||(i=li,"selectionStart"in i&&Yr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),el&&Wi(el,i)||(el=i,i=Zs(Kr,"onSelect"),0<i.length&&(t=new ls("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=li)))}function Da(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var si={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Gr={},ld={};Nn&&(ld=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function Na(e){if(Gr[e])return Gr[e];if(!si[e])return e;var t=si[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ld)return Gr[e]=t[n];return e}var sd=Na("animationend"),rd=Na("animationiteration"),cd=Na("animationstart"),ng=Na("transitionrun"),ag=Na("transitionstart"),ig=Na("transitioncancel"),od=Na("transitionend"),ud=new Map,Zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zr.push("scrollEnd");function dn(e,t){ud.set(e,t),ja(t,[e])}var cs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],ri=0,Xr=0;function os(){for(var e=ri,t=Xr=ri=0;t<e;){var n=Jt[t];Jt[t++]=null;var i=Jt[t];Jt[t++]=null;var r=Jt[t];Jt[t++]=null;var o=Jt[t];if(Jt[t++]=null,i!==null&&r!==null){var f=i.pending;f===null?r.next=r:(r.next=f.next,f.next=r),i.pending=r}o!==0&&dd(n,r,o)}}function us(e,t,n,i){Jt[ri++]=e,Jt[ri++]=t,Jt[ri++]=n,Jt[ri++]=i,Xr|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Jr(e,t,n,i){return us(e,t,n,i),ds(e)}function Ma(e,t){return us(e,null,null,t),ds(e)}function dd(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,o=e.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(r=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,r&&t!==null&&(r=31-qt(n),e=o.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),o):null}function ds(e){if(50<Sl)throw Sl=0,so=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ci={};function lg(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,i){return new lg(e,t,n,i)}function $r(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function fd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fs(e,t,n,i,r,o){var f=0;if(i=e,typeof e=="function")$r(e)&&(f=1);else if(typeof e=="string")f=uv(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Pt(31,n,t,r),e.elementType=de,e.lanes=o,e;case C:return Ca(n.children,r,o,t);case O:f=8,r|=24;break;case z:return e=Pt(12,n,t,r|2),e.elementType=z,e.lanes=o,e;case Y:return e=Pt(13,n,t,r),e.elementType=Y,e.lanes=o,e;case X:return e=Pt(19,n,t,r),e.elementType=X,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:f=10;break e;case k:f=9;break e;case P:f=11;break e;case F:f=14;break e;case ne:f=16,i=null;break e}f=29,n=Error(u(130,e===null?"null":typeof e,"")),i=null}return t=Pt(f,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function Ca(e,t,n,i){return e=Pt(7,e,i,t),e.lanes=n,e}function Wr(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function md(e){var t=Pt(18,null,null,0);return t.stateNode=e,t}function ec(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pd=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var n=pd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:We(t)},pd.set(e,t),t)}return{value:e,source:t,stack:We(t)}}var oi=[],ui=0,ms=null,tl=0,Wt=[],en=0,Jn=null,xn=1,bn="";function Cn(e,t){oi[ui++]=tl,oi[ui++]=ms,ms=e,tl=t}function hd(e,t,n){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,Jn=e;var i=xn;e=bn;var r=32-qt(i)-1;i&=~(1<<r),n+=1;var o=32-qt(t)+r;if(30<o){var f=r-r%5;o=(i&(1<<f)-1).toString(32),i>>=f,r-=f,xn=1<<32-qt(t)+r|n<<r|i,bn=o+e}else xn=1<<o|n<<r|i,bn=e}function tc(e){e.return!==null&&(Cn(e,1),hd(e,1,0))}function nc(e){for(;e===ms;)ms=oi[--ui],oi[ui]=null,tl=oi[--ui],oi[ui]=null;for(;e===Jn;)Jn=Wt[--en],Wt[en]=null,bn=Wt[--en],Wt[en]=null,xn=Wt[--en],Wt[en]=null}function yd(e,t){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,xn=t.id,bn=t.overflow,Jn=e}var vt=null,Ve=null,Ee=!1,$n=null,tn=!1,ac=Error(u(519));function Wn(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl($t(t,e)),ac}function gd(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[gt]=e,t[Et]=i,n){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(n=0;n<Al.length;n++)Ae(Al[n],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),Tu(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Ru(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Um(t.textContent,n)?(i.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),i.onScroll!=null&&Ae("scroll",t),i.onScrollEnd!=null&&Ae("scrollend",t),i.onClick!=null&&(t.onclick=Dn),t=!0):t=!1,t||Wn(e,!0)}function vd(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:vt=vt.return}}function di(e){if(e!==vt)return!1;if(!Ee)return vd(e),Ee=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||So(e.type,e.memoizedProps)),n=!n),n&&Ve&&Wn(e),vd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ve=Qm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ve=Qm(e)}else t===27?(t=Ve,ma(e.type)?(e=Mo,Mo=null,Ve=e):Ve=t):Ve=vt?an(e.stateNode.nextSibling):null;return!0}function Ea(){Ve=vt=null,Ee=!1}function ic(){var e=$n;return e!==null&&(Ot===null?Ot=e:Ot.push.apply(Ot,e),$n=null),e}function nl(e){$n===null?$n=[e]:$n.push(e)}var lc=xe(null),Ta=null,En=null;function ea(e,t,n){V(lc,t._currentValue),t._currentValue=n}function Tn(e){e._currentValue=lc.current,Z(lc)}function sc(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function rc(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){var f=r.child;o=o.firstContext;e:for(;o!==null;){var v=o;o=r;for(var A=0;A<t.length;A++)if(v.context===t[A]){o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),sc(o.return,n,e),i||(f=null);break e}o=v.next}}else if(r.tag===18){if(f=r.return,f===null)throw Error(u(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),sc(f,n,e),f=null}else f=r.child;if(f!==null)f.return=r;else for(f=r;f!==null;){if(f===e){f=null;break}if(r=f.sibling,r!==null){r.return=f.return,f=r;break}f=f.return}r=f}}function fi(e,t,n,i){e=null;for(var r=t,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var f=r.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var v=r.type;Ht(r.pendingProps.value,f.value)||(e!==null?e.push(v):e=[v])}}else if(r===cn.current){if(f=r.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(El):e=[El])}r=r.return}e!==null&&rc(t,e,n,i),t.flags|=262144}function ps(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ia(e){Ta=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xt(e){return xd(Ta,e)}function hs(e,t){return Ta===null&&Ia(e),xd(e,t)}function xd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},En===null){if(e===null)throw Error(u(308));En=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else En=En.next=t;return n}var sg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},rg=a.unstable_scheduleCallback,cg=a.unstable_NormalPriority,it={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new sg,data:new Map,refCount:0}}function al(e){e.refCount--,e.refCount===0&&rg(cg,function(){e.controller.abort()})}var il=null,oc=0,mi=0,pi=null;function og(e,t){if(il===null){var n=il=[];oc=0,mi=mo(),pi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return oc++,t.then(bd,bd),t}function bd(){if(--oc===0&&il!==null){pi!==null&&(pi.status="fulfilled");var e=il;il=null,mi=0,pi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ug(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var wd=U.S;U.S=function(e,t){lm=kt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&og(e,t),wd!==null&&wd(e,t)};var Ra=xe(null);function uc(){var e=Ra.current;return e!==null?e:qe.pooledCache}function ys(e,t){t===null?V(Ra,Ra.current):V(Ra,t.pool)}function Sd(){var e=uc();return e===null?null:{parent:it._currentValue,pool:e}}var hi=Error(u(460)),dc=Error(u(474)),gs=Error(u(542)),vs={then:function(){}};function jd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ad(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Dn,Dn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nd(e),e;default:if(typeof t.status=="string")t.then(Dn,Dn);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nd(e),e}throw Oa=t,hi}}function _a(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Oa=n,hi):n}}var Oa=null;function Dd(){if(Oa===null)throw Error(u(459));var e=Oa;return Oa=null,e}function Nd(e){if(e===hi||e===gs)throw Error(u(483))}var yi=null,ll=0;function xs(e){var t=ll;return ll+=1,yi===null&&(yi=[]),Ad(yi,e,t)}function sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function bs(e,t){throw t.$$typeof===w?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Md(e){function t(M,N){if(e){var E=M.deletions;E===null?(M.deletions=[N],M.flags|=16):E.push(N)}}function n(M,N){if(!e)return null;for(;N!==null;)t(M,N),N=N.sibling;return null}function i(M){for(var N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function r(M,N){return M=Mn(M,N),M.index=0,M.sibling=null,M}function o(M,N,E){return M.index=E,e?(E=M.alternate,E!==null?(E=E.index,E<N?(M.flags|=67108866,N):E):(M.flags|=67108866,N)):(M.flags|=1048576,N)}function f(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function v(M,N,E,q){return N===null||N.tag!==6?(N=Wr(E,M.mode,q),N.return=M,N):(N=r(N,E),N.return=M,N)}function A(M,N,E,q){var ie=E.type;return ie===C?B(M,N,E.props.children,q,E.key):N!==null&&(N.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ne&&_a(ie)===N.type)?(N=r(N,E.props),sl(N,E),N.return=M,N):(N=fs(E.type,E.key,E.props,null,M.mode,q),sl(N,E),N.return=M,N)}function I(M,N,E,q){return N===null||N.tag!==4||N.stateNode.containerInfo!==E.containerInfo||N.stateNode.implementation!==E.implementation?(N=ec(E,M.mode,q),N.return=M,N):(N=r(N,E.children||[]),N.return=M,N)}function B(M,N,E,q,ie){return N===null||N.tag!==7?(N=Ca(E,M.mode,q,ie),N.return=M,N):(N=r(N,E),N.return=M,N)}function H(M,N,E){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Wr(""+N,M.mode,E),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case j:return E=fs(N.type,N.key,N.props,null,M.mode,E),sl(E,N),E.return=M,E;case D:return N=ec(N,M.mode,E),N.return=M,N;case ne:return N=_a(N),H(M,N,E)}if(ge(N)||be(N))return N=Ca(N,M.mode,E,null),N.return=M,N;if(typeof N.then=="function")return H(M,xs(N),E);if(N.$$typeof===T)return H(M,hs(M,N),E);bs(M,N)}return null}function R(M,N,E,q){var ie=N!==null?N.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return ie!==null?null:v(M,N,""+E,q);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case j:return E.key===ie?A(M,N,E,q):null;case D:return E.key===ie?I(M,N,E,q):null;case ne:return E=_a(E),R(M,N,E,q)}if(ge(E)||be(E))return ie!==null?null:B(M,N,E,q,null);if(typeof E.then=="function")return R(M,N,xs(E),q);if(E.$$typeof===T)return R(M,N,hs(M,E),q);bs(M,E)}return null}function L(M,N,E,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return M=M.get(E)||null,v(N,M,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return M=M.get(q.key===null?E:q.key)||null,A(N,M,q,ie);case D:return M=M.get(q.key===null?E:q.key)||null,I(N,M,q,ie);case ne:return q=_a(q),L(M,N,E,q,ie)}if(ge(q)||be(q))return M=M.get(E)||null,B(N,M,q,ie,null);if(typeof q.then=="function")return L(M,N,E,xs(q),ie);if(q.$$typeof===T)return L(M,N,E,hs(N,q),ie);bs(N,q)}return null}function J(M,N,E,q){for(var ie=null,Te=null,ee=N,he=N=0,Me=null;ee!==null&&he<E.length;he++){ee.index>he?(Me=ee,ee=null):Me=ee.sibling;var Ie=R(M,ee,E[he],q);if(Ie===null){ee===null&&(ee=Me);break}e&&ee&&Ie.alternate===null&&t(M,ee),N=o(Ie,N,he),Te===null?ie=Ie:Te.sibling=Ie,Te=Ie,ee=Me}if(he===E.length)return n(M,ee),Ee&&Cn(M,he),ie;if(ee===null){for(;he<E.length;he++)ee=H(M,E[he],q),ee!==null&&(N=o(ee,N,he),Te===null?ie=ee:Te.sibling=ee,Te=ee);return Ee&&Cn(M,he),ie}for(ee=i(ee);he<E.length;he++)Me=L(ee,M,he,E[he],q),Me!==null&&(e&&Me.alternate!==null&&ee.delete(Me.key===null?he:Me.key),N=o(Me,N,he),Te===null?ie=Me:Te.sibling=Me,Te=Me);return e&&ee.forEach(function(va){return t(M,va)}),Ee&&Cn(M,he),ie}function ce(M,N,E,q){if(E==null)throw Error(u(151));for(var ie=null,Te=null,ee=N,he=N=0,Me=null,Ie=E.next();ee!==null&&!Ie.done;he++,Ie=E.next()){ee.index>he?(Me=ee,ee=null):Me=ee.sibling;var va=R(M,ee,Ie.value,q);if(va===null){ee===null&&(ee=Me);break}e&&ee&&va.alternate===null&&t(M,ee),N=o(va,N,he),Te===null?ie=va:Te.sibling=va,Te=va,ee=Me}if(Ie.done)return n(M,ee),Ee&&Cn(M,he),ie;if(ee===null){for(;!Ie.done;he++,Ie=E.next())Ie=H(M,Ie.value,q),Ie!==null&&(N=o(Ie,N,he),Te===null?ie=Ie:Te.sibling=Ie,Te=Ie);return Ee&&Cn(M,he),ie}for(ee=i(ee);!Ie.done;he++,Ie=E.next())Ie=L(ee,M,he,Ie.value,q),Ie!==null&&(e&&Ie.alternate!==null&&ee.delete(Ie.key===null?he:Ie.key),N=o(Ie,N,he),Te===null?ie=Ie:Te.sibling=Ie,Te=Ie);return e&&ee.forEach(function(wv){return t(M,wv)}),Ee&&Cn(M,he),ie}function Be(M,N,E,q){if(typeof E=="object"&&E!==null&&E.type===C&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case j:e:{for(var ie=E.key;N!==null;){if(N.key===ie){if(ie=E.type,ie===C){if(N.tag===7){n(M,N.sibling),q=r(N,E.props.children),q.return=M,M=q;break e}}else if(N.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ne&&_a(ie)===N.type){n(M,N.sibling),q=r(N,E.props),sl(q,E),q.return=M,M=q;break e}n(M,N);break}else t(M,N);N=N.sibling}E.type===C?(q=Ca(E.props.children,M.mode,q,E.key),q.return=M,M=q):(q=fs(E.type,E.key,E.props,null,M.mode,q),sl(q,E),q.return=M,M=q)}return f(M);case D:e:{for(ie=E.key;N!==null;){if(N.key===ie)if(N.tag===4&&N.stateNode.containerInfo===E.containerInfo&&N.stateNode.implementation===E.implementation){n(M,N.sibling),q=r(N,E.children||[]),q.return=M,M=q;break e}else{n(M,N);break}else t(M,N);N=N.sibling}q=ec(E,M.mode,q),q.return=M,M=q}return f(M);case ne:return E=_a(E),Be(M,N,E,q)}if(ge(E))return J(M,N,E,q);if(be(E)){if(ie=be(E),typeof ie!="function")throw Error(u(150));return E=ie.call(E),ce(M,N,E,q)}if(typeof E.then=="function")return Be(M,N,xs(E),q);if(E.$$typeof===T)return Be(M,N,hs(M,E),q);bs(M,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,N!==null&&N.tag===6?(n(M,N.sibling),q=r(N,E),q.return=M,M=q):(n(M,N),q=Wr(E,M.mode,q),q.return=M,M=q),f(M)):n(M,N)}return function(M,N,E,q){try{ll=0;var ie=Be(M,N,E,q);return yi=null,ie}catch(ee){if(ee===hi||ee===gs)throw ee;var Te=Pt(29,ee,null,M.mode);return Te.lanes=q,Te.return=M,Te}}}var Ua=Md(!0),Cd=Md(!1),ta=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Re&2)!==0){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=ds(e),dd(e,null,n),t}return us(e,i,t,n),ds(e)}function rl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xu(e,n)}}function pc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?r=o=f:o=o.next=f,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var hc=!1;function cl(){if(hc){var e=pi;if(e!==null)throw e}}function ol(e,t,n,i){hc=!1;var r=e.updateQueue;ta=!1;var o=r.firstBaseUpdate,f=r.lastBaseUpdate,v=r.shared.pending;if(v!==null){r.shared.pending=null;var A=v,I=A.next;A.next=null,f===null?o=I:f.next=I,f=A;var B=e.alternate;B!==null&&(B=B.updateQueue,v=B.lastBaseUpdate,v!==f&&(v===null?B.firstBaseUpdate=I:v.next=I,B.lastBaseUpdate=A))}if(o!==null){var H=r.baseState;f=0,B=I=A=null,v=o;do{var R=v.lane&-536870913,L=R!==v.lane;if(L?(Ne&R)===R:(i&R)===R){R!==0&&R===mi&&(hc=!0),B!==null&&(B=B.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var J=e,ce=v;R=t;var Be=n;switch(ce.tag){case 1:if(J=ce.payload,typeof J=="function"){H=J.call(Be,H,R);break e}H=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=ce.payload,R=typeof J=="function"?J.call(Be,H,R):J,R==null)break e;H=x({},H,R);break e;case 2:ta=!0}}R=v.callback,R!==null&&(e.flags|=64,L&&(e.flags|=8192),L=r.callbacks,L===null?r.callbacks=[R]:L.push(R))}else L={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},B===null?(I=B=L,A=H):B=B.next=L,f|=R;if(v=v.next,v===null){if(v=r.shared.pending,v===null)break;L=v,v=L.next,L.next=null,r.lastBaseUpdate=L,r.shared.pending=null}}while(!0);B===null&&(A=H),r.baseState=A,r.firstBaseUpdate=I,r.lastBaseUpdate=B,o===null&&(r.shared.lanes=0),ca|=f,e.lanes=f,e.memoizedState=H}}function Ed(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Td(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ed(n[e],t)}var gi=xe(null),ws=xe(0);function Id(e,t){e=Bn,V(ws,e),V(gi,t),Bn=e|t.baseLanes}function yc(){V(ws,Bn),V(gi,gi.current)}function gc(){Bn=ws.current,Z(gi),Z(ws)}var Vt=xe(null),nn=null;function ia(e){var t=e.alternate;V(et,et.current&1),V(Vt,e),nn===null&&(t===null||gi.current!==null||t.memoizedState!==null)&&(nn=e)}function vc(e){V(et,et.current),V(Vt,e),nn===null&&(nn=e)}function Rd(e){e.tag===22?(V(et,et.current),V(Vt,e),nn===null&&(nn=e)):la()}function la(){V(et,et.current),V(Vt,Vt.current)}function Qt(e){Z(Vt),nn===e&&(nn=null),Z(et)}var et=xe(0);function Ss(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Do(n)||No(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var In=0,me=null,ze=null,lt=null,js=!1,vi=!1,La=!1,As=0,ul=0,xi=null,dg=0;function Xe(){throw Error(u(321))}function xc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function bc(e,t,n,i,r,o){return In=o,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?yf:Uc,La=!1,o=n(i,r),La=!1,vi&&(o=Od(t,n,i,r)),_d(e),o}function _d(e){U.H=ml;var t=ze!==null&&ze.next!==null;if(In=0,lt=ze=me=null,js=!1,ul=0,xi=null,t)throw Error(u(300));e===null||st||(e=e.dependencies,e!==null&&ps(e)&&(st=!0))}function Od(e,t,n,i){me=e;var r=0;do{if(vi&&(xi=null),ul=0,vi=!1,25<=r)throw Error(u(301));if(r+=1,lt=ze=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}U.H=gf,o=t(n,i)}while(vi);return o}function fg(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?dl(t):t,e=e.useState()[0],(ze!==null?ze.memoizedState:null)!==e&&(me.flags|=1024),t}function wc(){var e=As!==0;return As=0,e}function Sc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function jc(e){if(js){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}js=!1}In=0,lt=ze=me=null,vi=!1,ul=As=0,xi=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?me.memoizedState=lt=e:lt=lt.next=e,lt}function tt(){if(ze===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=lt===null?me.memoizedState:lt.next;if(t!==null)lt=t,ze=e;else{if(e===null)throw me.alternate===null?Error(u(467)):Error(u(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},lt===null?me.memoizedState=lt=e:lt=lt.next=e}return lt}function Ds(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(e){var t=ul;return ul+=1,xi===null&&(xi=[]),e=Ad(xi,e,t),t=me,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?yf:Uc),e}function Ns(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return dl(e);if(e.$$typeof===T)return xt(e)}throw Error(u(438,String(e)))}function Ac(e){var t=null,n=me.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=me.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ds(),me.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=ve;return t.index++,n}function Rn(e,t){return typeof t=="function"?t(e):t}function Ms(e){var t=tt();return Dc(t,ze,e)}function Dc(e,t,n){var i=e.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=n;var r=e.baseQueue,o=i.pending;if(o!==null){if(r!==null){var f=r.next;r.next=o.next,o.next=f}t.baseQueue=r=o,i.pending=null}if(o=e.baseState,r===null)e.memoizedState=o;else{t=r.next;var v=f=null,A=null,I=t,B=!1;do{var H=I.lane&-536870913;if(H!==I.lane?(Ne&H)===H:(In&H)===H){var R=I.revertLane;if(R===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),H===mi&&(B=!0);else if((In&R)===R){I=I.next,R===mi&&(B=!0);continue}else H={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(v=A=H,f=o):A=A.next=H,me.lanes|=R,ca|=R;H=I.action,La&&n(o,H),o=I.hasEagerState?I.eagerState:n(o,H)}else R={lane:H,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},A===null?(v=A=R,f=o):A=A.next=R,me.lanes|=H,ca|=H;I=I.next}while(I!==null&&I!==t);if(A===null?f=o:A.next=v,!Ht(o,e.memoizedState)&&(st=!0,B&&(n=pi,n!==null)))throw n;e.memoizedState=o,e.baseState=f,e.baseQueue=A,i.lastRenderedState=o}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Nc(e){var t=tt(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var f=r=r.next;do o=e(o,f.action),f=f.next;while(f!==r);Ht(o,t.memoizedState)||(st=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Ud(e,t,n){var i=me,r=tt(),o=Ee;if(o){if(n===void 0)throw Error(u(407));n=n()}else n=t();var f=!Ht((ze||r).memoizedState,n);if(f&&(r.memoizedState=n,st=!0),r=r.queue,Ec(kd.bind(null,i,r,e),[e]),r.getSnapshot!==t||f||lt!==null&&lt.memoizedState.tag&1){if(i.flags|=2048,bi(9,{destroy:void 0},zd.bind(null,i,r,n,t),null),qe===null)throw Error(u(349));o||(In&127)!==0||Ld(i,t,n)}return n}function Ld(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t=Ds(),me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zd(e,t,n,i){t.value=n,t.getSnapshot=i,Bd(t)&&qd(e)}function kd(e,t,n){return n(function(){Bd(t)&&qd(e)})}function Bd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function qd(e){var t=Ma(e,2);t!==null&&Ut(t,e,2)}function Mc(e){var t=Dt();if(typeof e=="function"){var n=e;if(e=n(),La){Gn(!0);try{n()}finally{Gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t}function Hd(e,t,n,i){return e.baseState=n,Dc(e,ze,typeof i=="function"?i:Rn)}function mg(e,t,n,i,r){if(Ts(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};U.T!==null?n(!0):o.isTransition=!1,i(o),n=t.pending,n===null?(o.next=t.pending=o,Pd(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Pd(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=U.T,f={};U.T=f;try{var v=n(r,i),A=U.S;A!==null&&A(f,v),Vd(e,t,v)}catch(I){Cc(e,t,I)}finally{o!==null&&f.types!==null&&(o.types=f.types),U.T=o}}else try{o=n(r,i),Vd(e,t,o)}catch(I){Cc(e,t,I)}}function Vd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Qd(e,t,i)},function(i){return Cc(e,t,i)}):Qd(e,t,n)}function Qd(e,t,n){t.status="fulfilled",t.value=n,Yd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Pd(e,n)))}function Cc(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Yd(t),t=t.next;while(t!==i)}e.action=null}function Yd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Kd(e,t){return t}function Fd(e,t){if(Ee){var n=qe.formState;if(n!==null){e:{var i=me;if(Ee){if(Ve){t:{for(var r=Ve,o=tn;r.nodeType!==8;){if(!o){r=null;break t}if(r=an(r.nextSibling),r===null){r=null;break t}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){Ve=an(r.nextSibling),i=r.data==="F!";break e}}Wn(i)}i=!1}i&&(t=n[0])}}return n=Dt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:t},n.queue=i,n=mf.bind(null,me,i),i.dispatch=n,i=Mc(!1),o=Oc.bind(null,me,!1,i.queue),i=Dt(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=mg.bind(null,me,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Gd(e){var t=tt();return Zd(t,ze,e)}function Zd(e,t,n){if(t=Dc(e,t,Kd)[0],e=Ms(Rn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=dl(t)}catch(f){throw f===hi?gs:f}else i=t;t=tt();var r=t.queue,o=r.dispatch;return n!==t.memoizedState&&(me.flags|=2048,bi(9,{destroy:void 0},pg.bind(null,r,n),null)),[i,o,e]}function pg(e,t){e.action=t}function Xd(e){var t=tt(),n=ze;if(n!==null)return Zd(t,n,e);tt(),t=t.memoizedState,n=tt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function bi(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=me.updateQueue,t===null&&(t=Ds(),me.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Jd(){return tt().memoizedState}function Cs(e,t,n,i){var r=Dt();me.flags|=e,r.memoizedState=bi(1|t,{destroy:void 0},n,i===void 0?null:i)}function Es(e,t,n,i){var r=tt();i=i===void 0?null:i;var o=r.memoizedState.inst;ze!==null&&i!==null&&xc(i,ze.memoizedState.deps)?r.memoizedState=bi(t,o,n,i):(me.flags|=e,r.memoizedState=bi(1|t,o,n,i))}function $d(e,t){Cs(8390656,8,e,t)}function Ec(e,t){Es(2048,8,e,t)}function hg(e){me.flags|=4;var t=me.updateQueue;if(t===null)t=Ds(),me.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Wd(e){var t=tt().memoizedState;return hg({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function ef(e,t){return Es(4,2,e,t)}function tf(e,t){return Es(4,4,e,t)}function nf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function af(e,t,n){n=n!=null?n.concat([e]):null,Es(4,4,nf.bind(null,t,e),n)}function Tc(){}function lf(e,t){var n=tt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&xc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function sf(e,t){var n=tt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&xc(t,i[1]))return i[0];if(i=e(),La){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[i,t],i}function Ic(e,t,n){return n===void 0||(In&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=rm(),me.lanes|=e,ca|=e,n)}function rf(e,t,n,i){return Ht(n,t)?n:gi.current!==null?(e=Ic(e,n,i),Ht(e,t)||(st=!0),e):(In&42)===0||(In&1073741824)!==0&&(Ne&261930)===0?(st=!0,e.memoizedState=n):(e=rm(),me.lanes|=e,ca|=e,t)}function cf(e,t,n,i,r){var o=Q.p;Q.p=o!==0&&8>o?o:8;var f=U.T,v={};U.T=v,Oc(e,!1,t,n);try{var A=r(),I=U.S;if(I!==null&&I(v,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=ug(A,i);fl(e,t,B,Ft(e))}else fl(e,t,i,Ft(e))}catch(H){fl(e,t,{then:function(){},status:"rejected",reason:H},Ft())}finally{Q.p=o,f!==null&&v.types!==null&&(f.types=v.types),U.T=f}}function yg(){}function Rc(e,t,n,i){if(e.tag!==5)throw Error(u(476));var r=of(e).queue;cf(e,r,t,$,n===null?yg:function(){return uf(e),n(i)})}function of(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:$},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function uf(e){var t=of(e);t.next===null&&(t=e.alternate.memoizedState),fl(e,t.next.queue,{},Ft())}function _c(){return xt(El)}function df(){return tt().memoizedState}function ff(){return tt().memoizedState}function gg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ft();e=na(n);var i=aa(t,e,n);i!==null&&(Ut(i,t,n),rl(i,t,n)),t={cache:cc()},e.payload=t;return}t=t.return}}function vg(e,t,n){var i=Ft();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ts(e)?pf(t,n):(n=Jr(e,t,n,i),n!==null&&(Ut(n,e,i),hf(n,t,i)))}function mf(e,t,n){var i=Ft();fl(e,t,n,i)}function fl(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ts(e))pf(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,v=o(f,n);if(r.hasEagerState=!0,r.eagerState=v,Ht(v,f))return us(e,t,r,0),qe===null&&os(),!1}catch{}if(n=Jr(e,t,r,i),n!==null)return Ut(n,e,i),hf(n,t,i),!0}return!1}function Oc(e,t,n,i){if(i={lane:2,revertLane:mo(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ts(e)){if(t)throw Error(u(479))}else t=Jr(e,n,i,2),t!==null&&Ut(t,e,2)}function Ts(e){var t=e.alternate;return e===me||t!==null&&t===me}function pf(e,t){vi=js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hf(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xu(e,n)}}var ml={readContext:xt,use:Ns,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};ml.useEffectEvent=Xe;var yf={readContext:xt,use:Ns,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:$d,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cs(4194308,4,nf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var n=Dt();t=t===void 0?null:t;var i=e();if(La){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Dt();if(n!==void 0){var r=n(t);if(La){Gn(!0);try{n(t)}finally{Gn(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=vg.bind(null,me,e),[i.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Mc(e);var t=e.queue,n=mf.bind(null,me,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Tc,useDeferredValue:function(e,t){var n=Dt();return Ic(n,e,t)},useTransition:function(){var e=Mc(!1);return e=cf.bind(null,me,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=me,r=Dt();if(Ee){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),qe===null)throw Error(u(349));(Ne&127)!==0||Ld(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,$d(kd.bind(null,i,o,e),[e]),i.flags|=2048,bi(9,{destroy:void 0},zd.bind(null,i,o,n,t),null),n},useId:function(){var e=Dt(),t=qe.identifierPrefix;if(Ee){var n=bn,i=xn;n=(i&~(1<<32-qt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=dg++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:_c,useFormState:Fd,useActionState:Fd,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Oc.bind(null,me,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ac,useCacheRefresh:function(){return Dt().memoizedState=gg.bind(null,me)},useEffectEvent:function(e){var t=Dt(),n={impl:e};return t.memoizedState=n,function(){if((Re&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},Uc={readContext:xt,use:Ns,useCallback:lf,useContext:xt,useEffect:Ec,useImperativeHandle:af,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:Ms,useRef:Jd,useState:function(){return Ms(Rn)},useDebugValue:Tc,useDeferredValue:function(e,t){var n=tt();return rf(n,ze.memoizedState,e,t)},useTransition:function(){var e=Ms(Rn)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:dl(e),t]},useSyncExternalStore:Ud,useId:df,useHostTransitionStatus:_c,useFormState:Gd,useActionState:Gd,useOptimistic:function(e,t){var n=tt();return Hd(n,ze,e,t)},useMemoCache:Ac,useCacheRefresh:ff};Uc.useEffectEvent=Wd;var gf={readContext:xt,use:Ns,useCallback:lf,useContext:xt,useEffect:Ec,useImperativeHandle:af,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:Nc,useRef:Jd,useState:function(){return Nc(Rn)},useDebugValue:Tc,useDeferredValue:function(e,t){var n=tt();return ze===null?Ic(n,e,t):rf(n,ze.memoizedState,e,t)},useTransition:function(){var e=Nc(Rn)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:dl(e),t]},useSyncExternalStore:Ud,useId:df,useHostTransitionStatus:_c,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var n=tt();return ze!==null?Hd(n,ze,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ac,useCacheRefresh:ff};gf.useEffectEvent=Wd;function Lc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zc={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ft(),r=na(i);r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,i),t!==null&&(Ut(t,e,i),rl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ft(),r=na(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,i),t!==null&&(Ut(t,e,i),rl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),i=na(n);i.tag=2,t!=null&&(i.callback=t),t=aa(e,i,n),t!==null&&(Ut(t,e,n),rl(t,e,n))}};function vf(e,t,n,i,r,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,f):t.prototype&&t.prototype.isPureReactComponent?!Wi(n,i)||!Wi(r,o):!0}function xf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function za(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function bf(e){cs(e)}function wf(e){console.error(e)}function Sf(e){cs(e)}function Is(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function jf(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function kc(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){Is(e,t)},n}function Af(e){return e=na(e),e.tag=3,e}function Df(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){jf(t,n,i)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){jf(t,n,i),typeof r!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})})}function xg(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&fi(t,n,r,!0),n=Vt.current,n!==null){switch(n.tag){case 31:case 13:return nn===null?Vs():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===vs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),oo(e,i,r)),!1;case 22:return n.flags|=65536,i===vs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),oo(e,i,r)),!1}throw Error(u(435,n.tag))}return oo(e,i,r),Vs(),!1}if(Ee)return t=Vt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==ac&&(e=Error(u(422),{cause:i}),nl($t(e,n)))):(i!==ac&&(t=Error(u(423),{cause:i}),nl($t(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=$t(i,n),r=kc(e.stateNode,i,r),pc(e,r),Je!==4&&(Je=2)),!1;var o=Error(u(520),{cause:i});if(o=$t(o,n),wl===null?wl=[o]:wl.push(o),Je!==4&&(Je=2),t===null)return!0;i=$t(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=kc(n.stateNode,i,e),pc(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(oa===null||!oa.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Af(r),Df(r,e,n,i),pc(n,r),!1}n=n.return}while(n!==null);return!1}var Bc=Error(u(461)),st=!1;function bt(e,t,n,i){t.child=e===null?Cd(t,null,n,i):Ua(t,e.child,n,i)}function Nf(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var f={};for(var v in i)v!=="ref"&&(f[v]=i[v])}else f=i;return Ia(t),i=bc(e,t,n,f,o,r),v=wc(),e!==null&&!st?(Sc(e,t,r),_n(e,t,r)):(Ee&&v&&tc(t),t.flags|=1,bt(e,t,i,r),t.child)}function Mf(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!$r(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Cf(e,t,o,i,r)):(e=fs(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Fc(e,r)){var f=o.memoizedProps;if(n=n.compare,n=n!==null?n:Wi,n(f,i)&&e.ref===t.ref)return _n(e,t,r)}return t.flags|=1,e=Mn(o,i),e.ref=t.ref,e.return=t,t.child=e}function Cf(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(Wi(o,i)&&e.ref===t.ref)if(st=!1,t.pendingProps=i=o,Fc(e,r))(e.flags&131072)!==0&&(st=!0);else return t.lanes=e.lanes,_n(e,t,r)}return qc(e,t,n,i,r)}function Ef(e,t,n,i){var r=i.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(i=t.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~o}else i=0,t.child=null;return Tf(e,t,o,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ys(t,o!==null?o.cachePool:null),o!==null?Id(t,o):yc(),Rd(t);else return i=t.lanes=536870912,Tf(e,t,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(ys(t,o.cachePool),Id(t,o),la(),t.memoizedState=null):(e!==null&&ys(t,null),yc(),la());return bt(e,t,r,n),t.child}function pl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Tf(e,t,n,i,r){var o=uc();return o=o===null?null:{parent:it._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&ys(t,null),yc(),Rd(t),e!==null&&fi(e,t,i,!0),t.childLanes=r,null}function Rs(e,t){return t=Os({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function If(e,t,n){return Ua(t,e.child,null,n),e=Rs(t,t.pendingProps),e.flags|=2,Qt(t),t.memoizedState=null,e}function bg(e,t,n){var i=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(i.mode==="hidden")return e=Rs(t,i),t.lanes=536870912,pl(null,e);if(vc(t),(e=Ve)?(e=Vm(e,tn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=md(e),n.return=t,t.child=n,vt=t,Ve=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return Rs(t,i)}var o=e.memoizedState;if(o!==null){var f=o.dehydrated;if(vc(t),r)if(t.flags&256)t.flags&=-257,t=If(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(st||fi(e,t,n,!1),r=(n&e.childLanes)!==0,st||r){if(i=qe,i!==null&&(f=bu(i,n),f!==0&&f!==o.retryLane))throw o.retryLane=f,Ma(e,f),Ut(i,e,f),Bc;Vs(),t=If(e,t,n)}else e=o.treeContext,Ve=an(f.nextSibling),vt=t,Ee=!0,$n=null,tn=!1,e!==null&&yd(t,e),t=Rs(t,i),t.flags|=4096;return t}return e=Mn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _s(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function qc(e,t,n,i,r){return Ia(t),n=bc(e,t,n,i,void 0,r),i=wc(),e!==null&&!st?(Sc(e,t,r),_n(e,t,r)):(Ee&&i&&tc(t),t.flags|=1,bt(e,t,n,r),t.child)}function Rf(e,t,n,i,r,o){return Ia(t),t.updateQueue=null,n=Od(t,i,n,r),_d(e),i=wc(),e!==null&&!st?(Sc(e,t,o),_n(e,t,o)):(Ee&&i&&tc(t),t.flags|=1,bt(e,t,n,o),t.child)}function _f(e,t,n,i,r){if(Ia(t),t.stateNode===null){var o=ci,f=n.contextType;typeof f=="object"&&f!==null&&(o=xt(f)),o=new n(i,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=zc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=i,o.state=t.memoizedState,o.refs={},fc(t),f=n.contextType,o.context=typeof f=="object"&&f!==null?xt(f):ci,o.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Lc(t,n,f,i),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&zc.enqueueReplaceState(o,o.state,null),ol(t,i,o,r),cl(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){o=t.stateNode;var v=t.memoizedProps,A=za(n,v);o.props=A;var I=o.context,B=n.contextType;f=ci,typeof B=="object"&&B!==null&&(f=xt(B));var H=n.getDerivedStateFromProps;B=typeof H=="function"||typeof o.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,B||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v||I!==f)&&xf(t,o,i,f),ta=!1;var R=t.memoizedState;o.state=R,ol(t,i,o,r),cl(),I=t.memoizedState,v||R!==I||ta?(typeof H=="function"&&(Lc(t,n,H,i),I=t.memoizedState),(A=ta||vf(t,n,A,i,R,I,f))?(B||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=I),o.props=i,o.state=I,o.context=f,i=A):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,mc(e,t),f=t.memoizedProps,B=za(n,f),o.props=B,H=t.pendingProps,R=o.context,I=n.contextType,A=ci,typeof I=="object"&&I!==null&&(A=xt(I)),v=n.getDerivedStateFromProps,(I=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==H||R!==A)&&xf(t,o,i,A),ta=!1,R=t.memoizedState,o.state=R,ol(t,i,o,r),cl();var L=t.memoizedState;f!==H||R!==L||ta||e!==null&&e.dependencies!==null&&ps(e.dependencies)?(typeof v=="function"&&(Lc(t,n,v,i),L=t.memoizedState),(B=ta||vf(t,n,B,i,R,L,A)||e!==null&&e.dependencies!==null&&ps(e.dependencies))?(I||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,L,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,L,A)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=L),o.props=i,o.state=L,o.context=A,i=B):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,_s(e,t),i=(t.flags&128)!==0,o||i?(o=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&i?(t.child=Ua(t,e.child,null,r),t.child=Ua(t,null,n,r)):bt(e,t,n,r),t.memoizedState=o.state,e=t.child):e=_n(e,t,r),e}function Of(e,t,n,i){return Ea(),t.flags|=256,bt(e,t,n,i),t.child}var Hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pc(e){return{baseLanes:e,cachePool:Sd()}}function Vc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Kt),e}function Uf(e,t,n){var i=t.pendingProps,r=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),f&&(r=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(r?ia(t):la(),(e=Ve)?(e=Vm(e,tn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=md(e),n.return=t,t.child=n,vt=t,Ve=null)):e=null,e===null)throw Wn(t);return No(e)?t.lanes=32:t.lanes=536870912,null}var v=i.children;return i=i.fallback,r?(la(),r=t.mode,v=Os({mode:"hidden",children:v},r),i=Ca(i,r,n,null),v.return=t,i.return=t,v.sibling=i,t.child=v,i=t.child,i.memoizedState=Pc(n),i.childLanes=Vc(e,f,n),t.memoizedState=Hc,pl(null,i)):(ia(t),Qc(t,v))}var A=e.memoizedState;if(A!==null&&(v=A.dehydrated,v!==null)){if(o)t.flags&256?(ia(t),t.flags&=-257,t=Yc(e,t,n)):t.memoizedState!==null?(la(),t.child=e.child,t.flags|=128,t=null):(la(),v=i.fallback,r=t.mode,i=Os({mode:"visible",children:i.children},r),v=Ca(v,r,n,null),v.flags|=2,i.return=t,v.return=t,i.sibling=v,t.child=i,Ua(t,e.child,null,n),i=t.child,i.memoizedState=Pc(n),i.childLanes=Vc(e,f,n),t.memoizedState=Hc,t=pl(null,i));else if(ia(t),No(v)){if(f=v.nextSibling&&v.nextSibling.dataset,f)var I=f.dgst;f=I,i=Error(u(419)),i.stack="",i.digest=f,nl({value:i,source:null,stack:null}),t=Yc(e,t,n)}else if(st||fi(e,t,n,!1),f=(n&e.childLanes)!==0,st||f){if(f=qe,f!==null&&(i=bu(f,n),i!==0&&i!==A.retryLane))throw A.retryLane=i,Ma(e,i),Ut(f,e,i),Bc;Do(v)||Vs(),t=Yc(e,t,n)}else Do(v)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,Ve=an(v.nextSibling),vt=t,Ee=!0,$n=null,tn=!1,e!==null&&yd(t,e),t=Qc(t,i.children),t.flags|=4096);return t}return r?(la(),v=i.fallback,r=t.mode,A=e.child,I=A.sibling,i=Mn(A,{mode:"hidden",children:i.children}),i.subtreeFlags=A.subtreeFlags&65011712,I!==null?v=Mn(I,v):(v=Ca(v,r,n,null),v.flags|=2),v.return=t,i.return=t,i.sibling=v,t.child=i,pl(null,i),i=t.child,v=e.child.memoizedState,v===null?v=Pc(n):(r=v.cachePool,r!==null?(A=it._currentValue,r=r.parent!==A?{parent:A,pool:A}:r):r=Sd(),v={baseLanes:v.baseLanes|n,cachePool:r}),i.memoizedState=v,i.childLanes=Vc(e,f,n),t.memoizedState=Hc,pl(e.child,i)):(ia(t),n=e.child,e=n.sibling,n=Mn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function Qc(e,t){return t=Os({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Os(e,t){return e=Pt(22,e,null,t),e.lanes=0,e}function Yc(e,t,n){return Ua(t,e.child,null,n),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lf(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),sc(e.return,t,n)}function Kc(e,t,n,i,r,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=r,f.treeForkCount=o)}function zf(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;i=i.children;var f=et.current,v=(f&2)!==0;if(v?(f=f&1|2,t.flags|=128):f&=1,V(et,f),bt(e,t,i,n),i=Ee?tl:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lf(e,n,t);else if(e.tag===19)Lf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Ss(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Kc(t,!1,r,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ss(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Kc(t,!0,n,null,o,i);break;case"together":Kc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function _n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ca|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(fi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ps(e)))}function wg(e,t,n){switch(t.tag){case 3:Kn(t,t.stateNode.containerInfo),ea(t,it,e.memoizedState.cache),Ea();break;case 27:case 5:Fn(t);break;case 4:Kn(t,t.stateNode.containerInfo);break;case 10:ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ia(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Uf(e,t,n):(ia(t),e=_n(e,t,n),e!==null?e.sibling:null);ia(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(fi(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return zf(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),V(et,et.current),i)break;return null;case 22:return t.lanes=0,Ef(e,t,n,t.pendingProps);case 24:ea(t,it,e.memoizedState.cache)}return _n(e,t,n)}function kf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)st=!0;else{if(!Fc(e,n)&&(t.flags&128)===0)return st=!1,wg(e,t,n);st=(e.flags&131072)!==0}else st=!1,Ee&&(t.flags&1048576)!==0&&hd(t,tl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=_a(t.elementType),t.type=e,typeof e=="function")$r(e)?(i=za(e,i),t.tag=1,t=_f(null,t,e,i,n)):(t.tag=0,t=qc(null,t,e,i,n));else{if(e!=null){var r=e.$$typeof;if(r===P){t.tag=11,t=Nf(null,t,e,i,n);break e}else if(r===F){t.tag=14,t=Mf(null,t,e,i,n);break e}}throw t=ye(e)||e,Error(u(306,t,""))}}return t;case 0:return qc(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=za(i,t.pendingProps),_f(e,t,i,r,n);case 3:e:{if(Kn(t,t.stateNode.containerInfo),e===null)throw Error(u(387));i=t.pendingProps;var o=t.memoizedState;r=o.element,mc(e,t),ol(t,i,null,n);var f=t.memoizedState;if(i=f.cache,ea(t,it,i),i!==o.cache&&rc(t,[it],n,!0),cl(),i=f.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Of(e,t,i,n);break e}else if(i!==r){r=$t(Error(u(424)),t),nl(r),t=Of(e,t,i,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ve=an(e.firstChild),vt=t,Ee=!0,$n=null,tn=!0,n=Cd(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),i===r){t=_n(e,t,n);break e}bt(e,t,i,n)}t=t.child}return t;case 26:return _s(e,t),e===null?(n=Zm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ee||(n=t.type,e=t.pendingProps,i=Xs(Mt.current).createElement(n),i[gt]=t,i[Et]=e,wt(i,n,e),ft(i),t.stateNode=i):t.memoizedState=Zm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fn(t),e===null&&Ee&&(i=t.stateNode=Km(t.type,t.pendingProps,Mt.current),vt=t,tn=!0,r=Ve,ma(t.type)?(Mo=r,Ve=an(i.firstChild)):Ve=r),bt(e,t,t.pendingProps.children,n),_s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((r=i=Ve)&&(i=Jg(i,t.type,t.pendingProps,tn),i!==null?(t.stateNode=i,vt=t,Ve=an(i.firstChild),tn=!1,r=!0):r=!1),r||Wn(t)),Fn(t),r=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,i=o.children,So(r,o)?i=null:f!==null&&So(r,f)&&(t.flags|=32),t.memoizedState!==null&&(r=bc(e,t,fg,null,null,n),El._currentValue=r),_s(e,t),bt(e,t,i,n),t.child;case 6:return e===null&&Ee&&((e=n=Ve)&&(n=$g(n,t.pendingProps,tn),n!==null?(t.stateNode=n,vt=t,Ve=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Uf(e,t,n);case 4:return Kn(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ua(t,null,i,n):bt(e,t,i,n),t.child;case 11:return Nf(e,t,t.type,t.pendingProps,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ea(t,t.type,i.value),bt(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ia(t),r=xt(r),i=i(r),t.flags|=1,bt(e,t,i,n),t.child;case 14:return Mf(e,t,t.type,t.pendingProps,n);case 15:return Cf(e,t,t.type,t.pendingProps,n);case 19:return zf(e,t,n);case 31:return bg(e,t,n);case 22:return Ef(e,t,n,t.pendingProps);case 24:return Ia(t),i=xt(it),e===null?(r=uc(),r===null&&(r=qe,o=cc(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:i,cache:r},fc(t),ea(t,it,r)):((e.lanes&n)!==0&&(mc(e,t),ol(t,null,null,n),cl()),r=e.memoizedState,o=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ea(t,it,i)):(i=o.cache,ea(t,it,i),i!==r.cache&&rc(t,[it],n,!0))),bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function On(e){e.flags|=4}function Gc(e,t,n,i,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(dm())e.flags|=8192;else throw Oa=vs,dc}else e.flags&=-16777217}function Bf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ep(t))if(dm())e.flags|=8192;else throw Oa=vs,dc}function Us(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gu():536870912,e.lanes|=t,Ai|=t)}function hl(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Sg(e,t,n){var i=t.pendingProps;switch(nc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tn(it),Ct(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(di(t)?On(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ic())),Qe(t),null;case 26:var r=t.type,o=t.memoizedState;return e===null?(On(t),o!==null?(Qe(t),Bf(t,o)):(Qe(t),Gc(t,r,null,i,n))):o?o!==e.memoizedState?(On(t),Qe(t),Bf(t,o)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&On(t),Qe(t),Gc(t,r,e,i,n)),null;case 27:if(vn(t),n=Mt.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}e=W.current,di(t)?gd(t):(e=Km(r,i,n),t.stateNode=e,On(t))}return Qe(t),null;case 5:if(vn(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}if(o=W.current,di(t))gd(t);else{var f=Xs(Mt.current);switch(o){case 1:o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":o=f.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?f.createElement("select",{is:i.is}):f.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?f.createElement(r,{is:i.is}):f.createElement(r)}}o[gt]=t,o[Et]=i;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=o;e:switch(wt(o,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&On(t)}}return Qe(t),Gc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(u(166));if(e=Mt.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=vt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Um(e.nodeValue,n)),e||Wn(t,!0)}else e=Xs(e).createTextNode(i),e[gt]=t,t.stateNode=e}return Qe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=di(t),n!==null){if(e===null){if(!i)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[gt]=t}else Ea(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else n=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Qt(t),t):(Qt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Qe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=di(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(u(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));r[gt]=t}else Ea(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),r=!1}else r=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Qt(t),t):(Qt(t),null)}return Qt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Us(t,t.updateQueue),Qe(t),null);case 4:return Ct(),e===null&&go(t.stateNode.containerInfo),Qe(t),null;case 10:return Tn(t.type),Qe(t),null;case 19:if(Z(et),i=t.memoizedState,i===null)return Qe(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)hl(i,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ss(e),o!==null){for(t.flags|=128,hl(i,!1),e=o.updateQueue,t.updateQueue=e,Us(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)fd(n,e),n=n.sibling;return V(et,et.current&1|2),Ee&&Cn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&kt()>qs&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ss(o),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Us(t,e),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return Qe(t),null}else 2*kt()-i.renderingStartTime>qs&&n!==536870912&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(e=i.last,e!==null?e.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,n=et.current,V(et,r?n&1|2:n&1),Ee&&Cn(t,i.treeForkCount),e):(Qe(t),null);case 22:case 23:return Qt(t),gc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),n=t.updateQueue,n!==null&&Us(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Z(Ra),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(it),Qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function jg(e,t){switch(nc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(it),Ct(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vn(t),null;case 31:if(t.memoizedState!==null){if(Qt(t),t.alternate===null)throw Error(u(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(et),null;case 4:return Ct(),null;case 10:return Tn(t.type),null;case 22:case 23:return Qt(t),gc(),e!==null&&Z(Ra),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tn(it),null;case 25:return null;default:return null}}function qf(e,t){switch(nc(t),t.tag){case 3:Tn(it),Ct();break;case 26:case 27:case 5:vn(t);break;case 4:Ct();break;case 31:t.memoizedState!==null&&Qt(t);break;case 13:Qt(t);break;case 19:Z(et);break;case 10:Tn(t.type);break;case 22:case 23:Qt(t),gc(),e!==null&&Z(Ra);break;case 24:Tn(it)}}function yl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,f=n.inst;i=o(),f.destroy=i}n=n.next}while(n!==r)}}catch(v){Ue(t,t.return,v)}}function sa(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var o=r.next;i=o;do{if((i.tag&e)===e){var f=i.inst,v=f.destroy;if(v!==void 0){f.destroy=void 0,r=t;var A=n,I=v;try{I()}catch(B){Ue(r,A,B)}}}i=i.next}while(i!==o)}}catch(B){Ue(t,t.return,B)}}function Hf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Td(t,n)}catch(i){Ue(e,e.return,i)}}}function Pf(e,t,n){n.props=za(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ue(e,t,i)}}function gl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){Ue(e,t,r)}}function wn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ue(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Vf(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ue(e,e.return,r)}}function Zc(e,t,n){try{var i=e.stateNode;Yg(i,e.type,n,t),i[Et]=t}catch(r){Ue(e,e.return,r)}}function Qf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function Xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Dn));else if(i!==4&&(i===27&&ma(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}function Ls(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ma(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ls(e,t,n),e=e.sibling;e!==null;)Ls(e,t,n),e=e.sibling}function Yf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wt(t,i,n),t[gt]=e,t[Et]=n}catch(o){Ue(e,e.return,o)}}var Un=!1,rt=!1,$c=!1,Kf=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Ag(e,t){if(e=e.containerInfo,bo=ar,e=ad(e),Yr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var f=0,v=-1,A=-1,I=0,B=0,H=e,R=null;t:for(;;){for(var L;H!==n||r!==0&&H.nodeType!==3||(v=f+r),H!==o||i!==0&&H.nodeType!==3||(A=f+i),H.nodeType===3&&(f+=H.nodeValue.length),(L=H.firstChild)!==null;)R=H,H=L;for(;;){if(H===e)break t;if(R===n&&++I===r&&(v=f),R===o&&++B===i&&(A=f),(L=H.nextSibling)!==null)break;H=R,R=H.parentNode}H=L}n=v===-1||A===-1?null:{start:v,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(wo={focusedElem:e,selectionRange:n},ar=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var J=za(n.type,r);e=i.getSnapshotBeforeUpdate(J,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Ue(n,n.return,ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ao(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ao(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function Ff(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:zn(e,n),i&4&&yl(5,n);break;case 1:if(zn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){Ue(n,n.return,f)}else{var r=za(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Ue(n,n.return,f)}}i&64&&Hf(n),i&512&&gl(n,n.return);break;case 3:if(zn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Td(e,t)}catch(f){Ue(n,n.return,f)}}break;case 27:t===null&&i&4&&Yf(n);case 26:case 5:zn(e,n),t===null&&i&4&&Vf(n),i&512&&gl(n,n.return);break;case 12:zn(e,n);break;case 31:zn(e,n),i&4&&Xf(e,n);break;case 13:zn(e,n),i&4&&Jf(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=_g.bind(null,n),Wg(e,n))));break;case 22:if(i=n.memoizedState!==null||Un,!i){t=t!==null&&t.memoizedState!==null||rt,r=Un;var o=rt;Un=i,(rt=t)&&!o?kn(e,n,(n.subtreeFlags&8772)!==0):zn(e,n),Un=r,rt=o}break;case 30:break;default:zn(e,n)}}function Gf(e){var t=e.alternate;t!==null&&(e.alternate=null,Gf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,It=!1;function Ln(e,t,n){for(n=n.child;n!==null;)Zf(e,t,n),n=n.sibling}function Zf(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Hi,n)}catch{}switch(n.tag){case 26:rt||wn(n,t),Ln(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rt||wn(n,t);var i=Fe,r=It;ma(n.type)&&(Fe=n.stateNode,It=!1),Ln(e,t,n),Nl(n.stateNode),Fe=i,It=r;break;case 5:rt||wn(n,t);case 6:if(i=Fe,r=It,Fe=null,Ln(e,t,n),Fe=i,It=r,Fe!==null)if(It)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(n.stateNode)}catch(o){Ue(n,t,o)}else try{Fe.removeChild(n.stateNode)}catch(o){Ue(n,t,o)}break;case 18:Fe!==null&&(It?(e=Fe,Hm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ri(e)):Hm(Fe,n.stateNode));break;case 4:i=Fe,r=It,Fe=n.stateNode.containerInfo,It=!0,Ln(e,t,n),Fe=i,It=r;break;case 0:case 11:case 14:case 15:sa(2,n,t),rt||sa(4,n,t),Ln(e,t,n);break;case 1:rt||(wn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Pf(n,t,i)),Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:rt=(i=rt)||n.memoizedState!==null,Ln(e,t,n),rt=i;break;default:Ln(e,t,n)}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ri(e)}catch(n){Ue(t,t.return,n)}}}function Jf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ri(e)}catch(n){Ue(t,t.return,n)}}function Dg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kf),t;default:throw Error(u(435,e.tag))}}function zs(e,t){var n=Dg(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var r=Og.bind(null,e,i);i.then(r,r)}})}function Rt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],o=e,f=t,v=f;e:for(;v!==null;){switch(v.tag){case 27:if(ma(v.type)){Fe=v.stateNode,It=!1;break e}break;case 5:Fe=v.stateNode,It=!1;break e;case 3:case 4:Fe=v.stateNode.containerInfo,It=!0;break e}v=v.return}if(Fe===null)throw Error(u(160));Zf(o,f,r),Fe=null,It=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)$f(t,e),t=t.sibling}var fn=null;function $f(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),_t(e),i&4&&(sa(3,e,e.return),yl(3,e),sa(5,e,e.return));break;case 1:Rt(t,e),_t(e),i&512&&(rt||n===null||wn(n,n.return)),i&64&&Un&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=fn;if(Rt(t,e),_t(e),i&512&&(rt||n===null||wn(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":o=r.getElementsByTagName("title")[0],(!o||o[Qi]||o[gt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(i),r.head.insertBefore(o,r.querySelector("head > title"))),wt(o,i,n),o[gt]=e,ft(o),i=o;break e;case"link":var f=$m("link","href",r).get(i+(n.href||""));if(f){for(var v=0;v<f.length;v++)if(o=f[v],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(v,1);break t}}o=r.createElement(i),wt(o,i,n),r.head.appendChild(o);break;case"meta":if(f=$m("meta","content",r).get(i+(n.content||""))){for(v=0;v<f.length;v++)if(o=f[v],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(v,1);break t}}o=r.createElement(i),wt(o,i,n),r.head.appendChild(o);break;default:throw Error(u(468,i))}o[gt]=e,ft(o),i=o}e.stateNode=i}else Wm(r,e.type,e.stateNode);else e.stateNode=Jm(r,i,e.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?Wm(r,e.type,e.stateNode):Jm(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rt(t,e),_t(e),i&512&&(rt||n===null||wn(n,n.return)),n!==null&&i&4&&Zc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rt(t,e),_t(e),i&512&&(rt||n===null||wn(n,n.return)),e.flags&32){r=e.stateNode;try{ti(r,"")}catch(J){Ue(e,e.return,J)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Zc(e,r,n!==null?n.memoizedProps:r)),i&1024&&($c=!0);break;case 6:if(Rt(t,e),_t(e),i&4){if(e.stateNode===null)throw Error(u(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(J){Ue(e,e.return,J)}}break;case 3:if(Ws=null,r=fn,fn=Js(t.containerInfo),Rt(t,e),fn=r,_t(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(J){Ue(e,e.return,J)}$c&&($c=!1,Wf(e));break;case 4:i=fn,fn=Js(e.stateNode.containerInfo),Rt(t,e),_t(e),fn=i;break;case 12:Rt(t,e),_t(e);break;case 31:Rt(t,e),_t(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zs(e,i)));break;case 13:Rt(t,e),_t(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bs=kt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zs(e,i)));break;case 22:r=e.memoizedState!==null;var A=n!==null&&n.memoizedState!==null,I=Un,B=rt;if(Un=I||r,rt=B||A,Rt(t,e),rt=B,Un=I,_t(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||A||Un||rt||ka(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){A=n=t;try{if(o=A.stateNode,r)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{v=A.stateNode;var H=A.memoizedProps.style,R=H!=null&&H.hasOwnProperty("display")?H.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(J){Ue(A,A.return,J)}}}else if(t.tag===6){if(n===null){A=t;try{A.stateNode.nodeValue=r?"":A.memoizedProps}catch(J){Ue(A,A.return,J)}}}else if(t.tag===18){if(n===null){A=t;try{var L=A.stateNode;r?Pm(L,!0):Pm(A.stateNode,!1)}catch(J){Ue(A,A.return,J)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,zs(e,n))));break;case 19:Rt(t,e),_t(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zs(e,i)));break;case 30:break;case 21:break;default:Rt(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Qf(i)){n=i;break}i=i.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var r=n.stateNode,o=Xc(e);Ls(e,o,r);break;case 5:var f=n.stateNode;n.flags&32&&(ti(f,""),n.flags&=-33);var v=Xc(e);Ls(e,v,f);break;case 3:case 4:var A=n.stateNode.containerInfo,I=Xc(e);Jc(e,I,A);break;default:throw Error(u(161))}}catch(B){Ue(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Wf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ff(e,t.alternate,t),t=t.sibling}function ka(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),ka(t);break;case 1:wn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Pf(t,t.return,n),ka(t);break;case 27:Nl(t.stateNode);case 26:case 5:wn(t,t.return),ka(t);break;case 22:t.memoizedState===null&&ka(t);break;case 30:ka(t);break;default:ka(t)}e=e.sibling}}function kn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:kn(r,o,n),yl(4,o);break;case 1:if(kn(r,o,n),i=o,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(I){Ue(i,i.return,I)}if(i=o,r=i.updateQueue,r!==null){var v=i.stateNode;try{var A=r.shared.hiddenCallbacks;if(A!==null)for(r.shared.hiddenCallbacks=null,r=0;r<A.length;r++)Ed(A[r],v)}catch(I){Ue(i,i.return,I)}}n&&f&64&&Hf(o),gl(o,o.return);break;case 27:Yf(o);case 26:case 5:kn(r,o,n),n&&i===null&&f&4&&Vf(o),gl(o,o.return);break;case 12:kn(r,o,n);break;case 31:kn(r,o,n),n&&f&4&&Xf(r,o);break;case 13:kn(r,o,n),n&&f&4&&Jf(r,o);break;case 22:o.memoizedState===null&&kn(r,o,n),gl(o,o.return);break;case 30:break;default:kn(r,o,n)}t=t.sibling}}function Wc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&al(n))}function eo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&al(e))}function mn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)em(e,t,n,i),t=t.sibling}function em(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:mn(e,t,n,i),r&2048&&yl(9,t);break;case 1:mn(e,t,n,i);break;case 3:mn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&al(e)));break;case 12:if(r&2048){mn(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,v=o.onPostCommit;typeof v=="function"&&v(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Ue(t,t.return,A)}}else mn(e,t,n,i);break;case 31:mn(e,t,n,i);break;case 13:mn(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?mn(e,t,n,i):vl(e,t):o._visibility&2?mn(e,t,n,i):(o._visibility|=2,wi(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Wc(f,t);break;case 24:mn(e,t,n,i),r&2048&&eo(t.alternate,t);break;default:mn(e,t,n,i)}}function wi(e,t,n,i,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,f=t,v=n,A=i,I=f.flags;switch(f.tag){case 0:case 11:case 15:wi(o,f,v,A,r),yl(8,f);break;case 23:break;case 22:var B=f.stateNode;f.memoizedState!==null?B._visibility&2?wi(o,f,v,A,r):vl(o,f):(B._visibility|=2,wi(o,f,v,A,r)),r&&I&2048&&Wc(f.alternate,f);break;case 24:wi(o,f,v,A,r),r&&I&2048&&eo(f.alternate,f);break;default:wi(o,f,v,A,r)}t=t.sibling}}function vl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:vl(n,i),r&2048&&Wc(i.alternate,i);break;case 24:vl(n,i),r&2048&&eo(i.alternate,i);break;default:vl(n,i)}t=t.sibling}}var xl=8192;function Si(e,t,n){if(e.subtreeFlags&xl)for(e=e.child;e!==null;)tm(e,t,n),e=e.sibling}function tm(e,t,n){switch(e.tag){case 26:Si(e,t,n),e.flags&xl&&e.memoizedState!==null&&dv(n,fn,e.memoizedState,e.memoizedProps);break;case 5:Si(e,t,n);break;case 3:case 4:var i=fn;fn=Js(e.stateNode.containerInfo),Si(e,t,n),fn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=xl,xl=16777216,Si(e,t,n),xl=i):Si(e,t,n));break;default:Si(e,t,n)}}function nm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function bl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];mt=i,im(i,e)}nm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)am(e),e=e.sibling}function am(e){switch(e.tag){case 0:case 11:case 15:bl(e),e.flags&2048&&sa(9,e,e.return);break;case 3:bl(e);break;case 12:bl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ks(e)):bl(e);break;default:bl(e)}}function ks(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];mt=i,im(i,e)}nm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),ks(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ks(t));break;default:ks(t)}e=e.sibling}}function im(e,t){for(;mt!==null;){var n=mt;switch(n.tag){case 0:case 11:case 15:sa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:al(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,mt=i;else e:for(n=e;mt!==null;){i=mt;var r=i.sibling,o=i.return;if(Gf(i),i===n){mt=null;break e}if(r!==null){r.return=o,mt=r;break e}mt=o}}}var Ng={getCacheForType:function(e){var t=xt(it),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return xt(it).controller.signal}},Mg=typeof WeakMap=="function"?WeakMap:Map,Re=0,qe=null,je=null,Ne=0,Oe=0,Yt=null,ra=!1,ji=!1,to=!1,Bn=0,Je=0,ca=0,Ba=0,no=0,Kt=0,Ai=0,wl=null,Ot=null,ao=!1,Bs=0,lm=0,qs=1/0,Hs=null,oa=null,ut=0,ua=null,Di=null,qn=0,io=0,lo=null,sm=null,Sl=0,so=null;function Ft(){return(Re&2)!==0&&Ne!==0?Ne&-Ne:U.T!==null?mo():wu()}function rm(){if(Kt===0)if((Ne&536870912)===0||Ee){var e=Zl;Zl<<=1,(Zl&3932160)===0&&(Zl=262144),Kt=e}else Kt=536870912;return e=Vt.current,e!==null&&(e.flags|=32),Kt}function Ut(e,t,n){(e===qe&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Ni(e,0),da(e,Ne,Kt,!1)),Vi(e,n),((Re&2)===0||e!==qe)&&(e===qe&&((Re&2)===0&&(Ba|=n),Je===4&&da(e,Ne,Kt,!1)),Sn(e))}function cm(e,t,n){if((Re&6)!==0)throw Error(u(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Pi(e,t),r=i?Tg(e,t):co(e,t,!0),o=i;do{if(r===0){ji&&!i&&da(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Cg(n)){r=co(e,t,!1),o=!1;continue}if(r===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var v=e;r=wl;var A=v.current.memoizedState.isDehydrated;if(A&&(Ni(v,f).flags|=256),f=co(v,f,!1),f!==2){if(to&&!A){v.errorRecoveryDisabledLanes|=o,Ba|=o,r=4;break e}o=Ot,Ot=r,o!==null&&(Ot===null?Ot=o:Ot.push.apply(Ot,o))}r=f}if(o=!1,r!==2)continue}}if(r===1){Ni(e,0),da(e,t,0,!0);break}e:{switch(i=e,o=r,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:da(i,t,Kt,!ra);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(r=Bs+300-kt(),10<r)){if(da(i,t,Kt,!ra),Jl(i,0,!0)!==0)break e;qn=t,i.timeoutHandle=Bm(om.bind(null,i,n,Ot,Hs,ao,t,Kt,Ba,Ai,ra,o,"Throttled",-0,0),r);break e}om(i,n,Ot,Hs,ao,t,Kt,Ba,Ai,ra,o,null,-0,0)}}break}while(!0);Sn(e)}function om(e,t,n,i,r,o,f,v,A,I,B,H,R,L){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},tm(t,o,H);var J=(o&62914560)===o?Bs-kt():(o&4194048)===o?lm-kt():0;if(J=fv(H,J),J!==null){qn=o,e.cancelPendingCommit=J(gm.bind(null,e,t,o,n,i,r,f,v,A,B,H,null,R,L)),da(e,o,f,!I);return}}gm(e,t,o,n,i,r,f,v,A)}function Cg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Ht(o(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t,n,i){t&=~no,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-qt(r),f=1<<o;i[o]=-1,r&=~f}n!==0&&vu(e,n,t)}function Ps(){return(Re&6)===0?(jl(0),!1):!0}function ro(){if(je!==null){if(Oe===0)var e=je.return;else e=je,En=Ta=null,jc(e),yi=null,ll=0,e=je;for(;e!==null;)qf(e.alternate,e),e=e.return;je=null}}function Ni(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Gg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),qn=0,ro(),qe=e,je=n=Mn(e.current,null),Ne=t,Oe=0,Yt=null,ra=!1,ji=Pi(e,t),to=!1,Ai=Kt=no=Ba=ca=Je=0,Ot=wl=null,ao=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-qt(i),o=1<<r;t|=e[r],i&=~o}return Bn=t,os(),n}function um(e,t){me=null,U.H=ml,t===hi||t===gs?(t=Dd(),Oe=3):t===dc?(t=Dd(),Oe=4):Oe=t===Bc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Yt=t,je===null&&(Je=1,Is(e,$t(t,e.current)))}function dm(){var e=Vt.current;return e===null?!0:(Ne&4194048)===Ne?nn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===nn:!1}function fm(){var e=U.H;return U.H=ml,e===null?ml:e}function mm(){var e=U.A;return U.A=Ng,e}function Vs(){Je=4,ra||(Ne&4194048)!==Ne&&Vt.current!==null||(ji=!0),(ca&134217727)===0&&(Ba&134217727)===0||qe===null||da(qe,Ne,Kt,!1)}function co(e,t,n){var i=Re;Re|=2;var r=fm(),o=mm();(qe!==e||Ne!==t)&&(Hs=null,Ni(e,t)),t=!1;var f=Je;e:do try{if(Oe!==0&&je!==null){var v=je,A=Yt;switch(Oe){case 8:ro(),f=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(t=!0);var I=Oe;if(Oe=0,Yt=null,Mi(e,v,A,I),n&&ji){f=0;break e}break;default:I=Oe,Oe=0,Yt=null,Mi(e,v,A,I)}}Eg(),f=Je;break}catch(B){um(e,B)}while(!0);return t&&e.shellSuspendCounter++,En=Ta=null,Re=i,U.H=r,U.A=o,je===null&&(qe=null,Ne=0,os()),f}function Eg(){for(;je!==null;)pm(je)}function Tg(e,t){var n=Re;Re|=2;var i=fm(),r=mm();qe!==e||Ne!==t?(Hs=null,qs=kt()+500,Ni(e,t)):ji=Pi(e,t);e:do try{if(Oe!==0&&je!==null){t=je;var o=Yt;t:switch(Oe){case 1:Oe=0,Yt=null,Mi(e,t,o,1);break;case 2:case 9:if(jd(o)){Oe=0,Yt=null,hm(t);break}t=function(){Oe!==2&&Oe!==9||qe!==e||(Oe=7),Sn(e)},o.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:jd(o)?(Oe=0,Yt=null,hm(t)):(Oe=0,Yt=null,Mi(e,t,o,7));break;case 5:var f=null;switch(je.tag){case 26:f=je.memoizedState;case 5:case 27:var v=je;if(f?ep(f):v.stateNode.complete){Oe=0,Yt=null;var A=v.sibling;if(A!==null)je=A;else{var I=v.return;I!==null?(je=I,Qs(I)):je=null}break t}}Oe=0,Yt=null,Mi(e,t,o,5);break;case 6:Oe=0,Yt=null,Mi(e,t,o,6);break;case 8:ro(),Je=6;break e;default:throw Error(u(462))}}Ig();break}catch(B){um(e,B)}while(!0);return En=Ta=null,U.H=i,U.A=r,Re=n,je!==null?0:(qe=null,Ne=0,os(),Je)}function Ig(){for(;je!==null&&!Kl();)pm(je)}function pm(e){var t=kf(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?Qs(e):je=t}function hm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Rf(n,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=Rf(n,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:jc(t);default:qf(n,t),t=je=fd(t,Bn),t=kf(n,t,Bn)}e.memoizedProps=e.pendingProps,t===null?Qs(e):je=t}function Mi(e,t,n,i){En=Ta=null,jc(t),yi=null,ll=0;var r=t.return;try{if(xg(e,r,t,n,Ne)){Je=1,Is(e,$t(n,e.current)),je=null;return}}catch(o){if(r!==null)throw je=r,o;Je=1,Is(e,$t(n,e.current)),je=null;return}t.flags&32768?(Ee||i===1?e=!0:ji||(Ne&536870912)!==0?e=!1:(ra=e=!0,(i===2||i===9||i===3||i===6)&&(i=Vt.current,i!==null&&i.tag===13&&(i.flags|=16384))),ym(t,e)):Qs(t)}function Qs(e){var t=e;do{if((t.flags&32768)!==0){ym(t,ra);return}e=t.return;var n=Sg(t.alternate,t,Bn);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Je===0&&(Je=5)}function ym(e,t){do{var n=jg(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);Je=6,je=null}function gm(e,t,n,i,r,o,f,v,A){e.cancelPendingCommit=null;do Ys();while(ut!==0);if((Re&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Xr,uy(e,n,o,f,v,A),e===qe&&(je=qe=null,Ne=0),Di=t,ua=e,qn=n,io=o,lo=r,sm=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ug(Fl,function(){return Sm(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=U.T,U.T=null,r=Q.p,Q.p=2,f=Re,Re|=4;try{Ag(e,t,n)}finally{Re=f,Q.p=r,U.T=i}}ut=1,vm(),xm(),bm()}}function vm(){if(ut===1){ut=0;var e=ua,t=Di,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var i=Q.p;Q.p=2;var r=Re;Re|=4;try{$f(t,e);var o=wo,f=ad(e.containerInfo),v=o.focusedElem,A=o.selectionRange;if(f!==v&&v&&v.ownerDocument&&nd(v.ownerDocument.documentElement,v)){if(A!==null&&Yr(v)){var I=A.start,B=A.end;if(B===void 0&&(B=I),"selectionStart"in v)v.selectionStart=I,v.selectionEnd=Math.min(B,v.value.length);else{var H=v.ownerDocument||document,R=H&&H.defaultView||window;if(R.getSelection){var L=R.getSelection(),J=v.textContent.length,ce=Math.min(A.start,J),Be=A.end===void 0?ce:Math.min(A.end,J);!L.extend&&ce>Be&&(f=Be,Be=ce,ce=f);var M=td(v,ce),N=td(v,Be);if(M&&N&&(L.rangeCount!==1||L.anchorNode!==M.node||L.anchorOffset!==M.offset||L.focusNode!==N.node||L.focusOffset!==N.offset)){var E=H.createRange();E.setStart(M.node,M.offset),L.removeAllRanges(),ce>Be?(L.addRange(E),L.extend(N.node,N.offset)):(E.setEnd(N.node,N.offset),L.addRange(E))}}}}for(H=[],L=v;L=L.parentNode;)L.nodeType===1&&H.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<H.length;v++){var q=H[v];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}ar=!!bo,wo=bo=null}finally{Re=r,Q.p=i,U.T=n}}e.current=t,ut=2}}function xm(){if(ut===2){ut=0;var e=ua,t=Di,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var i=Q.p;Q.p=2;var r=Re;Re|=4;try{Ff(e,t.alternate,t)}finally{Re=r,Q.p=i,U.T=n}}ut=3}}function bm(){if(ut===4||ut===3){ut=0,ty();var e=ua,t=Di,n=qn,i=sm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ut=5:(ut=0,Di=ua=null,wm(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(oa=null),Nr(n),t=t.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Hi,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=U.T,r=Q.p,Q.p=2,U.T=null;try{for(var o=e.onRecoverableError,f=0;f<i.length;f++){var v=i[f];o(v.value,{componentStack:v.stack})}}finally{U.T=t,Q.p=r}}(qn&3)!==0&&Ys(),Sn(e),r=e.pendingLanes,(n&261930)!==0&&(r&42)!==0?e===so?Sl++:(Sl=0,so=e):Sl=0,jl(0)}}function wm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,al(t)))}function Ys(){return vm(),xm(),bm(),Sm()}function Sm(){if(ut!==5)return!1;var e=ua,t=io;io=0;var n=Nr(qn),i=U.T,r=Q.p;try{Q.p=32>n?32:n,U.T=null,n=lo,lo=null;var o=ua,f=qn;if(ut=0,Di=ua=null,qn=0,(Re&6)!==0)throw Error(u(331));var v=Re;if(Re|=4,am(o.current),em(o,o.current,f,n),Re=v,jl(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Hi,o)}catch{}return!0}finally{Q.p=r,U.T=i,wm(e,t)}}function jm(e,t,n){t=$t(n,t),t=kc(e.stateNode,t,2),e=aa(e,t,2),e!==null&&(Vi(e,2),Sn(e))}function Ue(e,t,n){if(e.tag===3)jm(e,e,n);else for(;t!==null;){if(t.tag===3){jm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oa===null||!oa.has(i))){e=$t(n,e),n=Af(2),i=aa(t,n,2),i!==null&&(Df(n,i,t,e),Vi(i,2),Sn(i));break}}t=t.return}}function oo(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Mg;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(to=!0,r.add(n),e=Rg.bind(null,e,t,n),t.then(e,e))}function Rg(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,qe===e&&(Ne&n)===n&&(Je===4||Je===3&&(Ne&62914560)===Ne&&300>kt()-Bs?(Re&2)===0&&Ni(e,0):no|=n,Ai===Ne&&(Ai=0)),Sn(e)}function Am(e,t){t===0&&(t=gu()),e=Ma(e,t),e!==null&&(Vi(e,t),Sn(e))}function _g(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Am(e,n)}function Og(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(u(314))}i!==null&&i.delete(t),Am(e,n)}function Ug(e,t){return un(e,t)}var Ks=null,Ci=null,uo=!1,Fs=!1,fo=!1,fa=0;function Sn(e){e!==Ci&&e.next===null&&(Ci===null?Ks=Ci=e:Ci=Ci.next=e),Fs=!0,uo||(uo=!0,zg())}function jl(e,t){if(!fo&&Fs){fo=!0;do for(var n=!1,i=Ks;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var o=0;else{var f=i.suspendedLanes,v=i.pingedLanes;o=(1<<31-qt(42|e)+1)-1,o&=r&~(f&~v),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Cm(i,o))}else o=Ne,o=Jl(i,i===qe?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(o&3)===0||Pi(i,o)||(n=!0,Cm(i,o));i=i.next}while(n);fo=!1}}function Lg(){Dm()}function Dm(){Fs=uo=!1;var e=0;fa!==0&&Fg()&&(e=fa);for(var t=kt(),n=null,i=Ks;i!==null;){var r=i.next,o=Nm(i,t);o===0?(i.next=null,n===null?Ks=r:n.next=r,r===null&&(Ci=n)):(n=i,(e!==0||(o&3)!==0)&&(Fs=!0)),i=r}ut!==0&&ut!==5||jl(e),fa!==0&&(fa=0)}function Nm(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-qt(o),v=1<<f,A=r[f];A===-1?((v&n)===0||(v&i)!==0)&&(r[f]=oy(v,t)):A<=t&&(e.expiredLanes|=v),o&=~v}if(t=qe,n=Ne,n=Jl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Le(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Pi(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Le(i),Nr(n)){case 2:case 8:n=hu;break;case 32:n=Fl;break;case 268435456:n=yu;break;default:n=Fl}return i=Mm.bind(null,e),n=un(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Le(i),e.callbackPriority=2,e.callbackNode=null,2}function Mm(e,t){if(ut!==0&&ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ys()&&e.callbackNode!==n)return null;var i=Ne;return i=Jl(e,e===qe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(cm(e,i,t),Nm(e,kt()),e.callbackNode!=null&&e.callbackNode===n?Mm.bind(null,e):null)}function Cm(e,t){if(Ys())return null;cm(e,t,!0)}function zg(){Zg(function(){(Re&6)!==0?un(pu,Lg):Dm()})}function mo(){if(fa===0){var e=mi;e===0&&(e=Gl,Gl<<=1,(Gl&261888)===0&&(Gl=256)),fa=e}return fa}function Em(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ts(""+e)}function Tm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function kg(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var o=Em((r[Et]||null).action),f=i.submitter;f&&(t=(t=f[Et]||null)?Em(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var v=new ls("action","action",null,i,r);e.push({event:v,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fa!==0){var A=f?Tm(r,f):new FormData(r);Rc(n,{pending:!0,data:A,method:r.method,action:o},null,A)}}else typeof o=="function"&&(v.preventDefault(),A=f?Tm(r,f):new FormData(r),Rc(n,{pending:!0,data:A,method:r.method,action:o},o,A))},currentTarget:r}]})}}for(var po=0;po<Zr.length;po++){var ho=Zr[po],Bg=ho.toLowerCase(),qg=ho[0].toUpperCase()+ho.slice(1);dn(Bg,"on"+qg)}dn(sd,"onAnimationEnd"),dn(rd,"onAnimationIteration"),dn(cd,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(ng,"onTransitionRun"),dn(ag,"onTransitionStart"),dn(ig,"onTransitionCancel"),dn(od,"onTransitionEnd"),Wa("onMouseEnter",["mouseout","mouseover"]),Wa("onMouseLeave",["mouseout","mouseover"]),Wa("onPointerEnter",["pointerout","pointerover"]),Wa("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function Im(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var f=i.length-1;0<=f;f--){var v=i[f],A=v.instance,I=v.currentTarget;if(v=v.listener,A!==o&&r.isPropagationStopped())break e;o=v,r.currentTarget=I;try{o(r)}catch(B){cs(B)}r.currentTarget=null,o=A}else for(f=0;f<i.length;f++){if(v=i[f],A=v.instance,I=v.currentTarget,v=v.listener,A!==o&&r.isPropagationStopped())break e;o=v,r.currentTarget=I;try{o(r)}catch(B){cs(B)}r.currentTarget=null,o=A}}}}function Ae(e,t){var n=t[Mr];n===void 0&&(n=t[Mr]=new Set);var i=e+"__bubble";n.has(i)||(Rm(t,e,2,!1),n.add(i))}function yo(e,t,n){var i=0;t&&(i|=4),Rm(n,e,i,t)}var Gs="_reactListening"+Math.random().toString(36).slice(2);function go(e){if(!e[Gs]){e[Gs]=!0,Au.forEach(function(n){n!=="selectionchange"&&(Hg.has(n)||yo(n,!1,e),yo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gs]||(t[Gs]=!0,yo("selectionchange",!1,t))}}function Rm(e,t,n,i){switch(rp(t)){case 2:var r=hv;break;case 8:r=yv;break;default:r=Ro}n=r.bind(null,t,n,e),r=void 0,!Lr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function vo(e,t,n,i,r){var o=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var v=i.stateNode.containerInfo;if(v===r)break;if(f===4)for(f=i.return;f!==null;){var A=f.tag;if((A===3||A===4)&&f.stateNode.containerInfo===r)return;f=f.return}for(;v!==null;){if(f=Xa(v),f===null)return;if(A=f.tag,A===5||A===6||A===26||A===27){i=o=f;continue e}v=v.parentNode}}i=i.return}Lu(function(){var I=o,B=Or(n),H=[];e:{var R=ud.get(e);if(R!==void 0){var L=ls,J=e;switch(e){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":L=Oy;break;case"focusin":J="focus",L=qr;break;case"focusout":J="blur",L=qr;break;case"beforeblur":case"afterblur":L=qr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=zy;break;case sd:case rd:case cd:L=Dy;break;case od:L=By;break;case"scroll":case"scrollend":L=by;break;case"wheel":L=Hy;break;case"copy":case"cut":case"paste":L=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Hu;break;case"toggle":case"beforetoggle":L=Vy}var ce=(t&4)!==0,Be=!ce&&(e==="scroll"||e==="scrollend"),M=ce?R!==null?R+"Capture":null:R;ce=[];for(var N=I,E;N!==null;){var q=N;if(E=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||E===null||M===null||(q=Ki(N,M),q!=null&&ce.push(Dl(N,q,E))),Be)break;N=N.return}0<ce.length&&(R=new L(R,J,null,n,B),H.push({event:R,listeners:ce}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",R&&n!==_r&&(J=n.relatedTarget||n.fromElement)&&(Xa(J)||J[Za]))break e;if((L||R)&&(R=B.window===B?B:(R=B.ownerDocument)?R.defaultView||R.parentWindow:window,L?(J=n.relatedTarget||n.toElement,L=I,J=J?Xa(J):null,J!==null&&(Be=h(J),ce=J.tag,J!==Be||ce!==5&&ce!==27&&ce!==6)&&(J=null)):(L=null,J=I),L!==J)){if(ce=Bu,q="onMouseLeave",M="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Hu,q="onPointerLeave",M="onPointerEnter",N="pointer"),Be=L==null?R:Yi(L),E=J==null?R:Yi(J),R=new ce(q,N+"leave",L,n,B),R.target=Be,R.relatedTarget=E,q=null,Xa(B)===I&&(ce=new ce(M,N+"enter",J,n,B),ce.target=E,ce.relatedTarget=Be,q=ce),Be=q,L&&J)t:{for(ce=Pg,M=L,N=J,E=0,q=M;q;q=ce(q))E++;q=0;for(var ie=N;ie;ie=ce(ie))q++;for(;0<E-q;)M=ce(M),E--;for(;0<q-E;)N=ce(N),q--;for(;E--;){if(M===N||N!==null&&M===N.alternate){ce=M;break t}M=ce(M),N=ce(N)}ce=null}else ce=null;L!==null&&_m(H,R,L,ce,!1),J!==null&&Be!==null&&_m(H,Be,J,ce,!0)}}e:{if(R=I?Yi(I):window,L=R.nodeName&&R.nodeName.toLowerCase(),L==="select"||L==="input"&&R.type==="file")var Te=Zu;else if(Fu(R))if(Xu)Te=Wy;else{Te=Jy;var ee=Xy}else L=R.nodeName,!L||L.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?I&&Rr(I.elementType)&&(Te=Zu):Te=$y;if(Te&&(Te=Te(e,I))){Gu(H,Te,n,B);break e}ee&&ee(e,R,I),e==="focusout"&&I&&R.type==="number"&&I.memoizedProps.value!=null&&Ir(R,"number",R.value)}switch(ee=I?Yi(I):window,e){case"focusin":(Fu(ee)||ee.contentEditable==="true")&&(li=ee,Kr=I,el=null);break;case"focusout":el=Kr=li=null;break;case"mousedown":Fr=!0;break;case"contextmenu":case"mouseup":case"dragend":Fr=!1,id(H,n,B);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":id(H,n,B)}var he;if(Pr)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else ii?Yu(e,n)&&(Me="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Me="onCompositionStart");Me&&(Pu&&n.locale!=="ko"&&(ii||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&ii&&(he=zu()):(Xn=B,zr="value"in Xn?Xn.value:Xn.textContent,ii=!0)),ee=Zs(I,Me),0<ee.length&&(Me=new qu(Me,e,null,n,B),H.push({event:Me,listeners:ee}),he?Me.data=he:(he=Ku(n),he!==null&&(Me.data=he)))),(he=Yy?Ky(e,n):Fy(e,n))&&(Me=Zs(I,"onBeforeInput"),0<Me.length&&(ee=new qu("onBeforeInput","beforeinput",null,n,B),H.push({event:ee,listeners:Me}),ee.data=he)),kg(H,e,I,n,B)}Im(H,t)})}function Dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zs(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=Ki(e,n),r!=null&&i.unshift(Dl(e,r,o)),r=Ki(e,t),r!=null&&i.push(Dl(e,r,o))),e.tag===3)return i;e=e.return}return[]}function Pg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _m(e,t,n,i,r){for(var o=t._reactName,f=[];n!==null&&n!==i;){var v=n,A=v.alternate,I=v.stateNode;if(v=v.tag,A!==null&&A===i)break;v!==5&&v!==26&&v!==27||I===null||(A=I,r?(I=Ki(n,o),I!=null&&f.unshift(Dl(n,I,A))):r||(I=Ki(n,o),I!=null&&f.push(Dl(n,I,A)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Vg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function Om(e){return(typeof e=="string"?e:""+e).replace(Vg,`
`).replace(Qg,"")}function Um(e,t){return t=Om(t),Om(e)===t}function ke(e,t,n,i,r,o){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ti(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ti(e,""+i);break;case"className":Wl(e,"class",i);break;case"tabIndex":Wl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(e,n,i);break;case"style":Ou(e,i,o);break;case"data":if(t!=="object"){Wl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ts(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&ke(e,t,"name",r.name,r,null),ke(e,t,"formEncType",r.formEncType,r,null),ke(e,t,"formMethod",r.formMethod,r,null),ke(e,t,"formTarget",r.formTarget,r,null)):(ke(e,t,"encType",r.encType,r,null),ke(e,t,"method",r.method,r,null),ke(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=ts(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Dn);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=ts(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),$l(e,"popover",i);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":$l(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=vy.get(n)||n,$l(e,n,i))}}function xo(e,t,n,i,r,o){switch(n){case"style":Ou(e,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ti(e,i):(typeof i=="number"||typeof i=="bigint")&&ti(e,""+i);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Du.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),o=e[Et]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,r),typeof i=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):$l(e,n,i)}}}function wt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var i=!1,r=!1,o;for(o in n)if(n.hasOwnProperty(o)){var f=n[o];if(f!=null)switch(o){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:ke(e,t,o,f,n,null)}}r&&ke(e,t,"srcSet",n.srcSet,n,null),i&&ke(e,t,"src",n.src,n,null);return;case"input":Ae("invalid",e);var v=o=f=r=null,A=null,I=null;for(i in n)if(n.hasOwnProperty(i)){var B=n[i];if(B!=null)switch(i){case"name":r=B;break;case"type":f=B;break;case"checked":A=B;break;case"defaultChecked":I=B;break;case"value":o=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(u(137,t));break;default:ke(e,t,i,B,n,null)}}Tu(e,o,v,A,I,f,r,!1);return;case"select":Ae("invalid",e),i=f=o=null;for(r in n)if(n.hasOwnProperty(r)&&(v=n[r],v!=null))switch(r){case"value":o=v;break;case"defaultValue":f=v;break;case"multiple":i=v;default:ke(e,t,r,v,n,null)}t=o,n=f,e.multiple=!!i,t!=null?ei(e,!!i,t,!1):n!=null&&ei(e,!!i,n,!0);return;case"textarea":Ae("invalid",e),o=r=i=null;for(f in n)if(n.hasOwnProperty(f)&&(v=n[f],v!=null))switch(f){case"value":i=v;break;case"defaultValue":r=v;break;case"children":o=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(u(91));break;default:ke(e,t,f,v,n,null)}Ru(e,i,r,o);return;case"option":for(A in n)n.hasOwnProperty(A)&&(i=n[A],i!=null)&&(A==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":ke(e,t,A,i,n,null));return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(i=0;i<Al.length;i++)Ae(Al[i],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in n)if(n.hasOwnProperty(I)&&(i=n[I],i!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:ke(e,t,I,i,n,null)}return;default:if(Rr(t)){for(B in n)n.hasOwnProperty(B)&&(i=n[B],i!==void 0&&xo(e,t,B,i,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(i=n[v],i!=null&&ke(e,t,v,i,n,null))}function Yg(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,f=null,v=null,A=null,I=null,B=null;for(L in n){var H=n[L];if(n.hasOwnProperty(L)&&H!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":A=H;default:i.hasOwnProperty(L)||ke(e,t,L,null,i,H)}}for(var R in i){var L=i[R];if(H=n[R],i.hasOwnProperty(R)&&(L!=null||H!=null))switch(R){case"type":o=L;break;case"name":r=L;break;case"checked":I=L;break;case"defaultChecked":B=L;break;case"value":f=L;break;case"defaultValue":v=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(u(137,t));break;default:L!==H&&ke(e,t,R,L,i,H)}}Tr(e,f,v,A,I,B,o,r);return;case"select":L=f=v=R=null;for(o in n)if(A=n[o],n.hasOwnProperty(o)&&A!=null)switch(o){case"value":break;case"multiple":L=A;default:i.hasOwnProperty(o)||ke(e,t,o,null,i,A)}for(r in i)if(o=i[r],A=n[r],i.hasOwnProperty(r)&&(o!=null||A!=null))switch(r){case"value":R=o;break;case"defaultValue":v=o;break;case"multiple":f=o;default:o!==A&&ke(e,t,r,o,i,A)}t=v,n=f,i=L,R!=null?ei(e,!!n,R,!1):!!i!=!!n&&(t!=null?ei(e,!!n,t,!0):ei(e,!!n,n?[]:"",!1));return;case"textarea":L=R=null;for(v in n)if(r=n[v],n.hasOwnProperty(v)&&r!=null&&!i.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:ke(e,t,v,null,i,r)}for(f in i)if(r=i[f],o=n[f],i.hasOwnProperty(f)&&(r!=null||o!=null))switch(f){case"value":R=r;break;case"defaultValue":L=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(u(91));break;default:r!==o&&ke(e,t,f,r,i,o)}Iu(e,R,L);return;case"option":for(var J in n)R=n[J],n.hasOwnProperty(J)&&R!=null&&!i.hasOwnProperty(J)&&(J==="selected"?e.selected=!1:ke(e,t,J,null,i,R));for(A in i)R=i[A],L=n[A],i.hasOwnProperty(A)&&R!==L&&(R!=null||L!=null)&&(A==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":ke(e,t,A,R,i,L));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in n)R=n[ce],n.hasOwnProperty(ce)&&R!=null&&!i.hasOwnProperty(ce)&&ke(e,t,ce,null,i,R);for(I in i)if(R=i[I],L=n[I],i.hasOwnProperty(I)&&R!==L&&(R!=null||L!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(u(137,t));break;default:ke(e,t,I,R,i,L)}return;default:if(Rr(t)){for(var Be in n)R=n[Be],n.hasOwnProperty(Be)&&R!==void 0&&!i.hasOwnProperty(Be)&&xo(e,t,Be,void 0,i,R);for(B in i)R=i[B],L=n[B],!i.hasOwnProperty(B)||R===L||R===void 0&&L===void 0||xo(e,t,B,R,i,L);return}}for(var M in n)R=n[M],n.hasOwnProperty(M)&&R!=null&&!i.hasOwnProperty(M)&&ke(e,t,M,null,i,R);for(H in i)R=i[H],L=n[H],!i.hasOwnProperty(H)||R===L||R==null&&L==null||ke(e,t,H,R,i,L)}function Lm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],o=r.transferSize,f=r.initiatorType,v=r.duration;if(o&&v&&Lm(f)){for(f=0,v=r.responseEnd,i+=1;i<n.length;i++){var A=n[i],I=A.startTime;if(I>v)break;var B=A.transferSize,H=A.initiatorType;B&&Lm(H)&&(A=A.responseEnd,f+=B*(A<v?1:(v-I)/(A-I)))}if(--i,t+=8*(o+f)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bo=null,wo=null;function Xs(e){return e.nodeType===9?e:e.ownerDocument}function zm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function km(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function So(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jo=null;function Fg(){var e=window.event;return e&&e.type==="popstate"?e===jo?!1:(jo=e,!0):(jo=null,!1)}var Bm=typeof setTimeout=="function"?setTimeout:void 0,Gg=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(e){return qm.resolve(null).then(e).catch(Xg)}:Bm;function Xg(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function Hm(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(r),Ri(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Nl(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Nl(n);for(var o=n.firstChild;o;){var f=o.nextSibling,v=o.nodeName;o[Qi]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=f}}else n==="body"&&Nl(e.ownerDocument.body);n=r}while(n);Ri(t)}function Pm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Ao(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ao(n),Cr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Jg(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Qi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function $g(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=an(e.nextSibling),e===null))return null;return e}function Vm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=an(e.nextSibling),e===null))return null;return e}function Do(e){return e.data==="$?"||e.data==="$~"}function No(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Mo=null;function Qm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return an(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Ym(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Km(e,t,n){switch(t=Xs(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Nl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cr(e)}var ln=new Map,Fm=new Set;function Js(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hn=Q.d;Q.d={f:ev,r:tv,D:nv,C:av,L:iv,m:lv,X:rv,S:sv,M:cv};function ev(){var e=Hn.f(),t=Ps();return e||t}function tv(e){var t=Ja(e);t!==null&&t.tag===5&&t.type==="form"?uf(t):Hn.r(e)}var Ei=typeof document>"u"?null:document;function Gm(e,t,n){var i=Ei;if(i&&typeof t=="string"&&t){var r=Xt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Fm.has(r)||(Fm.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),wt(t,"link",e),ft(t),i.head.appendChild(t)))}}function nv(e){Hn.D(e),Gm("dns-prefetch",e,null)}function av(e,t){Hn.C(e,t),Gm("preconnect",e,t)}function iv(e,t,n){Hn.L(e,t,n);var i=Ei;if(i&&e&&t){var r='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Xt(n.imageSizes)+'"]')):r+='[href="'+Xt(e)+'"]';var o=r;switch(t){case"style":o=Ti(e);break;case"script":o=Ii(e)}ln.has(o)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ln.set(o,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Ml(o))||t==="script"&&i.querySelector(Cl(o))||(t=i.createElement("link"),wt(t,"link",e),ft(t),i.head.appendChild(t)))}}function lv(e,t){Hn.m(e,t);var n=Ei;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Xt(i)+'"][href="'+Xt(e)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ii(e)}if(!ln.has(o)&&(e=x({rel:"modulepreload",href:e},t),ln.set(o,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cl(o)))return}i=n.createElement("link"),wt(i,"link",e),ft(i),n.head.appendChild(i)}}}function sv(e,t,n){Hn.S(e,t,n);var i=Ei;if(i&&e){var r=$a(i).hoistableStyles,o=Ti(e);t=t||"default";var f=r.get(o);if(!f){var v={loading:0,preload:null};if(f=i.querySelector(Ml(o)))v.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ln.get(o))&&Co(e,n);var A=f=i.createElement("link");ft(A),wt(A,"link",e),A._p=new Promise(function(I,B){A.onload=I,A.onerror=B}),A.addEventListener("load",function(){v.loading|=1}),A.addEventListener("error",function(){v.loading|=2}),v.loading|=4,$s(f,t,i)}f={type:"stylesheet",instance:f,count:1,state:v},r.set(o,f)}}}function rv(e,t){Hn.X(e,t);var n=Ei;if(n&&e){var i=$a(n).hoistableScripts,r=Ii(e),o=i.get(r);o||(o=n.querySelector(Cl(r)),o||(e=x({src:e,async:!0},t),(t=ln.get(r))&&Eo(e,t),o=n.createElement("script"),ft(o),wt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}function cv(e,t){Hn.M(e,t);var n=Ei;if(n&&e){var i=$a(n).hoistableScripts,r=Ii(e),o=i.get(r);o||(o=n.querySelector(Cl(r)),o||(e=x({src:e,async:!0,type:"module"},t),(t=ln.get(r))&&Eo(e,t),o=n.createElement("script"),ft(o),wt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}function Zm(e,t,n,i){var r=(r=Mt.current)?Js(r):null;if(!r)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ti(n.href),n=$a(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ti(n.href);var o=$a(r).hoistableStyles,f=o.get(e);if(f||(r=r.ownerDocument||r,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=r.querySelector(Ml(e)))&&!o._p&&(f.instance=o,f.state.loading=5),ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ln.set(e,n),o||ov(r,e,n,f.state))),t&&i===null)throw Error(u(528,""));return f}if(t&&i!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ii(n),n=$a(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Ti(e){return'href="'+Xt(e)+'"'}function Ml(e){return'link[rel="stylesheet"]['+e+"]"}function Xm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function ov(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),wt(t,"link",n),ft(t),e.head.appendChild(t))}function Ii(e){return'[src="'+Xt(e)+'"]'}function Cl(e){return"script[async]"+e}function Jm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(i)return t.instance=i,ft(i),i;var r=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ft(i),wt(i,"style",r),$s(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ti(n.href);var o=e.querySelector(Ml(r));if(o)return t.state.loading|=4,t.instance=o,ft(o),o;i=Xm(n),(r=ln.get(r))&&Co(i,r),o=(e.ownerDocument||e).createElement("link"),ft(o);var f=o;return f._p=new Promise(function(v,A){f.onload=v,f.onerror=A}),wt(o,"link",i),t.state.loading|=4,$s(o,n.precedence,e),t.instance=o;case"script":return o=Ii(n.src),(r=e.querySelector(Cl(o)))?(t.instance=r,ft(r),r):(i=n,(r=ln.get(o))&&(i=x({},n),Eo(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),ft(r),wt(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,$s(i,n.precedence,e));return t.instance}function $s(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,f=0;f<i.length;f++){var v=i[f];if(v.dataset.precedence===t)o=v;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Co(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Eo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ws=null;function $m(e,t,n){if(Ws===null){var i=new Map,r=Ws=new Map;r.set(n,i)}else r=Ws,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[Qi]||o[gt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var v=i.get(f);v?v.push(o):i.set(f,[o])}}return i}function Wm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function uv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ep(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dv(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=Ti(i.href),o=t.querySelector(Ml(r));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=er.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,ft(o);return}o=t.ownerDocument||t,i=Xm(i),(r=ln.get(r))&&Co(i,r),o=o.createElement("link"),ft(o);var f=o;f._p=new Promise(function(v,A){f.onload=v,f.onerror=A}),wt(o,"link",i),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=er.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var To=0;function fv(e,t){return e.stylesheets&&e.count===0&&nr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&nr(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&To===0&&(To=62500*Kg());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&nr(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>To?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function er(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tr=null;function nr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tr=new Map,t.forEach(mv,e),tr=null,er.call(e))}function mv(e,t){if(!(t.state.loading&4)){var n=tr.get(e);if(n)var i=n.get(null);else{n=new Map,tr.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var f=r[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),i=f)}i&&n.set(null,i)}r=t.instance,f=r.getAttribute("data-precedence"),o=n.get(f)||i,o===i&&n.set(null,r),n.set(f,r),this.count++,i=er.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var El={$$typeof:T,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function pv(e,t,n,i,r,o,f,v,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.hiddenUpdates=Ar(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function tp(e,t,n,i,r,o,f,v,A,I,B,H){return e=new pv(e,t,n,f,A,I,B,H,v),t=1,o===!0&&(t|=24),o=Pt(3,null,null,t),e.current=o,o.stateNode=e,t=cc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},fc(o),e}function np(e){return e?(e=ci,e):ci}function ap(e,t,n,i,r,o){r=np(r),i.context===null?i.context=r:i.pendingContext=r,i=na(t),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=aa(e,i,t),n!==null&&(Ut(n,e,t),rl(n,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Io(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function lp(e){if(e.tag===13||e.tag===31){var t=Ma(e,67108864);t!==null&&Ut(t,e,67108864),Io(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=Ft();t=Dr(t);var n=Ma(e,t);n!==null&&Ut(n,e,t),Io(e,t)}}var ar=!0;function hv(e,t,n,i){var r=U.T;U.T=null;var o=Q.p;try{Q.p=2,Ro(e,t,n,i)}finally{Q.p=o,U.T=r}}function yv(e,t,n,i){var r=U.T;U.T=null;var o=Q.p;try{Q.p=8,Ro(e,t,n,i)}finally{Q.p=o,U.T=r}}function Ro(e,t,n,i){if(ar){var r=_o(i);if(r===null)vo(e,t,i,ir,n),cp(e,i);else if(vv(r,e,t,n,i))i.stopPropagation();else if(cp(e,i),t&4&&-1<gv.indexOf(e)){for(;r!==null;){var o=Ja(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=Sa(o.pendingLanes);if(f!==0){var v=o;for(v.pendingLanes|=2,v.entangledLanes|=2;f;){var A=1<<31-qt(f);v.entanglements[1]|=A,f&=~A}Sn(o),(Re&6)===0&&(qs=kt()+500,jl(0))}}break;case 31:case 13:v=Ma(o,2),v!==null&&Ut(v,o,2),Ps(),Io(o,2)}if(o=_o(i),o===null&&vo(e,t,i,ir,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else vo(e,t,i,null,n)}}function _o(e){return e=Or(e),Oo(e)}var ir=null;function Oo(e){if(ir=null,e=Xa(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=b(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ir=e,null}function rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ny()){case pu:return 2;case hu:return 8;case Fl:case ay:return 32;case yu:return 268435456;default:return 32}default:return 32}}var Uo=!1,pa=null,ha=null,ya=null,Tl=new Map,Il=new Map,ga=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cp(e,t){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(t.pointerId)}}function Rl(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Ja(t),t!==null&&lp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function vv(e,t,n,i,r){switch(t){case"focusin":return pa=Rl(pa,e,t,n,i,r),!0;case"dragenter":return ha=Rl(ha,e,t,n,i,r),!0;case"mouseover":return ya=Rl(ya,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Tl.set(o,Rl(Tl.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Il.set(o,Rl(Il.get(o)||null,e,t,n,i,r)),!0}return!1}function op(e){var t=Xa(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=b(n),t!==null){e.blockedOn=t,Su(e.priority,function(){sp(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,Su(e.priority,function(){sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_o(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);_r=i,n.target.dispatchEvent(i),_r=null}else return t=Ja(n),t!==null&&lp(t),e.blockedOn=n,!1;t.shift()}return!0}function up(e,t,n){lr(e)&&n.delete(t)}function xv(){Uo=!1,pa!==null&&lr(pa)&&(pa=null),ha!==null&&lr(ha)&&(ha=null),ya!==null&&lr(ya)&&(ya=null),Tl.forEach(up),Il.forEach(up)}function sr(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,xv)))}var rr=null;function dp(e){rr!==e&&(rr=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){rr===e&&(rr=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Oo(i||n)===null)continue;break}var o=Ja(n);o!==null&&(e.splice(t,3),t-=3,Rc(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Ri(e){function t(A){return sr(A,e)}pa!==null&&sr(pa,e),ha!==null&&sr(ha,e),ya!==null&&sr(ya,e),Tl.forEach(t),Il.forEach(t);for(var n=0;n<ga.length;n++){var i=ga[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)op(n),n.blockedOn===null&&ga.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],f=r[Et]||null;if(typeof o=="function")f||dp(n);else if(f){var v=null;if(o&&o.hasAttribute("formAction")){if(r=o,f=o[Et]||null)v=f.formAction;else if(Oo(r)!==null)continue}else v=f.action;typeof v=="function"?n[i+1]=v:(n.splice(i,3),i-=3),dp(n)}}}function fp(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(f){return r=f})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Lo(e){this._internalRoot=e}cr.prototype.render=Lo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,i=Ft();ap(n,i,e,t,null,null)},cr.prototype.unmount=Lo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ap(e.current,2,null,e,null,null),Ps(),t[Za]=null}};function cr(e){this._internalRoot=e}cr.prototype.unstable_scheduleHydration=function(e){if(e){var t=wu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ga.length&&t!==0&&t<ga[n].priority;n++);ga.splice(n,0,e),n===0&&op(e)}};var mp=l.version;if(mp!=="19.2.3")throw Error(u(527,mp,"19.2.3"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var bv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var or=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!or.isDisabled&&or.supportsFiber)try{Hi=or.inject(bv),Bt=or}catch{}}return Ol.createRoot=function(e,t){if(!d(e))throw Error(u(299));var n=!1,i="",r=bf,o=wf,f=Sf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,i,null,r,o,f,fp),e[Za]=t.current,go(e),new Lo(t)},Ol.hydrateRoot=function(e,t,n){if(!d(e))throw Error(u(299));var i=!1,r="",o=bf,f=wf,v=Sf,A=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.formState!==void 0&&(A=n.formState)),t=tp(e,1,!0,t,n??null,i,r,A,o,f,v,fp),t.context=np(null),n=t.current,i=Ft(),i=Dr(i),r=na(i),r.callback=null,aa(n,r,i),n=i,t.current.lanes=n,Vi(t,n),Sn(t),e[Za]=t.current,go(e),new cr(t)},Ol.version="19.2.3",Ol}var bp;function Hv(){if(bp)return ko.exports;bp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),ko.exports=qv(),ko.exports}var Pv=Hv();function Lt(a,l,c="en-US"){const u=a/100;return new Intl.NumberFormat(c,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2}).format(u)}function zi(a){const l=parseFloat(a.replace(/[^0-9.-]/g,""));return isNaN(l)?0:Math.round(l*100)}function Jp(a,l="en-US"){return new Date(a).toLocaleDateString(l,{month:"short",day:"numeric",year:"numeric"})}function tS(a){const l=new Date(a),c=String(l.getDate()).padStart(2,"0"),u=String(l.getMonth()+1).padStart(2,"0"),d=l.getFullYear();return`${c}/${u}/${d}`}function Vv(a,l){const c=new Date(a),d=new Date().getTime()-c.getTime(),h=Math.floor(d/(1e3*60*60*24));return l?h===0?l("time.today"):h===1?l("time.yesterday"):h<7?l("time.daysAgo",{days:h}):h<30?l("time.weeksAgo",{weeks:Math.floor(h/7)}):h<365?l("time.monthsAgo",{months:Math.floor(h/30)}):l("time.yearsAgo",{years:Math.floor(h/365)}):h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:h<30?`${Math.floor(h/7)} weeks ago`:h<365?`${Math.floor(h/30)} months ago`:`${Math.floor(h/365)} years ago`}function Qv(a){const l=new Date(a),c=new Date;c.setHours(0,0,0,0),l.setHours(0,0,0,0);const u=l.getTime()-c.getTime();return Math.ceil(u/(1e3*60*60*24))}function Zo(a){const l=new Date;switch(a){case"this-month":{const c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"last-month":{const c=new Date(l.getFullYear(),l.getMonth()-1,1),u=new Date(l.getFullYear(),l.getMonth(),0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"this-year":{const c=new Date(l.getFullYear(),0,1),u=new Date(l.getFullYear(),11,31);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}default:return{dateFrom:"2000-01-01",dateTo:"2100-12-31"}}}function ue(...a){return a.filter(Boolean).join(" ")}function Pn(){return new Date().toISOString().split("T")[0]}const Yv={save:"Save",saving:"Saving...",cancel:"Cancel",delete:"Delete",archive:"Archive",add:"Add",edit:"Edit",view:"View",loading:"Loading...",downloading:"Downloading...",search:"Search...",close:"Close",confirm:"Confirm",noClient:"No client",noProject:"No project",all:"All",markPaid:"Mark Paid",duplicate:"Duplicate",undo:"Undo",previous:"Previous",next:"Next",uncategorized:"Uncategorized",noResults:"No results found"},Kv={transactionDuplicated:"Transaction created",transactionUndone:"Transaction undone"},Fv={overview:"Overview",projects:"Projects",clients:"Clients",transactions:"Transactions",documents:"Documents",engagements:"Engagements",retainers:"Retainers",moneyAnswers:"Answers",expenses:"Expenses",reports:"Reports",settings:"Settings",download:"Download",new:"New",collapse:"Collapse sidebar",expand:"Expand sidebar",sections:{work:"Work",money:"Money",system:"System"},newMenu:{document:"New Document",engagement:"New Engagement",transaction:"New Transaction",client:"New Client",expense:"New Expense"}},Gv={income:"Income",expense:"Expense",project:"Project",client:"Client",document:"Document"},Zv={title:"Transactions",empty:"No transactions found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first transaction to get started",addTransaction:"Add Transaction",searchPlaceholder:"Search transactions...",confirmDelete:"Are you sure you want to delete this transaction?",type:{income:"Income",expense:"Expense",receivable:"Receivable"},status:{paid:"Paid",unpaid:"Unpaid",overdue:"{days}d overdue",dueIn:"Due in {days}d",dueToday:"Due today"},columns:{date:"Date",type:"Type",client:"Client",project:"Project",category:"Category",amount:"Amount",status:"Status"},hasDocument:"Has linked document"},Xv={title:"Overview",kpi:{paidIncome:"Paid Income",unpaidReceivables:"Unpaid Receivables",expenses:"Expenses",net:"Net (Paid - Expenses)"},needsAttention:"Needs Attention",noAttention:"No overdue or upcoming receivables",recentActivity:"Recent Activity",noRecent:"No recent transactions"},Jv={title:"Projects",empty:"No projects found",emptySearch:"Try adjusting your search",emptyHint:"Create your first project to get started",addProject:"Add Project",searchPlaceholder:"Search projects...",allFields:"All fields",notFound:"Project not found",notFoundHint:"This project may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this project?",columns:{project:"Project",client:"Client",field:"Field",paid:"Paid",unpaid:"Unpaid",expenses:"Expenses",net:"Net",lastActivity:"Last Activity"},tabs:{summary:"Summary",transactions:"Transactions"},detail:{projectDetails:"Project Details",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this project."},fields:{design:"Design",development:"Development",consulting:"Consulting",marketing:"Marketing",legal:"Legal",maintenance:"Maintenance",other:"Other"}},$v={title:"Clients",empty:"No clients found",emptySearch:"Try adjusting your search",emptyHint:"Add your first client to get started",addClient:"Add Client",searchPlaceholder:"Search clients...",notFound:"Client not found",notFoundHint:"This client may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this client?",columns:{client:"Client",activeProjects:"Active Projects",paidIncome:"Paid Income",unpaid:"Unpaid",lastPayment:"Last Payment",lastActivity:"Last Activity"},tabs:{summary:"Summary",projects:"Projects",receivables:"Receivables",transactions:"Transactions"},detail:{clientDetails:"Client Details",email:"Email",phone:"Phone",noProjects:"No projects",noProjectsHint:"Add your first project for this client.",noReceivables:"No receivables",noReceivablesHint:"All payments have been received.",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this client."},receivables:{dueDate:"Due Date",daysOverdue:"Days Overdue",action:"Action"}},Wv={title:"Reports",exportCsv:"Export CSV",presets:{summary:"Summary",thisMonth:"This Month",thisYear:"This Year",byProject:"By Project",byClient:"By Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Aging"},period:{month:"Month",quarter:"Quarter",year:"Year",custom:"Custom"},currencyMode:{usd:"USD",ils:"ILS",both:"Both"},drillDown:{paidIncome:"View paid income transactions",unpaidIncome:"View unpaid receivables",expenses:"View expenses"},search:{project:"Search projects...",client:"Search clients..."},selectCurrencyForAmounts:"Select a specific currency to see amounts",sections:{financialSummary:"Financial Summary",incomeByProject:"Income by Project",incomeByClient:"Income by Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Receivables Aging"},aging:{current:"Current (not due)",days1to30:"1-30 days overdue",days31to60:"31-60 days overdue",days60plus:"60+ days overdue"},noExpenses:"No expenses in this period"},e0={title:"Download",recommendedForYou:"Recommended for you",loading:"Loading...",comingSoon:"Coming Soon",version:"Version",size:"Size",requires:"Requires",sha256:"SHA-256",copy:"Copy",checksumCopied:"Checksum copied",howToInstall:"How to install",releaseNotes:"Release notes",allVersions:"All versions",mac:{title:"macOS",downloadDmg:"Download DMG",step1:"Download the DMG",step2:'Drag "" to Applications',step3:"Open and approve if prompted"},windows:{title:"Windows",downloadMsi:"Download MSI",step1:"Download the MSI installer",step2:"Run the installer",step3:"Follow the installation wizard",altExe:"Alternative: Download EXE installer"}},t0={title:"Settings",language:{title:"Language",description:"Choose your preferred language"},theme:{title:"Theme",description:"Choose your preferred appearance",light:"Light",dark:"Dark",system:"System"},currency:{title:"Currency",enabled:"Enabled Currencies",enabledDesc:"Select which currencies to track",default:"Default Currency",defaultDesc:"Default selection in filters"},data:{title:"Data Management",export:"Export Data",exportDesc:"Download a backup of all your data",exportBtn:"Export JSON",exporting:"Exporting...",exported:"Exported successfully!",exportFailed:"Export failed",import:"Import Data",importDesc:"Restore from a backup file (replaces all data)",importBtn:"Import JSON",importing:"Importing...",imported:"Imported successfully! Refreshing...",importFailed:"Import failed: {error}",invalidFile:"Invalid backup file format",deleteAll:"Delete All Data",deleteAllDesc:"Permanently delete all local data",deleteAllBtn:"Delete All Data",reset:"Reset Data",resetDesc:"Reset to sample data for testing",resetBtn:"Reset Data",resetConfirm:"Are you sure you want to reset all data? This will replace your data with sample data.",deleteModal:{title:"Delete All Data",warning:"This will permanently delete all your local data including clients, projects, and transactions. This action cannot be undone.",stepA:{title:"Step 1: Export Backup",desc:"You must export a backup of your data before deletion.",btn:"Export Backup (CSV)",exporting:"Exporting...",done:"Backup exported!",error:"Export failed"},stepB:{title:"Step 2: Confirm Deletion",checkbox:"I have saved my backup files",btn:"Delete Permanently",deleting:"Deleting...",error:"Deletion failed"},success:"All data deleted successfully"}},about:{title:"About",name:"Mutaba3a - Mini CRM",description:"A local-first financial tracking tool for freelancers and small businesses. Your data is stored locally in your browser using IndexedDB."},updates:{title:"Updates",checking:"Checking for updates...",upToDate:"You're up to date",currentVersion:"Current version",latestVersion:"Latest version",updateAvailable:"A new version is available",updateNow:"Update Now",checkFailed:"Unable to check for updates"},desktopApp:{title:"Desktop App",download:"Download Desktop App",downloadDesc:"Get the native app for better performance",downloadBtn:"Download",downloadMac:"Download for macOS",downloadWindows:"Download for Windows"}},n0={message:"Get the native Mac app for a better experience",cta:"Download",dismiss:"Dismiss"},a0={available:"Version {{version}} is available",downloading:"Downloading update... {{progress}}%",ready:"Update ready",restart:"Restart to Update",download:"Download",dismiss:"Later",error:"Update failed"},i0={title:"Expenses",profileExpenses:"{name} Expenses",addExpense:"Add Expense",addRecurring:"Add Recurring",empty:"No expenses found",emptyHint:"Add your first expense to get started",emptyProfiles:"No business profiles",emptyProfilesHint:"Create a business profile to track expenses",emptyExpenses:"No expenses",emptyExpensesSearch:"Try adjusting your search or filters",emptyExpensesHint:"Add your first expense to get started",searchPlaceholder:"Search expenses...",confirmDelete:"Are you sure you want to delete this expense?",confirmDeleteRule:"Are you sure you want to delete this recurring rule?",year:"Year",month:"Month",allMonths:"All Months",allCategories:"All Categories",totalExpenses:"Total Expenses",totalUSD:"Total (USD)",totalILS:"Total (ILS)",viewReceipts:"View Receipts",manageReceipts:"Manage Receipts",allProfilesOverview:"All Profiles Overview",recurringRules:"Recurring Rules",fromRecurring:"From recurring rule",monthly:"monthly",yearly:"yearly",pause:"Pause",resume:"Resume",paused:"Paused",profileNotFound:"Profile not found",profileNotFoundHint:"This profile may have been deleted or doesn't exist",untitled:"Untitled",unknownProfile:"Unknown Profile",overview:{title:"Expenses Overview",allProfiles:"All Profiles",profileBreakdown:"Expense by Profile",totalExpenses:"Total Expenses",monthlyBreakdown:"Monthly Breakdown",byProfile:"By Profile",noProfiles:"No business profiles found",profile:"Profile",total:"Total",percentage:"Share"},forecast:{title:"Expense Forecast",minimumNeeded:"Minimum Needed",untilEndOfYear:"Until end of {year}",monthsRemaining:"Months Remaining",yearTotal:"Year Total",activeRules:"Active Rules",monthlyForecast:"Monthly Forecast",month:"Month",projected:"Projected",actual:"Actual",delta:"Delta",current:"Current",total:"Total",byProfile:"By Profile",empty:"No forecast data",emptyHint:"Add recurring expenses to see forecast",activeRecurringRules:"Active Recurring Rules"},receipts:{title:"Receipts",upload:"Upload Receipt",uploading:"Uploading...",total:"Total",linked:"Linked",unlinked:"Unlinked",allTab:"All",inboxTab:"Inbox",suggestionsTab:"Suggestions",linkToExpense:"Link to Expense",link:"Link",unlink:"Unlink",unlinkFromExpense:"Unlink",exportZip:"Export ZIP",exporting:"Exporting...",download:"Download",empty:"No receipts",emptyHint:"Upload your first receipt",noReceipts:"No receipts",noReceiptsHint:"Upload your first receipt",fileTooLarge:"File too large (max {maxSize})",invalidFileType:"Invalid file type. Please upload an image or PDF",uploadFailed:"Failed to upload receipt",selectExpense:"Select Expense to Link",noExpensesToLink:"No expenses to link. Create an expense first.",confirmUnlink:"Are you sure you want to unlink this receipt?",confirmDelete:"Are you sure you want to delete this receipt?"},recurring:{title:"Recurring Expenses",addRule:"Add Recurring",frequency:"Frequency",monthly:"Monthly",yearly:"Yearly",startDate:"Start Date",endMode:"End Mode",endOfYear:"End of Year",untilDate:"Until Date",noEnd:"No End",endDate:"End Date",pause:"Pause",resume:"Resume",paused:"Paused",active:"Active"},columns:{date:"Date",title:"Title",vendor:"Vendor",category:"Category",amount:"Amount",receipts:"Receipts"},categories:{title:"Categories",addCategory:"Add Category",name:"Name",color:"Color",setup:"Set Up Categories",setupTitle:"Set Up Expense Categories",selectPreset:"Choose a category preset that best matches your business type:",seedCategories:"Create Categories",presets:{general:"General Business",startup:"Tech Startup",lawFirm:"Law Firm",freelancer:"Freelancer"},presetDescriptions:{general:"Office rent, utilities, software, marketing, travel, and more",startup:"Cloud infrastructure, SaaS, AI services, development tools, coworking",lawFirm:"Legal research, bar fees, court filing, expert witnesses, case management",freelancer:"Software tools, cloud storage, marketing, professional development"}}},l0={transaction:{new:"New Transaction",edit:"Edit Transaction",typeIncome:"Income",typeIncomeDesc:"Paid",typeReceivable:"Receivable",typeReceivableDesc:"Unpaid",typeExpense:"Expense",typeExpenseDesc:"Cost",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",dueDate:"Due Date",client:"Client",clientPlaceholder:"Select client...",project:"Project",projectPlaceholder:"Select project...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes..."},client:{new:"New Client",edit:"Edit Client",name:"Name",namePlaceholder:"Client name...",email:"Email",emailPlaceholder:"client@example.com",phone:"Phone",phonePlaceholder:"+1-555-0100",notes:"Notes",notesPlaceholder:"Additional notes about this client..."},project:{new:"New Project",edit:"Edit Project",name:"Name",namePlaceholder:"Project name...",client:"Client",clientPlaceholder:"Select client...",field:"Field",fieldPlaceholder:"Select field...",notes:"Notes",notesPlaceholder:"Additional notes about this project..."},expense:{new:"New Expense",edit:"Edit Expense",newRecurring:"New Recurring Expense",editRecurring:"Edit Recurring Expense",typeOneTime:"One-time",typeOneTimeDesc:"Single expense",typeRecurring:"Recurring",typeRecurringDesc:"Repeats monthly/yearly",profile:"Profile",profilePlaceholder:"Select profile...",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",vendor:"Vendor",vendorPlaceholder:"Business or vendor name...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes...",frequency:"Frequency",startDate:"Start Date",endMode:"End Mode",endDate:"End Date",receipts:"Receipts",addReceipt:"Add Receipt",linkReceipt:"Link from Inbox"},retainer:{new:"New Retainer",edit:"Edit Retainer",client:"Client",clientPlaceholder:"Select client...",title:"Title",titlePlaceholder:"e.g. Monthly retainer",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date (optional)",project:"Project (optional)",projectPlaceholder:"Select project...",status:"Status",notes:"Notes",notesPlaceholder:"Additional notes...",schedulePreview:"Schedule Preview",enterDetailsForPreview:"Enter amount and start date to see schedule",andMore:"and more..."}},s0={thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",allTime:"All Time",custom:"Custom",all:"All",type:{all:"All",income:"Income",receivable:"Receivable",expense:"Expense"},status:{all:"All",paid:"Paid",unpaid:"Unpaid",overdue:"Overdue"}},r0={required:"This field is required",amountRequired:"Amount is required",dateRequired:"Date is required",nameRequired:"Name is required"},c0={today:"Today",yesterday:"Yesterday",daysAgo:"{days} days ago",weeksAgo:"{weeks} weeks ago",monthsAgo:"{months} months ago",yearsAgo:"{years} years ago",daysOverdue:"{days} days overdue",dueInDays:"Due in {days} days"},o0={live:"Live",cached:"Cached",none:"Unavailable",bannerTitle:"Exchange Rate",showBanner:"Show exchange rate",refresh:"Refresh rate",minimize:"Minimize",drag:"Drag to move"},u0={title:"Welcome to Mutaba3a",subtitle:"Let's set up your business profile",infoTitle:"What is a Business Profile?",bullet1:"Your company name, logo, and branding",bullet2:"Contact information for invoices",bullet3:"Tax ID and registration details",multipleProfiles:"You can create multiple profiles if you manage different businesses.",setUpNow:"Set Up Now",skipForNow:"Skip for now",skipNote:"Skip creates a default profile you can customize later in Settings."},d0={noProfile:"No Profile",setUpBusiness:"Set up business",addProfile:"Add Business Profile",manageProfiles:"Manage Profiles",switchTo:"Switch to {name}",current:"Current"},f0={title:"Business Profile Required",description:"To create invoices and documents, you need to set up a business profile first.",createProfile:"Create Business Profile"},m0={createNew:"Create new"},p0={suggestions:{title:"Match suggestions",link:"Link",noMatches:"No matching expenses found",createAndLink:"Create Expense & Link",highConfidence:"High confidence matches",mediumConfidence:"Likely matches",lowConfidence:"Possible matches",allLinked:"All receipts linked",allLinkedHint:"Great job! All your receipts have been linked to expenses."}},h0={title:"Bulk Upload Receipts",button:"Bulk Upload",dropzoneTitle:"Drop files here or click to browse",dropzoneHint:"Up to {maxFiles} files, max {maxSize} each",autoDetectMonth:"Auto-detect month from file date",batchMonth:"Batch month override",selectMonth:"Select month...",total:"Total",success:"Uploaded",duplicates:"Skipped (duplicates)",errors:"Failed",upload:"Upload",uploading:"Uploading",retryFailed:"Retry failed",statusPending:"Pending",duplicate:"Duplicate file"},y0={title:"Monthly Close",checklist:"Close Checklist",monthClosed:"Month Closed",closedAt:"Closed on {date}",readyToClose:"Ready to Close",notReady:"Not Ready to Close",allTasksComplete:"All required tasks have been completed.",completeTasks:"Complete the checklist items below before closing.",receiptsLinked:"All receipts linked to expenses",allLinked:"All receipts linked",unlinkedCount:"{count} unlinked receipts",viewReceipts:"View Receipts",allCategorized:"All expenses categorized",allCategorizedStatus:"All expenses have categories",uncategorizedCount:"{count} uncategorized expenses",viewExpenses:"View Expenses",recurringConfirmed:"Recurring expenses confirmed",recurringConfirmedHint:"Verify all recurring expenses are correct for this month",zipExported:"Receipts exported (optional)",zipExportedHint:"Export a ZIP backup of all receipts",exportZip:"Export ZIP",closeMonth:"Close Month",notesLabel:"Notes (optional)",notesPlaceholder:"Add any notes about this month's close...",closeMonthButton:"Close Month",completeChecklistFirst:"Complete all required checklist items before closing the month.",confirmClose:"Are you sure you want to close this month? This will mark it as finalized.",confirmReopen:"Are you sure you want to reopen this month? This will allow editing again.",reopen:"Reopen Month",warning:{title:"Closed Month",text:"{month} has been closed. Editing expenses in closed months is not recommended.",reopenButton:"Reopen to Edit"}},g0={title:"Retainers",new:"New Retainer",addRetainer:"Add Retainer",matchPayment:"Match Payment",empty:"No retainers found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first retainer to track recurring income",searchPlaceholder:"Search retainers...",selectToInspect:"Select a retainer to view details",confirmArchive:"Are you sure you want to archive this retainer?",confirmPause:"Are you sure you want to pause this retainer? Future payments will be canceled.",confirmEnd:"Are you sure you want to end this retainer? This cannot be undone.",activate:"Activate",pause:"Pause",resume:"Resume",end:"End",summary:"Summary",activeCount:"Active Retainers",monthlyExpected:"Monthly Expected",totalDue:"Total Due",totalOverdue:"Total Overdue",filters:{view:"View",all:"All",due:"Due Now",active:"Active",ending:"Ending Soon",status:"Status",currency:"Currency",client:"Client"},status:{draft:"Draft",active:"Active",paused:"Paused",ended:"Ended"},cadence:{monthly:"Monthly",quarterly:"Quarterly"},state:{upcoming:"Upcoming",due:"Due",received:"Received",partial:"Partial",missed:"Missed",canceled:"Canceled"},columns:{status:"Status",title:"Title",client:"Client",amount:"Amount",cadence:"Cadence",nextDue:"Next Due",dueNow:"Due Now"},inspector:{overview:"Overview",schedule:"Schedule",transactions:"Transactions",notes:"Notes",client:"Client",project:"Project",amount:"Amount",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date",status:"Status"}},v0={selectTransaction:"Select Transaction",selectProjectedIncome:"Select Payment Period",selectTransactionDesc:"Choose an income transaction to match with a retainer payment",selectProjectedDesc:"Choose the payment period to link this transaction to",searchTransactions:"Search transactions...",searchProjected:"Search periods...",createNewTransaction:"Create New Transaction",noMatchingTransactions:"No matching transactions found",noUnlinkedTransactions:"No unlinked income transactions",noMatchingProjected:"No matching periods found",noDueItems:"No due payment periods",untitled:"Untitled transaction",untitledRetainer:"Untitled retainer",suggestions:"Suggestions",otherDueItems:"Other Due Periods",confidence:{high:"High",medium:"Medium",low:"Low"}},x0={title:"Engagements",new:"New Engagement",addEngagement:"Add Engagement",empty:"No engagements found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first engagement to get started",searchPlaceholder:"Search engagements...",selectToInspect:"Select an engagement to view details",untitled:"Untitled Engagement",confirmArchive:"Are you sure you want to archive this engagement?",duplicate:"Duplicate",downloadPdf:"Download PDF",archive:"Archive",restore:"Restore",summary:"Summary",draftCount:"Drafts",finalCount:"Finalized",archivedCount:"Archived",filters:{view:"View",all:"All",draft:"Drafts",final:"Finalized",archived:"Archived",type:"Type",category:"Category",profile:"Profile",client:"Client"},status:{draft:"Draft",final:"Final",archived:"Archived"},type:{task:"Task-Based",retainer:"Retainer"},category:{design:"Design",development:"Development",consulting:"Consulting",marketing:"Marketing",legal:"Legal",other:"Other"},columns:{status:"Status",title:"Title",client:"Client",type:"Type",category:"Category",language:"Lang",versions:"Versions",updated:"Updated"},inspector:{overview:"Overview",client:"Client",project:"Project",type:"Type",category:"Category",language:"Language",status:"Status",versions:"Versions",created:"Created",lastUpdated:"Last Updated",summary:"Summary",scope:"Scope",deliverables:"Deliverables",exclusions:"Exclusions",milestones:"Milestones"},wizard:{newTitle:"New Engagement",editTitle:"Edit Engagement",saveDraft:"Save Draft",finalize:"Finalize",saving:"Saving...",lastSaved:"Last saved",unsavedChanges:"Unsaved changes",steps:{client:"Client & Type",summary:"Summary",scope:"Scope",timeline:"Timeline",reviews:"Reviews",payment:"Payment",relationship:"Relationship",terms:"Terms",review:"Review & Export"}},clarityCheck:{title:"Clarity Check",allClear:"All clear! No issues found.",highCount:"{count} high",mediumCount:"{count} medium",lowCount:"{count} low",severity:{high:"High",medium:"Medium",low:"Low"}}},b0={langToggle:{en:"EN",ar:"AR"},hero:{headline:"Your finances belong on your device, not in the cloud",subheadline:"Track income, expenses, and receivables locally. No account. No subscription. Free for personal use.",trust:"No account. No tracking. No cloud by default. Free for personal use.",ctaPrimary:"Open Web App",ctaSecondary:"Download Desktop App"},answersMini:{q1:"Will I make it this month?",q2:"Who owes me money?",q3:"What's coming next?"},problem:{headline:"Freelancers deserve better than spreadsheets",pain1:"You track income in one spreadsheet, expenses in another",pain2:"You forget who owes you money until it's too late",pain3:"You can't work when the WiFi goes out",pain4:"Your financial data lives on servers you don't control"},useCases:{headline:"One tool for every money moment",subheadline:"From chasing payments to forecasting cashall in one place.",tabs:{receivables:"Receivables",retainers:"Retainers",expenses:"Expenses",documents:"Documents",forecast:"Forecast"},receivables:{outcome:"Never forget who owes you money.",step1:"Log income as paid or unpaid",step2:"See overdue receivables at a glance",step3:"Mark paid when cash arrives"},retainers:{outcome:"Track recurring income without spreadsheets.",step1:"Set up client retainers with payment schedule",step2:"Match incoming payments to expected periods",step3:"See missed or partial payments instantly"},expenses:{outcome:"Know exactly where your money goes.",step1:"Log expenses per business profile",step2:"Attach and organize receipts",step3:"Set up recurring costs for forecasting"},documents:{outcome:"Generate professional documents in seconds.",step1:"Create invoices, receipts, or credit notes",step2:"Auto-fill from client and project data",step3:"Export PDF (bilingual AR/EN supported)"},forecast:{outcome:"See your financial future before it happens.",step1:"View projected income from retainers",step2:"See recurring expenses rolling forward",step3:"Spot risk days before they arrive"}},moneyAnswers:{headline:"Money Answers",subheadline:"Projection is not prediction. It's a flashlight.",card1Title:"Will I make it?",card1Desc:"See your end-of-month forecast: cash on hand plus expected income minus expected costs.",card2Title:"What am I waiting on?",card2Desc:"Track unpaid receivables and retainer payments due. Know who owes you and when.",card3Title:"What can I afford next?",card3Desc:"Spot surplus or shortfall before making decisions. Plan major expenses with confidence.",forecastTitle:"Why forecasting matters",forecastDesc:"Most tools show you what happened. Mutaba3a shows you what's likely to happenso you can act before problems arrive."},proof:{headline:"See it in action",tabs:{desktop:"Desktop App",web:"Web App"},items:{dashboardTitle:"Dashboard",dashboardDesc:"Your financial overview at a glance",documentsTitle:"Documents",documentsDesc:"Create and manage invoices",clientsTitle:"Clients",clientsDesc:"Track client finances and history",expensesTitle:"Expenses",expensesDesc:"Organize costs by business profile"}},capabilities:{headline:"Everything you need, nothing you don't",block1Title:"Get paid and stay paid",block1Bullet1:"Clients and projects",block1Bullet2:"Receivables tracking",block1Bullet3:"Retainer management",block1Bullet4:"Invoice generation",block2Title:"Stay on top of costs",block2Bullet1:"Fixed and recurring expenses",block2Bullet2:"Receipt management",block2Bullet3:"Profile-scoped expense tracking",block3Title:"Know your month and year",block3Bullet1:"Cash flow timeline",block3Bullet2:"Risk day detection",block3Bullet3:"Reports and CSV export"},privacy:{headline:"Your data. Your device. Your rules.",intro:"Mutaba3a is built for people who care where their financial data lives.",point1:"No account required to use",point2:"No tracking or analytics",point3:"No cloud sync by default",point4:"Data stored locally (IndexedDB/SQLite)",point5:"Export everything as JSON anytime",point6:"Source-available on GitHub"},download:{headline:"Download the desktop app",latestLabel:"Latest version",releaseNotes:"Release notes",mac:"Download for macOS",macHint:"Universal (Intel + Apple Silicon)",windowsMsi:"Download for Windows",windowsHint:"MSI Installer",windowsExe:"Alternative: Download EXE installer",pwaNote:"Or use the web app in your browserworks offline after first load."},pricing:{headline:"Free for personal use",personal:"Free for personal and educational use",commercial:"Commercial license required for business use",future:"Team features and cloud sync coming later (paid).",support:"Support development",supportCta:"Support on Buy Me a Coffee"},faq:{headline:"Frequently Asked Questions",q1:"Is Mutaba3a really free?",a1:"Free for personal and educational use. A commercial license is required for business use.",q2:"Where is my data stored?",a2:"Locally on your device. The web version uses IndexedDB. The desktop app uses SQLite.",q3:"What if I need multiple devices?",a3:"Export JSON and import on another device. Cloud sync with end-to-end encryption is on the roadmap.",q4:"Does it work offline?",a4:"Yes. After the initial load, the web app works offline. The desktop app always works offline.",q5:"What currencies are supported?",a5:"USD and ILS are built-in. Track them separately or unified with FX conversion.",q6:"Can I create invoices?",a6:"Yes. Invoices, receipts, and credit notesall bilingual (Arabic and English).",q7:"Is there a mobile app?",a7:"The PWA works on mobile browsers. Native mobile apps are on the roadmap.",q8:"How do I back up my data?",a8:"Export to JSON from Settings. Import on any device instantly.",q9:"What's the difference between web and desktop?",a9:"Same features. Desktop has native performance and automatic updates.",q10:"How can I support the project?",a10:"Buy Me a Coffee or purchase a commercial license when available.",q11:"What happens to my data if the project shuts down?",a11:"Your data stays on your device. Export anytime to JSON. You own it forever.",q12:"Can I use it for my business?",a12:"Yes, with a commercial license. Contact us for pricing or wait for the self-serve option."},finalCta:{headline:"Start tracking your finances today",trust:"No account. No tracking. Free for personal use."},footer:{copyright:"Mutaba3a",github:"GitHub",privacy:"Privacy"}},w0={title:"Answers",includeReceivables:"Include receivables",includeProjections:"Include projections",cashFlowTimeline:"Cash Flow Timeline",guidanceTitle:"Action Items",noData:"No data for this period",mode:{month:"Month",year:"Year"},yearMode:{totalInflow:"Total Inflow",totalOutflow:"Total Outflow",netIncome:"Net Income",avgAwaiting:"Avg. Awaiting",retainerStability:"Retainer Stability",monthlyTrend:"Monthly Trend",insights:"Year Insights",bestMonth:"Best Month",worstMonth:"Worst Month",retainerHealth:"Retainer Health",paymentsReceived:"{{received}} of {{total}} payments received",noDataForYear:"No data for this year",yearTrend:"Year Trend",trendUp:"Improving",trendDown:"Declining",vsFirstHalf:"vs. first half",onTimePayments:"on-time payments"},kpi:{willMakeIt:"End of Month Forecast",endOfMonthForecast:"Cash + expected income - expected costs",cashOnHand:"Cash on Hand",currentBalance:"Actual balance to date",comingVsLeaking:"Coming vs Leaking",netForecast:"Net forecast"},legend:{inflow:"Inflow",outflow:"Outflow",runningBalance:"Running balance"},unifiedNote:"All amounts shown in ILS (unified)",dayDetail:{inflow:"Inflow",outflow:"Outflow",net:"Net",noEvents:"No events on this day",inflows:"Inflows",outflows:"Outflows"},source:{actualIncome:"Paid income",actualCost:"Expense",receivable:"Receivable",profileExpense:"Expense",projectedExpense:"Projected expense",retainer:"Retainer"},state:{paid:"Paid",unpaid:"Unpaid",overdue:"Overdue",upcoming:"Upcoming",missed:"Missed",cancelled:"Cancelled"},guidance:{allGood:"Looking good! No action items right now.",impact:"Impact",category:{collect:"Collect",reduce:"Reduce",delay:"Delay",hygiene:"Hygiene"}}},S0={common:Yv,toast:Kv,nav:Fv,addMenu:Gv,transactions:Zv,overview:Xv,projects:Jv,clients:$v,reports:Wv,download:e0,settings:t0,downloadBanner:n0,updateBanner:a0,expenses:i0,drawer:l0,filters:s0,validation:r0,time:c0,fx:o0,welcome:u0,profileSwitcher:d0,documentGuard:f0,vendor:m0,receipts:p0,bulkUpload:h0,monthClose:y0,retainers:g0,retainerMatching:v0,engagements:x0,landing:b0,moneyAnswers:w0},j0={save:"",saving:" ...",cancel:"",delete:"",archive:"",add:"",edit:"",loading:" ...",search:"...",close:"",confirm:"",noClient:" ",noProject:" ",all:"",markPaid:" ",duplicate:"",undo:"",previous:"",next:"",uncategorized:" ",noResults:"  "},A0={transactionDuplicated:"  ",transactionUndone:"   "},D0={overview:" ",projects:"",clients:"",transactions:"",documents:"",retainers:" ",moneyAnswers:"",expenses:"",reports:"",settings:"",download:"",new:"",collapse:"  ",expand:"  ",sections:{work:"",money:"",system:""},newMenu:{document:" ",transaction:" ",client:" ",expense:" "}},N0={income:"",expense:"",project:"",client:"",document:""},M0={title:"",empty:"  ",emptySearch:"    ",emptyHint:"   ",addTransaction:" ",searchPlaceholder:"  ...",confirmDelete:"      ",type:{income:"",expense:"",receivable:""},status:{paid:"",unpaid:" ",overdue:" {days} ",dueIn:"  {days} ",dueToday:" "},columns:{date:"",type:"",client:"",project:"",category:"",amount:"",status:""},hasDocument:" "},C0={title:" ",kpi:{paidIncome:" ",unpaidReceivables:"  ",expenses:"",net:" ( - )"},needsAttention:" ",noAttention:"     ",recentActivity:" ",noRecent:"   "},E0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addProject:" ",searchPlaceholder:"  ...",allFields:" ",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{project:"",client:"",field:"",paid:"",unpaid:" ",expenses:"",net:"",lastActivity:" "},tabs:{summary:"",transactions:""},detail:{projectDetails:" ",noTransactions:"  ",noTransactionsHint:"    ."},fields:{design:"",development:"",consulting:"",marketing:"",legal:"",maintenance:"",other:""}},T0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addClient:" ",searchPlaceholder:"  ...",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{client:"",activeProjects:" ",paidIncome:" ",unpaid:" ",lastPayment:" ",lastActivity:" "},tabs:{summary:"",projects:"",receivables:"",transactions:""},detail:{clientDetails:" ",email:" ",phone:"",noProjects:"  ",noProjectsHint:"    .",noReceivables:"  ",noReceivablesHint:"   .",noTransactions:"  ",noTransactionsHint:"    ."},receivables:{dueDate:" ",daysOverdue:" ",action:""}},I0={title:"",exportCsv:" CSV",presets:{summary:"",thisMonth:" ",thisYear:" ",byProject:" ",byClient:" ",expensesByProject:"  ",unpaidAging:" "},period:{month:"",quarter:" ",year:"",custom:""},currencyMode:{usd:"",ils:"",both:""},drillDown:{paidIncome:"  ",unpaidIncome:"   ",expenses:" "},search:{project:"  ...",client:"  ..."},selectCurrencyForAmounts:"    ",sections:{financialSummary:" ",incomeByProject:"  ",incomeByClient:"  ",expensesByProject:"  ",unpaidAging:"   "},aging:{current:" ( )",days1to30:" 1-30 ",days31to60:" 31-60 ",days60plus:"   60 "},noExpenses:"     "},R0={title:"",recommendedForYou:"  ",loading:" ...",comingSoon:"",version:"",size:"",requires:"",sha256:"SHA-256",copy:"",checksumCopied:"   ",howToInstall:" ",releaseNotes:" ",allVersions:" ",mac:{title:"macOS",downloadDmg:" DMG",step1:"  DMG",step2:' ""  ',step3:"     "},windows:{title:"Windows",downloadMsi:" MSI",step1:"  MSI",step2:"  ",step3:"  ",altExe:":   EXE"}},_0={title:"",language:{title:"",description:"  "},theme:{title:"",description:"  ",light:"",dark:"",system:""},currency:{title:"",enabled:" ",enabledDesc:"    ",default:" ",defaultDesc:"   "},data:{title:" ",export:" ",exportDesc:"     ",exportBtn:" JSON",exporting:" ...",exported:"  !",exportFailed:" ",import:" ",importDesc:"     (  )",importBtn:" JSON",importing:" ...",imported:"  !  ...",importFailed:" : {error}",invalidFile:"     ",deleteAll:"  ",deleteAllDesc:"    ",deleteAllBtn:"  ",reset:"  ",resetDesc:"     ",resetBtn:" ",resetConfirm:"            .",deleteModal:{title:"  ",warning:"             .      .",stepA:{title:" 1:   ",desc:"       .",btn:"   (CSV)",exporting:" ...",done:"   !",error:" "},stepB:{title:" 2:  ",checkbox:"    ",btn:" ",deleting:" ...",error:" "},success:"    "}},about:{title:" ",name:" -   ",description:"       .       IndexedDB."},updates:{title:"",checking:"   ...",upToDate:"  ",currentVersion:" ",latestVersion:" ",updateAvailable:"  ",updateNow:" ",checkFailed:"   "},desktopApp:{title:"  ",download:"   ",downloadDesc:"     ",downloadBtn:"",downloadMac:"  macOS",downloadWindows:"  Windows"}},O0={message:"   Mac   ",cta:"",dismiss:""},U0={available:" {{version}} ",downloading:" ... {{progress}}%",ready:" ",restart:"  ",download:"",dismiss:"",error:" "},L0={title:"",profileExpenses:" {name}",addExpense:" ",addRecurring:" ",empty:"  ",emptyHint:"   ",emptyProfiles:"   ",emptyProfilesHint:"    ",emptyExpenses:"  ",emptyExpensesSearch:"    ",emptyExpensesHint:"   ",searchPlaceholder:"  ...",confirmDelete:"      ",confirmDeleteRule:"       ",year:"",month:"",allMonths:" ",allCategories:" ",totalExpenses:" ",totalUSD:" ()",totalILS:" ()",viewReceipts:" ",manageReceipts:" ",allProfilesOverview:"    ",recurringRules:" ",fromRecurring:"  ",monthly:"",yearly:"",pause:"",resume:"",paused:"",profileNotFound:"  ",profileNotFoundHint:"       ",untitled:" ",unknownProfile:"  ",overview:{title:"   ",allProfiles:" ",profileBreakdown:"  ",totalExpenses:" ",monthlyBreakdown:" ",byProfile:" ",noProfiles:"   ",profile:"",total:"",percentage:""},forecast:{title:" ",minimumNeeded:"  ",untilEndOfYear:"  {year}",monthsRemaining:" ",yearTotal:" ",activeRules:" ",monthlyForecast:" ",month:"",projected:"",actual:"",delta:"",current:"",total:"",byProfile:" ",empty:"   ",emptyHint:"    ",activeRecurringRules:"  "},receipts:{title:"",upload:" ",uploading:" ...",total:"",linked:"",unlinked:" ",allTab:"",inboxTab:"",suggestionsTab:"",linkToExpense:" ",link:"",unlink:" ",unlinkFromExpense:" ",exportZip:" ZIP",exporting:" ...",download:"",empty:"  ",emptyHint:"  ",noReceipts:"  ",noReceiptsHint:"  ",fileTooLarge:"   (  {maxSize})",invalidFileType:"   .     PDF",uploadFailed:"  ",selectExpense:"  ",noExpensesToLink:"   .   .",confirmUnlink:"       ",confirmDelete:"      "},recurring:{title:" ",addRule:" ",frequency:"",monthly:"",yearly:"",startDate:" ",endMode:" ",endOfYear:" ",untilDate:" ",noEnd:" ",endDate:" ",pause:"",resume:"",paused:"",active:""},columns:{date:"",title:"",vendor:"",category:"",amount:"",receipts:""},categories:{title:"",addCategory:" ",name:"",color:"",setup:" ",setupTitle:"  ",selectPreset:"      :",seedCategories:" ",presets:{general:"  ",startup:"  ",lawFirm:" ",freelancer:" "},presetDescriptions:{general:"      ",startup:"   SaaS        ",lawFirm:"         ",freelancer:"      "}}},z0={title:" ",addRetainer:" ",matchPayment:" ",empty:"   ",emptyHint:"     ",searchPlaceholder:"  ...",confirmArchive:"      ",view:{all:"",dueNow:" ",active:"",endingSoon:" "},status:{title:"",draft:"",active:"",paused:"",ended:""},cadence:{monthly:"",quarterly:" "},columns:{status:"",title:"",client:"",amount:"",cadence:"",nextDue:" ",dueNow:""},inspector:{placeholder:"    ",overview:" ",schedule:" ",linkedTransactions:" ",noLinkedTransactions:"    ",client:"",project:"",amount:"",cadence:"",paymentDay:" ",startDate:" ",endDate:" ",noEndDate:"",notes:"",dueAmount:" ",actions:"",edit:"",pause:"",resume:"",end:"",match:" ",confirmPause:"      ",confirmEnd:"      "},summary:{active:"",dueNow:" ",mtd:"  ()"},scheduleState:{upcoming:"",due:"",received:"",partial:"",missed:"",canceled:""},filters:{status:"",currency:"",client:"",allStatuses:" ",allCurrencies:" ",allClients:" "}},k0={selectTransaction:" ",selectProjectedIncome:"  ",selectTransactionDesc:"       .",selectProjectedDesc:"       .",searchTransactions:"  ...",searchProjected:"   ...",createNewTransaction:"  ",noMatchingTransactions:"   ",noUnlinkedTransactions:"   ",noMatchingProjected:"    ",noDueItems:"   ",untitled:" ",untitledRetainer:"  ",suggestions:"",otherDueItems:"  ",confidence:{high:" ",medium:" ",low:" "}},B0={transaction:{new:" ",edit:" ",typeIncome:"",typeIncomeDesc:"",typeReceivable:"",typeReceivableDesc:" ",typeExpense:"",typeExpenseDesc:"",amount:"",amountPlaceholder:"0.00",currency:"",date:"",dueDate:" ",client:"",clientPlaceholder:" ...",project:"",projectPlaceholder:" ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ..."},client:{new:" ",edit:" ",name:"",namePlaceholder:" ...",email:" ",emailPlaceholder:"client@example.com",phone:"",phonePlaceholder:"+966-5X-XXX-XXXX",notes:"",notesPlaceholder:"    ..."},project:{new:" ",edit:" ",name:"",namePlaceholder:" ...",client:"",clientPlaceholder:" ...",field:"",fieldPlaceholder:" ...",notes:"",notesPlaceholder:"    ..."},expense:{new:" ",edit:" ",newRecurring:"  ",editRecurring:"  ",typeOneTime:" ",typeOneTimeDesc:" ",typeRecurring:"",typeRecurringDesc:" /",profile:"",profilePlaceholder:" ...",amount:"",amountPlaceholder:"0.00",currency:"",date:"",vendor:"",vendorPlaceholder:"   ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ...",frequency:"",startDate:" ",endMode:" ",endDate:" ",receipts:"",addReceipt:" ",linkReceipt:"  "},retainer:{new:"  ",edit:"  ",client:"",clientPlaceholder:" ...",title:"",titlePlaceholder:":   ...",amount:"",amountPlaceholder:"0.00",currency:"",cadence:"",paymentDay:" ",startDate:" ",endDate:"  ()",project:" ()",projectPlaceholder:" ...",status:"",notes:"",notesPlaceholder:"    ...",schedulePreview:" ",enterDetailsForPreview:"    ",andMore:"..."}},q0={thisMonth:" ",lastMonth:" ",thisYear:" ",allTime:" ",custom:"",all:"",type:{all:"",income:"",receivable:"",expense:""},status:{all:"",paid:"",unpaid:" ",overdue:""}},H0={required:"  ",amountRequired:" ",dateRequired:" ",nameRequired:" "},P0={today:"",yesterday:"",daysAgo:" {days} ",weeksAgo:" {weeks} ",monthsAgo:" {months} ",yearsAgo:" {years} ",daysOverdue:" {days} ",dueInDays:"  {days} "},V0={live:"",cached:"",none:" ",bannerTitle:" ",showBanner:"  ",refresh:" ",minimize:"",drag:" "},Q0={title:"   ",subtitle:"    ",infoTitle:"    ",bullet1:"   ",bullet2:"  ",bullet3:"   ",multipleProfiles:"         .",setUpNow:" ",skipForNow:" ",skipNote:"        ."},Y0={noProfile:"  ",setUpBusiness:"  ",addProfile:"  ",manageProfiles:" ",switchTo:"  {name}",current:""},K0={title:"   ",description:"        .",createProfile:"  "},F0={createNew:" "},G0={suggestions:{title:" ",link:"",noMatches:"     ",createAndLink:"  ",highConfidence:"  ",mediumConfidence:" ",lowConfidence:" ",allLinked:"  ",allLinkedHint:"!     ."}},Z0={title:"  ",button:" ",dropzoneTitle:"     ",dropzoneHint:" {maxFiles}    {maxSize}  ",autoDetectMonth:"     ",batchMonth:"  ",selectMonth:" ...",total:"",success:" ",duplicates:"  ()",errors:"",upload:"",uploading:" ",retryFailed:" ",statusPending:" ",duplicate:" "},X0={title:" ",checklist:" ",monthClosed:"  ",closedAt:"   {date}",readyToClose:" ",notReady:"  ",allTasksComplete:"    .",completeTasks:"     .",receiptsLinked:"   ",allLinked:"  ",unlinkedCount:"{count}   ",viewReceipts:" ",allCategorized:"  ",allCategorizedStatus:"   ",uncategorizedCount:"{count}   ",viewExpenses:" ",recurringConfirmed:"  ",recurringConfirmedHint:"       ",zipExported:"  ()",zipExportedHint:"     ",exportZip:" ZIP",closeMonth:" ",notesLabel:" ()",notesPlaceholder:"      ...",closeMonthButton:" ",completeChecklistFirst:"       .",confirmClose:"         .",confirmReopen:"           .",reopen:"  ",warning:{title:" ",text:"  {month}.       .",reopenButton:"  "}},J0={langToggle:{en:"EN",ar:""},hero:{headline:"     ",subheadline:"    .  .  .   .",trust:" .  .   .   .",ctaPrimary:" ",ctaSecondary:"   "},answersMini:{q1:"   ",q2:"   ",q3:" "},problem:{headline:"     ",pain1:"       ",pain2:"       ",pain3:"     ",pain4:"     "},useCases:{headline:"    ",subheadline:"          .",tabs:{receivables:"",retainers:"",expenses:"",documents:"",forecast:""},receivables:{outcome:"      .",step1:"     ",step2:"   ",step3:"    "},retainers:{outcome:"     .",step1:"     ",step2:"     ",step3:"     "},expenses:{outcome:"    .",step1:"    ",step2:"  ",step3:"   "},documents:{outcome:"    .",step1:"      ",step2:"     ",step3:" PDF (/)"},forecast:{outcome:"    .",step1:"    ",step2:"   ",step3:"    "}},moneyAnswers:{headline:" ",subheadline:"  .  .",card1Title:" ",card1Desc:"   :   +   -  .",card2Title:" ",card2Desc:"      .     .",card3Title:"  ",card3Desc:"      .    .",forecastTitle:"  ",forecastDesc:"    .          ."},proof:{headline:"  ",tabs:{desktop:"  ",web:" "},items:{dashboardTitle:" ",dashboardDesc:"   ",documentsTitle:"",documentsDesc:"  ",clientsTitle:"",clientsDesc:"   ",expensesTitle:"",expensesDesc:"    "}},capabilities:{headline:"     ",block1Title:"  ",block1Bullet1:" ",block1Bullet2:" ",block1Bullet3:" ",block1Bullet4:" ",block2Title:" ",block2Bullet1:"  ",block2Bullet2:" ",block2Bullet3:"    ",block3Title:"  ",block3Bullet1:"  ",block3Bullet2:"  ",block3Bullet3:"  CSV"},privacy:{headline:". . .",intro:"        .",point1:"    ",point2:"   ",point3:"   ",point4:"   (IndexedDB/SQLite)",point5:"    JSON   ",point6:"    GitHub"},download:{headline:"   ",latestLabel:" ",releaseNotes:" ",mac:"  macOS",macHint:" (Intel + Apple Silicon)",windowsMsi:"  Windows",windowsHint:"MSI Installer",windowsExe:":   EXE",pwaNote:"          ."},pricing:{headline:"  ",personal:"   ",commercial:"     ",future:"      ().",support:" ",supportCta:"  Buy Me a Coffee"},faq:{headline:" ",q1:"   ",a1:"   .      .",q2:"  ",a2:"  .    IndexedDB.     SQLite.",q3:"    ",a3:" JSON    .    .",q4:"   ",a4:".        .     .",q5:"  ",a5:"   .       .",q6:"   ",a6:".       ( ).",q7:"   ",a7:"     .    .",q8:"   ",a8:"  JSON  .     .",q9:"     ",a9:" .       .",q10:"   ",a10:" Buy Me a Coffee      .",q11:"     ",a11:"   .      JSON.  .",q12:"   ",a12:"   .        ."},finalCta:{headline:"   ",trust:" .  .   ."},footer:{copyright:"",github:"GitHub",privacy:""}},$0={title:"",includeReceivables:" ",includeProjections:" ",cashFlowTimeline:"  ",guidanceTitle:" ",noData:"    ",mode:{month:"",year:""},yearMode:{totalInflow:" ",totalOutflow:" ",netIncome:" ",avgAwaiting:" ",retainerStability:" ",monthlyTrend:" ",insights:" ",bestMonth:" ",worstMonth:" ",retainerHealth:" ",paymentsReceived:"  {{received}}  {{total}} ",noDataForYear:"    ",yearTrend:" ",trendUp:" ",trendDown:" ",vsFirstHalf:"  ",onTimePayments:"  "},kpi:{willMakeIt:"  ",endOfMonthForecast:" +   -  ",cashOnHand:" ",currentBalance:"   ",comingVsLeaking:"  ",netForecast:" "},legend:{inflow:"",outflow:"",runningBalance:" "},unifiedNote:"   ()",dayDetail:{inflow:"",outflow:"",net:"",noEvents:"     ",inflows:"",outflows:""},source:{actualIncome:" ",actualCost:"",receivable:"",profileExpense:"",projectedExpense:" ",retainer:" "},state:{paid:"",unpaid:" ",overdue:"",upcoming:"",missed:"",cancelled:""},guidance:{allGood:"    !     .",impact:"",category:{collect:"",reduce:"",delay:"",hygiene:""}}},W0={common:j0,toast:A0,nav:D0,addMenu:N0,transactions:M0,overview:C0,projects:E0,clients:T0,reports:I0,download:R0,settings:_0,downloadBanner:O0,updateBanner:U0,expenses:L0,retainers:z0,retainerMatching:k0,drawer:B0,filters:q0,validation:H0,time:P0,fx:V0,welcome:Q0,profileSwitcher:Y0,documentGuard:K0,vendor:F0,receipts:G0,bulkUpload:Z0,monthClose:X0,landing:J0,moneyAnswers:$0},e1={en:S0,ar:W0},$p="mutaba3a-language";function t1(){return navigator.language.split("-")[0].toLowerCase()==="ar"?"ar":"en"}function n1(){if(typeof window>"u")return"en";const a=localStorage.getItem($p);return a==="en"||a==="ar"?a:t1()}function a1(a){return a==="ar"?"rtl":"ltr"}function ql(a){return a==="ar"?"ar":"en-US"}const Wp=_.createContext(null);function Ho({children:a}){const[l,c]=_.useState(n1),u=a1(l);_.useEffect(()=>{document.documentElement.lang=l,document.documentElement.dir=u,localStorage.setItem($p,l)},[l,u]);const d=_.useCallback(g=>{c(g)},[]),h=_.useCallback((g,p)=>{const m=g.split(".");let y=e1[l];for(const x of m)if(y&&typeof y=="object"&&x in y)y=y[x];else return console.warn(`Translation missing: ${g} (${l})`),g;return typeof y!="string"?(console.warn(`Translation not a string: ${g} (${l})`),g):p?Object.entries(p).reduce((x,[w,j])=>x.replace(new RegExp(`\\{${w}\\}`,"g"),String(j)),y):y},[l]),b={language:l,direction:u,setLanguage:d,t:h};return s.jsx(Wp.Provider,{value:b,children:a})}function Qn(){const a=_.useContext(Wp);if(!a)throw new Error("useLanguage must be used within a LanguageProvider");return a}function Ze(){return Qn().t}function i1(){return Qn().direction}const l1="https://api.github.com/repos/vAWK3/mutaba3a/releases/latest",Xo="latest-release-info",s1=3600*1e3;function r1(){try{const a=sessionStorage.getItem(Xo);if(!a)return null;const l=JSON.parse(a);return Date.now()-l.timestamp>s1?(sessionStorage.removeItem(Xo),null):l}catch{return null}}function c1(a){const l={...a,timestamp:Date.now()};sessionStorage.setItem(Xo,JSON.stringify(l))}async function eh(){const a=await fetch(l1,{headers:{Accept:"application/vnd.github.v3+json"}});if(!a.ok)throw new Error(`GitHub API returned ${a.status}`);const l=await a.json(),c=l.tag_name,u=l.html_url,d=l.assets||[],h=c.startsWith("v")?c.slice(1):c,b=d.some(p=>p.name.includes("macos")||p.name.endsWith(".dmg")),g=d.some(p=>p.name.includes("windows")||p.name.endsWith(".msi")||p.name.endsWith(".exe"));return{version:h,releaseNotesUrl:u,hasMacBuild:b,hasWindowsBuild:g}}function nS(){const[a,l]=_.useState({release:null,isLoading:!0,error:null});return _.useEffect(()=>{(async()=>{const u=r1();if(u){l({release:{version:u.version,releaseNotesUrl:u.releaseNotesUrl,hasMacBuild:u.hasMacBuild,hasWindowsBuild:u.hasWindowsBuild},isLoading:!1,error:null});return}try{const d=await eh();c1(d),l({release:d,isLoading:!1,error:null})}catch(d){l({release:null,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}const Jo="update-check-result",o1=3600*1e3;function u1(a,l){const c=m=>m.split(".").map(y=>parseInt(y,10)||0),[u=0,d=0,h=0]=c(a),[b=0,g=0,p=0]=c(l);return b!==u?b-u:g!==d?g-d:p-h}function d1(){try{const a=sessionStorage.getItem(Jo);if(!a)return null;const l=JSON.parse(a);return Date.now()-l.timestamp>o1?(sessionStorage.removeItem(Jo),null):l}catch{return null}}function f1(a,l){const c={latestVersion:a,hasUpdate:l,timestamp:Date.now()};sessionStorage.setItem(Jo,JSON.stringify(c))}function m1(){try{if(window.__TAURI_INTERNALS__)return"0.0.28"}catch{}return"0.0.28"}function p1(){const[a,l]=_.useState({latestVersion:null,hasUpdate:!1,isLoading:!0,error:null});return _.useEffect(()=>{(async()=>{const u=d1();if(u){l({latestVersion:u.latestVersion,hasUpdate:u.hasUpdate,isLoading:!1,error:null});return}try{const h=(await eh()).version,b=m1(),g=u1(b,h)>0;f1(h,g),l({latestVersion:h,hasUpdate:g,isLoading:!1,error:null})}catch(d){l({latestVersion:null,hasUpdate:!1,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}class h1 extends Iv{clients;projects;categories;transactions;fxRates;settings;businessProfiles;documents;documentSequences;expenses;recurringRules;receipts;expenseCategories;vendors;monthCloseStatuses;retainerAgreements;projectedIncome;engagements;engagementVersions;localDevice;trustedPeers;opLog;peerCursors;entityFieldMeta;moneyEventVersions;conflictQueue;syncHistory;constructor(){super("mutaba3a"),this.version(1).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id"}),this.version(2).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt"}),this.version(3).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]"}),this.version(4).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, monthKey, createdAt",expenseCategories:"id, profileId, name"}),this.version(5).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed"}),this.version(6).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"}),this.version(7).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"}),this.version(8).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId, lockedAt, archivedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt, [businessProfileId+type+number], lockedAt, archivedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"}).upgrade(l=>l.table("documents").toCollection().modify(c=>{c.exportCount===void 0&&(c.exportCount=0)})),this.version(9).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId, lockedAt, archivedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt, [businessProfileId+type+number], lockedAt, archivedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]",engagements:"id, clientId, projectId, type, category, status, primaryLanguage, createdAt, updatedAt, archivedAt",engagementVersions:"id, engagementId, versionNumber, status, createdAt"}),this.version(10).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId, lockedAt, archivedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt, [businessProfileId+type+number], lockedAt, archivedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]",engagements:"id, profileId, clientId, projectId, type, category, status, primaryLanguage, createdAt, updatedAt, archivedAt",engagementVersions:"id, engagementId, versionNumber, status, createdAt"}).upgrade(async l=>{const c=await l.table("businessProfiles").toArray();if(c.length===0)return;const u=c.find(d=>d.isDefault)||c[0];await l.table("engagements").toCollection().modify(d=>{d.profileId||(d.profileId=u.id)})})}}const S=new h1;function y1(a){let l=0,c=0,u=0;for(const d of a)d.kind==="income"?d.status==="paid"?l+=d.amountMinor:c+=d.amountMinor:u+=d.amountMinor;return{paidIncomeMinor:l,unpaidIncomeMinor:c,expensesMinor:u}}function mr(a){const l={USD:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0},ILS:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0},EUR:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0}};for(const c of a){const u=l[c.currency];u&&(c.kind==="income"?c.status==="paid"?u.paidIncomeMinor+=c.amountMinor:u.unpaidIncomeMinor+=c.amountMinor:u.expensesMinor+=c.amountMinor)}return l}function pr(a,l={}){let c=0,u=0,d=0,h,b;for(const g of a)g.kind==="income"?g.status==="paid"?(c+=g.amountMinor,l.trackPayments&&(!b||g.paidAt&&g.paidAt>b)&&(b=g.paidAt)):u+=g.amountMinor:d+=g.amountMinor,(!h||g.occurredAt>h)&&(h=g.occurredAt);return{paidIncomeMinor:c,unpaidIncomeMinor:u,expensesMinor:d,lastActivityAt:h,lastPaymentAt:b}}function wp(a,l){return a.filter(c=>!(c.deletedAt||l.dateFrom&&c.occurredAt<l.dateFrom||l.dateTo&&c.occurredAt>l.dateTo+"T23:59:59"||l.currency&&c.currency!==l.currency))}function hr(a,l,c,u){return a.filter(d=>!(d.deletedAt||l==="project"&&d.projectId!==c||l==="client"&&d.clientId!==c||u&&d.currency!==u))}function $o(a,l,c,u){return a.filter(d=>!(d.deletedAt||l==="project"&&d.projectId!==c||l==="client"&&d.clientId!==c||u.currency&&d.currency!==u.currency||u.dateFrom&&d.occurredAt<u.dateFrom||u.dateTo&&d.occurredAt>u.dateTo+"T23:59:59"))}function g1(a){return new Map(a.map(l=>[l.id,l.name]))}function th(a){return a.sort((l,c)=>!l.lastActivityAt&&!c.lastActivityAt?0:l.lastActivityAt?c.lastActivityAt?c.lastActivityAt.localeCompare(l.lastActivityAt):-1:1)}function xa(){return crypto.randomUUID()}function we(){return new Date().toISOString()}function Sp(){return new Date().toISOString().split("T")[0]}const sn={async list(a=!1){let l=S.clients.toCollection();return a||(l=S.clients.filter(c=>!c.archivedAt)),l.sortBy("name")},async get(a){return S.clients.get(a)},async create(a){const l=we(),c={...a,id:xa(),createdAt:l,updatedAt:l};return await S.clients.add(c),c},async update(a,l){await S.clients.update(a,{...l,updatedAt:we()})},async archive(a){await S.clients.update(a,{archivedAt:we(),updatedAt:we()})},async delete(a){await S.clients.delete(a)}},pn={async list(a){return(await S.projects.toCollection().toArray()).filter(u=>!(!a?.includeArchived&&u.archivedAt||a?.clientId&&u.clientId!==a.clientId)).sort((u,d)=>u.name.localeCompare(d.name))},async get(a){return S.projects.get(a)},async create(a){const l=we(),c={...a,id:xa(),createdAt:l,updatedAt:l};return await S.projects.add(c),c},async update(a,l){await S.projects.update(a,{...l,updatedAt:we()})},async archive(a){await S.projects.update(a,{archivedAt:we(),updatedAt:we()})},async delete(a){await S.projects.delete(a)}},ur={async list(a){return a?S.categories.where("kind").equals(a).sortBy("name"):S.categories.orderBy("name").toArray()},async get(a){return S.categories.get(a)},async create(a){const l={...a,id:xa()};return await S.categories.add(l),l},async update(a,l){await S.categories.update(a,l)},async delete(a){await S.categories.delete(a)}},ct={async list(a={}){const l=await S.transactions.toArray(),c=await S.clients.toArray(),u=await S.projects.toArray(),d=await S.categories.toArray(),h=new Map(c.map(w=>[w.id,w.name])),b=new Map(u.map(w=>[w.id,w.name])),g=new Map(d.map(w=>[w.id,w.name])),p=Sp();let m=l.filter(w=>{if(w.deletedAt||a.dateFrom&&w.occurredAt<a.dateFrom||a.dateTo&&w.occurredAt>a.dateTo+"T23:59:59"||a.currency&&w.currency!==a.currency||a.kind&&w.kind!==a.kind||a.clientId&&w.clientId!==a.clientId||a.projectId&&w.projectId!==a.projectId)return!1;if(a.status){if(a.status==="overdue"){if(!(w.kind==="income"&&w.status==="unpaid"&&w.dueDate&&w.dueDate<p))return!1}else if(w.status!==a.status)return!1}if(a.search){const j=a.search.toLowerCase(),D=w.clientId?h.get(w.clientId):"",C=w.projectId?b.get(w.projectId):"";if(!(w.title?.toLowerCase().includes(j)||w.notes?.toLowerCase().includes(j)||D?.toLowerCase().includes(j)||C?.toLowerCase().includes(j)))return!1}return!0});const y=a.sort?.by||"occurredAt",x=a.sort?.dir||"desc";return m.sort((w,j)=>{const D=w[y],C=j[y];return typeof D=="string"&&typeof C=="string"?x==="asc"?D.localeCompare(C):C.localeCompare(D):typeof D=="number"&&typeof C=="number"?x==="asc"?D-C:C-D:0}),a.offset&&(m=m.slice(a.offset)),a.limit&&(m=m.slice(0,a.limit)),m.map(w=>({...w,clientName:w.clientId?h.get(w.clientId):void 0,projectName:w.projectId?b.get(w.projectId):void 0,categoryName:w.categoryId?g.get(w.categoryId):void 0}))},async get(a){return S.transactions.get(a)},async create(a){const l=we(),c={...a,id:xa(),createdAt:l,updatedAt:l};return await S.transactions.add(c),c},async update(a,l){const c=await S.transactions.get(a);if(c){if(c.lockedAt){const u=["archivedAt"];if(Object.keys(l).filter(h=>h!=="updatedAt"&&!u.includes(h)).length>0)throw new x1(`Transaction is locked by document ${c.lockedByDocumentId}. Only archive/unarchive is allowed.`,a,c.lockedByDocumentId)}await S.transactions.update(a,{...l,updatedAt:we()})}},async markPaid(a){const l=we();await S.transactions.update(a,{status:"paid",paidAt:l,updatedAt:l})},async softDelete(a){await S.transactions.update(a,{deletedAt:we(),updatedAt:we()})},async archive(a){const l=we();await S.transactions.update(a,{archivedAt:l,updatedAt:l})},async unarchive(a){await S.transactions.update(a,{archivedAt:void 0,updatedAt:we()})},async isLocked(a){return!!(await S.transactions.get(a))?.lockedAt},async getOverviewTotals(a){const l=await S.transactions.toArray(),c=wp(l,a);return y1(c)},async getOverviewTotalsByCurrency(a){const l=await S.transactions.toArray(),c=wp(l,{dateFrom:a.dateFrom,dateTo:a.dateTo});return mr(c)},async getAttentionReceivables(a){const l=Sp(),c=new Date;c.setDate(c.getDate()+7);const u=c.toISOString().split("T")[0];return(await this.list({kind:"income",currency:a.currency})).filter(h=>h.status!=="unpaid"||!h.dueDate?!1:h.dueDate<l||h.dueDate<=u).sort((h,b)=>(h.dueDate||"").localeCompare(b.dueDate||""))}},nh={async list(a){const l=await pn.list(),c=await S.clients.toArray(),u=await S.transactions.toArray(),d=g1(c),h=l.filter(b=>{if(a?.search){const g=a.search.toLowerCase(),p=b.clientId?d.get(b.clientId):"";if(!b.name.toLowerCase().includes(g)&&!p?.toLowerCase().includes(g))return!1}return!(a?.field&&b.field!==a.field)}).map(b=>{const g=hr(u,"project",b.id,a?.currency),p=pr(g);let m={};if(!a?.currency){const y=hr(u,"project",b.id),x=mr(y);m={paidIncomeMinorUSD:x.USD.paidIncomeMinor,paidIncomeMinorILS:x.ILS.paidIncomeMinor,paidIncomeMinorEUR:x.EUR.paidIncomeMinor,unpaidIncomeMinorUSD:x.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:x.ILS.unpaidIncomeMinor,unpaidIncomeMinorEUR:x.EUR.unpaidIncomeMinor,expensesMinorUSD:x.USD.expensesMinor,expensesMinorILS:x.ILS.expensesMinor,expensesMinorEUR:x.EUR.expensesMinor}}return{id:b.id,name:b.name,clientId:b.clientId,clientName:b.clientId?d.get(b.clientId):void 0,field:b.field,...p,netMinor:p.paidIncomeMinor-p.expensesMinor,...m}});return th(h)},async get(a,l){const c=await pn.get(a);if(!c)return;const u=c.clientId?await sn.get(c.clientId):void 0,d=await S.transactions.toArray(),h=$o(d,"project",a,l||{}),b=pr(h);let g={};if(!l?.currency){const p=$o(d,"project",a,{dateFrom:l?.dateFrom,dateTo:l?.dateTo}),m=mr(p);g={paidIncomeMinorUSD:m.USD.paidIncomeMinor,paidIncomeMinorILS:m.ILS.paidIncomeMinor,paidIncomeMinorEUR:m.EUR.paidIncomeMinor,unpaidIncomeMinorUSD:m.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:m.ILS.unpaidIncomeMinor,unpaidIncomeMinorEUR:m.EUR.unpaidIncomeMinor,expensesMinorUSD:m.USD.expensesMinor,expensesMinorILS:m.ILS.expensesMinor,expensesMinorEUR:m.EUR.expensesMinor}}return{id:c.id,name:c.name,clientId:c.clientId,clientName:u?.name,field:c.field,...b,netMinor:b.paidIncomeMinor-b.expensesMinor,...g}}},ah={async list(a){const l=await sn.list(),c=await S.projects.toArray(),u=await S.transactions.toArray(),d=l.filter(h=>{if(a?.search){const b=a.search.toLowerCase();if(!h.name.toLowerCase().includes(b))return!1}return!0}).map(h=>{const b=c.filter(y=>y.clientId===h.id&&!y.archivedAt),g=hr(u,"client",h.id,a?.currency),p=pr(g,{trackPayments:!0});let m={};if(!a?.currency){const y=hr(u,"client",h.id),x=mr(y);m={paidIncomeMinorUSD:x.USD.paidIncomeMinor,paidIncomeMinorILS:x.ILS.paidIncomeMinor,paidIncomeMinorEUR:x.EUR.paidIncomeMinor,unpaidIncomeMinorUSD:x.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:x.ILS.unpaidIncomeMinor,unpaidIncomeMinorEUR:x.EUR.unpaidIncomeMinor}}return{id:h.id,name:h.name,activeProjectCount:b.length,paidIncomeMinor:p.paidIncomeMinor,unpaidIncomeMinor:p.unpaidIncomeMinor,lastPaymentAt:p.lastPaymentAt,lastActivityAt:p.lastActivityAt,...m}});return th(d)},async get(a,l){const c=await sn.get(a);if(!c)return;const u=await S.projects.toArray(),d=await S.transactions.toArray(),h=u.filter(p=>p.clientId===a&&!p.archivedAt),b=$o(d,"client",a,l||{}),g=pr(b,{trackPayments:!0});return{id:c.id,name:c.name,activeProjectCount:h.length,paidIncomeMinor:g.paidIncomeMinor,unpaidIncomeMinor:g.unpaidIncomeMinor,lastPaymentAt:g.lastPaymentAt,lastActivityAt:g.lastActivityAt}}},dr={async list(){return S.fxRates.orderBy("effectiveDate").reverse().toArray()},async getLatest(a,l){const c=await S.fxRates.where("[baseCurrency+quoteCurrency]").equals([a,l]).sortBy("effectiveDate");return c[c.length-1]},async create(a){const l={...a,id:xa(),createdAt:we()};return await S.fxRates.add(l),l},async delete(a){await S.fxRates.delete(a)}},ih={async get(){const a=await S.settings.get("default");return a||{id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}},async update(a){const l=await this.get();await S.settings.put({...l,...a,id:"default"})}},nt={async list(a=!1){let l=S.businessProfiles.toCollection();return a||(l=S.businessProfiles.filter(c=>!c.archivedAt)),l.sortBy("name")},async get(a){return S.businessProfiles.get(a)},async getDefault(){return(await S.businessProfiles.filter(l=>l.isDefault&&!l.archivedAt).toArray())[0]},async create(a){const l=we();a.isDefault&&await S.businessProfiles.toCollection().modify({isDefault:!1});const c={...a,id:xa(),createdAt:l,updatedAt:l};return await S.businessProfiles.add(c),c},async update(a,l){l.isDefault&&await S.businessProfiles.toCollection().modify({isDefault:!1}),await S.businessProfiles.update(a,{...l,updatedAt:we()})},async setDefault(a){await S.businessProfiles.toCollection().modify({isDefault:!1}),await S.businessProfiles.update(a,{isDefault:!0,updatedAt:we()})},async archive(a){if((await this.get(a))?.isDefault){const c=await S.businessProfiles.filter(u=>u.id!==a&&!u.archivedAt).toArray();c.length>0&&await S.businessProfiles.update(c[0].id,{isDefault:!0})}await S.businessProfiles.update(a,{archivedAt:we(),updatedAt:we(),isDefault:!1})},async delete(a){await S.businessProfiles.delete(a)}},Po={invoice:"INV",receipt:"REC",invoice_receipt:"IR",credit_note:"CN",price_offer:"PO",proforma_invoice:"PI",donation_receipt:"DR"},Oi={async getNextNumber(a,l){const c=`${a}:${l}`;let u=await S.documentSequences.get(c);u||(u={id:c,businessProfileId:a,documentType:l,lastNumber:0,prefix:Po[l],prefixEnabled:!0,updatedAt:we()});const d=await S.documents.where("type").equals(l).filter(p=>!p.deletedAt).toArray();let h=u.lastNumber;for(const p of d){const m=p.number.match(/(\d+)$/);m&&(h=Math.max(h,parseInt(m[1],10)))}const b=h+1;u.lastNumber=b,u.updatedAt=we(),await S.documentSequences.put(u);const g=String(b).padStart(4,"0");return u.prefixEnabled?`${u.prefix}-${g}`:g},async get(a,l){return S.documentSequences.get(`${a}:${l}`)},async listByBusinessProfile(a){return S.documentSequences.where("businessProfileId").equals(a).toArray()},async update(a,l,c){const u=`${a}:${l}`;let d=await S.documentSequences.get(u);d||(d={id:u,businessProfileId:a,documentType:l,lastNumber:0,prefix:Po[l],prefixEnabled:!0,updatedAt:we()}),await S.documentSequences.put({...d,...c,updatedAt:we()})},async getOrCreate(a,l){const c=`${a}:${l}`;let u=await S.documentSequences.get(c);return u||(u={id:c,businessProfileId:a,documentType:l,lastNumber:0,prefix:Po[l],prefixEnabled:!0,updatedAt:we()},await S.documentSequences.put(u)),u}};class v1 extends Error{documentId;constructor(l,c){super(l),this.name="DocumentLockedError",this.documentId=c}}class Vo extends Error{number;suggestedNumber;constructor(l,c){super(`Document number ${l} already exists`),this.name="DuplicateDocumentNumberError",this.number=l,this.suggestedNumber=c}}class x1 extends Error{transactionId;lockedByDocumentId;constructor(l,c,u){super(l),this.name="TransactionLockedError",this.transactionId=c,this.lockedByDocumentId=u}}const jt={async list(a={}){const l=await S.documents.toArray(),c=await S.clients.toArray(),u=await S.businessProfiles.toArray(),d=new Map(c.map(m=>[m.id,m.name])),h=new Map(u.map(m=>[m.id,m.name]));let b=l.filter(m=>{if(m.deletedAt||!a.includeArchived&&m.archivedAt||a.dateFrom&&m.issueDate<a.dateFrom||a.dateTo&&m.issueDate>a.dateTo+"T23:59:59"||a.currency&&m.currency!==a.currency||a.type&&m.type!==a.type||a.status&&m.status!==a.status||a.businessProfileId&&m.businessProfileId!==a.businessProfileId||a.clientId&&m.clientId!==a.clientId)return!1;if(a.search){const y=a.search.toLowerCase(),x=m.clientId?d.get(m.clientId):"";if(!(m.number?.toLowerCase().includes(y)||m.subject?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||x?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"issueDate",p=a.sort?.dir||"desc";return b.sort((m,y)=>{const x=m[g],w=y[g];return typeof x=="string"&&typeof w=="string"?p==="asc"?x.localeCompare(w):w.localeCompare(x):typeof x=="number"&&typeof w=="number"?p==="asc"?x-w:w-x:0}),a.offset&&(b=b.slice(a.offset)),a.limit&&(b=b.slice(0,a.limit)),b.map(m=>({...m,clientName:m.clientId?d.get(m.clientId):void 0,businessProfileName:h.get(m.businessProfileId)}))},async get(a){return S.documents.get(a)},async getByNumber(a){return(await S.documents.where("number").equals(a).toArray())[0]},async isNumberTaken(a,l){return!!await S.documents.where("number").equals(a).filter(u=>!u.deletedAt&&u.id!==l).first()},async create(a){const l=we(),c=await Oi.getNextNumber(a.businessProfileId,a.type),u={...a,id:xa(),number:c,exportCount:0,createdAt:l,updatedAt:l};return await S.transaction("rw",S.documents,async()=>{if(await S.documents.where("[businessProfileId+type+number]").equals([u.businessProfileId,u.type,u.number]).filter(h=>!h.deletedAt).first()){const h=await Oi.getNextNumber(a.businessProfileId,a.type);throw new Vo(u.number,h)}await S.documents.add(u)}),u},async createWithNumber(a){const l=we(),c={...a,id:xa(),exportCount:a.exportCount??0,createdAt:l,updatedAt:l};return await S.transaction("rw",S.documents,async()=>{if(await S.documents.where("[businessProfileId+type+number]").equals([c.businessProfileId,c.type,c.number]).filter(d=>!d.deletedAt).first()){const d=await Oi.getNextNumber(a.businessProfileId,a.type);throw new Vo(c.number,d)}await S.documents.add(c)}),c},async getNextAvailableNumber(a,l){return Oi.getNextNumber(a,l)},async update(a,l){const c=await S.documents.get(a);if(c){if(c.lockedAt){const u=["archivedAt"];if(Object.keys(l).filter(h=>h!=="updatedAt"&&!u.includes(h)).length>0)throw new v1("Cannot modify locked document. Only archive/unarchive is allowed.",a)}l.number&&l.number!==c.number?await S.transaction("rw",S.documents,async()=>{if(await S.documents.where("[businessProfileId+type+number]").equals([c.businessProfileId,l.type||c.type,l.number]).filter(d=>!d.deletedAt&&d.id!==a).first())throw new Vo(l.number);await S.documents.update(a,{...l,updatedAt:we()})}):await S.documents.update(a,{...l,updatedAt:we()})}},async markPaid(a){const l=we();await S.documents.update(a,{status:"paid",paidAt:l,updatedAt:l})},async markVoided(a){await S.documents.update(a,{status:"voided",updatedAt:we()})},async markIssued(a){await S.documents.update(a,{status:"issued",updatedAt:we()})},async softDelete(a){await S.documents.update(a,{deletedAt:we(),updatedAt:we()})},async linkTransactions(a,l){const c=await this.get(a);if(!c)return;const u=new Set(c.linkedTransactionIds||[]);l.forEach(d=>u.add(d)),await this.update(a,{linkedTransactionIds:Array.from(u)});for(const d of l)await ct.update(d,{linkedDocumentId:a})},async unlinkTransaction(a,l){const c=await this.get(a);c&&(await this.update(a,{linkedTransactionIds:(c.linkedTransactionIds||[]).filter(u=>u!==l)}),await ct.update(l,{linkedDocumentId:void 0}))},async lockAfterExport(a,l){const c=we(),u=await this.get(a);if(!u)return;const d=!u.lockedAt,h={exportCount:(u.exportCount||0)+1,lastExportedAt:c};d&&(h.lockedAt=c),l&&(h.pdfSavedPath=l,h.pdfSavedAt=c),await S.documents.update(a,{...h,updatedAt:c}),d&&u.linkedTransactionIds&&u.linkedTransactionIds.length>0&&await S.transaction("rw",S.transactions,async()=>{for(const b of u.linkedTransactionIds)await S.transactions.update(b,{lockedAt:c,lockedByDocumentId:a,updatedAt:c})})},async isLocked(a){return!!(await this.get(a))?.lockedAt},async archive(a){const l=we();await S.documents.update(a,{archivedAt:l,updatedAt:l})},async unarchive(a){await S.documents.update(a,{archivedAt:void 0,updatedAt:we()})}};async function b1(){await S.settings.get("default")||(await S.settings.put({id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}),console.log("Database initialized with default settings"))}async function aS(){await S.transaction("rw",[S.transactions,S.projects,S.clients,S.categories,S.fxRates],async()=>{await S.transactions.clear(),await S.projects.clear(),await S.clients.clear(),await S.categories.clear(),await S.fxRates.clear()}),console.log("All data deleted (settings preserved)")}async function iS(){await S.transactions.clear(),await S.projects.clear(),await S.clients.clear(),await S.categories.clear(),await S.fxRates.clear(),await S.settings.clear(),console.log("Database cleared")}class ot{ts;counter;nodeId;constructor(l,c,u){this.nodeId=l,this.ts=c??Date.now(),this.counter=u??0}tick(){const l=Date.now();return l>this.ts?(this.ts=l,this.counter=0):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}receive(l){const c=Date.now();return c>this.ts&&c>l.ts?(this.ts=c,this.counter=0):this.ts===l.ts?this.counter=Math.max(this.counter,l.counter)+1:l.ts>this.ts?(this.ts=l.ts,this.counter=l.counter+1):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}now(){return{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}static compare(l,c){return l.ts!==c.ts?l.ts-c.ts:l.counter!==c.counter?l.counter-c.counter:l.nodeId.localeCompare(c.nodeId)}static lt(l,c){return ot.compare(l,c)<0}static lte(l,c){return ot.compare(l,c)<=0}static gt(l,c){return ot.compare(l,c)>0}static gte(l,c){return ot.compare(l,c)>=0}static eq(l,c){return l.ts===c.ts&&l.counter===c.counter&&l.nodeId===c.nodeId}static max(l,c){return ot.compare(l,c)>=0?l:c}static min(l,c){return ot.compare(l,c)<=0?l:c}static serialize(l){const c=l.ts.toString(36).padStart(11,"0"),u=l.counter.toString(36).padStart(5,"0"),d=l.nodeId.slice(0,8).padEnd(8,"0");return`${c}-${u}-${d}`}static parse(l){const c=l.split("-");if(c.length<3)throw new Error(`Invalid HLC string: ${l}`);return{ts:parseInt(c[0],36),counter:parseInt(c[1],36),nodeId:c.slice(2).join("-")}}static zero(){return{ts:0,counter:0,nodeId:""}}static zeroString(){return ot.serialize(ot.zero())}static isZero(l){return l.ts===0&&l.counter===0&&l.nodeId===""}static toDate(l){return new Date(l.ts)}static fromDate(l,c){return{ts:l.getTime(),counter:0,nodeId:c}}}let Wo=null;function w1(a){Wo=new ot(a)}function lh(){if(!Wo)throw new Error("HLC not initialized. Call initializeClock() first.");return Wo}function S1(){return lh().tick()}function j1(a){return lh().receive(a)}let Ha=null;async function sh(){if(Ha)return Ha;const a=await S.localDevice.toArray();if(a.length>0)return Ha=a[0],Ha;const l={id:crypto.randomUUID(),name:await A1(),type:rh(),publicKey:"",privateKey:"",createdAt:new Date().toISOString()};return await S.localDevice.add(l),Ha=l,l}function ba(){if(!Ha)throw new Error("Local device not initialized. Call getOrCreateLocalDevice() first.");return Ha}function rh(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window?"desktop":"web"}async function A1(){const a=rh(),l=navigator.platform||"Unknown";if(a==="desktop")try{const{invoke:c}=await Ce(async()=>{const{invoke:d}=await import("./core-BEOw45JP.js");return{invoke:d}},[]);return await c("get_hostname")||`Desktop (${l})`}catch{return`Desktop (${l})`}return`Web Browser (${l})`}async function Hl(a){const l=ba(),c=S1(),u={id:crypto.randomUUID(),hlc:ot.serialize(c),entityType:a.entityType,entityId:a.entityId,opType:a.opType,field:a.field,value:a.value,previousValue:a.previousValue,createdBy:l.id,createdAt:new Date().toISOString(),appliedAt:new Date().toISOString()};if(await S.opLog.add(u),a.field&&a.opType==="update"&&await eu(a.entityType,a.entityId,a.field,c,a.value,l.id),typeof window<"u"&&"__TAURI_INTERNALS__"in window)try{const{invoke:d}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]);await d("store_local_sync_op",{op:u}),console.log("[OpsEngine] Stored op for mobile sync:",u.id)}catch(d){console.error("[OpsEngine] Failed to store op in Rust:",d)}return u}async function ou(a){if(await S.opLog.get(a.id))return{applied:!1,skipped:!0,reason:"already_applied"};const c=ot.parse(a.hlc);j1(c);let u;return a.entityType==="transaction"&&a.opType==="update"?u=await N1(a):a.opType==="update"&&a.field?u=await D1(a):u=await ch(a),await S.opLog.add({...a,appliedAt:new Date().toISOString()}),u}async function D1(a){const l=ot.parse(a.hlc),c=await S.entityFieldMeta.where("[entityType+entityId+field]").equals([a.entityType,a.entityId,a.field]).first();if(c){const u=ot.parse(c.hlc);if(ot.lte(l,u))return{applied:!1,reason:"lww_local_wins"};const d=ba();if(c.updatedBy===d.id&&c.updatedBy!==a.createdBy){const h=await O1(a,c);return await yr(a),await eu(a.entityType,a.entityId,a.field,l,a.value,a.createdBy),{applied:!0,conflict:h}}}return await yr(a),await eu(a.entityType,a.entityId,a.field,l,a.value,a.createdBy),{applied:!0}}async function N1(a){const l=await S.transactions.get(a.entityId);if(!l)return ch(a);const c=ba(),u=ot.parse(a.hlc);if((await S.moneyEventVersions.where("transactionId").equals(a.entityId).toArray()).some(b=>b.createdBy===c.id)){const b=await U1(a,l);return await jp(a.entityId,l,u,a.createdBy,!1),await yr(a),{applied:!0,conflict:b}}return await jp(a.entityId,l,u,a.createdBy,!1),await yr(a),{applied:!0}}async function ch(a){switch(a.opType){case"create":await M1(a);break;case"delete":await C1(a);break;case"archive":await E1(a);break;case"unarchive":await T1(a);break;case"mark_paid":await I1(a);break;case"resolve_conflict":await R1(a);break;case"set_active_version":await _1(a);break;default:console.warn(`Unknown op type: ${a.opType}`)}return{applied:!0}}async function M1(a){const l=a.value;switch(a.entityType){case"client":await S.clients.put(l);break;case"project":await S.projects.put(l);break;case"transaction":await S.transactions.put(l);break;case"category":await S.categories.put(l);break;case"fxRate":await S.fxRates.put(l);break;case"document":await S.documents.put(l);break;case"businessProfile":await S.businessProfiles.put(l);break}}async function yr(a){if(!a.field)return;const l=br(a.entityType);await l.get(a.entityId)&&await l.update(a.entityId,{[a.field]:a.value,updatedAt:new Date().toISOString()})}async function C1(a){const l=br(a.entityType);a.entityType==="transaction"||a.entityType==="document"?await l.update(a.entityId,{deletedAt:new Date().toISOString()}):await l.delete(a.entityId)}async function E1(a){await br(a.entityType).update(a.entityId,{archivedAt:a.value,updatedAt:new Date().toISOString()})}async function T1(a){await br(a.entityType).update(a.entityId,{archivedAt:void 0,updatedAt:new Date().toISOString()})}async function I1(a){a.entityType==="transaction"?await S.transactions.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()}):a.entityType==="document"&&await S.documents.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()})}async function R1(a){const l=a.value;await S.conflictQueue.update(l.conflictId,{status:"resolved",resolution:l.resolution,resolvedAt:new Date().toISOString(),resolutionOpId:a.id})}async function _1(a){const{transactionId:l,versionId:c}=a.value;await S.moneyEventVersions.where("transactionId").equals(l).modify({isActive:!1}),await S.moneyEventVersions.update(c,{isActive:!0});const u=await S.moneyEventVersions.get(c);u&&await S.transactions.put(u.data)}function br(a){switch(a){case"client":return S.clients;case"project":return S.projects;case"transaction":return S.transactions;case"category":return S.categories;case"fxRate":return S.fxRates;case"document":return S.documents;case"businessProfile":return S.businessProfiles;default:throw new Error(`Unknown entity type: ${a}`)}}async function eu(a,l,c,u,d,h){const b={entityType:a,entityId:l,field:c,hlc:ot.serialize(u),value:d,updatedBy:h};await S.entityFieldMeta.put(b)}async function O1(a,l){const c=ba(),u=await S.opLog.where("[entityType+entityId]").equals([a.entityType,a.entityId]).filter(b=>b.field===a.field&&b.createdBy===c.id).last(),d=await oh(a.createdBy),h={id:crypto.randomUUID(),entityType:a.entityType,entityId:a.entityId,conflictType:"profile_field",field:a.field,localOp:u,remoteOp:a,localValue:l.value,remoteValue:a.value,localDeviceName:c.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await S.conflictQueue.add(h),h}async function U1(a,l,c){const u=ba(),d=await oh(a.createdBy),h=await S.opLog.where("[entityType+entityId]").equals(["transaction",a.entityId]).filter(g=>g.createdBy===u.id).last(),b={id:crypto.randomUUID(),entityType:"transaction",entityId:a.entityId,conflictType:"money_event_version",localOp:h,remoteOp:a,localValue:l,remoteValue:a.value,localDeviceName:u.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await S.conflictQueue.add(b),b}async function jp(a,l,c,u,d){const h=await S.moneyEventVersions.where("transactionId").equals(a).count(),b={id:crypto.randomUUID(),transactionId:a,version:h+1,hlc:ot.serialize(c),data:l,isActive:d,createdBy:u,createdAt:new Date().toISOString()};return await S.moneyEventVersions.add(b),b}async function oh(a){return(await S.trustedPeers.get(a))?.name||"Unknown Device"}async function L1(a){const l=[...a].sort((h,b)=>h.hlc.localeCompare(b.hlc));let c=0,u=0;const d=[];for(const h of l){const b=await ou(h);b.applied?c++:b.skipped&&u++,b.conflict&&d.push(b.conflict)}return{applied:c,skipped:u,conflicts:d}}async function uh(a){const l=ba();return S.opLog.where("hlc").above(a).filter(c=>c.createdBy===l.id).sortBy("hlc")}const z1=Object.freeze(Object.defineProperty({__proto__:null,applyOp:ou,applyOps:L1,captureOp:Hl,getLocalDevice:ba,getLocalOpsSince:uh,getOrCreateLocalDevice:sh},Symbol.toStringTag,{value:"Module"}));async function k1(a,l){await Hl({entityType:a,entityId:l.id,opType:"create",value:l})}async function Qo(a,l,c,u){for(const[d,h]of Object.entries(c))d==="id"||d==="createdAt"||await Hl({entityType:a,entityId:l,opType:"update",field:d,value:h,previousValue:u?u[d]:void 0})}async function B1(a,l){await Hl({entityType:a,entityId:l,opType:"delete"})}async function q1(a,l){await Hl({entityType:a,entityId:l,opType:"archive",value:new Date().toISOString()})}sn.list.bind(sn),sn.get.bind(sn);pn.list.bind(pn),pn.get.bind(pn);ct.list.bind(ct),ct.get.bind(ct),ct.getOverviewTotals.bind(ct),ct.getOverviewTotalsByCurrency.bind(ct),ct.getAttentionReceivables.bind(ct);ur.list.bind(ur),ur.get.bind(ur);dr.list.bind(dr),dr.getLatest.bind(dr);const H1={list:nt.list.bind(nt),get:nt.get.bind(nt),getDefault:nt.getDefault.bind(nt),async create(a){const l=await nt.create(a);return await k1("businessProfile",l),l},async update(a,l){const c=await nt.get(a);await nt.update(a,l),await Qo("businessProfile",a,l,c)},async setDefault(a){const c=(await nt.list()).find(d=>d.isDefault);await nt.setDefault(a),c&&c.id!==a&&await Qo("businessProfile",c.id,{isDefault:!1},c);const u=await nt.get(a);u&&await Qo("businessProfile",a,{isDefault:!0},{...u,isDefault:!1})},async archive(a){await nt.archive(a),await q1("businessProfile",a)},async delete(a){await nt.delete(a),await B1("businessProfile",a)}};jt.list.bind(jt),jt.get.bind(jt),jt.getByNumber.bind(jt);function Bi(a){a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]}),a.invalidateQueries({queryKey:["overviewTotals"]}),a.invalidateQueries({queryKey:["overviewTotalsByCurrency"]}),a.invalidateQueries({queryKey:["attentionReceivables"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}const dt={transactions:a=>["transactions",a],transaction:a=>["transaction",a],overviewTotals:(a,l,c)=>["overviewTotals",{dateFrom:a,dateTo:l,currency:c}],overviewTotalsByCurrency:(a,l)=>["overviewTotalsByCurrency",{dateFrom:a,dateTo:l}],attentionReceivables:a=>["attentionReceivables",{currency:a}],clients:()=>["clients"],client:a=>["client",a],clientSummaries:(a,l)=>["clientSummaries",{currency:a,search:l}],clientSummary:(a,l,c,u)=>["clientSummary",a,{dateFrom:l,dateTo:c,currency:u}],projects:a=>["projects",{clientId:a}],project:a=>["project",a],projectSummaries:(a,l,c)=>["projectSummaries",{currency:a,search:l,field:c}],projectSummary:(a,l,c,u)=>["projectSummary",a,{dateFrom:l,dateTo:c,currency:u}],categories:a=>["categories",{kind:a}],settings:()=>["settings"],fxRate:(a,l)=>["fxRate",a,l],documents:a=>["documents",a],document:a=>["document",a],documentSequences:a=>["documentSequences",a],businessProfiles:()=>["businessProfiles"],businessProfile:a=>["businessProfile",a],defaultBusinessProfile:()=>["defaultBusinessProfile"]};function dh(a){return pe({queryKey:dt.transactions(a),queryFn:()=>ct.list(a)})}function Ap(a){return pe({queryKey:dt.transaction(a),queryFn:()=>ct.get(a),enabled:!!a})}function P1(a,l){return pe({queryKey:dt.overviewTotalsByCurrency(a,l),queryFn:()=>ct.getOverviewTotalsByCurrency({dateFrom:a,dateTo:l})})}function V1(a){return pe({queryKey:dt.attentionReceivables(a),queryFn:()=>ct.getAttentionReceivables({currency:a})})}function Q1(){const a=se();return re({mutationFn:l=>ct.create(l),onSuccess:()=>Bi(a)})}function Y1(){const a=se();return re({mutationFn:({id:l,data:c})=>ct.update(l,c),onSuccess:()=>Bi(a)})}function K1(){const a=se();return re({mutationFn:l=>ct.markPaid(l),onSuccess:()=>Bi(a)})}function F1(){const a=se();return re({mutationFn:l=>ct.softDelete(l),onSuccess:()=>Bi(a)})}function wr(){return pe({queryKey:dt.clients(),queryFn:()=>sn.list()})}function G1(a){return pe({queryKey:dt.client(a),queryFn:()=>sn.get(a),enabled:!!a})}function lS(a,l){return pe({queryKey:dt.clientSummaries(a,l),queryFn:()=>ah.list({currency:a,search:l})})}function sS(a,l){return pe({queryKey:dt.clientSummary(a,l?.dateFrom,l?.dateTo,l?.currency),queryFn:()=>ah.get(a,l),enabled:!!a})}function Z1(){const a=se();return re({mutationFn:l=>sn.create(l),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function X1(){const a=se();return re({mutationFn:({id:l,data:c})=>sn.update(l,c),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["client"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}})}function J1(){const a=se();return re({mutationFn:l=>sn.archive(l),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function fh(a){return pe({queryKey:dt.projects(a),queryFn:()=>pn.list({clientId:a})})}function $1(a){return pe({queryKey:dt.project(a),queryFn:()=>pn.get(a),enabled:!!a})}function rS(a,l,c){return pe({queryKey:dt.projectSummaries(a,l,c),queryFn:()=>nh.list({currency:a,search:l,field:c})})}function cS(a,l){return pe({queryKey:dt.projectSummary(a,l?.dateFrom,l?.dateTo,l?.currency),queryFn:()=>nh.get(a,l),enabled:!!a})}function W1(){const a=se();return re({mutationFn:l=>pn.create(l),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function ex(){const a=se();return re({mutationFn:({id:l,data:c})=>pn.update(l,c),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["project"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]})}})}function tx(){const a=se();return re({mutationFn:l=>pn.archive(l),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function oS(){return pe({queryKey:dt.settings(),queryFn:()=>ih.get()})}function uS(){const a=se();return re({mutationFn:ih.update,onSuccess:()=>{a.invalidateQueries({queryKey:["settings"]})}})}function wa(a){a.invalidateQueries({queryKey:["documents"]}),a.invalidateQueries({queryKey:["document"]})}function nx(a){return pe({queryKey:dt.documents(a),queryFn:()=>jt.list(a)})}function Dp(a){return pe({queryKey:dt.document(a),queryFn:()=>jt.get(a),enabled:!!a})}function ax(){const a=se();return re({mutationFn:l=>jt.create(l),onSuccess:()=>{wa(a),Bi(a)}})}function ix(){const a=se();return re({mutationFn:({id:l,data:c})=>jt.update(l,c),onSuccess:()=>wa(a)})}function dS(){const a=se();return re({mutationFn:l=>jt.markPaid(l),onSuccess:()=>{wa(a),Bi(a)}})}function lx(){const a=se();return re({mutationFn:l=>jt.markVoided(l),onSuccess:()=>wa(a)})}function fS(){const a=se();return re({mutationFn:l=>jt.markIssued(l),onSuccess:()=>wa(a)})}function sx(){const a=se();return re({mutationFn:l=>jt.softDelete(l),onSuccess:()=>wa(a)})}function mS(){const a=se();return re({mutationFn:l=>jt.archive(l),onSuccess:()=>wa(a)})}function pS(){const a=se();return re({mutationFn:l=>jt.unarchive(l),onSuccess:()=>wa(a)})}function Sr(a){a.invalidateQueries({queryKey:["businessProfiles"]}),a.invalidateQueries({queryKey:["businessProfile"]}),a.invalidateQueries({queryKey:["defaultBusinessProfile"]})}function Pl(){return pe({queryKey:dt.businessProfiles(),queryFn:()=>nt.list()})}function rx(a){return pe({queryKey:dt.businessProfile(a),queryFn:()=>nt.get(a),enabled:!!a})}function mh(){return pe({queryKey:dt.defaultBusinessProfile(),queryFn:()=>nt.getDefault()})}function ph(){const a=se();return re({mutationFn:l=>nt.create(l),onSuccess:()=>Sr(a)})}function cx(){const a=se();return re({mutationFn:({id:l,data:c})=>nt.update(l,c),onSuccess:()=>Sr(a)})}function ox(){const a=se();return re({mutationFn:l=>nt.setDefault(l),onSuccess:()=>Sr(a)})}function ux(){const a=se();return re({mutationFn:l=>H1.archive(l),onSuccess:()=>Sr(a)})}function hS(a){return pe({queryKey:dt.documentSequences(a),queryFn:()=>Oi.listByBusinessProfile(a),enabled:!!a})}function yS(){const a=se();return re({mutationFn:({businessProfileId:l,documentType:c,updates:u})=>Oi.update(l,c,u),onSuccess:()=>{a.invalidateQueries({queryKey:["documentSequences"]})}})}const Np=a=>{let l;const c=new Set,u=(m,y)=>{const x=typeof m=="function"?m(l):m;if(!Object.is(x,l)){const w=l;l=y??(typeof x!="object"||x===null)?x:Object.assign({},l,x),c.forEach(j=>j(l,w))}},d=()=>l,g={setState:u,getState:d,getInitialState:()=>p,subscribe:m=>(c.add(m),()=>c.delete(m))},p=l=a(u,d,g);return g},dx=(a=>a?Np(a):Np),fx=a=>a;function mx(a,l=fx){const c=Ye.useSyncExternalStore(a.subscribe,Ye.useCallback(()=>l(a.getState()),[a,l]),Ye.useCallback(()=>l(a.getInitialState()),[a,l]));return Ye.useDebugValue(c),c}const Mp=a=>{const l=dx(a),c=u=>mx(l,u);return Object.assign(c,l),c},jr=(a=>a?Mp(a):Mp),ht=jr(a=>({transactionDrawer:{isOpen:!1,mode:"create"},openTransactionDrawer:l=>a({transactionDrawer:{isOpen:!0,mode:l?.mode||"create",transactionId:l?.transactionId,defaultKind:l?.defaultKind,defaultClientId:l?.defaultClientId,defaultProjectId:l?.defaultProjectId,duplicateFromId:l?.duplicateFromId}}),closeTransactionDrawer:()=>a({transactionDrawer:{isOpen:!1,mode:"create"}}),clientDrawer:{isOpen:!1,mode:"create"},openClientDrawer:l=>a({clientDrawer:{isOpen:!0,mode:l?.mode||"create",clientId:l?.clientId}}),closeClientDrawer:()=>a({clientDrawer:{isOpen:!1,mode:"create"}}),projectDrawer:{isOpen:!1,mode:"create"},openProjectDrawer:l=>a({projectDrawer:{isOpen:!0,mode:l?.mode||"create",projectId:l?.projectId,defaultClientId:l?.defaultClientId}}),closeProjectDrawer:()=>a({projectDrawer:{isOpen:!1,mode:"create"}}),documentDrawer:{isOpen:!1,mode:"create"},openDocumentDrawer:l=>a({documentDrawer:{isOpen:!0,mode:l?.mode||"create",documentId:l?.documentId,defaultType:l?.defaultType,defaultClientId:l?.defaultClientId,defaultBusinessProfileId:l?.defaultBusinessProfileId,refDocumentId:l?.refDocumentId}}),closeDocumentDrawer:()=>a({documentDrawer:{isOpen:!1,mode:"create"}}),businessProfileDrawer:{isOpen:!1,mode:"create"},openBusinessProfileDrawer:l=>a({businessProfileDrawer:{isOpen:!0,mode:l?.mode||"create",profileId:l?.profileId}}),closeBusinessProfileDrawer:()=>a({businessProfileDrawer:{isOpen:!1,mode:"create"}}),expenseDrawer:{isOpen:!1,mode:"create"},openExpenseDrawer:l=>a({expenseDrawer:{isOpen:!0,mode:l?.mode||"create",expenseId:l?.expenseId,recurringRuleId:l?.recurringRuleId,defaultProfileId:l?.defaultProfileId,isRecurring:l?.isRecurring,prefillData:l?.prefillData,linkReceiptId:l?.linkReceiptId}}),closeExpenseDrawer:()=>a({expenseDrawer:{isOpen:!1,mode:"create"}}),retainerDrawer:{isOpen:!1,mode:"create"},openRetainerDrawer:l=>a({retainerDrawer:{isOpen:!0,mode:l?.mode||"create",retainerId:l?.retainerId,defaultProfileId:l?.defaultProfileId,defaultClientId:l?.defaultClientId,defaultProjectId:l?.defaultProjectId}}),closeRetainerDrawer:()=>a({retainerDrawer:{isOpen:!1,mode:"create"}}),retainerMatchingDrawer:{isOpen:!1,step:"select-transaction"},openRetainerMatchingDrawer:l=>a({retainerMatchingDrawer:{isOpen:!0,step:l?.step||"select-transaction",transactionId:l?.transactionId,projectedIncomeId:l?.projectedIncomeId}}),closeRetainerMatchingDrawer:()=>a({retainerMatchingDrawer:{isOpen:!1,step:"select-transaction",transactionId:void 0,projectedIncomeId:void 0}}),setRetainerMatchingStep:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,step:l}})),setRetainerMatchingTransaction:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,transactionId:l,step:"select-projected"}})),setRetainerMatchingProjectedIncome:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,projectedIncomeId:l}})),selectedRetainerId:void 0,selectRetainer:l=>a({selectedRetainerId:l}),dayDetailDrawer:{isOpen:!1},openDayDetailDrawer:l=>a({dayDetailDrawer:{isOpen:!0,date:l.date}}),closeDayDetailDrawer:()=>a({dayDetailDrawer:{isOpen:!1,date:void 0}})}));jr(a=>({currency:void 0,setCurrency:l=>a({currency:l})}));function px({collapsed:a=!1}){const l=Ze(),[c,u]=_.useState(!1),d=_.useRef(null),{data:h=[],isLoading:b}=Pl(),{data:g,isLoading:p}=mh(),m=ox(),{openBusinessProfileDrawer:y}=ht(),x=b||p;_.useEffect(()=>{function C(O){d.current&&!d.current.contains(O.target)&&u(!1)}return c&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[c]),_.useEffect(()=>{function C(O){O.key==="Escape"&&u(!1)}return c&&document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[c]);const w=C=>{m.mutate(C),u(!1)},j=()=>{y({mode:"create"}),u(!1)};if(x)return s.jsx("div",{className:"profile-switcher profile-switcher-loading",children:s.jsx("div",{className:"profile-switcher-skeleton"})});if(h.length===0)return s.jsxs("button",{className:`profile-switcher profile-switcher-empty ${a?"collapsed":""}`,onClick:j,title:a?l("profileSwitcher.setUpBusiness"):void 0,children:[s.jsx("div",{className:"profile-switcher-avatar profile-switcher-avatar-empty",children:s.jsx(Ep,{})}),!a&&s.jsx("span",{className:"profile-switcher-name",children:l("profileSwitcher.setUpBusiness")})]});const D=g||h[0];return s.jsxs("div",{className:`profile-switcher-container ${a?"collapsed":""}`,ref:d,children:[s.jsxs("button",{className:`profile-switcher ${a?"collapsed":""}`,onClick:()=>u(!c),"aria-expanded":c,"aria-haspopup":"listbox",title:a?D.name:void 0,children:[s.jsx(Cp,{profile:D}),!a&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"profile-switcher-name",children:D.name}),s.jsx(hx,{className:c?"rotated":""})]})]}),c&&s.jsxs("div",{className:`profile-switcher-dropdown ${a?"collapsed-dropdown":""}`,role:"listbox",children:[s.jsx("div",{className:"profile-switcher-list",children:h.map(C=>s.jsxs("button",{className:`profile-switcher-option ${C.id===D.id?"active":""}`,onClick:()=>w(C.id),role:"option","aria-selected":C.id===D.id,children:[s.jsx(Cp,{profile:C,size:"small"}),s.jsxs("span",{className:"profile-switcher-option-name",children:[C.name,C.nameEn&&s.jsx("span",{className:"profile-switcher-option-name-en",children:C.nameEn})]}),C.id===D.id&&s.jsx(yx,{className:"profile-switcher-check"})]},C.id))}),s.jsx("div",{className:"profile-switcher-divider"}),s.jsxs("button",{className:"profile-switcher-action",onClick:j,children:[s.jsx(Ep,{}),l("profileSwitcher.addProfile")]}),s.jsxs(kl,{to:"/settings",className:"profile-switcher-action",onClick:()=>u(!1),children:[s.jsx(gx,{}),l("profileSwitcher.manageProfiles")]})]})]})}function Cp({profile:a,size:l="medium"}){const c=l==="small"?"profile-switcher-avatar-sm":"";if(a.logoDataUrl)return s.jsx("img",{src:a.logoDataUrl,alt:"",className:`profile-switcher-avatar ${c}`});const u=a.name.split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase();return s.jsx("div",{className:`profile-switcher-avatar profile-switcher-avatar-initials ${c}`,style:{backgroundColor:a.primaryColor||"var(--color-accent)"},children:u})}function hx({className:a}){return s.jsx("svg",{className:`profile-switcher-chevron ${a||""}`,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})}function yx({className:a}){return s.jsx("svg",{className:a,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function Ep(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function gx(){return s.jsxs("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}const Tp="sidebarCollapsed";function vx(){const[a,l]=_.useState(()=>{try{return localStorage.getItem(Tp)==="1"}catch{return!1}}),c=_.useCallback(()=>{l(u=>{const d=!u;try{localStorage.setItem(Tp,d?"1":"0")}catch{}return d})},[]);return[a,c]}const xx=[{key:"work",labelKey:"nav.sections.work",items:[{path:"/",labelKey:"nav.overview",icon:jx,exact:!0},{path:"/projects",labelKey:"nav.projects",icon:Ax},{path:"/clients",labelKey:"nav.clients",icon:hh},{path:"/engagements",labelKey:"nav.engagements",icon:xh}]},{key:"money",labelKey:"nav.sections.money",items:[{path:"/transactions",labelKey:"nav.transactions",icon:yh},{path:"/documents",labelKey:"nav.documents",icon:gh},{path:"/retainers",labelKey:"nav.retainers",icon:Mx},{path:"/money-answers",labelKey:"nav.moneyAnswers",icon:Ix},{path:"/expenses",labelKey:"nav.expenses",icon:vh},{path:"/reports",labelKey:"nav.reports",icon:Dx}]}],bx=[{path:"/download",labelKey:"nav.download",icon:Nx},{path:"/settings",labelKey:"nav.settings",icon:Cx,badge:"hasUpdate"}],wx=[{key:"document",labelKey:"nav.newMenu.document",icon:gh},{key:"engagement",labelKey:"nav.newMenu.engagement",icon:xh},{key:"transaction",labelKey:"nav.newMenu.transaction",icon:yh},{key:"client",labelKey:"nav.newMenu.client",icon:hh},{key:"expense",labelKey:"nav.newMenu.expense",icon:vh}];function Sx(){const a=Sv(),l=ru(),c=Ze(),{hasUpdate:u}=p1(),[d,h]=vx(),[b,g]=_.useState(!1),p=_.useRef(null),m=_.useRef(null),y=ht(k=>k.openDocumentDrawer),x=ht(k=>k.openTransactionDrawer),w=ht(k=>k.openClientDrawer),j=ht(k=>k.openExpenseDrawer);_.useEffect(()=>{if(!b)return;function k(P){p.current&&!p.current.contains(P.target)&&m.current&&!m.current.contains(P.target)&&g(!1)}function T(P){P.key==="Escape"&&(g(!1),m.current?.focus())}return document.addEventListener("mousedown",k),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("keydown",T)}},[b]);const D=k=>k.exact?a.pathname===k.path:a.pathname===k.path||a.pathname.startsWith(k.path+"/"),C=k=>{switch(g(!1),k){case"document":y({mode:"create"}),l({to:"/documents"});break;case"engagement":l({to:"/engagements/new"});break;case"transaction":x({mode:"create",defaultKind:"income"});break;case"client":w({mode:"create"});break;case"expense":j({mode:"create"}),l({to:"/expenses"});break}},O=(k,T=!1)=>{const P=k.icon,Y=D(k),X=T&&k.badge==="hasUpdate"&&u;return s.jsxs(kl,{to:k.path,className:ue("nav-item",Y&&"active"),"aria-current":Y?"page":void 0,title:d?c(k.labelKey):void 0,children:[Y&&s.jsx("span",{className:"nav-item-rail","aria-hidden":"true"}),s.jsxs("span",{className:"nav-item-icon-wrapper",children:[s.jsx(P,{className:"nav-icon"}),d&&X&&s.jsx("span",{className:"nav-item-dot","aria-label":c("settings.updates.updateAvailable")})]}),!d&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"nav-item-label",children:c(k.labelKey)}),X&&s.jsx("span",{className:"update-indicator"})]})]},k.path)},z=k=>s.jsxs("div",{className:"nav-section",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c(k.labelKey)}),s.jsx("div",{className:"nav-section-items",children:k.items.map(T=>O(T))})]},k.key);return s.jsxs("aside",{className:ue("sidebar",d&&"collapsed"),children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsxs(kl,{to:"/",className:"brand","aria-label":"",children:[s.jsx("img",{className:"brand-mark",src:"/icons/icon-512.png",srcSet:"/icons/icon-512.png 1x, /icons/icon-1024.png 2x",alt:"",width:28,height:28,loading:"eager",decoding:"async"}),!d&&s.jsx("span",{className:"brand-name",lang:"ar",dir:"rtl",children:""})]}),s.jsx("button",{type:"button",className:"sidebar-collapse-toggle",onClick:h,"aria-label":c(d?"nav.expand":"nav.collapse"),title:c(d?"nav.expand":"nav.collapse"),children:s.jsx(Ex,{className:ue("nav-icon",d&&"rotated")})})]}),s.jsx("div",{className:"sidebar-profile",children:s.jsx(px,{collapsed:d})}),s.jsxs("div",{className:"new-action-section",children:[s.jsxs("button",{ref:m,type:"button",className:ue("new-action-btn",b&&"active"),onClick:()=>g(!b),title:d?c("nav.new"):void 0,"aria-expanded":b,"aria-haspopup":"menu",children:[s.jsx(Tx,{className:"nav-icon"}),!d&&s.jsx("span",{className:"new-action-label",children:c("nav.new")})]}),b&&s.jsx("div",{ref:p,className:ue("new-action-menu",d&&"collapsed-menu"),role:"menu",children:wx.map(k=>{const T=k.icon;return s.jsxs("button",{type:"button",className:"new-action-menu-item",role:"menuitem",onClick:()=>C(k.key),children:[s.jsx(T,{className:"nav-icon"}),s.jsx("span",{children:c(k.labelKey)})]},k.key)})})]}),s.jsx("nav",{className:"sidebar-nav",children:xx.map(z)}),s.jsxs("div",{className:"sidebar-footer",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c("nav.sections.system")}),bx.map(k=>O(k,!0))]}),d&&s.jsx("button",{type:"button",className:"sidebar-expand-toggle",onClick:h,"aria-label":c("nav.expand"),title:c("nav.expand"),children:s.jsx(Rx,{className:"nav-icon"})})]})}function jx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}function Ax({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function hh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})})}function yh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}function Dx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})})}function gh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function vh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})})}function Nx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}function Mx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})}function Cx({className:a}){return s.jsxs("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}function Ex({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}function Tx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function Ix({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})})}function xh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})})}function Rx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})})}const Ip=(a,l,c)=>{if(a&&"reportValidity"in a){const u=Go(c,l);a.setCustomValidity(u&&u.message||""),a.reportValidity()}},tu=(a,l)=>{for(const c in l.fields){const u=l.fields[c];u&&u.ref&&"reportValidity"in u.ref?Ip(u.ref,c,a):u&&u.refs&&u.refs.forEach(d=>Ip(d,c,a))}},Rp=(a,l)=>{l.shouldUseNativeValidation&&tu(a,l);const c={};for(const u in a){const d=Go(l.fields,u),h=Object.assign(a[u]||{},{ref:d&&d.ref});if(_x(l.names||Object.keys(a),u)){const b=Object.assign({},Go(c,u));zo(b,"root",h),zo(c,u,b)}else zo(c,u,h)}return c},_x=(a,l)=>{const c=_p(l);return a.some(u=>_p(u).match(`^${c}\\.\\d+`))};function _p(a){return a.replace(/\]|\[/g,"")}function Op(a,l){try{var c=a()}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}function Ox(a,l){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,b=u.path.join(".");if(!c[b])if("unionErrors"in u){var g=u.unionErrors[0].errors[0];c[b]={message:g.message,type:g.code}}else c[b]={message:h,type:d};if("unionErrors"in u&&u.unionErrors.forEach(function(y){return y.errors.forEach(function(x){return a.push(x)})}),l){var p=c[b].types,m=p&&p[u.code];c[b]=Xp(b,l,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Ux(a,l){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,b=u.path.join(".");if(!c[b])if(u.code==="invalid_union"&&u.errors.length>0){var g=u.errors[0][0];c[b]={message:g.message,type:g.code}}else c[b]={message:h,type:d};if(u.code==="invalid_union"&&u.errors.forEach(function(y){return y.forEach(function(x){return a.push(x)})}),l){var p=c[b].types,m=p&&p[u.code];c[b]=Xp(b,l,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Ya(a,l,c){if(c===void 0&&(c={}),(function(u){return"_def"in u&&typeof u._def=="object"&&"typeName"in u._def})(a))return function(u,d,h){try{return Promise.resolve(Op(function(){return Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](u,l)).then(function(b){return h.shouldUseNativeValidation&&tu({},h),{errors:{},values:c.raw?Object.assign({},u):b}})},function(b){if((function(g){return Array.isArray(g?.issues)})(b))return{values:{},errors:Rp(Ox(b.errors,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw b}))}catch(b){return Promise.reject(b)}};if((function(u){return"_zod"in u&&typeof u._zod=="object"})(a))return function(u,d,h){try{return Promise.resolve(Op(function(){return Promise.resolve((c.mode==="sync"?Rv:_v)(a,u,l)).then(function(b){return h.shouldUseNativeValidation&&tu({},h),{errors:{},values:c.raw?Object.assign({},u):b}})},function(b){if((function(g){return g instanceof Ov})(b))return{values:{},errors:Rp(Ux(b.issues,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw b}))}catch(b){return Promise.reject(b)}};throw new Error("Invalid input: not a Zod schema")}function At({title:a,onClose:l,children:c,footer:u}){return _.useEffect(()=>{function d(h){h.key==="Escape"&&l()}return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[l]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-overlay",onClick:l}),s.jsxs("div",{className:"drawer",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"drawer-header",children:[s.jsx("h2",{className:"drawer-title",children:a}),s.jsx("button",{className:"drawer-close",onClick:l,"aria-label":"Close",children:s.jsx(Lx,{})})]}),s.jsx("div",{className:"drawer-body",children:c}),u&&s.jsx("div",{className:"drawer-footer",children:u})]})]})}function Lx(){return s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}let zx=0;const bh=jr(a=>({toasts:[],addToast:l=>{const c=`toast-${++zx}`;return a(u=>({toasts:[...u.toasts,{...l,id:c}]})),c},removeToast:l=>{a(c=>({toasts:c.toasts.filter(u=>u.id!==l)}))}}));function kx(){const{addToast:a,removeToast:l}=bh();return{showToast:(u,d)=>{const h=d?.duration??(d?.action?5e3:3e3);return a({message:u,action:d?.action,duration:h})},removeToast:l}}const Bx=Vn({type:St(["income","receivable","expense"]),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS","EUR"]),occurredAt:te().min(1,"Date is required"),clientId:te().optional(),projectId:te().optional(),dueDate:te().optional(),title:te().optional(),notes:te().optional()});function qx(){const{transactionDrawer:a,closeTransactionDrawer:l}=ht(),{mode:c,transactionId:u,defaultKind:d,defaultClientId:h,defaultProjectId:b,duplicateFromId:g}=a,p=Ze(),{showToast:m}=kx(),{data:y,isLoading:x}=Ap(u||""),{data:w}=Ap(g||""),{data:j=[]}=wr(),{data:D=[]}=fh(),C=Q1(),O=Y1(),z=F1(),k=()=>y?y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income":d==="expense"?"expense":"income",T=Qa({resolver:Ya(Bx),defaultValues:{type:k(),amount:"",currency:"USD",occurredAt:Pn(),clientId:h||"",projectId:b||"",dueDate:"",title:"",notes:""}}),{watch:P,setValue:Y,reset:X}=T,F=P("type"),ne=P("clientId");_.useEffect(()=>{if(y){const ae=y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income";X({type:ae,amount:(y.amountMinor/100).toString(),currency:y.currency,occurredAt:y.occurredAt.split("T")[0],clientId:y.clientId||"",projectId:y.projectId||"",dueDate:y.dueDate||"",title:y.title||"",notes:y.notes||""})}},[y,X]),_.useEffect(()=>{if(g&&w&&c==="create"){const ae=w.kind==="expense"?"expense":"receivable";X({type:ae,amount:(w.amountMinor/100).toString(),currency:w.currency,occurredAt:Pn(),clientId:w.clientId||"",projectId:w.projectId||"",dueDate:"",title:w.title||"",notes:w.notes||""})}},[g,w,c,X]);const de=ne?D.filter(ae=>ae.clientId===ne):D,ve=async ae=>{const ye=ae.type==="expense"?"expense":"income",ge=ae.type==="receivable"?"unpaid":"paid",U={kind:ye,status:ge,title:ae.title||void 0,clientId:ae.clientId||void 0,projectId:ae.projectId||void 0,amountMinor:zi(ae.amount),currency:ae.currency,occurredAt:new Date(ae.occurredAt).toISOString(),dueDate:ae.type==="receivable"&&ae.dueDate?ae.dueDate:void 0,paidAt:ge==="paid"?new Date().toISOString():void 0,notes:ae.notes||void 0};try{if(c==="edit"&&u)await O.mutateAsync({id:u,data:U});else{const Q=await C.mutateAsync(U);g&&Q&&m(p("toast.transactionDuplicated"),{action:{label:p("common.undo"),onClick:()=>{z.mutate(Q.id)}},duration:5e3})}l()}catch(Q){console.error("Failed to save transaction:",Q)}},le=async()=>{if(u&&confirm(p("transactions.confirmDelete")))try{await z.mutateAsync(u),l()}catch(ae){console.error("Failed to delete transaction:",ae)}},be=C.isPending||O.isPending;return c==="edit"&&x?s.jsx(At,{title:p("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:p(c==="edit"?"drawer.transaction.edit":"drawer.transaction.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:le,disabled:z.isPending,children:p("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:p("common.cancel")}),s.jsx("button",{type:"submit",form:"transaction-form",className:"btn btn-primary",disabled:be,children:p(be?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"transaction-form",onSubmit:T.handleSubmit(ve),children:[s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:ue("type-selector-btn",F==="income"&&"active"),onClick:()=>Y("type","income"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeIncome")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeIncomeDesc")})]}),s.jsxs("button",{type:"button",className:ue("type-selector-btn",F==="receivable"&&"active"),onClick:()=>Y("type","receivable"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeReceivable")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeReceivableDesc")})]}),s.jsxs("button",{type:"button",className:ue("type-selector-btn",F==="expense"&&"active"),onClick:()=>Y("type","expense"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeExpense")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeExpenseDesc")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:ue("input",T.formState.errors.amount&&"input-error"),placeholder:p("drawer.transaction.amountPlaceholder"),...T.register("amount")}),T.formState.errors.amount&&s.jsx("p",{className:"form-error",children:p("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.currency")," *"]}),s.jsx(_e,{name:"currency",control:T.control,render:({field:ae})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ae,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.date")," *"]}),s.jsx("input",{type:"date",className:ue("input",T.formState.errors.occurredAt&&"input-error"),...T.register("occurredAt")})]}),F==="receivable"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.dueDate")}),s.jsx("input",{type:"date",className:"input",...T.register("dueDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.client")}),s.jsx(_e,{name:"clientId",control:T.control,render:({field:ae})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ae,children:[s.jsx("option",{value:"",children:p("drawer.transaction.clientPlaceholder")}),j.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.project")}),s.jsx(_e,{name:"projectId",control:T.control,render:({field:ae})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ae,children:[s.jsx("option",{value:"",children:p("drawer.transaction.projectPlaceholder")}),de.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.title")}),s.jsx("input",{type:"text",className:"input",placeholder:p("drawer.transaction.titlePlaceholder"),...T.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.notes")}),s.jsx("textarea",{className:"textarea",placeholder:p("drawer.transaction.notesPlaceholder"),...T.register("notes")})]})]})})}const Hx=Vn({name:te().min(1,"Name is required"),email:te().email("Invalid email").optional().or(Uv("")),phone:te().optional(),notes:te().optional()});function Px(){const{clientDrawer:a,closeClientDrawer:l}=ht(),{mode:c,clientId:u}=a,d=Ze(),{data:h,isLoading:b}=G1(u||""),g=Z1(),p=X1(),m=J1(),y=Qa({resolver:Ya(Hx),defaultValues:{name:"",email:"",phone:"",notes:""}});_.useEffect(()=>{h&&y.reset({name:h.name,email:h.email||"",phone:h.phone||"",notes:h.notes||""})},[h,y]);const x=async D=>{const C={name:D.name,email:D.email||void 0,phone:D.phone||void 0,notes:D.notes||void 0};try{c==="edit"&&u?await p.mutateAsync({id:u,data:C}):await g.mutateAsync(C),l()}catch(O){console.error("Failed to save client:",O)}},w=async()=>{if(u&&confirm(d("clients.confirmArchive")))try{await m.mutateAsync(u),l()}catch(D){console.error("Failed to archive client:",D)}},j=g.isPending||p.isPending;return c==="edit"&&b?s.jsx(At,{title:d("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:d(c==="edit"?"drawer.client.edit":"drawer.client.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:w,disabled:m.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"client-form",className:"btn btn-primary",disabled:j,children:d(j?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"client-form",onSubmit:y.handleSubmit(x),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[d("drawer.client.name")," *"]}),s.jsx("input",{type:"text",className:ue("input",y.formState.errors.name&&"input-error"),placeholder:d("drawer.client.namePlaceholder"),...y.register("name")}),y.formState.errors.name&&s.jsx("p",{className:"form-error",children:d("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.email")}),s.jsx("input",{type:"email",className:ue("input",y.formState.errors.email&&"input-error"),placeholder:d("drawer.client.emailPlaceholder"),...y.register("email")}),y.formState.errors.email&&s.jsx("p",{className:"form-error",children:y.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.phone")}),s.jsx("input",{type:"tel",className:"input",placeholder:d("drawer.client.phonePlaceholder"),...y.register("phone")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.notes")}),s.jsx("textarea",{className:"textarea",placeholder:d("drawer.client.notesPlaceholder"),...y.register("notes")})]})]})})}const Vx=["design","development","consulting","marketing","legal","maintenance","other"],Qx=Vn({name:te().min(1,"Name is required"),clientId:te().optional(),field:te().optional(),notes:te().optional()});function Yx(){const{projectDrawer:a,closeProjectDrawer:l}=ht(),{mode:c,projectId:u,defaultClientId:d}=a,h=Ze(),{data:b,isLoading:g}=$1(u||""),{data:p=[]}=wr(),m=W1(),y=ex(),x=tx(),w=Qa({resolver:Ya(Qx),defaultValues:{name:"",clientId:d||"",field:"",notes:""}});_.useEffect(()=>{b&&w.reset({name:b.name,clientId:b.clientId||"",field:b.field||"",notes:b.notes||""})},[b,w]);const j=async O=>{const z={name:O.name,clientId:O.clientId||void 0,field:O.field||void 0,notes:O.notes||void 0};try{c==="edit"&&u?await y.mutateAsync({id:u,data:z}):await m.mutateAsync(z),l()}catch(k){console.error("Failed to save project:",k)}},D=async()=>{if(u&&confirm(h("projects.confirmArchive")))try{await x.mutateAsync(u),l()}catch(O){console.error("Failed to archive project:",O)}},C=m.isPending||y.isPending;return c==="edit"&&g?s.jsx(At,{title:h("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:h(c==="edit"?"drawer.project.edit":"drawer.project.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:D,disabled:x.isPending,children:h("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:h("common.cancel")}),s.jsx("button",{type:"submit",form:"project-form",className:"btn btn-primary",disabled:C,children:h(C?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"project-form",onSubmit:w.handleSubmit(j),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[h("drawer.project.name")," *"]}),s.jsx("input",{type:"text",className:ue("input",w.formState.errors.name&&"input-error"),placeholder:h("drawer.project.namePlaceholder"),...w.register("name")}),w.formState.errors.name&&s.jsx("p",{className:"form-error",children:h("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.client")}),s.jsx(_e,{name:"clientId",control:w.control,render:({field:O})=>s.jsxs("select",{className:"select",style:{width:"100%"},...O,children:[s.jsx("option",{value:"",children:h("drawer.project.clientPlaceholder")}),p.map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.field")}),s.jsx(_e,{name:"field",control:w.control,render:({field:O})=>s.jsxs("select",{className:"select",style:{width:"100%"},...O,children:[s.jsx("option",{value:"",children:h("drawer.project.fieldPlaceholder")}),Vx.map(z=>{const k=z.charAt(0).toUpperCase()+z.slice(1);return s.jsx("option",{value:k,children:h(`projects.fields.${z}`)},z)})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.notes")}),s.jsx("textarea",{className:"textarea",placeholder:h("drawer.project.notesPlaceholder"),...w.register("notes")})]})]})})}const Kx=Vn({name:te().min(1,"Business name is required"),nameEn:te().optional(),email:te().email("Invalid email"),phone:te().optional(),taxId:te().optional(),businessType:St(["exempt","authorized","company","lawyer","none"]),address1:te().optional(),address1En:te().optional(),city:te().optional(),cityEn:te().optional(),country:te().optional(),countryEn:te().optional(),postalCode:te().optional(),primaryColor:te().optional(),defaultCurrency:St(["USD","ILS","EUR"]),defaultLanguage:St(["ar","en"]),isDefault:cu()}),Fx=[{value:"none",label:"Individual / Freelancer"},{value:"exempt",label:"Exempt Dealer"},{value:"authorized",label:"Authorized Dealer"},{value:"company",label:"Company / Corporation"},{value:"lawyer",label:"Lawyer / Law Firm"}];function Gx(){const{businessProfileDrawer:a,closeBusinessProfileDrawer:l}=ht(),{mode:c,profileId:u}=a,d=Ze(),h=_.useRef(null),[b,g]=_.useState(null),{data:p,isLoading:m}=rx(u||""),y=ph(),x=cx(),w=ux(),j=Qa({resolver:Ya(Kx),defaultValues:{name:"",nameEn:"",email:"",phone:"",taxId:"",businessType:"none",address1:"",address1En:"",city:"",cityEn:"",country:"",countryEn:"",postalCode:"",primaryColor:"#3b82f6",defaultCurrency:"USD",defaultLanguage:"en",isDefault:!1}});_.useEffect(()=>{p&&(j.reset({name:p.name,nameEn:p.nameEn||"",email:p.email,phone:p.phone||"",taxId:p.taxId||"",businessType:p.businessType,address1:p.address1||"",address1En:p.address1En||"",city:p.city||"",cityEn:p.cityEn||"",country:p.country||"",countryEn:p.countryEn||"",postalCode:p.postalCode||"",primaryColor:p.primaryColor||"#3b82f6",defaultCurrency:p.defaultCurrency,defaultLanguage:p.defaultLanguage,isDefault:p.isDefault}),p.logoDataUrl&&g(p.logoDataUrl))},[p,j]);const D=k=>{const T=k.target.files?.[0];if(!T)return;const P=new FileReader;P.onloadend=()=>{const Y=P.result;g(Y)},P.readAsDataURL(T)},C=async k=>{const T={name:k.name,nameEn:k.nameEn||void 0,email:k.email,phone:k.phone||void 0,taxId:k.taxId||void 0,businessType:k.businessType,address1:k.address1||void 0,address1En:k.address1En||void 0,city:k.city||void 0,cityEn:k.cityEn||void 0,country:k.country||void 0,countryEn:k.countryEn||void 0,postalCode:k.postalCode||void 0,logoDataUrl:b||void 0,primaryColor:k.primaryColor||void 0,defaultCurrency:k.defaultCurrency,defaultLanguage:k.defaultLanguage,isDefault:k.isDefault};try{c==="edit"&&u?await x.mutateAsync({id:u,data:T}):await y.mutateAsync(T),l()}catch(P){console.error("Failed to save business profile:",P)}},O=async()=>{if(u&&confirm("Are you sure you want to archive this business profile?"))try{await w.mutateAsync(u),l()}catch(k){console.error("Failed to archive profile:",k)}},z=y.isPending||x.isPending;return c==="edit"&&m?s.jsx(At,{title:d("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:c==="edit"?"Edit Business Profile":"New Business Profile",onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&!p?.isDefault&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:O,disabled:w.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"business-profile-form",className:"btn btn-primary",disabled:z,children:d(z?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"business-profile-form",onSubmit:j.handleSubmit(C),children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Logo"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b?s.jsx("img",{src:b,alt:"Logo preview",style:{width:64,height:64,objectFit:"contain",borderRadius:4}}):s.jsx("div",{style:{width:64,height:64,backgroundColor:"var(--color-bg-secondary)",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-tertiary)",fontSize:12},children:"No logo"}),s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h.current?.click(),children:b?"Change":"Upload"}),b&&s.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>g(null),children:"Remove"})]}),s.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:D,style:{display:"none"}})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (Arabic) *"}),s.jsx("input",{type:"text",className:ue("input",j.formState.errors.name&&"input-error"),placeholder:" ",dir:"rtl",...j.register("name")}),j.formState.errors.name&&s.jsx("p",{className:"form-error",children:j.formState.errors.name.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"Company Name",...j.register("nameEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Email *"}),s.jsx("input",{type:"email",className:ue("input",j.formState.errors.email&&"input-error"),placeholder:"email@example.com",...j.register("email")}),j.formState.errors.email&&s.jsx("p",{className:"form-error",children:j.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Phone"}),s.jsx("input",{type:"tel",className:"input",placeholder:"+972 50 000 0000",...j.register("phone")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Type"}),s.jsx("select",{className:"select",...j.register("businessType"),children:Fx.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Tax ID"}),s.jsx("input",{type:"text",className:"input",placeholder:"Tax/VAT Number",...j.register("taxId")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...j.register("address1")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"123 Main St",...j.register("address1En")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...j.register("city")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"City",...j.register("cityEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Currency"}),s.jsxs("select",{className:"select",...j.register("defaultCurrency"),children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Language"}),s.jsxs("select",{className:"select",...j.register("defaultLanguage"),children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brand Color"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("input",{type:"color",style:{width:40,height:32,padding:0,border:"none",cursor:"pointer"},...j.register("primaryColor")}),s.jsx("input",{type:"text",className:"input",style:{width:120},placeholder:"#3b82f6",...j.register("primaryColor")})]})]}),s.jsx("div",{className:"form-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",...j.register("isDefault")}),s.jsx("span",{children:"Set as default profile"})]})})]})})}const Zx="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Xx=(a=21)=>{let l="",c=crypto.getRandomValues(new Uint8Array(a|=0));for(;a--;)l+=Zx[c[a]&63];return l};const Jx=[{value:"invoice",label:"Invoice",labelAr:""},{value:"receipt",label:"Receipt",labelAr:""},{value:"invoice_receipt",label:"Invoice Receipt",labelAr:" "},{value:"credit_note",label:"Credit Note",labelAr:" "},{value:"price_offer",label:"Price Offer",labelAr:" "},{value:"proforma_invoice",label:"Proforma Invoice",labelAr:" "},{value:"donation_receipt",label:"Donation Receipt",labelAr:" "}],$x=[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cheque",label:"Cheque"},{value:"credit_card",label:"Credit Card"},{value:"other",label:"Other"}],Wx=[{value:"template1",label:"Classic"},{value:"template2",label:"Modern"},{value:"template3",label:"Minimal"}],eb=Vn({name:te().min(1,"Item name is required"),quantity:Li().min(.01,"Quantity must be positive"),rateMinor:Li().min(0,"Rate must be non-negative"),discountMinor:Li().min(0).default(0),taxExempt:cu().default(!1)}),tb=Vn({id:te(),amountMinor:Li().min(0),currency:St(["USD","ILS","EUR"]),method:St(["cash","bank_transfer","cheque","credit_card","other"]),notes:te().optional(),paidAt:te()}),nb=Vn({type:St(["invoice","receipt","invoice_receipt","credit_note","price_offer","proforma_invoice","donation_receipt"]),number:te().optional(),businessProfileId:te().min(1,"Business profile is required"),clientId:te().optional(),subject:te().optional(),brief:te().optional(),notes:te().optional(),currency:St(["USD","ILS","EUR"]),language:St(["ar","en"]),templateId:te(),issueDate:te().min(1,"Issue date is required"),dueDate:te().optional(),taxRate:Li().min(0).max(1),vatEnabled:cu().default(!0),items:pp(eb).min(1,"At least one item is required"),payments:pp(tb).optional(),refDocumentId:te().optional()});function Yo(a){return a.quantity*a.rateMinor-a.discountMinor}function _i(a,l){return(a/100).toLocaleString("en-US",{style:"currency",currency:l,minimumFractionDigits:2})}function ab(){const{documentDrawer:a,closeDocumentDrawer:l}=ht(),{mode:c,documentId:u,defaultType:d,defaultClientId:h,defaultBusinessProfileId:b,refDocumentId:g}=a,p=Ze(),{data:m,isLoading:y}=Dp(u||""),{data:x=[]}=wr(),{data:w=[]}=Pl(),{data:j}=mh(),{data:D}=Dp(g||""),{data:C=[]}=nx({}),O=ax(),z=ix(),k=sx(),T=lx(),P=()=>m?m.businessProfileId:b||(j?j.id:w.length>0?w[0].id:""),Y=Qa({resolver:Ya(nb),defaultValues:{type:d||"invoice",number:"",businessProfileId:P(),clientId:h||"",subject:"",brief:"",notes:"",currency:"USD",language:"en",templateId:"template1",issueDate:Pn(),dueDate:"",taxRate:.18,vatEnabled:!0,items:[{name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1}],payments:[],refDocumentId:g||""}}),{watch:X,setValue:F,reset:ne,control:de}=Y,ve=X("type"),le=X("currency"),be=X("taxRate"),ae=X("vatEnabled"),ye=X("items"),ge=X("payments")||[],{fields:U,append:Q,remove:$}=hp({control:de,name:"items"}),{fields:fe,append:G,remove:xe}=hp({control:de,name:"payments"}),Z=JSON.stringify(ye),V=_.useMemo(()=>{const K=ye||[],oe=K.reduce((un,Le)=>un+Yo(Le),0);let We=0;if(ae){const un=K.reduce((Le,Kl)=>Kl.taxExempt?Le:Le+Yo(Kl),0);We=Math.round(un*be)}const at=oe+We;return{subtotal:oe,tax:We,total:at}},[Z,be,ae]),W=_.useMemo(()=>ge.reduce((K,oe)=>K+(oe.amountMinor||0),0),[ge]);_.useEffect(()=>{m&&ne({type:m.type,number:m.number,businessProfileId:m.businessProfileId,clientId:m.clientId||"",subject:m.subject||"",brief:m.brief||"",notes:m.notes||"",currency:m.currency,language:m.language,templateId:m.templateId,issueDate:m.issueDate.split("T")[0],dueDate:m.dueDate||"",taxRate:m.taxRate,vatEnabled:m.vatEnabled??!0,items:m.items.map(K=>({name:K.name,quantity:K.quantity,rateMinor:K.rateMinor,discountMinor:K.discountMinor,taxExempt:K.taxExempt})),payments:m.payments.map(K=>({id:K.id,amountMinor:K.amountMinor,currency:K.currency,method:K.method,notes:K.notes||"",paidAt:K.paidAt.split("T")[0]})),refDocumentId:m.refDocumentId||""})},[m,ne]),_.useEffect(()=>{const K=Y.getValues("businessProfileId"),oe=w.find(We=>We.id===K);oe&&c==="create"&&!m&&(F("currency",oe.defaultCurrency),F("language",oe.defaultLanguage))},[Y.watch("businessProfileId"),w,c,m,F]),_.useEffect(()=>{D&&c==="create"&&ve==="credit_note"&&(F("businessProfileId",D.businessProfileId),F("clientId",D.clientId||""),F("currency",D.currency),F("language",D.language),F("templateId",D.templateId),F("taxRate",D.taxRate),F("items",D.items.map(K=>({name:K.name,quantity:K.quantity,rateMinor:K.rateMinor,discountMinor:K.discountMinor,taxExempt:K.taxExempt}))))},[D,c,ve,F]);const yt=async K=>{const oe=K.items.map(Le=>({name:Le.name,quantity:Le.quantity,rateMinor:Le.rateMinor,rateVatMinor:Le.taxExempt?Le.rateMinor:Math.round(Le.rateMinor*(1+K.taxRate)),discountMinor:Le.discountMinor,taxExempt:Le.taxExempt})),We=(K.payments||[]).map(Le=>({id:Le.id,amountMinor:Le.amountMinor,currency:Le.currency,method:Le.method,notes:Le.notes,paidAt:new Date(Le.paidAt).toISOString()}));let at="draft";ve==="receipt"||ve==="invoice_receipt"||ve==="donation_receipt"?at="paid":(ve==="price_offer"||ve==="proforma_invoice")&&(at="issued");const un={type:K.type,status:at,businessProfileId:K.businessProfileId,clientId:K.clientId||void 0,subject:K.subject||void 0,brief:K.brief||void 0,notes:K.notes||void 0,items:oe,payments:We,subtotalMinor:V.subtotal,discountMinor:0,taxMinor:V.tax,totalMinor:V.total,taxRate:K.taxRate,vatEnabled:K.vatEnabled,currency:K.currency,language:K.language,issueDate:new Date(K.issueDate).toISOString(),dueDate:K.dueDate?K.dueDate:void 0,paidAt:at==="paid"?new Date().toISOString():void 0,refDocumentId:K.refDocumentId||void 0,linkedTransactionIds:m?.linkedTransactionIds||[],templateId:K.templateId,exportCount:m?.exportCount||0};try{if(c==="edit"&&u){const Le=m?.status==="draft"&&K.number&&K.number!==m.number?{...un,number:K.number}:un;await z.mutateAsync({id:u,data:Le})}else await O.mutateAsync(un);l()}catch(Le){console.error("Failed to save document:",Le)}},Mt=async()=>{if(u&&confirm("Are you sure you want to delete this document?"))try{await k.mutateAsync(u),l()}catch(K){console.error("Failed to delete document:",K)}},cn=async()=>{if(u&&confirm("Are you sure you want to void this document? This action cannot be undone."))try{await T.mutateAsync(u),l()}catch(K){console.error("Failed to void document:",K)}},Kn=()=>{Q({name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1})},Ct=()=>{G({id:Xx(),amountMinor:V.total-W,currency:le,method:"cash",notes:"",paidAt:Pn()})},Fn=O.isPending||z.isPending,vn=ve==="receipt"||ve==="invoice_receipt"||ve==="donation_receipt",jn=ve==="invoice"||ve==="proforma_invoice",Ga=ve==="credit_note",on=C.filter(K=>K.status!=="voided"&&(K.type==="invoice"||K.type==="invoice_receipt"));if(c==="edit"&&y)return s.jsx(At,{title:p("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});if(w.length===0)return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:l,children:s.jsxs("div",{className:"document-guard",children:[s.jsx("div",{className:"document-guard-icon",children:s.jsx(ib,{})}),s.jsx("h3",{className:"document-guard-title",children:p("documentGuard.title")}),s.jsx("p",{className:"document-guard-description",children:p("documentGuard.description")}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{l();const{openBusinessProfileDrawer:K}=ht.getState();K({mode:"create"})},children:p("documentGuard.createProfile")})]})});const Se=c==="edit"&&m&&m.status!=="draft";return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"drawer-footer-left",children:[c==="edit"&&m?.status==="draft"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:Mt,disabled:k.isPending,children:p("common.delete")}),c==="edit"&&m?.status==="issued"&&s.jsx("button",{type:"button",className:"btn btn-warning",onClick:cn,disabled:T.isPending,children:"Void Document"})]}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:p("common.cancel")}),!Se&&s.jsx("button",{type:"submit",form:"document-form",className:"btn btn-primary",disabled:Fn,children:p(Fn?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"document-form",onSubmit:Y.handleSubmit(yt),children:[Se&&s.jsxs("div",{className:"alert alert-info",style:{marginBottom:16},children:["This document is ",m?.status," and cannot be edited."]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Type *"}),s.jsx("div",{className:"document-type-grid",children:Jx.map(K=>s.jsx("button",{type:"button",className:ue("document-type-btn",ve===K.value&&"active"),onClick:()=>!Se&&F("type",K.value),disabled:Se,children:K.label},K.value))})]}),c==="edit"&&m&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Number"}),s.jsx("input",{type:"text",className:"input",...Y.register("number"),disabled:Se,placeholder:"e.g., INV-0001"}),s.jsx("p",{className:"form-hint",children:Se?"Document numbers can only be changed for draft documents.":"You can manually change the document number. Must be unique."})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Profile *"}),s.jsx(_e,{name:"businessProfileId",control:de,render:({field:K})=>s.jsxs("select",{className:"select",...K,disabled:Se,children:[s.jsx("option",{value:"",children:"Select profile..."}),w.map(oe=>s.jsxs("option",{value:oe.id,children:[oe.name," ",oe.nameEn?`(${oe.nameEn})`:"",oe.isDefault?" - Default":""]},oe.id))]})}),Y.formState.errors.businessProfileId&&s.jsx("p",{className:"form-error",children:Y.formState.errors.businessProfileId.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Client"}),s.jsx(_e,{name:"clientId",control:de,render:({field:K})=>s.jsxs("select",{className:"select",...K,disabled:Se,children:[s.jsx("option",{value:"",children:"No client"}),x.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]})})]})]}),Ga&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Reference Document *"}),s.jsx(_e,{name:"refDocumentId",control:de,render:({field:K})=>s.jsxs("select",{className:"select",...K,disabled:Se,children:[s.jsx("option",{value:"",children:"Select original document..."}),on.map(oe=>s.jsxs("option",{value:oe.id,children:[oe.number," - ",_i(oe.totalMinor,oe.currency)]},oe.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Subject"}),s.jsx("input",{type:"text",className:"input",placeholder:"Document subject...",...Y.register("subject"),disabled:Se})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brief Description"}),s.jsx("textarea",{className:"textarea",placeholder:"Brief description...",rows:2,...Y.register("brief"),disabled:Se})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Currency *"}),s.jsx(_e,{name:"currency",control:de,render:({field:K})=>s.jsxs("select",{className:"select",...K,disabled:Se,children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Language *"}),s.jsx(_e,{name:"language",control:de,render:({field:K})=>s.jsxs("select",{className:"select",...K,disabled:Se,children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Template"}),s.jsx(_e,{name:"templateId",control:de,render:({field:K})=>s.jsx("select",{className:"select",...K,disabled:Se,children:Wx.map(oe=>s.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Issue Date *"}),s.jsx("input",{type:"date",className:ue("input",Y.formState.errors.issueDate&&"input-error"),...Y.register("issueDate"),disabled:Se})]}),jn&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Due Date"}),s.jsx("input",{type:"date",className:"input",...Y.register("dueDate"),disabled:Se})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"VAT"}),s.jsxs("div",{className:"vat-toggle-row",children:[s.jsx(_e,{name:"vatEnabled",control:de,render:({field:K})=>s.jsxs("label",{className:"toggle-label",children:[s.jsx("input",{type:"checkbox",checked:K.value,onChange:oe=>{K.onChange(oe.target.checked),oe.target.checked&&be===0&&F("taxRate",.18)},disabled:Se}),s.jsx("span",{children:"Enable VAT"})]})}),ae&&s.jsx(_e,{name:"taxRate",control:de,render:({field:K})=>s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"input input-sm",style:{width:80},value:K.value*100,onChange:oe=>K.onChange(parseFloat(oe.target.value)/100||0),disabled:Se})}),ae&&s.jsx("span",{className:"text-muted",children:"%"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Line Items"}),!Se&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Kn,children:"+ Add Item"})]}),U.map((K,oe)=>s.jsxs("div",{className:"line-item-row",children:[s.jsx("div",{className:"line-item-main",children:s.jsx("input",{type:"text",className:"input",placeholder:"Item name",...Y.register(`items.${oe}.name`),disabled:Se})}),s.jsx("div",{className:"line-item-qty",children:s.jsx(_e,{name:`items.${oe}.quantity`,control:de,render:({field:We})=>s.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"input",placeholder:"Qty",value:We.value,onChange:at=>We.onChange(parseFloat(at.target.value)||0),disabled:Se})})}),s.jsx("div",{className:"line-item-rate",children:s.jsx(_e,{name:`items.${oe}.rateMinor`,control:de,render:({field:We})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Rate",value:We.value/100,onChange:at=>We.onChange(Math.round(parseFloat(at.target.value)*100)||0),disabled:Se})})}),s.jsx("div",{className:"line-item-total",children:_i(Yo(ye[oe]||{quantity:0,rateMinor:0,discountMinor:0}),le)}),!Se&&U.length>1&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>$(oe),title:"Remove item",children:""})]},K.id)),Y.formState.errors.items&&s.jsx("p",{className:"form-error",children:"At least one item is required"})]}),s.jsxs("div",{className:"totals-section",children:[s.jsxs("div",{className:"totals-row",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:_i(V.subtotal,le)})]}),ae&&s.jsxs("div",{className:"totals-row",children:[s.jsxs("span",{children:["VAT (",(be*100).toFixed(0),"%)"]}),s.jsx("span",{children:_i(V.tax,le)})]}),s.jsxs("div",{className:"totals-row totals-total",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:_i(V.total,le)})]})]}),vn&&s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Payment Details"}),!Se&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Ct,children:"+ Add Payment"})]}),fe.map((K,oe)=>s.jsxs("div",{className:"payment-row",children:[s.jsx("div",{className:"payment-method",children:s.jsx(_e,{name:`payments.${oe}.method`,control:de,render:({field:We})=>s.jsx("select",{className:"select",...We,disabled:Se,children:$x.map(at=>s.jsx("option",{value:at.value,children:at.label},at.value))})})}),s.jsx("div",{className:"payment-amount",children:s.jsx(_e,{name:`payments.${oe}.amountMinor`,control:de,render:({field:We})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Amount",value:(We.value??0)/100,onChange:at=>We.onChange(Math.round(parseFloat(at.target.value)*100)||0),disabled:Se})})}),s.jsx("div",{className:"payment-date",children:s.jsx("input",{type:"date",className:"input",...Y.register(`payments.${oe}.paidAt`),disabled:Se})}),!Se&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>xe(oe),title:"Remove payment",children:""})]},K.id)),fe.length>0&&s.jsxs("div",{className:"totals-row",style:{marginTop:8},children:[s.jsx("span",{children:"Total Paid"}),s.jsx("span",{children:_i(W,le)})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Notes"}),s.jsx("textarea",{className:"textarea",placeholder:"Additional notes (will appear on document)...",rows:3,...Y.register("notes"),disabled:Se})]})]})})}function ib(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const lb=["llc","inc","inc.","ltd","ltd.","corp","corp.","corporation","company","co","co.","llp","plc","gmbh","ag","sa","sarl","",'"',""],sb=["the"];function Pa(a){if(!a)return"";let l=a.toLowerCase().trim().replace(/[.,;:!?'"()[\]{}@#$%^&*+=<>\\|`~]/g,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();for(const c of lb){const u=new RegExp(`\\s+${Up(c)}$`,"i");l=l.replace(u,"")}for(const c of sb){const u=new RegExp(`^${Up(c)}\\s+`,"i");l=l.replace(u,"")}return l.trim()}function rb(a,l){if(a.length===0)return l.length;if(l.length===0)return a.length;const c=[];for(let u=0;u<=l.length;u++)c[u]=[u];for(let u=0;u<=a.length;u++)c[0][u]=u;for(let u=1;u<=l.length;u++)for(let d=1;d<=a.length;d++)l.charAt(u-1)===a.charAt(d-1)?c[u][d]=c[u-1][d-1]:c[u][d]=Math.min(c[u-1][d-1]+1,c[u][d-1]+1,c[u-1][d]+1);return c[l.length][a.length]}function Bl(a,l){const c=Pa(a),u=Pa(l);if(c===u)return 1;if(!c||!u)return 0;const d=rb(c,u),h=Math.max(c.length,u.length);return 1-d/h}function Up(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function cb(a){const l=Pa(a);return l?l.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "):""}function qi(){return crypto.randomUUID()}function Ge(){return new Date().toISOString()}const gn={async list(a={}){const l=await S.expenses.toArray(),c=await S.expenseCategories.toArray(),u=await S.receipts.toArray(),d=new Map(c.map(m=>[m.id,m])),h=new Map;u.forEach(m=>{m.expenseId&&h.set(m.expenseId,(h.get(m.expenseId)||0)+1)});let b=l.filter(m=>{if(!a.includeDeleted&&m.deletedAt||a.profileId&&m.profileId!==a.profileId||a.categoryId&&m.categoryId!==a.categoryId||a.currency&&m.currency!==a.currency||a.year&&new Date(m.occurredAt).getFullYear()!==a.year||a.month&&new Date(m.occurredAt).getMonth()+1!==a.month)return!1;if(a.search){const y=a.search.toLowerCase(),x=m.categoryId?d.get(m.categoryId)?.name:"";if(!(m.title?.toLowerCase().includes(y)||m.vendor?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||x?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"occurredAt",p=a.sort?.dir||"desc";return b.sort((m,y)=>{const x=m[g],w=y[g];return typeof x=="string"&&typeof w=="string"?p==="asc"?x.localeCompare(w):w.localeCompare(x):typeof x=="number"&&typeof w=="number"?p==="asc"?x-w:w-x:0}),a.offset&&(b=b.slice(a.offset)),a.limit&&(b=b.slice(0,a.limit)),b.map(m=>{const y=m.categoryId?d.get(m.categoryId):void 0;return{...m,categoryName:y?.name,categoryColor:y?.color,receiptCount:h.get(m.id)||0,isFromRecurring:!!m.recurringRuleId}})},async get(a){return S.expenses.get(a)},async create(a){const l=Ge(),c={...a,id:qi(),createdAt:l,updatedAt:l};return await S.expenses.add(c),c},async update(a,l){await S.expenses.update(a,{...l,updatedAt:Ge()})},async softDelete(a){await S.expenses.update(a,{deletedAt:Ge(),updatedAt:Ge()})},async delete(a){await S.expenses.delete(a)},async getYearlyTotals(a,l){const c=await S.expenses.where("profileId").equals(a).filter(g=>g.deletedAt?!1:new Date(g.occurredAt).getFullYear()===l).toArray();let u=0,d=0;const h=new Map;for(let g=1;g<=12;g++)h.set(g,{USD:0,ILS:0});c.forEach(g=>{const p=new Date(g.occurredAt).getMonth()+1,m=h.get(p);g.currency==="USD"?(u+=g.amountMinor,m.USD+=g.amountMinor):(d+=g.amountMinor,m.ILS+=g.amountMinor)});const b=[];for(let g=1;g<=12;g++){const p=h.get(g);b.push({month:g,totalMinorUSD:p.USD,totalMinorILS:p.ILS})}return{totalMinorUSD:u,totalMinorILS:d,byMonth:b}},async getAllProfilesTotals(a){const l=await S.businessProfiles.filter(u=>!u.archivedAt).toArray(),c=[];for(const u of l){const d=await this.getYearlyTotals(u.id,a);c.push({profileId:u.id,profileName:u.name,year:a,totalMinorUSD:d.totalMinorUSD,totalMinorILS:d.totalMinorILS,monthlyBreakdown:d.byMonth})}return c},async getReceiptCount(a){return S.receipts.where("expenseId").equals(a).count()}},Yn={async list(a){let l=S.recurringRules.toCollection();return a&&(l=S.recurringRules.where("profileId").equals(a)),l.toArray()},async listActive(a){return(await this.list(a)).filter(c=>!c.isPaused)},async get(a){return S.recurringRules.get(a)},async create(a){const l=Ge(),c={...a,id:qi(),createdAt:l,updatedAt:l};return await S.recurringRules.add(c),c},async update(a,l){await S.recurringRules.update(a,{...l,updatedAt:Ge()})},async pause(a){await S.recurringRules.update(a,{isPaused:!0,updatedAt:Ge()})},async resume(a){await S.recurringRules.update(a,{isPaused:!1,updatedAt:Ge()})},async delete(a){await S.recurringRules.delete(a)}},yn={async list(a={}){let l=await S.receipts.toArray();return l=l.filter(c=>!(a.profileId&&c.profileId!==a.profileId||a.expenseId&&c.expenseId!==a.expenseId||a.monthKey&&c.monthKey!==a.monthKey||a.unlinkedOnly&&c.expenseId)),l.sort((c,u)=>u.createdAt.localeCompare(c.createdAt)),a.offset&&(l=l.slice(a.offset)),a.limit&&(l=l.slice(0,a.limit)),l},async get(a){return S.receipts.get(a)},async create(a){const l=Ge(),c={...a,id:qi(),createdAt:l,updatedAt:l};return await S.receipts.add(c),c},async update(a,l){await S.receipts.update(a,{...l,updatedAt:Ge()})},async delete(a){await S.receipts.delete(a)},async linkToExpense(a,l){const c=await gn.get(l),u=c?c.occurredAt.substring(0,7):new Date().toISOString().substring(0,7);await S.receipts.update(a,{expenseId:l,monthKey:u,updatedAt:Ge()})},async unlinkFromExpense(a){await S.receipts.update(a,{expenseId:void 0,updatedAt:Ge()})},async getUnlinkedByProfile(a){return S.receipts.where("profileId").equals(a).filter(l=>!l.expenseId).toArray()},async getByProfileAndMonth(a,l){return S.receipts.where("profileId").equals(a).filter(c=>c.monthKey===l).toArray()},async getLinkedByProfileAndMonth(a,l){return S.receipts.where("profileId").equals(a).filter(c=>c.monthKey===l&&!!c.expenseId).toArray()}},wh={async list(a){return S.expenseCategories.where("profileId").equals(a).sortBy("name")},async get(a){return S.expenseCategories.get(a)},async create(a){const l={...a,id:qi()};return await S.expenseCategories.add(l),l},async update(a,l){await S.expenseCategories.update(a,l)},async delete(a){await S.expenseCategories.delete(a)}},Sh={async list(a){return S.vendors.where("profileId").equals(a).sortBy("canonicalName")},async get(a){return S.vendors.get(a)},async create(a){const l=Ge(),c={...a,id:qi(),createdAt:l,updatedAt:l};return await S.vendors.add(c),c},async update(a,l){await S.vendors.update(a,{...l,updatedAt:Ge()})},async delete(a){const l=await S.expenses.where("vendorId").equals(a).toArray();for(const u of l)await S.expenses.update(u.id,{vendorId:void 0,updatedAt:Ge()});const c=await S.receipts.where("vendorId").equals(a).toArray();for(const u of c)await S.receipts.update(u.id,{vendorId:void 0,updatedAt:Ge()});await S.vendors.delete(a)},async findByAlias(a,l){if(!l)return;const c=Pa(l);if(!c)return;const u=await this.list(a),d=u.find(h=>Pa(h.canonicalName)===c);if(d)return d;for(const h of u)if(h.aliases.map(g=>Pa(g)).includes(c))return h;for(const h of u){if(Bl(l,h.canonicalName)>=.85)return h;for(const g of h.aliases)if(Bl(l,g)>=.85)return h}},async findOrCreate(a,l){const c=await this.findByAlias(a,l);return c||this.create({profileId:a,canonicalName:cb(l),aliases:[l]})},async mergeVendors(a,l){const c=await this.get(a),u=await this.get(l);if(!c||!u)return;const d=[...new Set([...c.aliases,...u.aliases,u.canonicalName])];await this.update(a,{aliases:d});const h=await S.expenses.where("vendorId").equals(l).toArray();for(const g of h)await S.expenses.update(g.id,{vendorId:a,updatedAt:Ge()});const b=await S.receipts.where("vendorId").equals(l).toArray();for(const g of b)await S.receipts.update(g.id,{vendorId:a,updatedAt:Ge()});await S.vendors.delete(l)},async addAlias(a,l){const c=await this.get(a);c&&(c.aliases.includes(l)||await this.update(a,{aliases:[...c.aliases,l]}))}},Vl={async get(a){return S.monthCloseStatuses.get(a)},async getByProfileAndMonth(a,l){const c=`${a}:${l}`;return this.get(c)},async getOrCreate(a,l){const c=`${a}:${l}`,u=await this.get(c);if(u)return u;const d=Ge(),h={id:c,profileId:a,monthKey:l,isClosed:!1,checklist:{receiptsLinked:!1,recurringConfirmed:!1,categorized:!1,zipExported:!1},createdAt:d,updatedAt:d};return await S.monthCloseStatuses.add(h),h},async updateChecklist(a,l,c){const u=await this.getOrCreate(a,l);await S.monthCloseStatuses.update(u.id,{checklist:{...u.checklist,...c},updatedAt:Ge()})},async closeMonth(a,l,c){const u=await this.getOrCreate(a,l);await S.monthCloseStatuses.update(u.id,{isClosed:!0,closedAt:Ge(),notes:c,updatedAt:Ge()})},async reopenMonth(a,l){const c=await this.getOrCreate(a,l);await S.monthCloseStatuses.update(c.id,{isClosed:!1,closedAt:void 0,updatedAt:Ge()})},async isMonthClosed(a,l){return(await this.getByProfileAndMonth(a,l))?.isClosed??!1},async getComputedStatus(a,l){const u=(await yn.getByProfileAndMonth(a,l)).filter(p=>!p.expenseId).length,[d,h]=l.split("-").map(Number),g=(await gn.list({profileId:a,year:d,month:h})).filter(p=>!p.categoryId).length;return{monthKey:l,profileId:a,unlinkedReceiptsCount:u,uncategorizedExpensesCount:g,isFullyLinked:u===0,isFullyCategorized:g===0}},async list(a){return S.monthCloseStatuses.where("profileId").equals(a).toArray()}};function ob(a,l){let c=0,u=0,d=0;if(a.amountMinor&&l.amountMinor){const g=Math.abs(a.amountMinor-l.amountMinor)/l.amountMinor;g<=.01?c=50:g<=.05?c=40:g<=.1?c=30:g<=.2&&(c=20)}if(a.occurredAt&&l.occurredAt){const b=new Date(a.occurredAt),g=new Date(l.occurredAt),p=Math.abs(Math.floor((b.getTime()-g.getTime())/(1e3*60*60*24)));p===0?u=25:p<=3?u=20:p<=7?u=15:p<=30&&(u=10)}else{const b=l.occurredAt.substring(0,7);a.monthKey===b&&(u=10)}if(a.vendorId&&l.vendorId&&a.vendorId===l.vendorId)d=25;else if(a.vendorRaw&&l.vendor){const b=Bl(a.vendorRaw,l.vendor);b>=.8?d=20:b>=.5&&(d=10)}return{score:c+u+d,breakdown:{amountScore:c,dateScore:u,vendorScore:d}}}async function ub(a,l=5){const c=await yn.get(a);if(!c||c.expenseId)return[];const[u,d]=c.monthKey.split("-").map(Number),h=[];for(let m=d-1;m<=d+1;m++){let y=u,x=m;m<1?(y=u-1,x=12):m>12&&(y=u+1,x=1);const w=await gn.list({profileId:c.profileId,year:y,month:x});h.push(...w)}const b=new Set((await yn.list({profileId:c.profileId})).filter(m=>m.expenseId).map(m=>m.expenseId)),g=h.filter(m=>!b.has(m.id)),p=[];for(const m of g){const{score:y,breakdown:x}=ob(c,m);if(y>=40){let w;y>=80?w="high":y>=60?w="medium":w="low",p.push({receiptId:a,expenseId:m.id,score:y,confidence:w,breakdown:x,expense:m})}}return p.sort((m,y)=>y.score-m.score).slice(0,l)}async function db(a){const l=await yn.getUnlinkedByProfile(a),c=[];for(const u of l){const d=await ub(u.id);c.push({receipt:u,suggestions:d})}return c}async function fb(a,l,c,u){return(await yn.getByProfileAndMonth(a,u)).some(h=>h.fileName===l&&h.sizeBytes===c)}async function mb(a){const l=Ge(),c=[];for(const u of a){const d={...u,id:qi(),createdAt:l,updatedAt:l};await S.receipts.add(d),c.push(d)}return c}function pb(a,l,c){const u=new Date(a.startDate),d=new Date(l,c-1,1);if(d<u)return!1;if(a.endMode==="endOfYear"){const h=u.getFullYear();if(l>h)return!1}else if(a.endMode==="untilDate"&&a.endDate){const h=new Date(a.endDate);if(d>h)return!1}return a.frequency==="monthly"?!0:a.frequency==="yearly"?c===u.getMonth()+1:!1}function hb(a,l,c,u){return a.filter(d=>d.currency===u&&!d.isPaused).reduce((d,h)=>pb(h,l,c)?d+h.amountMinor:d,0)}function yb(a,l,c,u){return a.filter(d=>{if(d.deletedAt||d.currency!==u)return!1;const h=new Date(d.occurredAt);return h.getFullYear()===l&&h.getMonth()+1===c}).reduce((d,h)=>d+h.amountMinor,0)}function gb(a){const{recurringRules:l,actualExpenses:c,year:u,currency:d,profileId:h,profileName:b}=a,g=new Date,p=g.getFullYear(),m=g.getMonth()+1,y=[];let x=0;for(let j=1;j<=12;j++)if(u<p||u===p&&j<=m){const C=yb(c,u,j,d);y.push({month:j,year:u,projectedMinor:C,actualMinor:C,isPast:!0}),x+=C}else{const C=hb(l,u,j,d);y.push({month:j,year:u,projectedMinor:C,isPast:!1}),x+=C}let w=0;return u===p?w=12-m:u>p&&(w=12),{profileId:h,profileName:b,year:u,monthsRemaining:w,projectedTotalMinor:x,currency:d,breakdown:y}}const jh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Utilities",nameAr:"",color:"#8b5cf6"},{name:"Software & Subscriptions",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud & Hosting",nameAr:" ",color:"#0ea5e9"},{name:"Communication",nameAr:"",color:"#10b981"},{name:"Marketing & Ads",nameAr:" ",color:"#f59e0b"},{name:"Travel & Transport",nameAr:" ",color:"#ef4444"},{name:"Equipment & Hardware",nameAr:" ",color:"#ec4899"},{name:"Professional Services",nameAr:" ",color:"#14b8a6"},{name:"Insurance",nameAr:"",color:"#f97316"},{name:"Bank Fees",nameAr:" ",color:"#64748b"},{name:"Taxes & Licenses",nameAr:" ",color:"#a855f7"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Ah=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Coworking Space",nameAr:"  ",color:"#8b5cf6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Infrastructure",nameAr:" ",color:"#0ea5e9"},{name:"SaaS Subscriptions",nameAr:" SaaS",color:"#3b82f6"},{name:"Development Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Marketing & Growth",nameAr:" ",color:"#f59e0b"},{name:"Legal & Compliance",nameAr:" ",color:"#a855f7"},{name:"Accounting Services",nameAr:" ",color:"#ec4899"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Team Perks",nameAr:" ",color:"#22c55e"},{name:"Contractor Payments",nameAr:" ",color:"#f97316"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Dh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Legal Research Tools",nameAr:"  ",color:"#3b82f6"},{name:"Case Management Software",nameAr:"  ",color:"#06b6d4"},{name:"Bar Association Fees",nameAr:"  ",color:"#a855f7"},{name:"Continuing Legal Education",nameAr:"  ",color:"#8b5cf6"},{name:"Court Filing Fees",nameAr:"  ",color:"#f97316"},{name:"Process Service",nameAr:" ",color:"#14b8a6"},{name:"Expert Witnesses",nameAr:" ",color:"#ec4899"},{name:"Professional Liability Insurance",nameAr:"  ",color:"#ef4444"},{name:"Document Management",nameAr:" ",color:"#10b981"},{name:"Client Entertainment",nameAr:" ",color:"#f59e0b"},{name:"Travel Expenses",nameAr:" ",color:"#0ea5e9"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Communication",nameAr:"",color:"#64748b"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Nh=[{name:"Software & Tools",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Storage",nameAr:" ",color:"#0ea5e9"},{name:"Communication Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Coworking Space",nameAr:"  ",color:"#6366f1"},{name:"Marketing",nameAr:"",color:"#f59e0b"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Professional Development",nameAr:" ",color:"#a855f7"},{name:"Accounting & Tax",nameAr:" ",color:"#ec4899"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],nu=new Map;[...jh,...Ah,...Dh,...Nh].forEach(a=>{nu.has(a.name)||nu.set(a.name,a)});const vb=Array.from(nu.values()),xb={general:jh,startup:Ah,lawFirm:Dh,freelancer:Nh};async function bb(a,l="general",c="en"){const u=xb[l];for(const d of u)await wh.create({profileId:a,name:c==="ar"?d.nameAr:d.name,color:d.color})}const Nt={expenses:a=>["expenses",a],expense:a=>["expense",a],expenseYearlyTotals:(a,l)=>["expenseYearlyTotals",a,l],allProfilesExpenseTotals:a=>["allProfilesExpenseTotals",a],recurringRules:a=>["recurringRules",{profileId:a}],recurringRule:a=>["recurringRule",a],activeRecurringRules:a=>["activeRecurringRules",{profileId:a}],receipts:a=>["receipts",a],receipt:a=>["receipt",a],unlinkedReceipts:a=>["unlinkedReceipts",a],receiptsByMonth:(a,l)=>["receiptsByMonth",a,l],receiptMatchSuggestions:a=>["receiptMatchSuggestions",a],unlinkedReceiptsWithSuggestions:a=>["unlinkedReceiptsWithSuggestions",a],expenseCategories:a=>["expenseCategories",a],expenseCategory:a=>["expenseCategory",a],expenseForecast:(a,l,c)=>["expenseForecast",a,l,c],vendors:a=>["vendors",a],vendor:a=>["vendor",a],monthCloseStatus:(a,l)=>["monthCloseStatus",a,l],monthCloseComputed:(a,l)=>["monthCloseComputed",a,l],monthCloseList:a=>["monthCloseList",a]};function uu(a){a.invalidateQueries({queryKey:["expenses"]}),a.invalidateQueries({queryKey:["expense"]}),a.invalidateQueries({queryKey:["expenseYearlyTotals"]}),a.invalidateQueries({queryKey:["allProfilesExpenseTotals"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Ql(a){a.invalidateQueries({queryKey:["recurringRules"]}),a.invalidateQueries({queryKey:["recurringRule"]}),a.invalidateQueries({queryKey:["activeRecurringRules"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Yl(a){a.invalidateQueries({queryKey:["receipts"]}),a.invalidateQueries({queryKey:["receipt"]}),a.invalidateQueries({queryKey:["unlinkedReceipts"]}),a.invalidateQueries({queryKey:["receiptsByMonth"]}),a.invalidateQueries({queryKey:["expenses"]})}function wb(a){a.invalidateQueries({queryKey:["expenseCategories"]}),a.invalidateQueries({queryKey:["expenseCategory"]})}function Sb(a){a.invalidateQueries({queryKey:["vendors"]}),a.invalidateQueries({queryKey:["vendor"]})}function du(a){a.invalidateQueries({queryKey:["monthCloseStatus"]}),a.invalidateQueries({queryKey:["monthCloseComputed"]}),a.invalidateQueries({queryKey:["monthCloseList"]})}function jb(a){a.invalidateQueries({queryKey:["receiptMatchSuggestions"]}),a.invalidateQueries({queryKey:["unlinkedReceiptsWithSuggestions"]})}function gS(a){return pe({queryKey:Nt.expenses(a),queryFn:()=>gn.list(a)})}function Ab(a){return pe({queryKey:Nt.expense(a),queryFn:()=>gn.get(a),enabled:!!a})}function vS(a,l){return pe({queryKey:Nt.expenseYearlyTotals(a,l),queryFn:()=>gn.getYearlyTotals(a,l),enabled:!!a&&!!l})}function xS(a){return pe({queryKey:Nt.allProfilesExpenseTotals(a),queryFn:()=>gn.getAllProfilesTotals(a),enabled:!!a})}function Db(){const a=se();return re({mutationFn:l=>gn.create(l),onSuccess:()=>uu(a)})}function Nb(){const a=se();return re({mutationFn:({id:l,data:c})=>gn.update(l,c),onSuccess:()=>uu(a)})}function Mb(){const a=se();return re({mutationFn:l=>gn.softDelete(l),onSuccess:()=>uu(a)})}function bS(a){return pe({queryKey:Nt.recurringRules(a),queryFn:()=>Yn.list(a)})}function wS(a){return pe({queryKey:Nt.activeRecurringRules(a),queryFn:()=>Yn.listActive(a)})}function Cb(a){return pe({queryKey:Nt.recurringRule(a),queryFn:()=>Yn.get(a),enabled:!!a})}function Eb(){const a=se();return re({mutationFn:l=>Yn.create(l),onSuccess:()=>Ql(a)})}function Tb(){const a=se();return re({mutationFn:({id:l,data:c})=>Yn.update(l,c),onSuccess:()=>Ql(a)})}function SS(){const a=se();return re({mutationFn:l=>Yn.pause(l),onSuccess:()=>Ql(a)})}function jS(){const a=se();return re({mutationFn:l=>Yn.resume(l),onSuccess:()=>Ql(a)})}function Ib(){const a=se();return re({mutationFn:l=>Yn.delete(l),onSuccess:()=>Ql(a)})}function AS(a){return pe({queryKey:Nt.unlinkedReceipts(a),queryFn:()=>yn.getUnlinkedByProfile(a),enabled:!!a})}function DS(a,l){return pe({queryKey:Nt.receiptsByMonth(a,l),queryFn:()=>yn.getByProfileAndMonth(a,l),enabled:!!a&&!!l})}function NS(){const a=se();return re({mutationFn:l=>yn.create(l),onSuccess:()=>Yl(a)})}function MS(){const a=se();return re({mutationFn:l=>yn.delete(l),onSuccess:()=>Yl(a)})}function Rb(){const a=se();return re({mutationFn:({receiptId:l,expenseId:c})=>yn.linkToExpense(l,c),onSuccess:()=>Yl(a)})}function CS(){const a=se();return re({mutationFn:l=>yn.unlinkFromExpense(l),onSuccess:()=>Yl(a)})}function _b(a){return pe({queryKey:Nt.expenseCategories(a),queryFn:()=>wh.list(a),enabled:!!a})}function ES(a,l,c){return pe({queryKey:Nt.expenseForecast(a,l,c),queryFn:async()=>{const u=[];for(const d of l){const[h,b,g]=await Promise.all([nt.get(d),Yn.listActive(d),gn.list({profileId:d,year:a})]);if(h){const p=gb({recurringRules:b.filter(m=>m.currency===c),actualExpenses:g.filter(m=>m.currency===c),year:a,currency:c,profileId:d,profileName:h.name});u.push(p)}}return u},enabled:!!a&&l.length>0})}function TS(){const a=se();return re({mutationFn:({profileId:l,preset:c,language:u})=>bb(l,c,u),onSuccess:()=>wb(a)})}function Ob(a){return pe({queryKey:Nt.vendors(a),queryFn:()=>Sh.list(a),enabled:!!a})}function Ub(){const a=se();return re({mutationFn:({profileId:l,rawVendor:c})=>Sh.findOrCreate(l,c),onSuccess:()=>Sb(a)})}function IS(a){return pe({queryKey:Nt.unlinkedReceiptsWithSuggestions(a),queryFn:()=>db(a),enabled:!!a})}function RS(){return re({mutationFn:({profileId:a,fileName:l,sizeBytes:c,monthKey:u})=>fb(a,l,c,u)})}function _S(){const a=se();return re({mutationFn:l=>mb(l),onSuccess:()=>{Yl(a),jb(a)}})}function OS(a,l){return pe({queryKey:Nt.monthCloseStatus(a,l),queryFn:()=>Vl.getOrCreate(a,l),enabled:!!a&&!!l})}function US(a,l){return pe({queryKey:Nt.monthCloseComputed(a,l),queryFn:()=>Vl.getComputedStatus(a,l),enabled:!!a&&!!l})}function LS(){const a=se();return re({mutationFn:({profileId:l,monthKey:c,updates:u})=>Vl.updateChecklist(l,c,u),onSuccess:()=>du(a)})}function zS(){const a=se();return re({mutationFn:({profileId:l,monthKey:c,notes:u})=>Vl.closeMonth(l,c,u),onSuccess:()=>du(a)})}function kS(){const a=se();return re({mutationFn:({profileId:l,monthKey:c})=>Vl.reopenMonth(l,c),onSuccess:()=>du(a)})}function Lb({profileId:a,value:l,onChange:c,placeholder:u,disabled:d,className:h}){const b=Ze(),g=_.useRef(null),p=_.useRef(null),[m,y]=_.useState(!1),[x,w]=_.useState(l),[j,D]=_.useState(-1),{data:C=[]}=Ob(a),O=Ub(),z=(()=>{if(!x.trim())return C.map(le=>({id:le.id,name:le.canonicalName,isNew:!1}));const F=Pa(x),ne=[];for(const le of C){let ae=Bl(x,le.canonicalName);for(const ye of le.aliases){const ge=Bl(x,ye);ge>ae&&(ae=ge)}(ae>.3||le.canonicalName.toLowerCase().includes(F))&&ne.push({vendor:le,score:ae})}ne.sort((le,be)=>be.score-le.score);const de=ne.map(({vendor:le,score:be})=>({id:le.id,name:le.canonicalName,isNew:!1,similarity:be}));return!ne.some(le=>le.score>=.95)&&x.trim()&&de.push({id:"new",name:x.trim(),isNew:!0}),de})();_.useEffect(()=>{l!==x&&w(l)},[l]),_.useEffect(()=>{const F=ne=>{p.current&&!p.current.contains(ne.target)&&g.current&&!g.current.contains(ne.target)&&y(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const k=F=>{const ne=F.target.value;w(ne),y(!0),D(-1),c(ne,void 0)},T=_.useCallback(async F=>{if(F.isNew)try{const ne=await O.mutateAsync({profileId:a,rawVendor:F.name});w(ne.canonicalName),c(ne.canonicalName,ne.id)}catch{w(F.name),c(F.name,void 0)}else w(F.name),c(F.name,F.id);y(!1),D(-1)},[O,c,a]),P=F=>{if(!m){(F.key==="ArrowDown"||F.key==="Enter")&&(y(!0),F.preventDefault());return}switch(F.key){case"ArrowDown":F.preventDefault(),D(ne=>ne<z.length-1?ne+1:ne);break;case"ArrowUp":F.preventDefault(),D(ne=>ne>0?ne-1:ne);break;case"Enter":F.preventDefault(),j>=0&&j<z.length?T(z[j]):z.length===1&&T(z[0]);break;case"Escape":y(!1),D(-1);break;case"Tab":y(!1);break}},Y=()=>{y(!0)},X=()=>{setTimeout(()=>{p.current?.contains(document.activeElement)||y(!1)},150)};return s.jsxs("div",{className:ue("vendor-typeahead",h),children:[s.jsx("input",{ref:g,type:"text",className:"input",value:x,onChange:k,onKeyDown:P,onFocus:Y,onBlur:X,placeholder:u||b("drawer.expense.vendorPlaceholder"),disabled:d,autoComplete:"off",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-autocomplete":"list"}),m&&z.length>0&&s.jsx("div",{ref:p,className:"vendor-typeahead-dropdown",role:"listbox",children:z.map((F,ne)=>s.jsx("button",{type:"button",className:ue("vendor-typeahead-option",j===ne&&"highlighted",F.isNew&&"is-new"),onClick:()=>T(F),onMouseEnter:()=>D(ne),role:"option","aria-selected":j===ne,children:F.isNew?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"vendor-typeahead-create-label",children:[b("vendor.createNew"),":"]}),s.jsx("span",{className:"vendor-typeahead-name",children:F.name})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"vendor-typeahead-name",children:F.name}),F.similarity&&F.similarity<1&&s.jsxs("span",{className:"vendor-typeahead-score",children:[Math.round(F.similarity*100),"%"]})]})},F.id))})]})}const zb=Vn({expenseType:St(["onetime","recurring"]),profileId:te().min(1,"Profile is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS","EUR"]),occurredAt:te().min(1,"Date is required"),title:te().optional(),vendor:te().optional(),vendorId:te().optional(),categoryId:te().min(1,"Category is required"),notes:te().optional(),frequency:St(["monthly","yearly"]).optional(),startDate:te().optional(),endMode:St(["endOfYear","untilDate","noEnd"]).optional(),endDate:te().optional()}).superRefine((a,l)=>{a.expenseType==="recurring"&&(a.title||l.addIssue({code:_l.custom,message:"Title is required for recurring expenses",path:["title"]}),a.frequency||l.addIssue({code:_l.custom,message:"Frequency is required",path:["frequency"]}),a.startDate||l.addIssue({code:_l.custom,message:"Start date is required",path:["startDate"]}),a.endMode||l.addIssue({code:_l.custom,message:"End mode is required",path:["endMode"]}),a.endMode==="untilDate"&&!a.endDate&&l.addIssue({code:_l.custom,message:"End date is required",path:["endDate"]}))});function kb(){const{expenseDrawer:a,closeExpenseDrawer:l}=ht(),{mode:c,expenseId:u,recurringRuleId:d,defaultProfileId:h,isRecurring:b,prefillData:g,linkReceiptId:p}=a,m=Ze(),{language:y}=Qn(),{data:x=[]}=Pl(),{data:w,isLoading:j}=Ab(u||""),{data:D,isLoading:C}=Cb(d||""),O=Rb(),z=Qa({resolver:Ya(zb),defaultValues:{expenseType:b?"recurring":"onetime",profileId:h||"",amount:g?.amountMinor?(g.amountMinor/100).toString():"",currency:g?.currency||"USD",occurredAt:g?.occurredAt?.split("T")[0]||Pn(),title:g?.title||"",vendor:g?.vendor||"",vendorId:g?.vendorId||"",categoryId:g?.categoryId||"",notes:"",frequency:"monthly",startDate:Pn(),endMode:"endOfYear",endDate:""}}),{watch:k,setValue:T,reset:P}=z,Y=k("expenseType"),X=k("profileId"),F=k("endMode"),{data:ne=[]}=_b(X),de=_.useMemo(()=>vb.map(Z=>({id:Z.name,profileId:X,name:y==="ar"?Z.nameAr:Z.name,color:Z.color})),[y,X]),ve=ne.length>0?ne:de,le=Db(),be=Nb(),ae=Mb(),ye=Eb(),ge=Tb(),U=Ib();_.useEffect(()=>{w&&P({expenseType:"onetime",profileId:w.profileId,amount:(w.amountMinor/100).toString(),currency:w.currency,occurredAt:w.occurredAt.split("T")[0],title:w.title||"",vendor:w.vendor||"",vendorId:w.vendorId||"",categoryId:w.categoryId||"",notes:w.notes||"",frequency:"monthly",startDate:Pn(),endMode:"endOfYear",endDate:""})},[w,P]),_.useEffect(()=>{D&&P({expenseType:"recurring",profileId:D.profileId,amount:(D.amountMinor/100).toString(),currency:D.currency,occurredAt:D.startDate,title:D.title,vendor:D.vendor||"",categoryId:D.categoryId||"",notes:"",frequency:D.frequency,startDate:D.startDate,endMode:D.endMode,endDate:D.endDate||""})},[D,P]),_.useEffect(()=>{x.length===1&&!X&&T("profileId",x[0].id)},[x,X,T]);const Q=async Z=>{try{if(Z.expenseType==="recurring"){const V={profileId:Z.profileId,title:Z.title||"",vendor:Z.vendor||void 0,categoryId:Z.categoryId||void 0,amountMinor:zi(Z.amount),currency:Z.currency,frequency:Z.frequency,startDate:Z.startDate||Pn(),endMode:Z.endMode,endDate:Z.endMode==="untilDate"?Z.endDate:void 0,isPaused:!1};c==="edit"&&d?await ge.mutateAsync({id:d,data:V}):await ye.mutateAsync(V)}else{const V={profileId:Z.profileId,title:Z.title||void 0,vendor:Z.vendor||void 0,vendorId:Z.vendorId||void 0,categoryId:Z.categoryId||void 0,amountMinor:zi(Z.amount),currency:Z.currency,occurredAt:new Date(Z.occurredAt).toISOString(),notes:Z.notes||void 0};if(c==="edit"&&u)await be.mutateAsync({id:u,data:V});else{const W=await le.mutateAsync(V);p&&W&&await O.mutateAsync({receiptId:p,expenseId:W.id})}}l()}catch(V){console.error("Failed to save expense:",V)}},$=async()=>{if(d){if(!confirm(m("expenses.confirmDelete")))return;try{await U.mutateAsync(d),l()}catch(Z){console.error("Failed to delete recurring rule:",Z)}}else if(u){if(!confirm(m("expenses.confirmDelete")))return;try{await ae.mutateAsync(u),l()}catch(Z){console.error("Failed to delete expense:",Z)}}},fe=le.isPending||be.isPending||ye.isPending||ge.isPending;if(c==="edit"&&u&&j||c==="edit"&&d&&C)return s.jsx(At,{title:m("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const xe=()=>m(c==="edit"?d?"drawer.expense.editRecurring":"drawer.expense.edit":Y==="recurring"?"drawer.expense.newRecurring":"drawer.expense.new");return s.jsx(At,{title:xe(),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:$,disabled:ae.isPending||U.isPending,children:m("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:m("common.cancel")}),s.jsx("button",{type:"submit",form:"expense-form",className:"btn btn-primary",disabled:fe,children:m(fe?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"expense-form",onSubmit:z.handleSubmit(Q),children:[c==="create"&&s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:ue("type-selector-btn",Y==="onetime"&&"active"),onClick:()=>T("expenseType","onetime"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeOneTime")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeOneTimeDesc")})]}),s.jsxs("button",{type:"button",className:ue("type-selector-btn",Y==="recurring"&&"active"),onClick:()=>T("expenseType","recurring"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeRecurring")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeRecurringDesc")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.profile")," *"]}),s.jsx(_e,{name:"profileId",control:z.control,render:({field:Z})=>s.jsxs("select",{className:ue("select",z.formState.errors.profileId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.profilePlaceholder")}),x.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),z.formState.errors.profileId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:ue("input",z.formState.errors.amount&&"input-error"),placeholder:m("drawer.expense.amountPlaceholder"),...z.register("amount")}),z.formState.errors.amount&&s.jsx("p",{className:"form-error",children:m("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.currency")," *"]}),s.jsx(_e,{name:"currency",control:z.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),Y==="onetime"?s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.date")," *"]}),s.jsx("input",{type:"date",className:ue("input",z.formState.errors.occurredAt&&"input-error"),...z.register("occurredAt")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.frequency")," *"]}),s.jsx(_e,{name:"frequency",control:z.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"monthly",children:m("expenses.recurring.monthly")}),s.jsx("option",{value:"yearly",children:m("expenses.recurring.yearly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.startDate")," *"]}),s.jsx("input",{type:"date",className:ue("input",z.formState.errors.startDate&&"input-error"),...z.register("startDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endMode")," *"]}),s.jsx(_e,{name:"endMode",control:z.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"endOfYear",children:m("expenses.recurring.endOfYear")}),s.jsx("option",{value:"untilDate",children:m("expenses.recurring.untilDate")}),s.jsx("option",{value:"noEnd",children:m("expenses.recurring.noEnd")})]})})]}),F==="untilDate"&&s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endDate")," *"]}),s.jsx("input",{type:"date",className:ue("input",z.formState.errors.endDate&&"input-error"),...z.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.title")," ",Y==="recurring"&&"*"]}),s.jsx("input",{type:"text",className:ue("input",z.formState.errors.title&&"input-error"),placeholder:m("drawer.expense.titlePlaceholder"),...z.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.vendor")}),s.jsx(_e,{name:"vendor",control:z.control,render:({field:Z})=>s.jsx(Lb,{profileId:X,value:Z.value||"",vendorId:k("vendorId"),onChange:(V,W)=>{Z.onChange(V),T("vendorId",W||"")},disabled:!X})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.category")," *"]}),s.jsx(_e,{name:"categoryId",control:z.control,render:({field:Z})=>s.jsxs("select",{className:ue("select",z.formState.errors.categoryId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.categoryPlaceholder")}),ve.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),z.formState.errors.categoryId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),Y==="onetime"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.notes")}),s.jsx("textarea",{className:"textarea",placeholder:m("drawer.expense.notesPlaceholder"),...z.register("notes")})]})]})})}function Mh(){return crypto.randomUUID()}function pt(){return new Date().toISOString()}function ki(){return new Date().toISOString().split("T")[0]}function Ch(a,l){const c=new Date(a),d=new Date(l).getTime()-c.getTime();return Math.floor(d/(1e3*60*60*24))}function fu(a,l){return new Date(a,l+1,0).getDate()}function Lp(a,l,c){const u=fu(a,l),d=Math.min(c,u);return`${a}-${String(l+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`}function Bb(a,l){const c=`${a}-${String(l+1).padStart(2,"0")}-01`,u=fu(a,l),d=`${a}-${String(l+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`;return{periodStart:c,periodEnd:d}}function qb(a,l){const c=l*3,u=c+2,d=`${a}-${String(c+1).padStart(2,"0")}-01`,h=fu(a,u),b=`${a}-${String(u+1).padStart(2,"0")}-${String(h).padStart(2,"0")}`;return{periodStart:d,periodEnd:b}}const rn={async list(a={}){const l=await S.retainerAgreements.toArray(),c=await S.clients.toArray(),u=await S.projects.toArray(),d=await S.businessProfiles.toArray(),h=await S.projectedIncome.toArray(),b=new Map(c.map(x=>[x.id,x.name])),g=new Map(u.map(x=>[x.id,x.name])),p=new Map(d.map(x=>[x.id,x.name])),m=new Map;h.forEach(x=>{const w=m.get(x.sourceId)||[];w.push(x),m.set(x.sourceId,w)});let y=l.filter(x=>{if(x.archivedAt||a.profileId&&x.profileId!==a.profileId||a.status&&x.status!==a.status||a.currency&&x.currency!==a.currency||a.clientId&&x.clientId!==a.clientId||a.projectId&&x.projectId!==a.projectId)return!1;if(a.search){const w=a.search.toLowerCase(),j=b.get(x.clientId)||"",D=x.projectId&&g.get(x.projectId)||"";if(!(x.title.toLowerCase().includes(w)||j.toLowerCase().includes(w)||D.toLowerCase().includes(w)))return!1}return!0});return a.dueOnly&&(y=y.filter(x=>(m.get(x.id)||[]).some(j=>j.state==="due"))),y.sort((x,w)=>w.createdAt.localeCompare(x.createdAt)),y.map(x=>{const w=m.get(x.id)||[],j=w.filter(T=>T.state==="due"),D=w.filter(T=>T.state==="received"||T.state==="partial"),C=w.filter(T=>T.state==="upcoming"),O=j.reduce((T,P)=>T+(P.expectedAmountMinor-P.receivedAmountMinor),0),z=C.length>0?C.sort((T,P)=>T.expectedDate.localeCompare(P.expectedDate))[0].expectedDate:void 0,k=D.length>0?D.sort((T,P)=>(P.receivedAt||"").localeCompare(T.receivedAt||""))[0]:void 0;return{...x,profileName:p.get(x.profileId),clientName:b.get(x.clientId),projectName:x.projectId?g.get(x.projectId):void 0,nextExpectedDate:z,dueNowAmountMinor:O,lastReceivedDate:k?.receivedAt,lastReceivedAmountMinor:k?.receivedAmountMinor}})},async get(a){return S.retainerAgreements.get(a)},async getDisplay(a){const l=await this.get(a);if(!l)return;const c=l.profileId?await S.businessProfiles.get(l.profileId):void 0,u=l.clientId?await S.clients.get(l.clientId):void 0,d=l.projectId?await S.projects.get(l.projectId):void 0,h=await hn.getByRetainer(a),b=h.filter(w=>w.state==="due"),g=h.filter(w=>w.state==="received"||w.state==="partial"),p=h.filter(w=>w.state==="upcoming"),m=b.reduce((w,j)=>w+(j.expectedAmountMinor-j.receivedAmountMinor),0),y=p.length>0?p.sort((w,j)=>w.expectedDate.localeCompare(j.expectedDate))[0].expectedDate:void 0,x=g.length>0?g.sort((w,j)=>(j.receivedAt||"").localeCompare(w.receivedAt||""))[0]:void 0;return{...l,profileName:c?.name,clientName:u?.name,projectName:d?.name,nextExpectedDate:y,dueNowAmountMinor:m,lastReceivedDate:x?.receivedAt,lastReceivedAmountMinor:x?.receivedAmountMinor}},async create(a){const l=pt(),c={...a,id:Mh(),createdAt:l,updatedAt:l};return await S.retainerAgreements.add(c),c.status==="active"&&await Ul.generateSchedule(c.id),c},async update(a,l){const c=await this.get(a);if(!c)return;await S.retainerAgreements.update(a,{...l,updatedAt:pt()}),["amountMinor","cadence","paymentDay","startDate","endDate"].some(h=>h in l)&&c.status==="active"&&await Ul.regenerateSchedule(a)},async archive(a){await S.retainerAgreements.update(a,{archivedAt:pt(),updatedAt:pt()})},async activate(a){const l=await this.get(a);!l||l.status!=="draft"||(await S.retainerAgreements.update(a,{status:"active",updatedAt:pt()}),await Ul.generateSchedule(a))},async pause(a){const l=await this.get(a);if(!l||l.status!=="active")return;await S.retainerAgreements.update(a,{status:"paused",updatedAt:pt()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await S.projectedIncome.update(u.id,{state:"canceled",updatedAt:pt()})},async resume(a){const l=await this.get(a);!l||l.status!=="paused"||(await S.retainerAgreements.update(a,{status:"active",updatedAt:pt()}),await Ul.regenerateSchedule(a))},async end(a){const l=await this.get(a);if(!l||l.status!=="active"&&l.status!=="paused")return;await S.retainerAgreements.update(a,{status:"ended",endDate:ki(),updatedAt:pt()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await S.projectedIncome.update(u.id,{state:"canceled",updatedAt:pt()})}},hn={async list(a={}){const l=await S.projectedIncome.toArray(),c=await S.clients.toArray(),u=await S.projects.toArray(),d=await S.retainerAgreements.toArray(),h=new Map(c.map(y=>[y.id,y.name])),b=new Map(u.map(y=>[y.id,y.name])),g=new Map(d.map(y=>[y.id,y.title])),p=ki();let m=l.filter(y=>!(a.profileId&&y.profileId!==a.profileId||a.sourceId&&y.sourceId!==a.sourceId||a.clientId&&y.clientId!==a.clientId||a.currency&&y.currency!==a.currency||a.state&&!(Array.isArray(a.state)?a.state:[a.state]).includes(y.state)||a.dateFrom&&y.expectedDate<a.dateFrom||a.dateTo&&y.expectedDate>a.dateTo));return m.sort((y,x)=>y.expectedDate.localeCompare(x.expectedDate)),m.map(y=>{const x=y.state==="due"?Ch(y.expectedDate,p):void 0;return{...y,clientName:h.get(y.clientId),projectName:y.projectId?b.get(y.projectId):void 0,retainerTitle:g.get(y.sourceId),daysOverdue:x!==void 0&&x>0?x:void 0}})},async getByRetainer(a){return S.projectedIncome.where("sourceId").equals(a).toArray()},async getDueItems(a){return this.list({state:"due",currency:a})},async getForForecast(a,l,c){return this.list({state:["upcoming","due","partial"],dateFrom:a,dateTo:l,currency:c})},async get(a){return S.projectedIncome.get(a)},async update(a,l){await S.projectedIncome.update(a,{...l,updatedAt:pt()})}},Ul={async generateSchedule(a){const l=await rn.get(a);if(!l||l.status!=="active")return;const c=pt(),u=ki(),d=new Date;d.setMonth(d.getMonth()+12);const h=l.endDate&&l.endDate<d.toISOString().split("T")[0]?l.endDate:d.toISOString().split("T")[0],b=await hn.getByRetainer(a),g=new Set(b.map(y=>`${y.periodStart}-${y.periodEnd}`)),p=[];let m=new Date(l.startDate);for(;m.toISOString().split("T")[0]<=h;){const y=m.getFullYear(),x=m.getMonth();let w,j,D;if(l.cadence==="monthly"){const k=Bb(y,x);w=k.periodStart,j=k.periodEnd,D=Lp(y,x,l.paymentDay),m.setMonth(m.getMonth()+1)}else{const k=Math.floor(x/3),T=qb(y,k);w=T.periodStart,j=T.periodEnd;const P=k*3+2;D=Lp(y,P,l.paymentDay),m.setMonth(m.getMonth()+3)}if(j<l.startDate)continue;const C=`${w}-${j}`;if(g.has(C))continue;if(l.endDate&&w>l.endDate)break;const O=D<=u?"due":"upcoming",z={id:Mh(),profileId:l.profileId,sourceType:"retainer",sourceId:a,clientId:l.clientId,projectId:l.projectId,currency:l.currency,expectedAmountMinor:l.amountMinor,expectedDate:D,periodStart:w,periodEnd:j,state:O,receivedAmountMinor:0,matchedTransactionIds:[],createdAt:c,updatedAt:c};p.push(z)}p.length>0&&await S.projectedIncome.bulkAdd(p)},async regenerateSchedule(a){const l=await rn.get(a);if(!l)return;const u=(await hn.getByRetainer(a)).filter(d=>d.state==="upcoming"||d.state==="canceled");for(const d of u)await S.projectedIncome.delete(d.id);l.status==="active"&&await this.generateSchedule(a)},async updateDueStates(){const a=ki(),l=await S.projectedIncome.where("state").equals("upcoming").toArray();for(const c of l)c.expectedDate<=a&&await S.projectedIncome.update(c.id,{state:"due",updatedAt:pt()})}},Eh={async getSuggestionsForTransaction(a){const l=await S.transactions.get(a);if(!l)return[];if(l.kind!=="income"||l.status!=="paid")return[];const u=(await hn.list({state:["due","partial"],currency:l.currency})).filter(h=>h.receivedAmountMinor<h.expectedAmountMinor&&!h.matchedTransactionIds.includes(a)),d=[];for(const h of u){const b=this.calculateMatchScore(l,h);if(b>=40){let g;b>=80?g="high":b>=60?g="medium":g="low",d.push({projectedIncomeId:h.id,score:b,confidence:g,projectedIncome:h})}}return d.sort((h,b)=>b.score-h.score).slice(0,10)},calculateMatchScore(a,l){let c=0;if(a.currency!==l.currency)return 0;c+=30,a.clientId&&a.clientId===l.clientId&&(c+=30);const u=l.expectedAmountMinor-l.receivedAmountMinor,d=Math.abs(a.amountMinor-u),h=u>0?d/u:1;h<=.01?c+=25:h<=.05?c+=20:h<=.1?c+=15:h<=.2&&(c+=10);const b=a.occurredAt.split("T")[0],g=Math.abs(Ch(b,l.expectedDate));return g<=3?c+=15:g<=7?c+=12:g<=14?c+=8:g<=30&&(c+=4),c},async matchTransaction(a,l){const c=await hn.get(a),u=await S.transactions.get(l);if(!c||!u)return;const d=[...c.matchedTransactionIds,l],h=c.receivedAmountMinor+u.amountMinor;let b=c.state;h>=c.expectedAmountMinor?b="received":h>0&&(b="partial"),await S.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:b==="received"?pt():c.receivedAt,state:b,updatedAt:pt()}),await S.transactions.update(l,{linkedProjectedIncomeId:a,updatedAt:pt()})},async unmatchTransaction(a,l){const c=await hn.get(a),u=await S.transactions.get(l);if(!c||!u)return;const d=c.matchedTransactionIds.filter(p=>p!==l),h=Math.max(0,c.receivedAmountMinor-u.amountMinor);let b=c.state;const g=ki();h===0?b=c.expectedDate<=g?"due":"upcoming":b="partial",await S.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:d.length>0?c.receivedAt:void 0,state:b,updatedAt:pt()}),await S.transactions.update(l,{linkedProjectedIncomeId:void 0,updatedAt:pt()})},async getAllSuggestionsForUnlinkedTransactions(){const a=await S.transactions.filter(p=>p.kind==="income"&&p.status==="paid"&&!p.deletedAt&&!p.linkedProjectedIncomeId).toArray(),l=await S.clients.toArray(),c=await S.projects.toArray(),u=await S.categories.toArray(),d=new Map(l.map(p=>[p.id,p.name])),h=new Map(c.map(p=>[p.id,p.name])),b=new Map(u.map(p=>[p.id,p.name])),g=[];for(const p of a){const m=await this.getSuggestionsForTransaction(p.id);if(m.length>0){const y={...p,clientName:p.clientId?d.get(p.clientId):void 0,projectName:p.projectId?h.get(p.projectId):void 0,categoryName:p.categoryId?b.get(p.categoryId):void 0};g.push({transaction:y,suggestions:m})}}return g}};async function Hb(a,l){const c=await S.retainerAgreements.filter(w=>w.status==="active"&&!w.archivedAt).toArray(),u=await hn.list({profileId:a,state:"due"}),d=ki();let h=0,b=0,g=0;for(const w of c){if(a&&w.profileId!==a)continue;h++;const j=w.cadence==="quarterly"?w.amountMinor/3:w.amountMinor;w.currency==="USD"?b+=j:g+=j}let p=0,m=0,y=0,x=0;for(const w of u){const j=w.expectedAmountMinor-w.receivedAmountMinor;w.currency==="USD"?(p+=j,w.expectedDate<d&&(y+=j)):(m+=j,w.expectedDate<d&&(x+=j))}return{activeCount:h,totalExpectedMonthlyUsdMinor:b,totalExpectedMonthlyIlsMinor:g,totalDueUsdMinor:p,totalDueIlsMinor:m,totalOverdueUsdMinor:y,totalOverdueIlsMinor:x}}const Ka={retainers:a=>["retainers",a],retainer:a=>["retainer",a],retainerDisplay:a=>["retainerDisplay",a],retainerSummary:(a,l)=>["retainerSummary",a,l],projectedIncome:a=>["projectedIncome",a],retainerSchedule:a=>["retainerSchedule",a],dueItems:a=>["dueItems",a],forecastItems:(a,l,c)=>["forecastItems",a,l,c],matchSuggestions:a=>["retainerMatchSuggestions",a],allMatchSuggestions:()=>["allRetainerMatchSuggestions"]};function Th(a){a.invalidateQueries({queryKey:["retainers"]}),a.invalidateQueries({queryKey:["retainer"]}),a.invalidateQueries({queryKey:["retainerDisplay"]}),a.invalidateQueries({queryKey:["retainerSummary"]})}function Ih(a){a.invalidateQueries({queryKey:["projectedIncome"]}),a.invalidateQueries({queryKey:["retainerSchedule"]}),a.invalidateQueries({queryKey:["dueItems"]}),a.invalidateQueries({queryKey:["forecastItems"]})}function Pb(a){a.invalidateQueries({queryKey:["retainerMatchSuggestions"]}),a.invalidateQueries({queryKey:["allRetainerMatchSuggestions"]})}function Fa(a){Th(a),Ih(a),Pb(a)}function BS(a={}){return pe({queryKey:Ka.retainers(a),queryFn:()=>rn.list(a)})}function Vb(a){return pe({queryKey:Ka.retainer(a),queryFn:()=>rn.get(a),enabled:!!a})}function qS(a){return pe({queryKey:Ka.retainerDisplay(a),queryFn:()=>rn.getDisplay(a),enabled:!!a})}function HS(a,l){return pe({queryKey:Ka.retainerSummary(a,l),queryFn:()=>Hb(a)})}function Qb(){const a=se();return re({mutationFn:l=>rn.create(l),onSuccess:()=>Fa(a)})}function Yb(){const a=se();return re({mutationFn:({id:l,data:c})=>rn.update(l,c),onSuccess:()=>Fa(a)})}function Kb(){const a=se();return re({mutationFn:l=>rn.archive(l),onSuccess:()=>Th(a)})}function PS(){const a=se();return re({mutationFn:l=>rn.activate(l),onSuccess:()=>Fa(a)})}function VS(){const a=se();return re({mutationFn:l=>rn.pause(l),onSuccess:()=>Fa(a)})}function QS(){const a=se();return re({mutationFn:l=>rn.resume(l),onSuccess:()=>Fa(a)})}function YS(){const a=se();return re({mutationFn:l=>rn.end(l),onSuccess:()=>Fa(a)})}function KS(a){return pe({queryKey:Ka.retainerSchedule(a),queryFn:()=>hn.getByRetainer(a),enabled:!!a})}function Fb(a){return pe({queryKey:Ka.dueItems(a),queryFn:()=>hn.getDueItems(a)})}function FS(){const a=se();return re({mutationFn:()=>Ul.updateDueStates(),onSuccess:()=>Ih(a)})}function Gb(a){return pe({queryKey:Ka.matchSuggestions(a),queryFn:()=>Eh.getSuggestionsForTransaction(a),enabled:!!a})}function Zb(){const a=se();return re({mutationFn:({projectedIncomeId:l,transactionId:c})=>Eh.matchTransaction(l,c),onSuccess:()=>{Fa(a),a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]})}})}const Xb=Vn({profileId:te().min(1,"Profile is required"),clientId:te().min(1,"Client is required"),title:te().min(1,"Title is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS","EUR"]),cadence:St(["monthly","quarterly"]),paymentDay:Li().min(1).max(28),startDate:te().min(1,"Start date is required"),endDate:te().optional(),projectId:te().optional(),notes:te().optional(),status:St(["draft","active","paused","ended"])});function Jb(){const{retainerDrawer:a,closeRetainerDrawer:l}=ht(),{mode:c,retainerId:u,defaultProfileId:d,defaultClientId:h,defaultProjectId:b}=a,g=Ze(),{language:p}=Qn(),m=ql(p),{data:y=[]}=Pl(),{data:x=[]}=wr(),{data:w=[]}=fh(),{data:j,isLoading:D}=Vb(u||""),C=_.useMemo(()=>d||y.find(W=>W.isDefault)?.id||y[0]?.id||"",[d,y]),O=Math.min(new Date().getDate(),28),z=Qa({resolver:Ya(Xb),defaultValues:{profileId:C,clientId:h||"",title:"",amount:"",currency:"USD",cadence:"monthly",paymentDay:O,startDate:Pn(),endDate:"",projectId:b||"",notes:"",status:"draft"}}),{watch:k,setValue:T,reset:P,formState:{errors:Y}}=z,X=k("clientId"),F=k("amount"),ne=k("currency"),de=k("cadence"),ve=k("paymentDay"),le=k("startDate"),be=k("endDate"),ae=_.useMemo(()=>X?w.filter(V=>!V.clientId||V.clientId===X):w,[w,X]),ye=_.useMemo(()=>{const V=zi(F);if(!le||!V)return[];const W=[],yt=new Date(le),Mt=be?new Date(be):null,cn=new Date;cn.setMonth(cn.getMonth()+12);const Kn=Mt&&Mt<cn?Mt:cn;let Ct=new Date(yt);const Fn=de==="quarterly"?3:1;for(;Ct<=Kn&&W.length<6;){const vn=Ct.getFullYear(),jn=Ct.getMonth(),Ga=new Date(vn,jn+1,0).getDate(),on=Math.min(ve,Ga),Se=new Date(vn,jn,on);Se>=yt&&W.push({date:Se.toISOString().split("T")[0],periodLabel:de==="quarterly"?`Q${Math.floor(jn/3)+1} ${vn}`:Se.toLocaleDateString(m,{month:"short",year:"numeric"})}),Ct.setMonth(Ct.getMonth()+Fn)}return W},[le,be,de,ve,F,m]),ge=Qb(),U=Yb(),Q=Kb();_.useEffect(()=>{j&&P({profileId:j.profileId,clientId:j.clientId,title:j.title,amount:(j.amountMinor/100).toString(),currency:j.currency,cadence:j.cadence,paymentDay:j.paymentDay,startDate:j.startDate,endDate:j.endDate||"",projectId:j.projectId||"",notes:j.notes||"",status:j.status})},[j,P]),_.useEffect(()=>{c==="create"&&C&&!z.getValues("profileId")&&T("profileId",C)},[c,C,T,z]),_.useEffect(()=>{if(c==="create"&&X&&!z.getValues("title")){const V=x.find(W=>W.id===X);V&&T("title",`${V.name} retainer`)}},[X,x,c,T,z]);const $=async V=>{try{const W={profileId:V.profileId,clientId:V.clientId,title:V.title,amountMinor:zi(V.amount),currency:V.currency,cadence:V.cadence,paymentDay:V.paymentDay,startDate:V.startDate,endDate:V.endDate||void 0,projectId:V.projectId||void 0,notes:V.notes||void 0,status:V.status};c==="edit"&&u?await U.mutateAsync({id:u,data:W}):await ge.mutateAsync(W),l()}catch(W){console.error("Failed to save retainer:",W)}},fe=async()=>{if(u&&confirm(g("retainers.confirmArchive")))try{await Q.mutateAsync(u),l()}catch(V){console.error("Failed to archive retainer:",V)}},G=ge.isPending||U.isPending;if(c==="edit"&&u&&D)return s.jsx(At,{title:g("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const Z=()=>g(c==="edit"?"drawer.retainer.edit":"drawer.retainer.new");return s.jsx(At,{title:Z(),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:fe,disabled:Q.isPending,children:g("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:g("common.cancel")}),s.jsx("button",{type:"submit",form:"retainer-form",className:"btn btn-primary",disabled:G,children:g(G?"common.saving":"common.save")})]})]}),children:s.jsxs("div",{className:"retainer-drawer-layout",children:[s.jsxs("form",{id:"retainer-form",className:"retainer-drawer-form",onSubmit:z.handleSubmit($),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.expense.profile")," *"]}),s.jsx(_e,{name:"profileId",control:z.control,render:({field:V})=>s.jsxs("select",{className:ue("select",Y.profileId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.expense.profilePlaceholder")}),y.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),Y.profileId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.client")," *"]}),s.jsx(_e,{name:"clientId",control:z.control,render:({field:V})=>s.jsxs("select",{className:ue("select",Y.clientId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.clientPlaceholder")}),x.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),Y.clientId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.title")," *"]}),s.jsx("input",{type:"text",className:ue("input",Y.title&&"input-error"),placeholder:g("drawer.retainer.titlePlaceholder"),...z.register("title")}),Y.title&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:ue("input",Y.amount&&"input-error"),placeholder:g("drawer.retainer.amountPlaceholder"),...z.register("amount")}),Y.amount&&s.jsx("p",{className:"form-error",children:g("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.currency")," *"]}),s.jsx(_e,{name:"currency",control:z.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.cadence")," *"]}),s.jsx(_e,{name:"cadence",control:z.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"monthly",children:g("retainers.cadence.monthly")}),s.jsx("option",{value:"quarterly",children:g("retainers.cadence.quarterly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.paymentDay")," *"]}),s.jsx(_e,{name:"paymentDay",control:z.control,render:({field:V})=>s.jsx("select",{className:"select",style:{width:"100%"},value:V.value,onChange:W=>V.onChange(Number(W.target.value)),children:Array.from({length:28},(W,yt)=>yt+1).map(W=>s.jsx("option",{value:W,children:W},W))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.startDate")," *"]}),s.jsx("input",{type:"date",className:ue("input",Y.startDate&&"input-error"),...z.register("startDate")}),Y.startDate&&s.jsx("p",{className:"form-error",children:g("validation.dateRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.endDate")}),s.jsx("input",{type:"date",className:"input",...z.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.project")}),s.jsx(_e,{name:"projectId",control:z.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.projectPlaceholder")}),ae.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})})]}),c==="edit"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.status")}),s.jsx(_e,{name:"status",control:z.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"draft",children:g("retainers.status.draft")}),s.jsx("option",{value:"active",children:g("retainers.status.active")}),s.jsx("option",{value:"paused",children:g("retainers.status.paused")}),s.jsx("option",{value:"ended",children:g("retainers.status.ended")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.notes")}),s.jsx("textarea",{className:"textarea",placeholder:g("drawer.retainer.notesPlaceholder"),...z.register("notes")})]})]}),s.jsxs("div",{className:"retainer-drawer-preview",children:[s.jsx("h4",{className:"preview-title",children:g("drawer.retainer.schedulePreview")}),ye.length>0?s.jsxs("div",{className:"preview-schedule",children:[ye.map((V,W)=>s.jsxs("div",{className:"preview-schedule-item",children:[s.jsx("span",{className:"preview-schedule-date",children:V.periodLabel}),s.jsx("span",{className:"preview-schedule-amount",children:Lt(zi(F),ne,m)})]},W)),ye.length===6&&s.jsx("div",{className:"preview-schedule-more",children:g("drawer.retainer.andMore")})]}):s.jsx("p",{className:"preview-empty",children:g("drawer.retainer.enterDetailsForPreview")})]})]})})}function Rh({value:a,onChange:l,placeholder:c,debounceMs:u=200}){const d=Ze(),h=c??d("common.search"),[b,g]=_.useState(a),p=_.useRef(void 0);_.useEffect(()=>{g(a)},[a]);const m=y=>{g(y),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{l(y)},u)};return _.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),s.jsxs("div",{className:"search-input",children:[s.jsx($b,{}),s.jsx("input",{type:"text",value:b,onChange:y=>m(y.target.value),placeholder:h}),b&&s.jsx("button",{onClick:()=>{g(""),l("")},className:"btn-ghost",style:{padding:0,width:20,height:20},children:s.jsx(Wb,{})})]})}function $b(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,style:{color:"var(--color-text-muted)",flexShrink:0},children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}function Wb(){return s.jsx("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}function e2({dateFrom:a,dateTo:l,onChange:c}){const u=Ze(),[d,h]=_.useState(!1),[b,g]=_.useState(a),[p,m]=_.useState(l),y=[{value:"this-month",labelKey:"filters.thisMonth"},{value:"last-month",labelKey:"filters.lastMonth"},{value:"this-year",labelKey:"filters.thisYear"},{value:"all",labelKey:"filters.allTime"}],w=(()=>{for(const O of y){const z=Zo(O.value);if(z.dateFrom===a&&z.dateTo===l)return O.value}return"custom"})();_.useEffect(()=>{w==="custom"&&Promise.resolve().then(()=>{g(a),m(l)})},[a,l,w]);const j=O=>{if(O==="custom"){h(!0),g(a),m(l);return}h(!1);const z=Zo(O);c(z.dateFrom,z.dateTo)},D=(O,z)=>{O==="from"?(g(z),z&&p&&c(z,p)):(m(z),b&&z&&c(b,z))},C=w==="custom"||d;return s.jsxs("div",{className:"date-range-control",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsxs("select",{className:"select",value:C?"custom":w,onChange:O=>j(O.target.value),children:[y.map(O=>s.jsx("option",{value:O.value,children:u(O.labelKey)},O.value)),s.jsx("option",{value:"custom",children:u("filters.custom")})]}),C&&s.jsxs("div",{className:"custom-date-inputs",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsx("input",{type:"date",className:"input",value:b,onChange:O=>D("from",O.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}}),s.jsx("span",{style:{color:"var(--color-text-muted)"},children:""}),s.jsx("input",{type:"date",className:"input",value:p,onChange:O=>D("to",O.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}})]})]})}function t2(){const{retainerMatchingDrawer:a,closeRetainerMatchingDrawer:l,setRetainerMatchingTransaction:c,openTransactionDrawer:u}=ht(),{step:d,transactionId:h}=a,b=Ze(),g=Zb(),p=()=>b(d==="select-transaction"?"retainerMatching.selectTransaction":"retainerMatching.selectProjectedIncome"),m=async y=>{if(h)try{await g.mutateAsync({projectedIncomeId:y,transactionId:h}),l()}catch(x){console.error("Failed to match transaction:",x)}};return s.jsx(At,{title:p(),onClose:l,footer:s.jsx("div",{className:"drawer-footer-right",children:s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:b("common.cancel")})}),children:d==="select-transaction"?s.jsx(n2,{onSelect:y=>c(y),onCreateNew:()=>{l(),u({mode:"create",defaultKind:"income"})}}):s.jsx(a2,{transactionId:h,onSelect:m,isMatching:g.isPending})})}function n2({onSelect:a,onCreateNew:l}){const c=Ze(),{language:u}=Qn(),d=ql(u),[h,b]=_.useState(""),{data:g=[],isLoading:p}=dh({kind:"income",status:"paid",sort:{by:"occurredAt",dir:"desc"},limit:50}),m=_.useMemo(()=>g.filter(x=>!x.linkedProjectedIncomeId),[g]),y=_.useMemo(()=>{if(!h)return m;const x=h.toLowerCase();return m.filter(w=>w.title?.toLowerCase().includes(x)||w.clientName?.toLowerCase().includes(x)||w.projectName?.toLowerCase().includes(x))},[m,h]);return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:c("retainerMatching.selectTransactionDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Rh,{value:h,onChange:b,placeholder:c("retainerMatching.searchTransactions")})}),s.jsx("div",{className:"matching-actions",children:s.jsxs("button",{className:"btn btn-secondary",onClick:l,children:["+ ",c("retainerMatching.createNewTransaction")]})}),p?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):y.length===0?s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:c(h?"retainerMatching.noMatchingTransactions":"retainerMatching.noUnlinkedTransactions")})}):s.jsx("div",{className:"matching-list",children:y.map(x=>s.jsxs("button",{className:"matching-item",onClick:()=>a(x.id),children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:x.title||x.clientName||c("retainerMatching.untitled")}),s.jsxs("span",{className:"matching-item-meta",children:[Jp(x.occurredAt,d),x.clientName&&`  ${x.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount amount-positive",children:Lt(x.amountMinor,x.currency,d)})]},x.id))})]})}function a2({transactionId:a,onSelect:l,isMatching:c}){const u=Ze(),{language:d}=Qn(),h=ql(d),[b,g]=_.useState(""),{data:p=[],isLoading:m}=Gb(a),{data:y=[],isLoading:x}=Fb(),w=_.useMemo(()=>{const D=new Set(p.map(O=>O.projectedIncomeId)),C=y.filter(O=>!D.has(O.id));if(b){const O=b.toLowerCase(),z=k=>k.retainerTitle?.toLowerCase().includes(O)||k.clientName?.toLowerCase().includes(O);return{suggestions:p.filter(k=>z(k.projectedIncome)),others:C.filter(z)}}return{suggestions:p,others:C}},[p,y,b]),j=m||x;return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:u("retainerMatching.selectProjectedDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Rh,{value:b,onChange:g,placeholder:u("retainerMatching.searchProjected")})}),j?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):s.jsxs(s.Fragment,{children:[w.suggestions.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.suggestions")}),s.jsx("div",{className:"matching-list",children:w.suggestions.map(D=>s.jsxs("button",{className:"matching-item matching-item-suggested",onClick:()=>l(D.projectedIncomeId),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:D.projectedIncome.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(D.projectedIncome.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),D.projectedIncome.clientName&&`  ${D.projectedIncome.clientName}`]})]}),s.jsxs("div",{className:"matching-item-right",children:[s.jsx("span",{className:"matching-item-amount",children:Lt(D.projectedIncome.expectedAmountMinor-D.projectedIncome.receivedAmountMinor,D.projectedIncome.currency,h)}),s.jsx(i2,{confidence:D.confidence})]})]},D.projectedIncomeId))})]}),w.others.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.otherDueItems")}),s.jsx("div",{className:"matching-list",children:w.others.map(D=>s.jsxs("button",{className:"matching-item",onClick:()=>l(D.id),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:D.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(D.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),D.clientName&&`  ${D.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount",children:Lt(D.expectedAmountMinor-D.receivedAmountMinor,D.currency,h)})]},D.id))})]}),w.suggestions.length===0&&w.others.length===0&&s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:u(b?"retainerMatching.noMatchingProjected":"retainerMatching.noDueItems")})})]})]})}function i2({confidence:a}){const l=Ze();return s.jsx("span",{className:ue("confidence-badge",`confidence-${a}`),children:l(`retainerMatching.confidence.${a}`)})}function l2(){const a=Ze(),{language:l}=Qn(),c=_.useRef(null),{data:u,isLoading:d,isError:h}=Pl(),b=ph(),{openBusinessProfileDrawer:g,businessProfileDrawer:p}=ht(),m=!d&&!h&&Array.isArray(u)&&u.length===0,y=p.isOpen,x=m&&!y;_.useEffect(()=>{x&&c.current&&c.current.focus()},[x]);const w=async()=>{const D=l==="ar"?"  ":"Default Profile";await b.mutateAsync({name:D,email:"",businessType:"none",defaultCurrency:"USD",defaultLanguage:l==="ar"?"ar":"en",isDefault:!0})},j=()=>{g({mode:"create"})};return x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"welcome-modal-overlay"}),s.jsx("div",{className:"welcome-modal",role:"dialog","aria-modal":"true","aria-labelledby":"welcome-modal-title",ref:c,tabIndex:-1,children:s.jsxs("div",{className:"welcome-modal-content",children:[s.jsx("div",{className:"welcome-modal-icon",children:s.jsx(s2,{})}),s.jsx("h2",{id:"welcome-modal-title",className:"welcome-modal-title",children:a("welcome.title")}),s.jsx("p",{className:"welcome-modal-subtitle",children:a("welcome.subtitle")}),s.jsxs("div",{className:"welcome-modal-info",children:[s.jsx("h3",{className:"welcome-modal-info-title",children:a("welcome.infoTitle")}),s.jsxs("ul",{className:"welcome-modal-list",children:[s.jsx("li",{children:a("welcome.bullet1")}),s.jsx("li",{children:a("welcome.bullet2")}),s.jsx("li",{children:a("welcome.bullet3")})]}),s.jsx("p",{className:"welcome-modal-info-note",children:a("welcome.multipleProfiles")})]}),s.jsxs("div",{className:"welcome-modal-actions",children:[s.jsx("button",{className:"btn btn-primary",onClick:j,children:a("welcome.setUpNow")}),s.jsx("button",{className:"btn btn-ghost",onClick:w,disabled:b.isPending,children:b.isPending?a("common.saving"):a("welcome.skipForNow")})]}),s.jsx("p",{className:"welcome-modal-skip-note",children:a("welcome.skipNote")})]})})]}):null}function s2(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const zp="hideDownloadBanner";function r2(){if(typeof navigator>"u")return!1;const a=navigator.platform?.toLowerCase()||"",l=navigator.userAgent?.toLowerCase()||"";return a.includes("mac")||l.includes("macintosh")}function c2(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window}function o2(){const a=Ze(),[l,c]=_.useState(!1);_.useEffect(()=>{!r2()||c2()||localStorage.getItem(zp)==="true"||c(!0)},[]);const u=_.useCallback(()=>{localStorage.setItem(zp,"true"),c(!1)},[]);return l?s.jsxs("div",{className:"mac-download-banner",role:"banner",children:[s.jsx("span",{className:"mac-download-banner-message",children:a("downloadBanner.message")}),s.jsxs("div",{className:"mac-download-banner-actions",children:[s.jsx(kl,{to:"/download",className:"mac-download-banner-cta","data-cta":"download-banner-mac",children:a("downloadBanner.cta")}),s.jsx("button",{type:"button",className:"mac-download-banner-dismiss",onClick:u,"aria-label":a("downloadBanner.dismiss"),children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}const u2="https://api.frankfurter.dev/v1/latest",au="mutaba3a_fx_cache";function _h(a,l){try{const c=localStorage.getItem(au);if(!c)return null;const u=JSON.parse(c),d=`${a}-${l}`;return u[d]||null}catch{return null}}function kp(a){try{const l=localStorage.getItem(au),c=l?JSON.parse(l):{},u=`${a.base}-${a.quote}`;c[u]=a,localStorage.setItem(au,JSON.stringify(c))}catch{}}async function d2(a="USD",l="ILS"){const c=_h(a,l),u=new Date().toISOString();if(!navigator.onLine)return c?{rate:c.rate,base:a,quote:l,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:l,date:"",source:"none",fetchedAt:u};try{const d=`${u2}?base=${a}`,h=await fetch(d);if(!h.ok)throw new Error(`HTTP ${h.status}`);const b=await h.json(),g=b.rates[l];if(typeof g!="number"||g<=0)throw new Error("Invalid rate received");const p={rate:g,base:a,quote:l,date:b.date,fetchedAt:u};kp(p);const m={rate:1/g,base:l,quote:a,date:b.date,fetchedAt:u};return kp(m),{rate:g,base:a,quote:l,date:b.date,source:"live",fetchedAt:u}}catch(d){return console.warn("FX fetch failed:",d),c?{rate:c.rate,base:a,quote:l,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:l,date:"",source:"none",fetchedAt:u}}}function iu(a,l,c,u){return l===c?a:Math.round(a*u)}function GS(a,l,c,u){if(u===null||u<=0)return null;{const d=iu(a,"USD","ILS",u);return l+d}}function f2(a,l,c,u,d){if(a!==0&&(u===null||u<=0)||c!==0&&(d===null||d<=0))return null;const h=a!==0&&u?iu(a,"USD","ILS",u):0,b=c!==0&&d?iu(c,"EUR","ILS",d):0;return l+h+b}const Bp={rate:(a,l)=>["fxRate",a,l]};function gr(a="USD",l="ILS"){const c=se(),{data:u,isLoading:d,isError:h,refetch:b}=pe({queryKey:Bp.rate(a,l),queryFn:()=>d2(a,l),staleTime:14400*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0,retry:2,retryDelay:1e3,placeholderData:()=>{const p=_h(a,l);if(p)return{rate:p.rate,base:a,quote:l,date:p.date,source:"cached",fetchedAt:p.fetchedAt}}}),g=()=>{c.invalidateQueries({queryKey:Bp.rate(a,l)}),b()};return{rate:u?.rate&&u.rate>0?u.rate:null,source:u?.source??"none",isLoading:d,isError:h,rateDate:u?.date||null,lastUpdated:u?.fetchedAt||null,refetch:g}}const Oh="mutaba3a-theme";function m2(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function qp(){if(typeof window>"u")return"system";const a=localStorage.getItem(Oh);return a==="light"||a==="dark"||a==="system"?a:"system"}function Hp(a){return a==="system"?m2():a}const Uh=_.createContext(null);function Ko({children:a}){const[l,c]=_.useState(qp),[u,d]=_.useState(()=>Hp(qp()));_.useEffect(()=>{const g=Hp(l);d(g),l==="system"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",l),localStorage.setItem(Oh,l)},[l]),_.useEffect(()=>{if(l!=="system")return;const g=window.matchMedia("(prefers-color-scheme: dark)"),p=m=>{d(m.matches?"dark":"light")};return g.addEventListener("change",p),()=>g.removeEventListener("change",p)},[l]);const h=_.useCallback(g=>{c(g)},[]),b={theme:l,resolvedTheme:u,setTheme:h};return s.jsx(Uh.Provider,{value:b,children:a})}function p2(){const a=_.useContext(Uh);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a}const Lh="mutaba3a_fx_banner_state",h2={isMinimized:!1,position:{x:0,y:0}};function y2(){try{const a=localStorage.getItem(Lh);if(a)return JSON.parse(a)}catch{}return h2}function g2(a){try{localStorage.setItem(Lh,JSON.stringify(a))}catch{}}function v2(a){const l=["light","dark","system"],c=l.indexOf(a);return l[(c+1)%l.length]}function x2(){const a=Ze(),{rate:l,source:c,isLoading:u,lastUpdated:d,refetch:h}=gr("USD","ILS"),{rate:b,source:g,isLoading:p,refetch:m}=gr("EUR","ILS"),{theme:y,resolvedTheme:x,setTheme:w}=p2(),j=u||p,D=d,[C,O]=_.useState(y2),[z,k]=_.useState(!1),[T,P]=_.useState({x:0,y:0}),Y=_.useRef(null);_.useEffect(()=>{g2(C)},[C]);const X=_.useCallback(U=>{const Q=U.target;if(Q.closest(".fx-banner-actions")||Q.closest("button")||Q.tagName==="BUTTON")return;U.preventDefault(),k(!0);const $=Y.current;if($){const fe=$.getBoundingClientRect();P({x:U.clientX-fe.left,y:U.clientY-fe.top})}},[]);_.useEffect(()=>{if(!z)return;const U=$=>{const fe=Y.current;if(!fe)return;const G=$.clientX-T.x,xe=$.clientY-T.y,Z=window.innerWidth-fe.offsetWidth,V=window.innerHeight-fe.offsetHeight;O(W=>({...W,position:{x:Math.max(0,Math.min(G,Z)),y:Math.max(0,Math.min(xe,V))}}))},Q=()=>{k(!1)};return document.addEventListener("mousemove",U),document.addEventListener("mouseup",Q),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",Q)}},[z,T]);const F=_.useCallback(()=>{O(U=>({...U,isMinimized:!U.isMinimized}))},[]),ne=_.useCallback(()=>{h(),m()},[h,m]),de=_.useCallback(()=>{w(v2(y))},[y,w]),ve=a(`settings.theme.${y}`),le=l!==null?l.toFixed(4):"",be=b!==null?b.toFixed(4):"",ae=D?Vv(D,a):"",ye=c==="none"||g==="none"?"none":c==="cached"||g==="cached"?"cached":"live",ge=C.position.x!==0||C.position.y!==0?{left:C.position.x,top:C.position.y,right:"auto",bottom:"auto"}:{};return C.isMinimized?s.jsxs("div",{ref:Y,className:ue("fx-banner-minimized",z&&"dragging"),style:ge,onMouseDown:X,children:[s.jsx("div",{className:"fx-banner-drag-handle fx-banner-drag-handle-mini",title:a("fx.drag"),children:s.jsxs("svg",{width:"6",height:"10",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("button",{className:"fx-banner-mini-content",onClick:F,title:a("fx.showBanner"),children:[s.jsx("span",{className:"fx-banner-mini-icon",children:"$"}),c!=="none"&&l!==null&&s.jsx("span",{className:"fx-banner-mini-rate",children:l.toFixed(2)})]}),s.jsx("button",{className:"fx-banner-mini-theme",onClick:de,title:ve,"aria-label":ve,children:x==="dark"?s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})})]}):s.jsxs("div",{ref:Y,className:ue("fx-rate-banner",z&&"dragging"),style:ge,onMouseDown:X,role:"banner","aria-label":a("fx.bannerTitle"),children:[s.jsx("div",{className:"fx-banner-drag-handle",title:a("fx.drag"),children:s.jsxs("svg",{width:"8",height:"14",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("div",{className:"fx-banner-content",children:[s.jsxs("div",{className:"fx-banner-rates",children:[s.jsxs("div",{className:"fx-banner-rate",children:[s.jsxs("span",{className:"fx-banner-formula",children:["$1 = ",le," "]}),s.jsx("span",{className:ue("fx-banner-source",`source-${c}`),children:u?s.jsx("span",{className:"fx-loading",children:"..."}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fx-source-dot"}),a(`fx.${c}`)]})})]}),s.jsxs("div",{className:"fx-banner-rate",children:[s.jsxs("span",{className:"fx-banner-formula",children:["1 = ",be," "]}),s.jsx("span",{className:ue("fx-banner-source",`source-${g}`),children:p?s.jsx("span",{className:"fx-loading",children:"..."}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fx-source-dot"}),a(`fx.${g}`)]})})]})]}),ae&&ye!=="none"&&s.jsx("div",{className:"fx-banner-updated",children:ae})]}),s.jsxs("div",{className:"fx-banner-actions",children:[s.jsx("button",{className:"fx-banner-btn",onClick:de,title:ve,"aria-label":ve,children:x==="dark"?s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})}),s.jsx("button",{className:"fx-banner-btn",onClick:ne,disabled:j,title:a("fx.refresh"),"aria-label":a("fx.refresh"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:j?"spinning":"",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{className:"fx-banner-btn",onClick:F,title:a("fx.minimize"),"aria-label":a("fx.minimize"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})]})]})}const Pp=a=>Symbol.iterator in a,Vp=a=>"entries"in a,Qp=(a,l)=>{const c=a instanceof Map?a:new Map(a.entries()),u=l instanceof Map?l:new Map(l.entries());if(c.size!==u.size)return!1;for(const[d,h]of c)if(!u.has(d)||!Object.is(h,u.get(d)))return!1;return!0},b2=(a,l)=>{const c=a[Symbol.iterator](),u=l[Symbol.iterator]();let d=c.next(),h=u.next();for(;!d.done&&!h.done;){if(!Object.is(d.value,h.value))return!1;d=c.next(),h=u.next()}return!!d.done&&!!h.done};function w2(a,l){return Object.is(a,l)?!0:typeof a!="object"||a===null||typeof l!="object"||l===null||Object.getPrototypeOf(a)!==Object.getPrototypeOf(l)?!1:Pp(a)&&Pp(l)?Vp(a)&&Vp(l)?Qp(a,l):b2(a,l):Qp({entries:()=>Object.entries(a)},{entries:()=>Object.entries(l)})}function mu(a){const l=Ye.useRef(void 0);return c=>{const u=a(c);return w2(l.current,u)?l.current:l.current=u}}const Gt=jr((a,l)=>({status:"idle",lastSyncAt:null,lastError:null,serverRunning:!1,serverPort:null,serverExpiresAt:null,pendingOpsCount:0,pendingConflictsCount:0,discoveredPeers:[],isDiscovering:!1,trustedPeers:[],syncProgress:null,isExportModalOpen:!1,isImportModalOpen:!1,isPairingModalOpen:!1,isConflictBannerDismissed:!1,setStatus:c=>a({status:c}),setLastSync:c=>a({lastSyncAt:c}),setLastError:c=>a({lastError:c}),setServerRunning:(c,u,d)=>a({serverRunning:c,serverPort:u??null,serverExpiresAt:d??null}),setPendingOpsCount:c=>a({pendingOpsCount:c}),setPendingConflictsCount:c=>a({pendingConflictsCount:c}),refreshCounts:async()=>{try{const c=await S.localDevice.toCollection().first();if(!c)a({pendingOpsCount:0});else{const d=await S.opLog.filter(h=>h.createdBy===c.id).count();a({pendingOpsCount:d})}const u=await S.conflictQueue.where("status").equals("open").count();a({pendingConflictsCount:u})}catch(c){console.error("Failed to refresh sync counts:",c)}},setDiscoveredPeers:c=>a({discoveredPeers:c}),setIsDiscovering:c=>a({isDiscovering:c}),startDiscovery:async()=>{const{isDiscovering:c}=l();if(!c){a({isDiscovering:!0,discoveredPeers:[]});try{if(typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{invoke:u}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]),d=await u("discover_lan_peers");a({discoveredPeers:d})}}catch(u){console.error("Failed to discover peers:",u)}finally{a({isDiscovering:!1})}}},setTrustedPeers:c=>a({trustedPeers:c}),refreshTrustedPeers:async()=>{try{const c=await S.trustedPeers.where("status").equals("verified").toArray();a({trustedPeers:c})}catch(c){console.error("Failed to refresh trusted peers:",c)}},setSyncProgress:c=>a({syncProgress:c}),updateSyncProgress:c=>{const u=l().syncProgress;u&&a({syncProgress:{...u,...c}})},openExportModal:()=>a({isExportModalOpen:!0}),closeExportModal:()=>a({isExportModalOpen:!1}),openImportModal:()=>a({isImportModalOpen:!0}),closeImportModal:()=>a({isImportModalOpen:!1}),openPairingModal:()=>a({isPairingModalOpen:!0}),closePairingModal:()=>a({isPairingModalOpen:!1}),dismissConflictBanner:()=>a({isConflictBannerDismissed:!0}),resetConflictBanner:()=>a({isConflictBannerDismissed:!1}),initialize:async()=>{await l().refreshCounts(),await l().refreshTrustedPeers();const c=await S.syncHistory.orderBy("completedAt").reverse().first();if(c&&a({lastSyncAt:c.completedAt}),typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{listen:u}=await Ce(async()=>{const{listen:h}=await import("./event-DXqYWlmG.js");return{listen:h}},__vite__mapDeps([0,1])),{invoke:d}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]);await u("sync:ops_received",async h=>{console.log("[SyncStore] Received sync:ops_received event, count:",h.payload);try{const b=await d("get_pending_sync_ops");console.log("[SyncStore] Fetched pending ops:",b.length);for(const p of b)console.log("[SyncStore] Applying op:",p.id,p.opType,p.entityType),await ou(p);const g=await d("clear_pending_sync_ops");console.log("[SyncStore] Cleared pending ops:",g),await l().refreshCounts(),a({lastSyncAt:new Date().toISOString()})}catch(b){console.error("[SyncStore] Failed to process sync operations:",b),a({lastError:String(b)})}}),console.log("[SyncStore] Tauri event listener registered for sync:ops_received")}}}));function ZS(){return Gt(mu(a=>({status:a.status,pendingConflicts:a.pendingConflictsCount,lastSyncAt:a.lastSyncAt,serverRunning:a.serverRunning})))}function XS(){return Gt(mu(a=>({openExportModal:a.openExportModal,openImportModal:a.openImportModal,openPairingModal:a.openPairingModal,startDiscovery:a.startDiscovery,refreshCounts:a.refreshCounts})))}function S2(){return Gt(mu(a=>({count:a.pendingConflictsCount,isDismissed:a.isConflictBannerDismissed,dismiss:a.dismissConflictBanner,reset:a.resetConflictBanner})))}const zt=_.forwardRef(({variant:a="primary",size:l="md",children:c,isLoading:u,disabled:d,className:h="",...b},g)=>{const p=["btn",`btn-${a}`,`btn-${l}`,u&&"btn-loading",h].filter(Boolean).join(" ");return s.jsxs("button",{ref:g,className:p,disabled:d||u,...b,children:[u&&s.jsx("span",{className:"btn-spinner","aria-hidden":"true"}),s.jsx("span",{className:u?"btn-content-hidden":"",children:c})]})});zt.displayName="Button";const j2=_.forwardRef(({variant:a="default",padding:l="md",children:c,className:u="",...d},h)=>{const b=["card",`card-${a}`,`card-padding-${l}`,u].filter(Boolean).join(" ");return s.jsx("div",{ref:h,className:b,...d,children:c})});j2.displayName="Card";const A2=_.forwardRef(({title:a,action:l,children:c,className:u="",...d},h)=>s.jsx("div",{ref:h,className:`card-header ${u}`,...d,children:c||s.jsxs(s.Fragment,{children:[a&&s.jsx("h3",{className:"card-title",children:a}),l&&s.jsx("div",{className:"card-action",children:l})]})}));A2.displayName="CardHeader";const D2=_.forwardRef(({children:a,className:l="",...c},u)=>s.jsx("div",{ref:u,className:`card-content ${l}`,...c,children:a}));D2.displayName="CardContent";const N2=_.forwardRef(({children:a,className:l="",...c},u)=>s.jsx("div",{ref:u,className:`card-footer ${l}`,...c,children:a}));N2.displayName="CardFooter";function M2(){const{count:a,isDismissed:l,dismiss:c}=S2(),u=ru();if(a===0||l)return null;const d=()=>{u({to:"/settings",search:{section:"sync"}})},h=b=>{b.stopPropagation(),c()};return s.jsxs("div",{className:"conflict-banner",role:"alert",children:[s.jsxs("div",{className:"conflict-banner__content",children:[s.jsx("span",{className:"conflict-banner__icon",children:""}),s.jsxs("span",{className:"conflict-banner__text",children:[s.jsxs("strong",{children:[a," ",a===1?"edit":"edits"]})," detected on multiple devices"]})]}),s.jsxs("div",{className:"conflict-banner__actions",children:[s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--review",onClick:d,children:"Review"}),s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--dismiss",onClick:h,"aria-label":"Dismiss",children:""})]})]})}class qa extends Error{code;constructor(l,c){super(c),this.code=l,this.name="SyncError"}}const zh=new Uint8Array([77,83,89,78]),kh=1,Bh=0,Ll=16,zl=12,C2=6e5;async function qh(a,l){const c=new TextEncoder,u=await crypto.subtle.importKey("raw",c.encode(a),"PBKDF2",!1,["deriveKey"]),d=new Uint8Array(l).buffer;return crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:C2,hash:"SHA-256"},u,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function E2(a,l){const u=new TextEncoder().encode(JSON.stringify(a)),d=crypto.getRandomValues(new Uint8Array(Ll)),h=crypto.getRandomValues(new Uint8Array(zl)),b=await qh(l,d),g=await crypto.subtle.encrypt({name:"AES-GCM",iv:h},b,u),p=12+Ll+zl,m=new Uint8Array(p+g.byteLength);let y=0;return m.set(zh,y),y+=4,new DataView(m.buffer).setUint32(y,kh,!0),y+=4,new DataView(m.buffer).setUint32(y,Bh,!0),y+=4,m.set(d,y),y+=Ll,m.set(h,y),y+=zl,m.set(new Uint8Array(g),y),m.buffer}async function Hh(a,l){const c=new DataView(a),u=new Uint8Array(a);let d=0;const h=u.slice(d,d+4);if(!R2(h,zh))throw new qa("BUNDLE_CORRUPT","Invalid bundle file - not a valid .msync file");d+=4;const b=c.getUint32(d,!0);if(b!==kh)throw new qa("BUNDLE_CORRUPT",`Unsupported bundle version: ${b}`);if(d+=4,c.getUint32(d,!0)!==Bh)throw new qa("BUNDLE_CORRUPT","Unsupported key derivation function");d+=4;const p=u.slice(d,d+Ll);d+=Ll;const m=u.slice(d,d+zl);d+=zl;const y=u.slice(d),x=await qh(l,p);let w;try{w=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},x,y)}catch{throw new qa("BUNDLE_BAD_PASSPHRASE","Wrong passphrase or corrupted bundle")}const D=new TextDecoder().decode(w);try{const C=JSON.parse(D);if(!C.manifest||!Array.isArray(C.ops))throw new qa("BUNDLE_CORRUPT","Invalid bundle structure");return C}catch(C){throw C instanceof qa?C:new qa("BUNDLE_CORRUPT","Failed to parse bundle contents")}}function T2(a){const l=[];let c=0;a.length<8?l.push("At least 8 characters"):a.length>=12?c+=2:c+=1,/[a-z]/.test(a)&&(c+=1),/[A-Z]/.test(a)&&(c+=1),/[0-9]/.test(a)&&(c+=1),/[^a-zA-Z0-9]/.test(a)&&(c+=1),(!/[a-z]/.test(a)||!/[A-Z]/.test(a))&&l.push("Mix of upper and lowercase letters"),/[0-9]/.test(a)||l.push("At least one number");const u=[/^123/,/password/i,/qwerty/i,/admin/i];for(const h of u)if(h.test(a)){c-=1,l.push("Avoid common patterns");break}let d;return c<3?d="weak":c<5?d="fair":d="strong",{valid:a.length>=8&&c>=3,strength:d,feedback:l}}function I2(a=4){const l=["apple","baker","candy","delta","eagle","frost","green","happy","index","joker","karma","lemon","maple","north","ocean","piano","queen","river","solar","tiger","ultra","vivid","water","xenon","yacht","zebra","amber","blaze","coral","dusk","ember","flame","grove","haven","ivory","jade","kayak","lunar","marble","nova","opal","prism","quartz","ridge","storm","tide","unity","valley","wave","axis","bloom","cloud","drift","echo","fern","glow","haze","iris","jewel","knot","leaf","mist","nest","orbit"],c=[],u=new Uint32Array(a);crypto.getRandomValues(u);for(let d=0;d<a;d++){const h=u[d]%l.length;c.push(l[h])}return c.join("-")}function R2(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==l[c])return!1;return!0}async function _2(a){const l=ba();let c=a.sinceHlc||ot.zeroString();if(a.targetPeerId){const j=await S.peerCursors.get(a.targetPeerId);j?.lastSentHlc&&(c=j.lastSentHlc)}const u=await uh(c);if(u.length===0)throw new Error("No operations to export");const d=JSON.stringify(u),h=await Ph(d),b=u[u.length-1].hlc,g={bundleVersion:1,createdAt:new Date().toISOString(),createdBy:l.id,createdByName:l.name,sinceHlc:c!==ot.zeroString()?c:void 0,untilHlc:b,opCount:u.length,contentHash:h},m=await E2({manifest:g,ops:u},a.passphrase),y=new Date().toISOString().split("T")[0],x=new Date().toISOString().split("T")[1].slice(0,5).replace(":",""),w=`mutaba3a-sync_${l.name.replace(/[^a-zA-Z0-9]/g,"-")}_${y}_${x}.msync`;return{data:m,filename:w,opCount:u.length,manifest:g}}async function O2(a,l){const c=await Hh(a,l),u=await L2(c.ops),d=c.ops.length-u;return{manifest:c.manifest,alreadyImported:d===0,newOpsCount:d}}async function U2(a,l){const c=await Hh(a,l),u=JSON.stringify(c.ops);if(await Ph(u)!==c.manifest.contentHash)throw new Error("Bundle integrity check failed - content may be corrupted");const{applyOps:h}=await Ce(async()=>{const{applyOps:p}=await Promise.resolve().then(()=>z1);return{applyOps:p}},void 0),b=await h(c.ops),g={id:crypto.randomUUID(),method:"bundle_import",peerName:c.manifest.createdByName,pulledCount:b.applied,pushedCount:0,conflictCount:b.conflicts.length,startedAt:new Date().toISOString(),completedAt:new Date().toISOString(),status:b.conflicts.length>0?"partial":"success"};return await S.syncHistory.add(g),{applied:b.applied,skipped:b.skipped,conflicts:b.conflicts.length,historyId:g.id}}async function Ph(a){const c=new TextEncoder().encode(a),u=await crypto.subtle.digest("SHA-256",c);return"sha256:"+Array.from(new Uint8Array(u)).map(h=>h.toString(16).padStart(2,"0")).join("")}async function L2(a){let l=0;for(const c of a)await S.opLog.get(c.id)&&l++;return l}function z2(a,l){const c=new Blob([a],{type:"application/octet-stream"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}async function k2(a){return new Promise((l,c)=>{const u=new FileReader;u.onload=()=>l(u.result),u.onerror=()=>c(new Error("Failed to read file")),u.readAsArrayBuffer(a)})}function B2(a){return a.toLowerCase().endsWith(".msync")}const vr=_.forwardRef(({label:a,error:l,hint:c,className:u="",id:d,...h},b)=>{const g=d||(a?`input-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("input",{ref:b,id:g,className:`input ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":l?`${g}-error`:c?`${g}-hint`:void 0,...h}),l&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});vr.displayName="Input";const q2=_.forwardRef(({label:a,error:l,hint:c,className:u="",id:d,...h},b)=>{const g=d||(a?`textarea-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("textarea",{ref:b,id:g,className:`textarea ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":l?`${g}-error`:c?`${g}-hint`:void 0,...h}),l&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});q2.displayName="Textarea";const H2=_.forwardRef(({label:a,error:l,hint:c,children:u,className:d="",id:h,...b},g)=>{const p=h||(a?`select-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),m=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:p,className:"input-label",children:a}),s.jsxs("div",{className:"select-wrapper",children:[s.jsx("select",{ref:g,id:p,className:`select ${m?"input-error":""} ${d}`,"aria-invalid":m,"aria-describedby":l?`${p}-error`:c?`${p}-hint`:void 0,...b,children:u}),s.jsx("span",{className:"select-chevron","aria-hidden":"true",children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:s.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l&&s.jsx("p",{id:`${p}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${p}-hint`,className:"input-hint",children:c})]})});H2.displayName="Select";function P2(){const a=Gt(P=>P.isExportModalOpen),l=Gt(P=>P.closeExportModal),[c,u]=_.useState(""),[d,h]=_.useState(""),[b,g]=_.useState(!1),[p,m]=_.useState(!1),[y,x]=_.useState(null),[w,j]=_.useState(null);if(!a)return null;const D=T2(c),C=c===d,O=D.valid&&C&&c.length>0,z=()=>{const P=I2(4);u(P),h(P),g(!0)},k=async()=>{if(O){m(!0),x(null);try{const P=await _2({passphrase:c});z2(P.data,P.filename),j({filename:P.filename,opCount:P.opCount})}catch(P){x(P instanceof Error?P.message:"Export failed")}finally{m(!1)}}},T=()=>{u(""),h(""),g(!1),x(null),j(null),l()};return s.jsx("div",{className:"modal-overlay",onClick:T,children:s.jsxs("div",{className:"export-modal",onClick:P=>P.stopPropagation(),children:[s.jsxs("div",{className:"export-modal__header",children:[s.jsx("h2",{className:"export-modal__title",children:"Export Sync Bundle"}),s.jsx("button",{className:"export-modal__close",onClick:T,children:""})]}),w?s.jsx("div",{className:"export-modal__body",children:s.jsxs("div",{className:"export-success",children:[s.jsx("span",{className:"export-success__icon",children:""}),s.jsx("h3",{className:"export-success__title",children:"Export Complete"}),s.jsxs("p",{className:"export-success__message",children:["Exported ",w.opCount," changes to:",s.jsx("br",{}),s.jsx("code",{children:w.filename})]}),s.jsxs("p",{className:"export-success__hint",children:["Share this file with your other device and import it there.",s.jsx("br",{}),"Keep your passphrase safe - you'll need it to import."]})]})}):s.jsxs("div",{className:"export-modal__body",children:[s.jsx("p",{className:"export-modal__description",children:"Create an encrypted file containing your recent changes. You'll need the passphrase to import this bundle on another device."}),y&&s.jsx("div",{className:"export-modal__error",children:y}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"export-modal__input-row",children:[s.jsx(vr,{type:b?"text":"password",value:c,onChange:P=>u(P.target.value),placeholder:"Enter a strong passphrase"}),s.jsx("button",{type:"button",className:"export-modal__toggle-visibility",onClick:()=>g(!b),children:b?"":""})]}),c&&!D.valid&&s.jsx("ul",{className:"export-modal__feedback",children:D.feedback.map((P,Y)=>s.jsx("li",{children:P},Y))}),c&&s.jsxs("div",{className:`export-modal__strength export-modal__strength--${D.strength}`,children:["Strength: ",D.strength]})]}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Confirm Passphrase"}),s.jsx(vr,{type:b?"text":"password",value:d,onChange:P=>h(P.target.value),placeholder:"Confirm your passphrase"}),d&&!C&&s.jsx("div",{className:"export-modal__error-inline",children:"Passphrases don't match"})]}),s.jsx("button",{type:"button",className:"export-modal__generate",onClick:z,children:"Generate secure passphrase"})]}),s.jsx("div",{className:"export-modal__footer",children:w?s.jsx(zt,{onClick:T,children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(zt,{variant:"ghost",onClick:T,children:"Cancel"}),s.jsx(zt,{onClick:k,disabled:!O||p,children:p?"Exporting...":"Export Bundle"})]})})]})})}function V2(){const a=Gt(G=>G.isImportModalOpen),l=Gt(G=>G.closeImportModal),c=Gt(G=>G.refreshCounts),[u,d]=_.useState("select"),[h,b]=_.useState(null),[g,p]=_.useState(null),[m,y]=_.useState(""),[x,w]=_.useState(!1),[j,D]=_.useState(!1),[C,O]=_.useState(null),[z,k]=_.useState(null),[T,P]=_.useState(null),[Y,X]=_.useState(!1),F=_.useRef(null),ne=_.useCallback(()=>{d("select"),b(null),p(null),y(""),w(!1),D(!1),O(null),k(null),P(null),X(!1)},[]),de=()=>{ne(),l()},ve=async G=>{if(O(null),!B2(G.name)){O("Please select a .msync file");return}try{const xe=await k2(G);b(G),p(xe),d("decrypt")}catch(xe){O(xe instanceof Error?xe.message:"Failed to read file")}},le=G=>{const xe=G.target.files?.[0];xe&&ve(xe)},be=_.useCallback(G=>{G.preventDefault(),X(!1);const xe=G.dataTransfer.files[0];xe&&ve(xe)},[]),ae=_.useCallback(G=>{G.preventDefault(),X(!0)},[]),ye=_.useCallback(G=>{G.preventDefault(),X(!1)},[]),ge=async()=>{if(!(!g||!m)){D(!0),O(null);try{const G=await O2(g,m);k(G),d("preview")}catch(G){const xe=G instanceof Error?G.message:"Failed to decrypt bundle";xe.includes("decrypt")||xe.includes("passphrase")?O("Incorrect passphrase. Please try again."):O(xe)}finally{D(!1)}}},U=async()=>{if(!(!g||!m)){D(!0),O(null);try{const G=await U2(g,m);P(G),d("success"),c()}catch(G){O(G instanceof Error?G.message:"Import failed")}finally{D(!1)}}},Q=()=>{b(null),p(null),y(""),O(null),d("select"),F.current&&(F.current.value="")},$=G=>G<1024?`${G} B`:G<1024*1024?`${(G/1024).toFixed(1)} KB`:`${(G/(1024*1024)).toFixed(1)} MB`,fe=G=>new Date(G).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return a?s.jsx("div",{className:"modal-overlay",onClick:de,children:s.jsxs("div",{className:"import-modal",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"import-modal__header",children:[s.jsx("h2",{className:"import-modal__title",children:"Import Sync Bundle"}),s.jsx("button",{className:"import-modal__close",onClick:de,children:""})]}),u==="success"&&T?s.jsx("div",{className:"import-modal__body",children:s.jsxs("div",{className:"import-success",children:[s.jsx("span",{className:"import-success__icon",children:""}),s.jsx("h3",{className:"import-success__title",children:"Import Complete"}),s.jsxs("p",{className:"import-success__message",children:["Successfully imported ",T.applied," changes.",T.skipped>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),T.skipped," changes were already synced."]}),T.conflicts>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),T.conflicts," conflicts need review."]})]})]})}):s.jsxs("div",{className:"import-modal__body",children:[u==="select"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"import-modal__description",children:"Select a .msync file to import changes from another device."}),C&&s.jsx("div",{className:"import-modal__error",children:C}),s.jsxs("div",{className:`import-modal__dropzone ${Y?"import-modal__dropzone--active":""}`,onClick:()=>F.current?.click(),onDrop:be,onDragOver:ae,onDragLeave:ye,children:[s.jsx("p",{className:"import-modal__dropzone-text",children:"Drop .msync file here or click to browse"}),s.jsx("p",{className:"import-modal__dropzone-hint",children:"Only .msync files are supported"})]}),s.jsx("input",{ref:F,type:"file",accept:".msync",onChange:le,style:{display:"none"}})]}),u==="decrypt"&&h&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h.name}),s.jsx("div",{className:"import-modal__file-size",children:$(h.size)})]}),s.jsx("button",{className:"import-modal__file-remove",onClick:Q,title:"Remove file",children:""})]}),C&&s.jsx("div",{className:"import-modal__error",children:C}),s.jsxs("div",{className:"import-modal__field",children:[s.jsx("label",{className:"import-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"import-modal__input-row",children:[s.jsx(vr,{type:x?"text":"password",value:m,onChange:G=>y(G.target.value),placeholder:"Enter the passphrase used to create this bundle",onKeyDown:G=>G.key==="Enter"&&m&&ge()}),s.jsx("button",{type:"button",className:"import-modal__toggle-visibility",onClick:()=>w(!x),children:x?"":""})]})]})]}),u==="preview"&&z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h?.name}),s.jsx("div",{className:"import-modal__file-size",children:h&&$(h.size)})]})]}),C&&s.jsx("div",{className:"import-modal__error",children:C}),z.alreadyImported&&s.jsx("div",{className:"import-modal__warning",children:"This bundle has already been imported. No new changes to apply."}),s.jsxs("div",{className:"import-modal__preview",children:[s.jsx("div",{className:"import-modal__preview-title",children:"Bundle Details"}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"From device"}),s.jsx("span",{className:"import-modal__preview-value",children:z.manifest.createdByName})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Created"}),s.jsx("span",{className:"import-modal__preview-value",children:fe(z.manifest.createdAt)})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Total changes"}),s.jsx("span",{className:"import-modal__preview-value",children:z.manifest.opCount})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"New changes"}),s.jsx("span",{className:"import-modal__preview-value",children:z.newOpsCount})]})]})]})]}),s.jsx("div",{className:"import-modal__footer",children:u==="success"?s.jsx(zt,{onClick:de,children:"Done"}):u==="preview"?s.jsxs(s.Fragment,{children:[s.jsx(zt,{variant:"ghost",onClick:()=>d("decrypt"),children:"Back"}),s.jsx(zt,{onClick:U,disabled:j||(z?.alreadyImported??!1),children:j?"Importing...":"Import Changes"})]}):u==="decrypt"?s.jsxs(s.Fragment,{children:[s.jsx(zt,{variant:"ghost",onClick:de,children:"Cancel"}),s.jsx(zt,{onClick:ge,disabled:!m||j,children:j?"Decrypting...":"Continue"})]}):s.jsx(zt,{variant:"ghost",onClick:de,children:"Cancel"})})]})}):null}var Q2=Object.defineProperty,xr=Object.getOwnPropertySymbols,Vh=Object.prototype.hasOwnProperty,Qh=Object.prototype.propertyIsEnumerable,Yp=(a,l,c)=>l in a?Q2(a,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[l]=c,lu=(a,l)=>{for(var c in l||(l={}))Vh.call(l,c)&&Yp(a,c,l[c]);if(xr)for(var c of xr(l))Qh.call(l,c)&&Yp(a,c,l[c]);return a},su=(a,l)=>{var c={};for(var u in a)Vh.call(a,u)&&l.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&xr)for(var u of xr(a))l.indexOf(u)<0&&Qh.call(a,u)&&(c[u]=a[u]);return c};var Va;(a=>{const l=class De{constructor(p,m,y,x){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<De.MIN_VERSION||p>De.MAX_VERSION)throw new RangeError("Version value out of range");if(x<-1||x>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let w=[];for(let D=0;D<this.size;D++)w.push(!1);for(let D=0;D<this.size;D++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const j=this.addEccAndInterleave(y);if(this.drawCodewords(j),x==-1){let D=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const O=this.getPenaltyScore();O<D&&(x=C,D=O),this.applyMask(C)}}d(0<=x&&x<=7),this.mask=x,this.applyMask(x),this.drawFormatBits(x),this.isFunction=[]}static encodeText(p,m){const y=a.QrSegment.makeSegments(p);return De.encodeSegments(y,m)}static encodeBinary(p,m){const y=a.QrSegment.makeBytes(p);return De.encodeSegments([y],m)}static encodeSegments(p,m,y=1,x=40,w=-1,j=!0){if(!(De.MIN_VERSION<=y&&y<=x&&x<=De.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let D,C;for(D=y;;D++){const T=De.getNumDataCodewords(D,m)*8,P=b.getTotalBits(p,D);if(P<=T){C=P;break}if(D>=x)throw new RangeError("Data too long")}for(const T of[De.Ecc.MEDIUM,De.Ecc.QUARTILE,De.Ecc.HIGH])j&&C<=De.getNumDataCodewords(D,T)*8&&(m=T);let O=[];for(const T of p){c(T.mode.modeBits,4,O),c(T.numChars,T.mode.numCharCountBits(D),O);for(const P of T.getData())O.push(P)}d(O.length==C);const z=De.getNumDataCodewords(D,m)*8;d(O.length<=z),c(0,Math.min(4,z-O.length),O),c(0,(8-O.length%8)%8,O),d(O.length%8==0);for(let T=236;O.length<z;T^=253)c(T,8,O);let k=[];for(;k.length*8<O.length;)k.push(0);return O.forEach((T,P)=>k[P>>>3]|=T<<7-(P&7)),new De(D,m,k,w)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let y=0;y<m;y++)for(let x=0;x<m;x++)y==0&&x==0||y==0&&x==m-1||y==m-1&&x==0||this.drawAlignmentPattern(p[y],p[x]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let y=m;for(let w=0;w<10;w++)y=y<<1^(y>>>9)*1335;const x=(m<<10|y)^21522;d(x>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,u(x,w));this.setFunctionModule(8,7,u(x,6)),this.setFunctionModule(8,8,u(x,7)),this.setFunctionModule(7,8,u(x,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,u(x,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,u(x,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,u(x,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;d(m>>>18==0);for(let y=0;y<18;y++){const x=u(m,y),w=this.size-11+y%3,j=Math.floor(y/3);this.setFunctionModule(w,j,x),this.setFunctionModule(j,w,x)}}drawFinderPattern(p,m){for(let y=-4;y<=4;y++)for(let x=-4;x<=4;x++){const w=Math.max(Math.abs(x),Math.abs(y)),j=p+x,D=m+y;0<=j&&j<this.size&&0<=D&&D<this.size&&this.setFunctionModule(j,D,w!=2&&w!=4)}}drawAlignmentPattern(p,m){for(let y=-2;y<=2;y++)for(let x=-2;x<=2;x++)this.setFunctionModule(p+x,m+y,Math.max(Math.abs(x),Math.abs(y))!=1)}setFunctionModule(p,m,y){this.modules[m][p]=y,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,y=this.errorCorrectionLevel;if(p.length!=De.getNumDataCodewords(m,y))throw new RangeError("Invalid argument");const x=De.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][m],w=De.ECC_CODEWORDS_PER_BLOCK[y.ordinal][m],j=Math.floor(De.getNumRawDataModules(m)/8),D=x-j%x,C=Math.floor(j/x);let O=[];const z=De.reedSolomonComputeDivisor(w);for(let T=0,P=0;T<x;T++){let Y=p.slice(P,P+C-w+(T<D?0:1));P+=Y.length;const X=De.reedSolomonComputeRemainder(Y,z);T<D&&Y.push(0),O.push(Y.concat(X))}let k=[];for(let T=0;T<O[0].length;T++)O.forEach((P,Y)=>{(T!=C-w||Y>=D)&&k.push(P[T])});return d(k.length==j),k}drawCodewords(p){if(p.length!=Math.floor(De.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let x=0;x<this.size;x++)for(let w=0;w<2;w++){const j=y-w,C=(y+1&2)==0?this.size-1-x:x;!this.isFunction[C][j]&&m<p.length*8&&(this.modules[C][j]=u(p[m>>>3],7-(m&7)),m++)}}d(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let y=0;y<this.size;y++){let x;switch(p){case 0:x=(y+m)%2==0;break;case 1:x=m%2==0;break;case 2:x=y%3==0;break;case 3:x=(y+m)%3==0;break;case 4:x=(Math.floor(y/3)+Math.floor(m/2))%2==0;break;case 5:x=y*m%2+y*m%3==0;break;case 6:x=(y*m%2+y*m%3)%2==0;break;case 7:x=((y+m)%2+y*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][y]&&x&&(this.modules[m][y]=!this.modules[m][y])}}getPenaltyScore(){let p=0;for(let w=0;w<this.size;w++){let j=!1,D=0,C=[0,0,0,0,0,0,0];for(let O=0;O<this.size;O++)this.modules[w][O]==j?(D++,D==5?p+=De.PENALTY_N1:D>5&&p++):(this.finderPenaltyAddHistory(D,C),j||(p+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),j=this.modules[w][O],D=1);p+=this.finderPenaltyTerminateAndCount(j,D,C)*De.PENALTY_N3}for(let w=0;w<this.size;w++){let j=!1,D=0,C=[0,0,0,0,0,0,0];for(let O=0;O<this.size;O++)this.modules[O][w]==j?(D++,D==5?p+=De.PENALTY_N1:D>5&&p++):(this.finderPenaltyAddHistory(D,C),j||(p+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),j=this.modules[O][w],D=1);p+=this.finderPenaltyTerminateAndCount(j,D,C)*De.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let j=0;j<this.size-1;j++){const D=this.modules[w][j];D==this.modules[w][j+1]&&D==this.modules[w+1][j]&&D==this.modules[w+1][j+1]&&(p+=De.PENALTY_N2)}let m=0;for(const w of this.modules)m=w.reduce((j,D)=>j+(D?1:0),m);const y=this.size*this.size,x=Math.ceil(Math.abs(m*20-y*10)/y)-1;return d(0<=x&&x<=9),p+=x*De.PENALTY_N4,d(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let x=this.size-7;y.length<p;x-=m)y.splice(1,0,x);return y}}static getNumRawDataModules(p){if(p<De.MIN_VERSION||p>De.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;m-=(25*y-10)*y-55,p>=7&&(m-=36)}return d(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(De.getNumRawDataModules(p)/8)-De.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*De.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let x=0;x<p-1;x++)m.push(0);m.push(1);let y=1;for(let x=0;x<p;x++){for(let w=0;w<m.length;w++)m[w]=De.reedSolomonMultiply(m[w],y),w+1<m.length&&(m[w]^=m[w+1]);y=De.reedSolomonMultiply(y,2)}return m}static reedSolomonComputeRemainder(p,m){let y=m.map(x=>0);for(const x of p){const w=x^y.shift();y.push(0),m.forEach((j,D)=>y[D]^=De.reedSolomonMultiply(j,w))}return y}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let y=0;for(let x=7;x>=0;x--)y=y<<1^(y>>>7)*285,y^=(m>>>x&1)*p;return d(y>>>8==0),y}finderPenaltyCountPatterns(p){const m=p[1];d(m<=this.size*3);const y=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(y&&p[0]>=m*4&&p[6]>=m?1:0)+(y&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,y){return p&&(this.finderPenaltyAddHistory(m,y),m=0),m+=this.size,this.finderPenaltyAddHistory(m,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=l;function c(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)m.push(g>>>y&1)}function u(g,p){return(g>>>p&1)!=0}function d(g){if(!g)throw new Error("Assertion error")}const h=class $e{constructor(p,m,y){if(this.mode=p,this.numChars=m,this.bitData=y,m<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let m=[];for(const y of p)c(y,8,m);return new $e($e.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!$e.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let y=0;y<p.length;){const x=Math.min(p.length-y,3);c(parseInt(p.substring(y,y+x),10),x*3+1,m),y+=x}return new $e($e.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!$e.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],y;for(y=0;y+2<=p.length;y+=2){let x=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;x+=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),c(x,11,m)}return y<p.length&&c($e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,m),new $e($e.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:$e.isNumeric(p)?[$e.makeNumeric(p)]:$e.isAlphanumeric(p)?[$e.makeAlphanumeric(p)]:[$e.makeBytes($e.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)c(p,8,m);else if(p<16384)c(2,2,m),c(p,14,m);else if(p<1e6)c(6,3,m),c(p,21,m);else throw new RangeError("ECI assignment value out of range");return new $e($e.Mode.ECI,0,m)}static isNumeric(p){return $e.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return $e.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let y=0;for(const x of p){const w=x.mode.numCharCountBits(m);if(x.numChars>=1<<w)return 1/0;y+=4+w+x.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?m.push(p.charCodeAt(y)):(m.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return m}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let b=h;a.QrSegment=h})(Va||(Va={}));(a=>{(l=>{const c=class{constructor(d,h){this.ordinal=d,this.formatBits=h}};c.LOW=new c(0,1),c.MEDIUM=new c(1,0),c.QUARTILE=new c(2,3),c.HIGH=new c(3,2),l.Ecc=c})(a.QrCode||(a.QrCode={}))})(Va||(Va={}));(a=>{(l=>{const c=class{constructor(d,h){this.modeBits=d,this.numBitsCharCount=h}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};c.NUMERIC=new c(1,[10,12,14]),c.ALPHANUMERIC=new c(2,[9,11,13]),c.BYTE=new c(4,[8,16,16]),c.KANJI=new c(8,[8,10,12]),c.ECI=new c(7,[0,0,0]),l.Mode=c})(a.QrSegment||(a.QrSegment={}))})(Va||(Va={}));var Ui=Va;var Y2={L:Ui.QrCode.Ecc.LOW,M:Ui.QrCode.Ecc.MEDIUM,Q:Ui.QrCode.Ecc.QUARTILE,H:Ui.QrCode.Ecc.HIGH},Yh=128,Kh="L",Fh="#FFFFFF",Gh="#000000",Zh=!1,Xh=1,K2=4,F2=0,G2=.1;function Jh(a,l=0){const c=[];return a.forEach(function(u,d){let h=null;u.forEach(function(b,g){if(!b&&h!==null){c.push(`M${h+l} ${d+l}h${g-h}v1H${h+l}z`),h=null;return}if(g===u.length-1){if(!b)return;h===null?c.push(`M${g+l},${d+l} h1v1H${g+l}z`):c.push(`M${h+l},${d+l} h${g+1-h}v1H${h+l}z`);return}b&&h===null&&(h=g)})}),c.join("")}function $h(a,l){return a.slice().map((c,u)=>u<l.y||u>=l.y+l.h?c:c.map((d,h)=>h<l.x||h>=l.x+l.w?d:!1))}function Z2(a,l,c,u){if(u==null)return null;const d=a.length+c*2,h=Math.floor(l*G2),b=d/l,g=(u.width||h)*b,p=(u.height||h)*b,m=u.x==null?a.length/2-g/2:u.x*b,y=u.y==null?a.length/2-p/2:u.y*b,x=u.opacity==null?1:u.opacity;let w=null;if(u.excavate){let D=Math.floor(m),C=Math.floor(y),O=Math.ceil(g+m-D),z=Math.ceil(p+y-C);w={x:D,y:C,w:O,h:z}}const j=u.crossOrigin;return{x:m,y,h:p,w:g,excavation:w,opacity:x,crossOrigin:j}}function X2(a,l){return l!=null?Math.max(Math.floor(l),0):a?K2:F2}function Wh({value:a,level:l,minVersion:c,includeMargin:u,marginSize:d,imageSettings:h,size:b,boostLevel:g}){let p=Ye.useMemo(()=>{const D=(Array.isArray(a)?a:[a]).reduce((C,O)=>(C.push(...Ui.QrSegment.makeSegments(O)),C),[]);return Ui.QrCode.encodeSegments(D,Y2[l],c,void 0,void 0,g)},[a,l,c,g]);const{cells:m,margin:y,numCells:x,calculatedImageSettings:w}=Ye.useMemo(()=>{let j=p.getModules();const D=X2(u,d),C=j.length+D*2,O=Z2(j,b,D,h);return{cells:j,margin:D,numCells:C,calculatedImageSettings:O}},[p,b,h,u,d]);return{qrcode:p,margin:y,cells:m,numCells:x,calculatedImageSettings:w}}var J2=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),$2=Ye.forwardRef(function(l,c){const u=l,{value:d,size:h=Yh,level:b=Kh,bgColor:g=Fh,fgColor:p=Gh,includeMargin:m=Zh,minVersion:y=Xh,boostLevel:x,marginSize:w,imageSettings:j}=u,C=su(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:O}=C,z=su(C,["style"]),k=j?.src,T=Ye.useRef(null),P=Ye.useRef(null),Y=Ye.useCallback(ye=>{T.current=ye,typeof c=="function"?c(ye):c&&(c.current=ye)},[c]),[X,F]=Ye.useState(!1),{margin:ne,cells:de,numCells:ve,calculatedImageSettings:le}=Wh({value:d,level:b,minVersion:y,boostLevel:x,includeMargin:m,marginSize:w,imageSettings:j,size:h});Ye.useEffect(()=>{if(T.current!=null){const ye=T.current,ge=ye.getContext("2d");if(!ge)return;let U=de;const Q=P.current,$=le!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;$&&le.excavation!=null&&(U=$h(de,le.excavation));const fe=window.devicePixelRatio||1;ye.height=ye.width=h*fe;const G=h/ve*fe;ge.scale(G,G),ge.fillStyle=g,ge.fillRect(0,0,ve,ve),ge.fillStyle=p,J2?ge.fill(new Path2D(Jh(U,ne))):de.forEach(function(xe,Z){xe.forEach(function(V,W){V&&ge.fillRect(W+ne,Z+ne,1,1)})}),le&&(ge.globalAlpha=le.opacity),$&&ge.drawImage(Q,le.x+ne,le.y+ne,le.w,le.h)}}),Ye.useEffect(()=>{F(!1)},[k]);const be=lu({height:h,width:h},O);let ae=null;return k!=null&&(ae=Ye.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{F(!0)},ref:P,crossOrigin:le?.crossOrigin})),Ye.createElement(Ye.Fragment,null,Ye.createElement("canvas",lu({style:be,height:h,width:h,ref:Y,role:"img"},z)),ae)});$2.displayName="QRCodeCanvas";var ey=Ye.forwardRef(function(l,c){const u=l,{value:d,size:h=Yh,level:b=Kh,bgColor:g=Fh,fgColor:p=Gh,includeMargin:m=Zh,minVersion:y=Xh,boostLevel:x,title:w,marginSize:j,imageSettings:D}=u,C=su(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:O,cells:z,numCells:k,calculatedImageSettings:T}=Wh({value:d,level:b,minVersion:y,boostLevel:x,includeMargin:m,marginSize:j,imageSettings:D,size:h});let P=z,Y=null;D!=null&&T!=null&&(T.excavation!=null&&(P=$h(z,T.excavation)),Y=Ye.createElement("image",{href:D.src,height:T.h,width:T.w,x:T.x+O,y:T.y+O,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const X=Jh(P,O);return Ye.createElement("svg",lu({height:h,width:h,viewBox:`0 0 ${k} ${k}`,ref:c,role:"img"},C),!!w&&Ye.createElement("title",null,w),Ye.createElement("path",{fill:g,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),Ye.createElement("path",{fill:p,d:X,shapeRendering:"crispEdges"}),Y)});ey.displayName="QRCodeSVG";const W2=2e3,Fo=typeof window<"u"&&"__TAURI_INTERNALS__"in window;function ew(){const[a,l]=_.useState(null),[c,u]=_.useState(null),[d,h]=_.useState(!1),[b,g]=_.useState(null),p=_.useRef(null),{refreshTrustedPeers:m}=Gt(),y=_.useCallback(async()=>{if(!Fo){g("Pairing is only available in the desktop app");return}h(!0),g(null),u(null);try{const{invoke:T}=await Ce(async()=>{const{invoke:Y}=await import("./core-BEOw45JP.js");return{invoke:Y}},[]),P=await T("start_pairing_session");l(P),j(P.pairingId)}catch(T){const P=T instanceof Error?T.message:String(T);g(P),l(null)}finally{h(!1)}},[]),x=_.useCallback(async()=>{if(D(),a&&Fo)try{const{invoke:T}=await Ce(async()=>{const{invoke:P}=await import("./core-BEOw45JP.js");return{invoke:P}},[]);await T("cancel_pairing_session",{pairingId:a.pairingId})}catch(T){console.error("Failed to cancel pairing session:",T)}l(null),u(null),g(null)},[a]),w=_.useCallback(async()=>{await x(),await y()},[x,y]),j=_.useCallback(T=>{D();const P=async()=>{if(Fo)try{const{invoke:Y}=await Ce(async()=>{const{invoke:F}=await import("./core-BEOw45JP.js");return{invoke:F}},[]),X=await Y("get_pairing_status",{pairingId:T});u(X),X.status!=="pending"&&(D(),X.status==="verified"&&await m())}catch(Y){console.error("Status poll failed:",Y),D(),u(X=>X?{...X,status:"expired"}:null)}};P(),p.current=window.setInterval(P,W2)},[m]),D=_.useCallback(()=>{p.current!==null&&(clearInterval(p.current),p.current=null)},[]);_.useEffect(()=>()=>{D()},[D]);const C=c?.status==="expired",O=c?.status==="verified",z=c?.status==="failed",k=c?.status==="pending"||!c&&a!==null;return{session:a,status:c,isLoading:d,error:b,isExpired:C,isVerified:O,isFailed:z,isPending:k,startSession:y,cancelSession:x,regenerateSession:w}}function tw(a){return a.length!==6?a:`${a.slice(0,3)} ${a.slice(3)}`}function nw(a){const[l,c]=_.useState(0);return _.useEffect(()=>{if(!a){c(0);return}const u=()=>{const h=new Date(a).getTime(),b=Date.now(),g=Math.max(0,Math.floor((h-b)/1e3));c(g)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)},[a]),l}function aw(a){const l=Math.floor(a/60),c=a%60;return`${l}:${c.toString().padStart(2,"0")}`}function iw(){const a=Gt(T=>T.isPairingModalOpen),l=Gt(T=>T.closePairingModal),c=Gt(T=>T.serverRunning),{session:u,status:d,isLoading:h,error:b,isExpired:g,isVerified:p,isFailed:m,startSession:y,cancelSession:x,regenerateSession:w}=ew(),j=nw(u?.expiresAt),[D,C]=_.useState(null);_.useEffect(()=>{a&&!u&&!h&&c&&y()},[a,u,h,c,y]),_.useEffect(()=>{if(D){const T=setTimeout(()=>C(null),2e3);return()=>clearTimeout(T)}},[D]);const O=()=>{x(),l()},z=async()=>{if(u?.code)try{await navigator.clipboard.writeText(u.code),C("code")}catch(T){console.error("Failed to copy code:",T)}},k=async()=>{if(!u)return;const P=`${u.hostCandidates[0]}:${u.port}`;try{await navigator.clipboard.writeText(P),C("host")}catch(Y){console.error("Failed to copy address:",Y)}};return a?s.jsx("div",{className:"modal-overlay",onClick:O,children:s.jsxs("div",{className:"pairing-modal",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"pairing-modal__header",children:[s.jsx("h2",{className:"pairing-modal__title",children:"Pair Mobile Device"}),s.jsx("button",{className:"pairing-modal__close",onClick:O,children:""})]}),s.jsx("div",{className:"pairing-modal__body",children:c?h?s.jsxs("div",{className:"pairing-modal__loading",children:[s.jsx("div",{className:"pairing-modal__spinner"}),s.jsx("p",{children:"Starting pairing session..."})]}):b?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:b}),s.jsx(zt,{onClick:y,variant:"secondary",children:"Try Again"})]}):p?s.jsxs("div",{className:"pairing-success",children:[s.jsx("span",{className:"pairing-success__icon",children:""}),s.jsx("h3",{className:"pairing-success__title",children:"Device Paired!"}),s.jsx("p",{className:"pairing-success__message",children:"Your mobile device has been successfully paired."})]}):m?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"Too many failed attempts. Please try again."}),s.jsx(zt,{onClick:w,variant:"secondary",children:"Start New Session"})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pairing-modal__qr-section",children:[s.jsxs("div",{className:"pairing-modal__qr-container",children:[s.jsx(ey,{value:u.qrPayload,size:180,level:"M",includeMargin:!0,className:g?"pairing-modal__qr--expired":""}),g&&s.jsx("div",{className:"pairing-modal__qr-overlay",children:s.jsx("span",{children:"Expired"})})]}),s.jsx("p",{className:"pairing-modal__qr-hint",children:"Scan with your phone's camera"})]}),s.jsx("div",{className:"pairing-modal__divider",children:s.jsx("span",{children:"or enter code manually"})}),s.jsxs("div",{className:"pairing-modal__code-section",children:[s.jsx("button",{className:"pairing-modal__code",onClick:z,disabled:g,title:"Click to copy",children:s.jsx("span",{className:g?"pairing-modal__code--expired":"",children:tw(u.code)})}),D==="code"&&s.jsx("span",{className:"pairing-modal__copied",children:"Copied!"})]}),s.jsxs("div",{className:"pairing-modal__countdown",children:[g?s.jsx("span",{className:"pairing-modal__countdown--expired",children:"Session expired"}):s.jsxs("span",{children:["Expires in ",aw(j)]}),d?.attemptsRemaining!==void 0&&d.attemptsRemaining<5&&s.jsxs("span",{className:"pairing-modal__attempts",children:[d.attemptsRemaining," attempts remaining"]})]}),!g&&s.jsx("div",{className:"pairing-modal__progress",children:s.jsx("div",{className:"pairing-modal__progress-bar",style:{width:`${j/120*100}%`}})}),s.jsxs("div",{className:"pairing-modal__connection-info",children:[s.jsxs("div",{className:"pairing-modal__host",children:[s.jsx("span",{className:"pairing-modal__host-label",children:"Server address:"}),s.jsxs("code",{className:"pairing-modal__host-value",children:[u.hostCandidates[0],":",u.port]}),s.jsx("button",{className:"pairing-modal__copy-btn",onClick:k,title:"Copy address",children:D==="host"?"":""})]}),u.hostCandidates.length>1&&s.jsxs("details",{className:"pairing-modal__alt-hosts",children:[s.jsxs("summary",{children:["Alternative addresses (",u.hostCandidates.length-1,")"]}),s.jsx("ul",{children:u.hostCandidates.slice(1).map((T,P)=>s.jsxs("li",{children:[T,":",u.port]},P))})]})]})]}):null:s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"The sync server is not running."}),s.jsx("p",{children:"Please start the Wi-Fi server in Settings before pairing."})]})}),s.jsxs("div",{className:"pairing-modal__footer",children:[s.jsx(zt,{onClick:O,variant:"secondary",children:p?"Done":"Cancel"}),u&&!p&&s.jsx(zt,{onClick:w,variant:"ghost",children:"Regenerate"})]})]})}):null}let Kp=!1;async function lw(){if(Kp)return;const a=await sh();w1(a.id),await Gt.getState().initialize(),Kp=!0,console.log("[Sync] Initialized with device:",a.name)}function sw({children:a}){const{transactionDrawer:l,clientDrawer:c,projectDrawer:u,businessProfileDrawer:d,documentDrawer:h,expenseDrawer:b,retainerDrawer:g,retainerMatchingDrawer:p}=ht();return _.useEffect(()=>{lw().catch(m=>{console.error("Failed to initialize sync:",m)})},[]),s.jsxs("div",{className:"app-shell",children:[s.jsx(Sx,{}),s.jsxs("main",{className:"main-content",children:[s.jsx(M2,{}),a]}),l.isOpen&&s.jsx(qx,{}),c.isOpen&&s.jsx(Px,{}),u.isOpen&&s.jsx(Yx,{}),d.isOpen&&s.jsx(Gx,{}),h.isOpen&&s.jsx(ab,{}),b.isOpen&&s.jsx(kb,{}),g.isOpen&&s.jsx(Jb,{}),p.isOpen&&s.jsx(t2,{}),s.jsx(x2,{}),s.jsx(o2,{}),s.jsx(P2,{}),s.jsx(V2,{}),s.jsx(iw,{}),s.jsx(l2,{})]})}function rw({title:a,breadcrumbs:l,filterSlot:c,rightSlot:u,hideAddMenu:d}){const b=i1()==="rtl"?" \\ ":" / ";return s.jsxs("header",{className:"topbar",children:[s.jsxs("div",{className:"topbar-left",children:[s.jsxs("div",{children:[l&&l.length>0&&s.jsx("div",{className:"breadcrumbs",children:l.map((g,p)=>s.jsxs("span",{children:[g.href?s.jsx(kl,{to:g.href,className:"breadcrumb-link",children:g.label}):s.jsx("span",{className:"breadcrumb-current",children:g.label}),p<l.length-1&&s.jsx("span",{className:"breadcrumb-separator",children:b})]},p))}),s.jsx("h1",{className:"topbar-title",children:a})]}),c]}),s.jsxs("div",{className:"topbar-right",children:[u,!d&&s.jsx(cw,{})]})]})}function cw(){const[a,l]=_.useState(!1),c=_.useRef(null),{openTransactionDrawer:u,openClientDrawer:d,openProjectDrawer:h}=ht(),b=ru(),g=Ze();return _.useEffect(()=>{function p(m){c.current&&!c.current.contains(m.target)&&l(!1)}return a&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[a]),_.useEffect(()=>{function p(m){m.key==="Escape"&&l(!1)}return a&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[a]),s.jsxs("div",{className:"add-menu-container",ref:c,children:[s.jsxs("button",{className:"btn btn-primary",onClick:()=>l(!a),children:[s.jsx(ow,{}),g("common.add")]}),a&&s.jsxs("div",{className:"add-menu",children:[s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"income"}),l(!1)},children:[s.jsx(uw,{className:"nav-icon"}),g("addMenu.income")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"expense"}),l(!1)},children:[s.jsx(dw,{className:"nav-icon"}),g("addMenu.expense")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{h({mode:"create"}),l(!1)},children:[s.jsx(fw,{className:"nav-icon"}),g("addMenu.project")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{d({mode:"create"}),l(!1)},children:[s.jsx(mw,{className:"nav-icon"}),g("addMenu.client")]}),s.jsx("div",{className:"add-menu-divider"}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{b({to:"/documents/new"}),l(!1)},children:[s.jsx(pw,{className:"nav-icon"}),g("addMenu.document")]})]})]})}function ow(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function uw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function dw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function fw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function mw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})})}function pw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function hw({size:a=16,className:l}){return s.jsx("svg",{width:a,height:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:l,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function yw({kind:a,status:l,className:c}){const u=Ze(),d=a==="income"&&l==="unpaid";return s.jsx("span",{className:ue("type-badge",a==="expense"&&"expense",a==="income"&&l==="paid"&&"income",d&&"receivable",c),children:u(d?"transactions.type.receivable":a==="income"?"transactions.type.income":"transactions.type.expense")})}function fr({usdAmountMinor:a,ilsAmountMinor:l,eurAmountMinor:c=0,type:u="neutral",label:d,size:h="default",className:b}){const[g,p]=_.useState(!1),m=_.useRef(null),{rate:y,source:x}=gr("USD","ILS"),{rate:w,source:j}=gr("EUR","ILS"),{language:D}=Qn(),C=ql(D),O=Ze(),z=f2(a,l,c,y,w);_.useEffect(()=>{function Y(X){m.current&&!m.current.contains(X.target)&&p(!1)}if(g)return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[g]),_.useEffect(()=>{function Y(X){X.key==="Escape"&&p(!1)}if(g)return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[g]);const k=()=>{const Y=[];return a!==0&&Y.push(Lt(a,"USD",C)),l!==0&&Y.push(Lt(l,"ILS",C)),c!==0&&Y.push(Lt(c,"EUR",C)),Y.join(" + ")||Lt(0,"ILS",C)},P=u==="income"?"amount-positive":u==="expense"?"amount-negative":u==="net"?z!==null?z>=0?"amount-positive":"amount-negative":a+l+c>=0?"amount-positive":"amount-negative":"";return s.jsxs("div",{ref:m,className:ue("currency-summary-popup",b),children:[d&&s.jsx("span",{className:"currency-summary-label",children:d}),s.jsxs("div",{className:"currency-summary-main",children:[s.jsx("span",{className:ue("currency-summary-amount",P,h==="large"&&"large"),children:z!==null?Lt(z,"ILS",C):k()}),s.jsx("button",{type:"button",className:"currency-summary-toggle",onClick:()=>p(!g),"aria-label":"Show currency breakdown",title:"Show currency breakdown",children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("path",{d:"M8 4.5V8.5M8 11V11.01",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})]}),g&&s.jsxs("div",{className:"currency-summary-dropdown",children:[s.jsxs("div",{className:"currency-breakdown-row",children:[s.jsx("span",{className:"currency-breakdown-label",children:"USD"}),s.jsx("span",{className:ue("currency-breakdown-value",P),children:Lt(a,"USD",C)})]}),s.jsxs("div",{className:"currency-breakdown-row",children:[s.jsx("span",{className:"currency-breakdown-label",children:"ILS"}),s.jsx("span",{className:ue("currency-breakdown-value",P),children:Lt(l,"ILS",C)})]}),s.jsxs("div",{className:"currency-breakdown-row",children:[s.jsx("span",{className:"currency-breakdown-label",children:"EUR"}),s.jsx("span",{className:ue("currency-breakdown-value",P),children:Lt(c,"EUR",C)})]}),s.jsxs("div",{className:"currency-breakdown-rates",children:[y&&s.jsxs("div",{className:"currency-breakdown-rate",children:[s.jsxs("span",{className:"currency-breakdown-rate-label",children:["$1 = ",y.toFixed(2)," "]}),s.jsxs("span",{className:ue("currency-breakdown-source",`source-${x}`),children:["(",O(`fx.${x}`),")"]})]}),w&&s.jsxs("div",{className:"currency-breakdown-rate",children:[s.jsxs("span",{className:"currency-breakdown-rate-label",children:["1 = ",w.toFixed(2)," "]}),s.jsxs("span",{className:ue("currency-breakdown-source",`source-${j}`),children:["(",O(`fx.${j}`),")"]})]})]})]})]})}function gw(){const{openTransactionDrawer:a}=ht(),l=K1(),c=Ze(),{language:u}=Qn(),d=ql(u),[h,b]=_.useState(()=>Zo("all")),{data:g,isLoading:p}=P1(h.dateFrom,h.dateTo),{data:m=[]}=V1(),{data:y=[]}=dh({dateFrom:h.dateFrom,dateTo:h.dateTo,limit:10,sort:{by:"occurredAt",dir:"desc"}}),x=j=>{a({mode:"edit",transactionId:j})},w=async(j,D)=>{j.stopPropagation(),await l.mutateAsync(D)};return s.jsxs(s.Fragment,{children:[s.jsx(rw,{title:c("overview.title"),filterSlot:s.jsx("div",{className:"filters-row",style:{marginBottom:0,marginInlineStart:24,flexWrap:"nowrap"},children:s.jsx(e2,{dateFrom:h.dateFrom,dateTo:h.dateTo,onChange:(j,D)=>b({dateFrom:j,dateTo:D})})})}),s.jsxs("div",{className:"page-content",children:[p?s.jsx("div",{className:"kpi-row",children:[1,2,3,4].map(j=>s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("common.loading")}),s.jsx("div",{className:"kpi-value",children:"-"})]},j))}):g?s.jsxs("div",{className:"kpi-row",children:[s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.paidIncome")}),s.jsx(fr,{usdAmountMinor:g.USD.paidIncomeMinor,ilsAmountMinor:g.ILS.paidIncomeMinor,eurAmountMinor:g.EUR.paidIncomeMinor,type:"income",size:"large"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.unpaidReceivables")}),s.jsx(fr,{usdAmountMinor:g.USD.unpaidIncomeMinor,ilsAmountMinor:g.ILS.unpaidIncomeMinor,eurAmountMinor:g.EUR.unpaidIncomeMinor,type:"neutral",size:"large"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.expenses")}),s.jsx(fr,{usdAmountMinor:g.USD.expensesMinor,ilsAmountMinor:g.ILS.expensesMinor,eurAmountMinor:g.EUR.expensesMinor,type:"expense",size:"large"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.net")}),s.jsx(fr,{usdAmountMinor:g.USD.paidIncomeMinor-g.USD.expensesMinor,ilsAmountMinor:g.ILS.paidIncomeMinor-g.ILS.expensesMinor,eurAmountMinor:g.EUR.paidIncomeMinor-g.EUR.expensesMinor,type:"net",size:"large"})]})]}):null,s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[s.jsxs("div",{className:"attention-list",children:[s.jsx("div",{className:"attention-header",children:s.jsx("h3",{className:"attention-title",children:c("overview.needsAttention")})}),m.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noAttention")}):m.slice(0,5).map(j=>{const D=j.dueDate?Qv(j.dueDate):0,C=D<0;return s.jsxs("div",{className:"attention-item",style:{cursor:"pointer"},onClick:()=>x(j.id),children:[s.jsxs("div",{className:"attention-info",children:[s.jsx("span",{className:"attention-client",children:j.clientName||c("common.noClient")}),s.jsxs("span",{className:"attention-meta",children:[j.projectName||c("common.noProject")," "," ",C?s.jsx("span",{className:"text-danger",children:c("time.daysOverdue",{days:Math.abs(D)})}):D===0?s.jsx("span",{className:"text-warning",children:c("transactions.status.dueToday")}):s.jsx("span",{className:"text-warning",children:c("time.dueInDays",{days:D})})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("span",{className:ue("attention-amount",C?"text-danger":"text-warning"),children:Lt(j.amountMinor,j.currency,d)}),s.jsx("button",{className:"btn btn-sm btn-ghost",onClick:O=>w(O,j.id),title:c("common.markPaid"),children:s.jsx(hw,{})})]})]},j.id)})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:c("overview.recentActivity")})}),y.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noRecent")}):s.jsx("div",{className:"data-table",style:{border:"none"},children:s.jsx("table",{children:s.jsx("tbody",{children:y.map(j=>s.jsxs("tr",{className:"clickable",onClick:()=>x(j.id),children:[s.jsx("td",{style:{width:80},children:Jp(j.occurredAt,d)}),s.jsx("td",{children:s.jsx(yw,{kind:j.kind,status:j.status})}),s.jsx("td",{className:"text-secondary",style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:j.clientName||j.title||"-"}),s.jsxs("td",{className:ue("amount-cell",j.kind==="income"&&"amount-positive",j.kind==="expense"&&"amount-negative"),children:[j.kind==="expense"?"-":"",Lt(j.amountMinor,j.currency,d)]})]},j.id))})})})]})]})]})]})}const vw=()=>s.jsx("div",{style:{padding:"2rem",opacity:.5},children:"Loading..."});function Ke(a,l){const c=Ye.lazy(()=>a().then(u=>({default:u[l]})));return()=>s.jsx(_.Suspense,{fallback:s.jsx(vw,{}),children:s.jsx(c,{})})}const He=jv({component:()=>s.jsx(sw,{children:s.jsx(Dv,{})})}),xw=Pe({getParentRoute:()=>He,path:"/",component:gw}),bw=Pe({getParentRoute:()=>He,path:"/transactions",component:Ke(()=>Ce(()=>import("./TransactionsPage-9Nfe5BFE.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13])),"TransactionsPage"),validateSearch:a=>({dateFrom:typeof a.dateFrom=="string"?a.dateFrom:void 0,dateTo:typeof a.dateTo=="string"?a.dateTo:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,kind:a.kind==="income"||a.kind==="expense"?a.kind:void 0,status:a.status==="paid"||a.status==="unpaid"||a.status==="overdue"?a.status:void 0})}),ww=Pe({getParentRoute:()=>He,path:"/projects",component:Ke(()=>Ce(()=>import("./ProjectsPage-BsiI5lu0.js"),__vite__mapDeps([14,3,4,10,11,12])),"ProjectsPage")}),Sw=Pe({getParentRoute:()=>He,path:"/projects/$projectId",component:Ke(()=>Ce(()=>import("./ProjectDetailPage-DwUoWVpg.js"),__vite__mapDeps([15,3,4,5,7,8,9,10,11,12,13])),"ProjectDetailPage")}),jw=Pe({getParentRoute:()=>He,path:"/clients",component:Ke(()=>Ce(()=>import("./ClientsPage-BiBp9T-x.js"),__vite__mapDeps([16,3,4,10,11,12])),"ClientsPage")}),Aw=Pe({getParentRoute:()=>He,path:"/clients/$clientId",component:Ke(()=>Ce(()=>import("./ClientDetailPage-BcOJlqo9.js"),__vite__mapDeps([17,3,4,5,7,8,9,10,11,12,13])),"ClientDetailPage")}),Dw=Pe({getParentRoute:()=>He,path:"/reports",component:Ke(()=>Ce(()=>import("./ReportsPage-DxUoYKJ-.js"),__vite__mapDeps([18,3,4,10,11,12])),"ReportsPage")}),Nw=Pe({getParentRoute:()=>He,path:"/documents",component:Ke(()=>Ce(()=>import("./index-CgBI8Fxv.js"),__vite__mapDeps([19,3,4,6,7,8,20,21,10,12,11,22,13])),"DocumentsPage")}),Mw=Pe({getParentRoute:()=>He,path:"/documents/new",component:Ke(()=>Ce(()=>import("./index-CgBI8Fxv.js"),__vite__mapDeps([19,3,4,6,7,8,20,21,10,12,11,22,13])),"DocumentFormPage")}),Cw=Pe({getParentRoute:()=>He,path:"/documents/$documentId",component:Ke(()=>Ce(()=>import("./index-CgBI8Fxv.js"),__vite__mapDeps([19,3,4,6,7,8,20,21,10,12,11,22,13])),"DocumentDetailPage")}),Ew=Pe({getParentRoute:()=>He,path:"/documents/$documentId/edit",component:Ke(()=>Ce(()=>import("./index-CgBI8Fxv.js"),__vite__mapDeps([19,3,4,6,7,8,20,21,10,12,11,22,13])),"DocumentFormPage")}),Tw=Pe({getParentRoute:()=>He,path:"/settings",component:Ke(()=>Ce(()=>import("./SettingsPage-D_RqSdH7.js"),__vite__mapDeps([23,3,4,10,11,12])),"SettingsPage")}),Iw=Pe({getParentRoute:()=>He,path:"/settings/profiles/$profileId",component:Ke(()=>Ce(()=>import("./ProfileDetailPage-DVGFPyum.js"),__vite__mapDeps([24,3,4,12,10,11])),"ProfileDetailPage")}),Rw=Pe({getParentRoute:()=>He,path:"/download",component:Ke(()=>Ce(()=>import("./DownloadPage-Ce2qf3KL.js"),__vite__mapDeps([25,3,4,10,11,12,26])),"DownloadPage")}),_w=Pe({getParentRoute:()=>He,path:"/theme-demo",component:Ke(()=>Ce(()=>import("./ThemeDemo-C7AHMsWb.js"),__vite__mapDeps([27,3,4,10,11,12,28,13])),"ThemeDemo")}),Ow=Pe({getParentRoute:()=>He,path:"/expenses",component:Ke(()=>Ce(()=>import("./ExpensesPage-CNEOVnFb.js"),__vite__mapDeps([29,3,4,10,11,12,30])),"ExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Uw=Pe({getParentRoute:()=>He,path:"/expenses/profile/$profileId",component:Ke(()=>Ce(()=>import("./ProfileExpensesPage-ClhhYSZG.js"),__vite__mapDeps([31,3,4,7,8,9,10,11,12,32,13])),"ProfileExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,categoryId:typeof a.categoryId=="string"?a.categoryId:void 0})}),Lw=Pe({getParentRoute:()=>He,path:"/expenses/profile/$profileId/receipts",component:Ke(()=>Ce(()=>import("./ReceiptsPage-DuGSzMRC.js"),__vite__mapDeps([33,3,4,34,21,10,11,12,35])),"ReceiptsPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0})}),zw=Pe({getParentRoute:()=>He,path:"/expenses/overview",component:Ke(()=>Ce(()=>import("./ExpensesOverviewPage-D1DAoxGN.js"),__vite__mapDeps([36,3,4,10,11,12,37])),"ExpensesOverviewPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),kw=Pe({getParentRoute:()=>He,path:"/expenses/forecast",component:Ke(()=>Ce(()=>import("./ExpensesForecastPage-BURJDXJL.js"),__vite__mapDeps([38,3,4,10,11,12,39])),"ExpensesForecastPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Bw=Pe({getParentRoute:()=>He,path:"/retainers",component:Ke(()=>Ce(()=>import("./RetainersPage-t9GrXl2n.js"),__vite__mapDeps([40,3,4,6,10,11,12,41,13,8])),"RetainersPage"),validateSearch:a=>({status:a.status==="draft"||a.status==="active"||a.status==="paused"||a.status==="ended"?a.status:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,clientId:typeof a.clientId=="string"?a.clientId:void 0})}),qw=Pe({getParentRoute:()=>He,path:"/engagements",component:Ke(()=>Ce(()=>import("./index-CuN65GBh.js"),__vite__mapDeps([42,3,4,6,10,20,21,12,11,43,13,8])),"EngagementsPage"),validateSearch:a=>({status:a.status==="draft"||a.status==="final"||a.status==="archived"?a.status:void 0,type:a.type==="task"||a.type==="retainer"?a.type:void 0,clientId:typeof a.clientId=="string"?a.clientId:void 0})}),Hw=Pe({getParentRoute:()=>He,path:"/engagements/new",component:Ke(()=>Ce(()=>import("./index-CuN65GBh.js"),__vite__mapDeps([42,3,4,6,10,20,21,12,11,43,13,8])),"EngagementWizardPage"),validateSearch:a=>({clientId:typeof a.clientId=="string"?a.clientId:void 0,type:a.type==="task"||a.type==="retainer"?a.type:void 0})}),Pw=Pe({getParentRoute:()=>He,path:"/engagements/$engagementId/edit",component:Ke(()=>Ce(()=>import("./index-CuN65GBh.js"),__vite__mapDeps([42,3,4,6,10,20,21,12,11,43,13,8])),"EngagementWizardPage")}),Vw=Pe({getParentRoute:()=>He,path:"/money-answers",component:Ke(()=>Ce(()=>import("./index-Cue02Wwm.js"),__vite__mapDeps([44,3,4,10,11,12,45])),"MoneyAnswersPage"),validateSearch:a=>({mode:a.mode==="month"||a.mode==="year"?a.mode:void 0,month:typeof a.month=="string"?a.month:void 0,year:typeof a.year=="number"?a.year:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,includeReceivables:typeof a.includeReceivables=="boolean"?a.includeReceivables:void 0,includeProjections:typeof a.includeProjections=="boolean"?a.includeProjections:void 0})}),Qw=Pe({getParentRoute:()=>He,path:"/expenses/close/profile/$profileId",component:Ke(()=>Ce(()=>import("./MonthCloseChecklistPage-D3YeiyN2.js"),__vite__mapDeps([46,3,4,34,21,10,11,12,47])),"MonthCloseChecklistPage"),validateSearch:a=>({month:typeof a.month=="string"?a.month:void 0})}),Yw=He.addChildren([xw,bw,ww,Sw,jw,Aw,Nw,Mw,Cw,Ew,Ow,Uw,Lw,zw,kw,Qw,Bw,qw,Hw,Pw,Vw,Dw,Tw,Iw,Rw,_w]),Kw=Av({routeTree:Yw,basepath:"/app"});function Fw(){const{toasts:a,removeToast:l}=bh(),c=_.useRef(new Map);return _.useEffect(()=>{a.forEach(u=>{if(!c.current.has(u.id)&&u.duration>0){const d=setTimeout(()=>{l(u.id),c.current.delete(u.id)},u.duration);c.current.set(u.id,d)}}),c.current.forEach((u,d)=>{a.find(h=>h.id===d)||(clearTimeout(u),c.current.delete(d))})},[a,l]),_.useEffect(()=>()=>{c.current.forEach(u=>clearTimeout(u)),c.current.clear()},[]),a.length===0?null:s.jsx("div",{className:"toast-container",children:a.map(u=>s.jsxs("div",{className:"toast",role:"status","aria-live":"polite",children:[s.jsx("span",{className:"toast-message",children:u.message}),u.action&&s.jsx("button",{type:"button",className:"toast-action",onClick:()=>{u.action?.onClick(),l(u.id)},children:u.action.label})]},u.id))})}const Fp=_.lazy(()=>Ce(()=>import("./LandingPage-DNWp3vNi.js"),__vite__mapDeps([48,3,4,10,11,12,49])).then(a=>({default:a.LandingPage}))),Gp=_.lazy(()=>Ce(()=>import("./DownloadPage-Ce2qf3KL.js"),__vite__mapDeps([25,3,4,10,11,12,26])).then(a=>({default:a.DownloadPage}))),Gw=new Ev({defaultOptions:{queries:{staleTime:1e3*60,gcTime:1e3*60*5}}}),Zp=()=>s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--color-bg-base, #070C16)",color:"var(--color-text-muted, #888)"},children:"Loading..."});function Zw(){{const a=window.location.pathname;if(a==="/"&&Fp)return s.jsx(Ko,{children:s.jsx(Ho,{children:s.jsx(_.Suspense,{fallback:s.jsx(Zp,{}),children:s.jsx(Fp,{})})})});if(a==="/download"&&Gp)return s.jsx(Ko,{children:s.jsx(Ho,{children:s.jsx(_.Suspense,{fallback:s.jsx(Zp,{}),children:s.jsx(Gp,{})})})})}return s.jsx(Ko,{children:s.jsx(Ho,{children:s.jsxs(Tv,{client:Gw,children:[s.jsx(Nv,{router:Kw}),s.jsx(Fw,{})]})})})}b1().catch(console.error);Pv.createRoot(document.getElementById("root")).render(s.jsx(_.StrictMode,{children:s.jsx(Zw,{})}));export{XS as $,dS as A,lx as B,j2 as C,e2 as D,fS as E,mS as F,pS as G,nx as H,kx as I,jt as J,ix as K,Dp as L,rx as M,wr as N,Pl as O,mh as P,ax as Q,sx as R,Rh as S,rw as T,Pn as U,Ya as V,Xx as W,S as X,aS as Y,iS as Z,ZS as _,Qn as a,Gt as a0,zt as a1,Ce as a2,oS as a3,uS as a4,p2 as a5,p1 as a6,ox as a7,ux as a8,cx as a9,wS as aA,FS as aB,BS as aC,HS as aD,qS as aE,KS as aF,VS as aG,QS as aH,YS as aI,PS as aJ,jr as aK,GS as aL,OS as aM,US as aN,LS as aO,zS as aP,kS as aQ,yn as aR,z1 as aS,hS as aa,yS as ab,D2 as ac,vr as ad,H2 as ae,xS as af,vS as ag,_b as ah,bS as ai,Mb as aj,SS as ak,jS as al,Ib as am,gS as an,TS as ao,Rb as ap,_S as aq,RS as ar,At as as,DS as at,AS as au,IS as av,NS as aw,MS as ax,CS as ay,ES as az,nS as b,ue as c,ht as d,K1 as e,Zo as f,Qv as g,dh as h,tS as i,Jp as j,yw as k,Lt as l,hw as m,ql as n,rS as o,fr as p,Vv as q,$1 as r,cS as s,lS as t,Ze as u,G1 as v,sS as w,fh as x,gr as y,f2 as z};
