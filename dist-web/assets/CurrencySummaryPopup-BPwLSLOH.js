import{r as u,j as e}from"./vendor-router-D4Yqsbqz.js";import{aG as b,a as N,u as S,c as n,m as c,aH as L,o as C}from"./index-BS1N8tX1.js";function D({usdAmountMinor:t,ilsAmountMinor:o,unifiedCurrency:w="ILS",type:i="neutral",label:h,size:k="default",className:g}){const[r,d]=u.useState(!1),m=u.useRef(null),{rate:x,source:y}=b("USD","ILS"),{language:j}=N(),a=C(j),v=S(),l=L(t,o,w,x);u.useEffect(()=>{function s(p){m.current&&!m.current.contains(p.target)&&d(!1)}if(r)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[r]),u.useEffect(()=>{function s(p){p.key==="Escape"&&d(!1)}if(r)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[r]);const f=i==="income"?"amount-positive":i==="expense"?"amount-negative":i==="net"?l!==null?l>=0?"amount-positive":"amount-negative":t+o>=0?"amount-positive":"amount-negative":"";return e.jsxs("div",{ref:m,className:n("currency-summary-popup",g),children:[h&&e.jsx("span",{className:"currency-summary-label",children:h}),e.jsxs("div",{className:"currency-summary-main",children:[e.jsx("span",{className:n("currency-summary-amount",f,k==="large"&&"large"),children:l!==null?c(l,w,a):`${c(t,"USD",a)} + ${c(o,"ILS",a)}`}),e.jsx("button",{type:"button",className:"currency-summary-toggle",onClick:()=>d(!r),"aria-label":"Show currency breakdown",title:"Show currency breakdown",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("path",{d:"M8 4.5V8.5M8 11V11.01",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})]}),r&&e.jsxs("div",{className:"currency-summary-dropdown",children:[e.jsxs("div",{className:"currency-breakdown-row",children:[e.jsx("span",{className:"currency-breakdown-label",children:"USD"}),e.jsx("span",{className:n("currency-breakdown-value",f),children:c(t,"USD",a)})]}),e.jsxs("div",{className:"currency-breakdown-row",children:[e.jsx("span",{className:"currency-breakdown-label",children:"ILS"}),e.jsx("span",{className:n("currency-breakdown-value",f),children:c(o,"ILS",a)})]}),x&&e.jsxs("div",{className:"currency-breakdown-rate",children:[e.jsxs("span",{className:"currency-breakdown-rate-label",children:[v("fx.bannerTitle"),": 1 USD = ",x.toFixed(2)," ILS"]}),e.jsxs("span",{className:n("currency-breakdown-source",`source-${y}`),children:["(",v(`fx.${y}`),")"]})]})]})]})}export{D as C};
