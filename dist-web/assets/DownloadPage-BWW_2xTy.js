import{r as c,j as a}from"./vendor-router-D4Yqsbqz.js";import{b as N,u as f,T as v,C as g}from"./index-DxpiON0U.js";import"./vendor-react-BdxwsYZ-.js";import"./vendor-query-CI0tl4qS.js";import"./vendor-db-BMy7eggi.js";import"./vendor-forms-CPtPuEGg.js";function b({message:s,isVisible:o,onClose:d,duration:n=2e3}){return c.useEffect(()=>{if(o&&n>0){const l=setTimeout(d,n);return()=>clearTimeout(l)}},[o,n,d]),o?a.jsx("div",{className:"toast",role:"status","aria-live":"polite",children:s}):null}const T={mac:{minVersion:"macOS 12+"},windows:{minVersion:"Windows 10+"}},r={mac:"/download/mac",windowsMsi:"/download/windows",windowsExe:"/download/windows-exe",releaseNotes:"/download/release-notes",allReleases:"https://github.com/vAWK3/mutaba3a/releases"};function C(){const s=navigator.userAgent.toLowerCase(),o=navigator.platform?.toLowerCase()||"";return o.includes("mac")||s.includes("macintosh")?"mac":o.includes("win")||s.includes("windows")?"windows":"unknown"}function M({platform:s,isRecommended:o,version:d,hasBuild:n,isLoading:l,t:e}){const t=s==="mac",w=T[s],m=e(t?"download.mac.title":"download.windows.title"),h=t?r.mac:r.windowsMsi,u=e(t?"download.mac.downloadDmg":"download.windows.downloadMsi"),i=t?[e("download.mac.step1"),e("download.mac.step2"),e("download.mac.step3")]:[e("download.windows.step1"),e("download.windows.step2"),e("download.windows.step3")],p=n||!l&&d===null;return a.jsxs(g,{variant:"bordered",padding:"lg",className:`download-platform-card ${o?"download-platform-card--recommended":""}`,children:[o&&a.jsx("div",{className:"download-recommended-badge",children:e("download.recommendedForYou")}),a.jsx("div",{className:"download-platform-header",children:a.jsx("h2",{className:"download-platform-title",children:m})}),a.jsx("div",{className:"download-cta-wrapper",children:l?a.jsx("span",{className:"download-cta download-cta--loading",children:e("download.loading")}):p?a.jsx("a",{href:h,className:`download-cta ${o?"download-cta--primary":"download-cta--secondary"}`,rel:"noopener","data-cta":`download-${s}`,"data-version":d||"latest",children:u}):a.jsx("span",{className:"download-cta download-cta--disabled",children:e("download.comingSoon")})}),a.jsxs("div",{className:"download-meta",children:[a.jsxs("div",{className:"download-meta-item",children:[a.jsx("span",{className:"download-meta-label",children:e("download.version")}),a.jsx("span",{className:"download-meta-value",children:l?"...":d?`v${d}`:"â€”"})]}),a.jsxs("div",{className:"download-meta-item",children:[a.jsx("span",{className:"download-meta-label",children:e("download.requires")}),a.jsx("span",{className:"download-meta-value",children:w.minVersion})]})]}),p&&a.jsxs("div",{className:"download-install",children:[a.jsx("h3",{className:"download-install-title",children:e("download.howToInstall")}),a.jsx("ol",{className:"download-install-steps",children:i.map((x,j)=>a.jsx("li",{children:x},j))})]}),!t&&p&&a.jsx("div",{className:"download-alt",children:a.jsx("a",{href:r.windowsExe,className:"download-alt-link",rel:"noopener",children:e("download.windows.altExe")})})]})}function L(){const[s,o]=c.useState(!1),d=c.useMemo(()=>C(),[]),{release:n,isLoading:l}=N(),e=f(),t=c.useCallback(()=>{o(!1)},[]),w=d==="windows"?["windows","mac"]:["mac","windows"],m=n?.hasMacBuild??!1,h=n?.hasWindowsBuild??!1,u=n?.releaseNotesUrl||r.releaseNotes;return a.jsxs(a.Fragment,{children:[a.jsx(v,{title:e("download.title"),hideAddMenu:!0}),a.jsx("div",{className:"page-content download-page",children:a.jsxs("div",{className:"download-container",children:[a.jsx("div",{className:"download-cards",children:w.map(i=>a.jsx(M,{platform:i,isRecommended:d===i,version:n?.version||null,hasBuild:i==="mac"?m:h,isLoading:l,t:e},i))}),a.jsxs("div",{className:"download-footer",children:[a.jsx("a",{href:u,className:"download-link",rel:"noopener noreferrer",target:"_blank",children:e("download.releaseNotes")}),a.jsx("a",{href:r.allReleases,className:"download-link",rel:"noopener noreferrer",target:"_blank",children:e("download.allVersions")})]})]})}),a.jsx(b,{message:e("download.checksumCopied"),isVisible:s,onClose:t})]})}export{L as DownloadPage};
