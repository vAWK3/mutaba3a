const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/event-DXqYWlmG.js","assets/core-BEOw45JP.js","assets/TransactionsPage-C8q65070.js","assets/vendor-router-D4Yqsbqz.js","assets/vendor-react-BdxwsYZ-.js","assets/StatusSegment-B7qZzehq.js","assets/EmptyState-r3axvhwz.js","assets/RowActionsMenu-L_ZpjB9G.js","assets/RowActionsMenu-Bun0gHPS.css","assets/CopyIcon-VW8NgKZB.js","assets/vendor-query-CI0tl4qS.js","assets/vendor-db-BMy7eggi.js","assets/vendor-forms-CPtPuEGg.js","assets/Badge-qzDJyl-k.css","assets/ProjectsPage-CUlnQdrR.js","assets/ProjectDetailPage-wWDIUkvF.js","assets/ClientsPage-DszUFZff.js","assets/ClientDetailPage-B7_5fY9O.js","assets/ReportsPage-BaT9fk96.js","assets/index-DZThrbQR.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js","assets/index-D_McaMIz.css","assets/SettingsPage-DvxPFEa4.js","assets/ProfileDetailPage-DrRBwZv6.js","assets/DownloadPage-CR-cZ_M2.js","assets/DownloadPage-CFbLEbM2.css","assets/ThemeDemo-IDyPqZ9D.js","assets/ThemeDemo-Bhg6x5uI.css","assets/ExpensesPage-BSenopGd.js","assets/ExpensesPage-7T9WuaQu.css","assets/ProfileExpensesPage-PkZhj92c.js","assets/ProfileExpensesPage-Do4RQ_Se.css","assets/ReceiptsPage-PH5Fn4lJ.js","assets/monthDetection-BmJXVGRT.js","assets/ReceiptsPage-CM_FS-8y.css","assets/ExpensesOverviewPage-DlR07Lp9.js","assets/ExpensesOverviewPage-hL7sKboG.css","assets/ExpensesForecastPage-CPChHGDO.js","assets/ExpensesForecastPage-CuC7jCa8.css","assets/RetainersPage-BaSCSf5s.js","assets/CurrencySummaryPopup-DpCehFV9.js","assets/RetainersPage-BcVQb_m3.css","assets/index-BRmKDNgK.js","assets/index-BniSt1ZC.css","assets/MonthCloseChecklistPage-DRFzdFPz.js","assets/MonthCloseChecklistPage-BdLD6WfS.css","assets/LandingPage-BT2tz2cr.js","assets/LandingPage-Cd7TLzu8.css"])))=>i.map(i=>d[i]);
import{r as O,j as s,R as Ve,L as Ul,u as bv,a as au,c as wv,b as Ze,d as jv,O as Sv,e as Av}from"./vendor-router-D4Yqsbqz.js";import{a as Dv,b as Nv}from"./vendor-react-BdxwsYZ-.js";import{u as ce,a as oe,b as fe,Q as Mv,c as Cv}from"./vendor-query-CI0tl4qS.js";import{D as Ev}from"./vendor-db-BMy7eggi.js";import{g as Po,s as zo,p as Tv,a as Rv,$ as _v,b as Gp,o as Vn,c as te,_ as St,u as Qa,C as Ie,l as Iv,d as iu,n as Oi,e as dp,f as fp,Z as _l}from"./vendor-forms-CPtPuEGg.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const w of h.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function c(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(d){if(d.ep)return;d.ep=!0;const h=c(d);fetch(d.href,h)}})();const Ov="modulepreload",zv=function(a){return"/"+a},mp={},Ce=function(l,c,u){let d=Promise.resolve();if(c&&c.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),g=w?.nonce||w?.getAttribute("nonce");d=p(c.map(m=>{if(m=zv(m),m in mp)return;mp[m]=!0;const y=m.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Ov,y||(b.as="script"),b.crossOrigin="",b.href=m,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((N,A)=>{b.addEventListener("load",N),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function h(w){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=w,window.dispatchEvent(g),!g.defaultPrevented)throw w}return d.then(w=>{for(const g of w||[])g.status==="rejected"&&h(g.reason);return l().catch(h)})};var Lo={exports:{}},Il={},Uo={exports:{}},qo={};var pp;function Lv(){return pp||(pp=1,(function(a){function l(q,Y){var ae=q.length;q.push(Y);e:for(;0<ae;){var xe=ae-1>>>1,G=q[xe];if(0<d(G,Y))q[xe]=Y,q[ae]=G,ae=xe;else break e}}function c(q){return q.length===0?null:q[0]}function u(q){if(q.length===0)return null;var Y=q[0],ae=q.pop();if(ae!==Y){q[0]=ae;e:for(var xe=0,G=q.length,be=G>>>1;xe<be;){var Z=2*(xe+1)-1,V=q[Z],W=Z+1,gt=q[W];if(0>d(V,ae))W<G&&0>d(gt,V)?(q[xe]=gt,q[W]=ae,xe=W):(q[xe]=V,q[Z]=ae,xe=Z);else if(W<G&&0>d(gt,ae))q[xe]=gt,q[W]=ae,xe=W;else break e}}return Y}function d(q,Y){var ae=q.sortIndex-Y.sortIndex;return ae!==0?ae:q.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var w=Date,g=w.now();a.unstable_now=function(){return w.now()-g}}var p=[],m=[],y=1,x=null,b=3,N=!1,A=!1,R=!1,_=!1,U=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function k(q){for(var Y=c(m);Y!==null;){if(Y.callback===null)u(m);else if(Y.startTime<=q)u(m),Y.sortIndex=Y.expirationTime,l(p,Y);else break;Y=c(m)}}function K(q){if(R=!1,k(q),!A)if(c(p)!==null)A=!0,$||($=!0,ve());else{var Y=c(m);Y!==null&&ge(K,Y.startTime-q)}}var $=!1,F=-1,X=5,ue=-1;function he(){return _?!0:!(a.unstable_now()-ue<X)}function ne(){if(_=!1,$){var q=a.unstable_now();ue=q;var Y=!0;try{e:{A=!1,R&&(R=!1,L(F),F=-1),N=!0;var ae=b;try{t:{for(k(q),x=c(p);x!==null&&!(x.expirationTime>q&&he());){var xe=x.callback;if(typeof xe=="function"){x.callback=null,b=x.priorityLevel;var G=xe(x.expirationTime<=q);if(q=a.unstable_now(),typeof G=="function"){x.callback=G,k(q),Y=!0;break t}x===c(p)&&u(p),k(q)}else u(p);x=c(p)}if(x!==null)Y=!0;else{var be=c(m);be!==null&&ge(K,be.startTime-q),Y=!1}}break e}finally{x=null,b=ae,N=!1}Y=void 0}}finally{Y?ve():$=!1}}}var ve;if(typeof M=="function")ve=function(){M(ne)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ye=le.port2;le.port1.onmessage=ne,ve=function(){ye.postMessage(null)}}else ve=function(){U(ne,0)};function ge(q,Y){F=U(function(){q(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(q){q.callback=null},a.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<q?Math.floor(1e3/q):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(q){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var ae=b;b=Y;try{return q()}finally{b=ae}},a.unstable_requestPaint=function(){_=!0},a.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=b;b=q;try{return Y()}finally{b=ae}},a.unstable_scheduleCallback=function(q,Y,ae){var xe=a.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?xe+ae:xe):ae=xe,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,q={id:y++,callback:Y,priorityLevel:q,startTime:ae,expirationTime:G,sortIndex:-1},ae>xe?(q.sortIndex=ae,l(m,q),c(p)===null&&q===c(m)&&(R?(L(F),F=-1):R=!0,ge(K,ae-xe))):(q.sortIndex=G,l(p,q),A||N||(A=!0,$||($=!0,ve()))),q},a.unstable_shouldYield=he,a.unstable_wrapCallback=function(q){var Y=b;return function(){var ae=b;b=Y;try{return q.apply(this,arguments)}finally{b=ae}}}})(qo)),qo}var hp;function Uv(){return hp||(hp=1,Uo.exports=Lv()),Uo.exports}var yp;function qv(){if(yp)return Il;yp=1;var a=Uv(),l=Dv(),c=Nv();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function w(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(u(188))}function m(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return p(r),e;if(o===i)return p(r),t;o=o.sibling}throw Error(u(188))}if(n.return!==i.return)n=r,i=o;else{for(var f=!1,v=r.child;v;){if(v===n){f=!0,n=r,i=o;break}if(v===i){f=!0,i=r,n=o;break}v=v.sibling}if(!f){for(v=o.child;v;){if(v===n){f=!0,n=o,i=r;break}if(v===i){f=!0,i=o,n=r;break}v=v.sibling}if(!f)throw Error(u(189))}}if(n.alternate!==i)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),M=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function ve(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var le=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case U:return"Profiler";case _:return"StrictMode";case K:return"Suspense";case $:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case M:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var ge=Array.isArray,q=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},xe=[],G=-1;function be(e){return{current:e}}function Z(e){0>G||(e.current=xe[G],xe[G]=null,G--)}function V(e,t){G++,xe[G]=e.current,e.current=t}var W=be(null),gt=be(null),Mt=be(null),cn=be(null);function Kn(e,t){switch(V(Mt,t),V(gt,e),V(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Om(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Om(t),e=zm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(W),V(W,e)}function Ct(){Z(W),Z(gt),Z(Mt)}function Fn(e){e.memoizedState!==null&&V(cn,e);var t=W.current,n=zm(t,e.type);t!==n&&(V(gt,e),V(W,n))}function vn(e){gt.current===e&&(Z(W),Z(gt)),cn.current===e&&(Z(cn),Cl._currentValue=ae)}var Sn,Fa;function on(e){if(Sn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sn=t&&t[1]||"",Fa=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sn+e+Fa}var we=!1;function P(e,t){if(!e||we)return"";we=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(z){var I=z}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(z){I=z}e.call(Q.prototype)}}else{try{throw Error()}catch(z){I=z}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(z){if(z&&I&&typeof z.stack=="string")return[z.stack,I.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),f=o[0],v=o[1];if(f&&v){var S=f.split(`
`),T=v.split(`
`);for(r=i=0;i<S.length&&!S[i].includes("DetermineComponentFrameRoot");)i++;for(;r<T.length&&!T[r].includes("DetermineComponentFrameRoot");)r++;if(i===S.length||r===T.length)for(i=S.length-1,r=T.length-1;1<=i&&0<=r&&S[i]!==T[r];)r--;for(;1<=i&&0<=r;i--,r--)if(S[i]!==T[r]){if(i!==1||r!==1)do if(i--,r--,0>r||S[i]!==T[r]){var B=`
`+S[i].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=i&&0<=r);break}}}finally{we=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?on(n):""}function de(e,t){switch(e.tag){case 26:case 27:case 5:return on(e.type);case 16:return on("Lazy");case 13:return e.child!==t&&t!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return P(e.type,!1);case 11:return P(e.type.render,!1);case 1:return P(e.type,!0);case 31:return on("Activity");default:return""}}function et(e){try{var t="",n=null;do t+=de(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var lt=Object.prototype.hasOwnProperty,un=a.unstable_scheduleCallback,Le=a.unstable_cancelCallback,Pl=a.unstable_shouldYield,Wh=a.unstable_requestPaint,qt=a.unstable_now,ey=a.unstable_getCurrentPriorityLevel,du=a.unstable_ImmediatePriority,fu=a.unstable_UserBlockingPriority,Kl=a.unstable_NormalPriority,ty=a.unstable_LowPriority,mu=a.unstable_IdlePriority,ny=a.log,ay=a.unstable_setDisableYieldValue,ki=null,Bt=null;function Gn(e){if(typeof ny=="function"&&ay(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(ki,e)}catch{}}var kt=Math.clz32?Math.clz32:sy,iy=Math.log,ly=Math.LN2;function sy(e){return e>>>=0,e===0?32:31-(iy(e)/ly|0)|0}var Fl=256,Gl=262144,Zl=4194304;function ba(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var v=i&134217727;return v!==0?(i=v&~o,i!==0?r=ba(i):(f&=v,f!==0?r=ba(f):n||(n=v&~e,n!==0&&(r=ba(n))))):(v=i&~o,v!==0?r=ba(v):f!==0?r=ba(f):n||(n=i&~e,n!==0&&(r=ba(n)))),r===0?0:t!==0&&t!==r&&(t&o)===0&&(o=r&-r,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:r}function Hi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ry(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(){var e=Zl;return Zl<<=1,(Zl&62914560)===0&&(Zl=4194304),e}function jr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cy(e,t,n,i,r,o){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,T=e.hiddenUpdates;for(n=f&~n;0<n;){var B=31-kt(n),Q=1<<B;v[B]=0,S[B]=-1;var I=T[B];if(I!==null)for(T[B]=null,B=0;B<I.length;B++){var z=I[B];z!==null&&(z.lane&=-536870913)}n&=~Q}i!==0&&hu(e,i,0),o!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function hu(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-kt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function yu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-kt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function gu(e,t){var n=t&-t;return n=(n&42)!==0?1:Sr(n),(n&(e.suspendedLanes|t))!==0?0:n}function Sr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ar(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vu(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:ip(e.type))}function xu(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var Zn=Math.random().toString(36).slice(2),vt="__reactFiber$"+Zn,Et="__reactProps$"+Zn,Ga="__reactContainer$"+Zn,Dr="__reactEvents$"+Zn,oy="__reactListeners$"+Zn,uy="__reactHandles$"+Zn,bu="__reactResources$"+Zn,Vi="__reactMarker$"+Zn;function Nr(e){delete e[vt],delete e[Et],delete e[Dr],delete e[oy],delete e[uy]}function Za(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ga]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qm(e);e!==null;){if(n=e[vt])return n;e=Qm(e)}return t}e=n,n=e.parentNode}return null}function Xa(e){if(e=e[vt]||e[Ga]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Yi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Ja(e){var t=e[bu];return t||(t=e[bu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mt(e){e[Vi]=!0}var wu=new Set,ju={};function wa(e,t){$a(e,t),$a(e+"Capture",t)}function $a(e,t){for(ju[e]=t,e=0;e<t.length;e++)wu.add(t[e])}var dy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},Au={};function fy(e){return lt.call(Au,e)?!0:lt.call(Su,e)?!1:dy.test(e)?Au[e]=!0:(Su[e]=!0,!1)}function Jl(e,t,n){if(fy(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function $l(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Du(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function my(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(f){n=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mr(e){if(!e._valueTracker){var t=Du(e)?"checked":"value";e._valueTracker=my(e,t,""+e[t])}}function Nu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Du(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var py=/[\n"\\]/g;function Xt(e){return e.replace(py,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cr(e,t,n,i,r,o,f,v){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Zt(t)):e.value!==""+Zt(t)&&(e.value=""+Zt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Er(e,f,Zt(t)):n!=null?Er(e,f,Zt(n)):i!=null&&e.removeAttribute("value"),r==null&&o!=null&&(e.defaultChecked=!!o),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Zt(v):e.removeAttribute("name")}function Mu(e,t,n,i,r,o,f,v){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Mr(e);return}n=n!=null?""+Zt(n):"",t=t!=null?""+Zt(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=v?e.checked:!!i,e.defaultChecked=!!i,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Mr(e)}function Er(e,t,n){t==="number"&&Wl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Wa(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Zt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Cu(e,t,n){if(t!=null&&(t=""+Zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Zt(n):""}function Eu(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(u(92));if(ge(i)){if(1<i.length)throw Error(u(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Zt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Mr(e)}function ei(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tu(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||hy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ru(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Tu(e,r,i)}else for(var o in t)t.hasOwnProperty(o)&&Tu(e,o,t[o])}function Tr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function es(e){return gy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dn(){}var Rr=null;function _r(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ti=null,ni=null;function _u(e){var t=Xa(e);if(t&&(e=t.stateNode)){var n=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(Cr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Et]||null;if(!r)throw Error(u(90));Cr(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Nu(i)}break e;case"textarea":Cu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Wa(e,!!n.multiple,t,!1)}}}var Ir=!1;function Iu(e,t,n){if(Ir)return e(t,n);Ir=!0;try{var i=e(t);return i}finally{if(Ir=!1,(ti!==null||ni!==null)&&(Hs(),ti&&(t=ti,e=ni,ni=ti=null,_u(t),e)))for(t=0;t<e.length;t++)_u(e[t])}}function Pi(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Et]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(Nn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Or=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Or=!1}var Xn=null,zr=null,ts=null;function Ou(){if(ts)return ts;var e,t=zr,n=t.length,i,r="value"in Xn?Xn.value:Xn.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===r[o-i];i++);return ts=r.slice(e,1<i?1-i:void 0)}function ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function as(){return!0}function zu(){return!1}function Tt(e){function t(n,i,r,o,f){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(o):o[v]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?as:zu,this.isPropagationStopped=zu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),t}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Tt(ja),Fi=x({},ja,{view:0,detail:0}),vy=Tt(Fi),Lr,Ur,Gi,ls=x({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gi&&(Gi&&e.type==="mousemove"?(Lr=e.screenX-Gi.screenX,Ur=e.screenY-Gi.screenY):Ur=Lr=0,Gi=e),Lr)},movementY:function(e){return"movementY"in e?e.movementY:Ur}}),Lu=Tt(ls),xy=x({},ls,{dataTransfer:0}),by=Tt(xy),wy=x({},Fi,{relatedTarget:0}),qr=Tt(wy),jy=x({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=Tt(jy),Ay=x({},ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dy=Tt(Ay),Ny=x({},ja,{data:0}),Uu=Tt(Ny),My={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ty(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ey[e])?!!t[e]:!1}function Br(){return Ty}var Ry=x({},Fi,{key:function(e){if(e.key){var t=My[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(e){return e.type==="keypress"?ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_y=Tt(Ry),Iy=x({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=Tt(Iy),Oy=x({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),zy=Tt(Oy),Ly=x({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uy=Tt(Ly),qy=x({},ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),By=Tt(qy),ky=x({},ja,{newState:0,oldState:0}),Hy=Tt(ky),Qy=[9,13,27,32],kr=Nn&&"CompositionEvent"in window,Zi=null;Nn&&"documentMode"in document&&(Zi=document.documentMode);var Vy=Nn&&"TextEvent"in window&&!Zi,Bu=Nn&&(!kr||Zi&&8<Zi&&11>=Zi),ku=" ",Hu=!1;function Qu(e,t){switch(e){case"keyup":return Qy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ai=!1;function Yy(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(Hu=!0,ku);case"textInput":return e=t.data,e===ku&&Hu?null:e;default:return null}}function Py(e,t){if(ai)return e==="compositionend"||!kr&&Qu(e,t)?(e=Ou(),ts=zr=Xn=null,ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ky[e.type]:t==="textarea"}function Pu(e,t,n,i){ti?ni?ni.push(i):ni=[i]:ti=i,t=Gs(t,"onChange"),0<t.length&&(n=new is("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Xi=null,Ji=null;function Fy(e){Cm(e,0)}function ss(e){var t=Yi(e);if(Nu(t))return e}function Ku(e,t){if(e==="change")return t}var Fu=!1;if(Nn){var Hr;if(Nn){var Qr="oninput"in document;if(!Qr){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),Qr=typeof Gu.oninput=="function"}Hr=Qr}else Hr=!1;Fu=Hr&&(!document.documentMode||9<document.documentMode)}function Zu(){Xi&&(Xi.detachEvent("onpropertychange",Xu),Ji=Xi=null)}function Xu(e){if(e.propertyName==="value"&&ss(Ji)){var t=[];Pu(t,Ji,e,_r(e)),Iu(Fy,t)}}function Gy(e,t,n){e==="focusin"?(Zu(),Xi=t,Ji=n,Xi.attachEvent("onpropertychange",Xu)):e==="focusout"&&Zu()}function Zy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ss(Ji)}function Xy(e,t){if(e==="click")return ss(t)}function Jy(e,t){if(e==="input"||e==="change")return ss(t)}function $y(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:$y;function $i(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!lt.call(t,r)||!Ht(e[r],t[r]))return!1}return!0}function Ju(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $u(e,t){var n=Ju(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ju(n)}}function Wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ed(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Wy=Nn&&"documentMode"in document&&11>=document.documentMode,ii=null,Yr=null,Wi=null,Pr=!1;function td(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pr||ii==null||ii!==Wl(i)||(i=ii,"selectionStart"in i&&Vr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Wi&&$i(Wi,i)||(Wi=i,i=Gs(Yr,"onSelect"),0<i.length&&(t=new is("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var li={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Kr={},nd={};Nn&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Aa(e){if(Kr[e])return Kr[e];if(!li[e])return e;var t=li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nd)return Kr[e]=t[n];return e}var ad=Aa("animationend"),id=Aa("animationiteration"),ld=Aa("animationstart"),eg=Aa("transitionrun"),tg=Aa("transitionstart"),ng=Aa("transitioncancel"),sd=Aa("transitionend"),rd=new Map,Fr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fr.push("scrollEnd");function dn(e,t){rd.set(e,t),wa(t,[e])}var rs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],si=0,Gr=0;function cs(){for(var e=si,t=Gr=si=0;t<e;){var n=Jt[t];Jt[t++]=null;var i=Jt[t];Jt[t++]=null;var r=Jt[t];Jt[t++]=null;var o=Jt[t];if(Jt[t++]=null,i!==null&&r!==null){var f=i.pending;f===null?r.next=r:(r.next=f.next,f.next=r),i.pending=r}o!==0&&cd(n,r,o)}}function os(e,t,n,i){Jt[si++]=e,Jt[si++]=t,Jt[si++]=n,Jt[si++]=i,Gr|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Zr(e,t,n,i){return os(e,t,n,i),us(e)}function Da(e,t){return os(e,null,null,t),us(e)}function cd(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,o=e.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(r=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,r&&t!==null&&(r=31-kt(n),e=o.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),o):null}function us(e){if(50<wl)throw wl=0,io=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ri={};function ag(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,i){return new ag(e,t,n,i)}function Xr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function od(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ds(e,t,n,i,r,o){var f=0;if(i=e,typeof e=="function")Xr(e)&&(f=1);else if(typeof e=="string")f=cv(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Qt(31,n,t,r),e.elementType=ue,e.lanes=o,e;case R:return Na(n.children,r,o,t);case _:f=8,r|=24;break;case U:return e=Qt(12,n,t,r|2),e.elementType=U,e.lanes=o,e;case K:return e=Qt(13,n,t,r),e.elementType=K,e.lanes=o,e;case $:return e=Qt(19,n,t,r),e.elementType=$,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:f=10;break e;case L:f=9;break e;case k:f=11;break e;case F:f=14;break e;case X:f=16,i=null;break e}f=29,n=Error(u(130,e===null?"null":typeof e,"")),i=null}return t=Qt(f,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function Na(e,t,n,i){return e=Qt(7,e,i,t),e.lanes=n,e}function Jr(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function ud(e){var t=Qt(18,null,null,0);return t.stateNode=e,t}function $r(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var dd=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var n=dd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:et(t)},dd.set(e,t),t)}return{value:e,source:t,stack:et(t)}}var ci=[],oi=0,fs=null,el=0,Wt=[],en=0,Jn=null,xn=1,bn="";function Cn(e,t){ci[oi++]=el,ci[oi++]=fs,fs=e,el=t}function fd(e,t,n){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,Jn=e;var i=xn;e=bn;var r=32-kt(i)-1;i&=~(1<<r),n+=1;var o=32-kt(t)+r;if(30<o){var f=r-r%5;o=(i&(1<<f)-1).toString(32),i>>=f,r-=f,xn=1<<32-kt(t)+r|n<<r|i,bn=o+e}else xn=1<<o|n<<r|i,bn=e}function Wr(e){e.return!==null&&(Cn(e,1),fd(e,1,0))}function ec(e){for(;e===fs;)fs=ci[--oi],ci[oi]=null,el=ci[--oi],ci[oi]=null;for(;e===Jn;)Jn=Wt[--en],Wt[en]=null,bn=Wt[--en],Wt[en]=null,xn=Wt[--en],Wt[en]=null}function md(e,t){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,xn=t.id,bn=t.overflow,Jn=e}var xt=null,He=null,Me=!1,$n=null,tn=!1,tc=Error(u(519));function Wn(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl($t(t,e)),tc}function pd(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[vt]=e,t[Et]=i,n){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(n=0;n<Sl.length;n++)Se(Sl[n],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),Mu(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),Eu(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||_m(t.textContent,n)?(i.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),i.onScroll!=null&&Se("scroll",t),i.onScrollEnd!=null&&Se("scrollend",t),i.onClick!=null&&(t.onclick=Dn),t=!0):t=!1,t||Wn(e,!0)}function hd(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:xt=xt.return}}function ui(e){if(e!==xt)return!1;if(!Me)return hd(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||bo(e.type,e.memoizedProps)),n=!n),n&&He&&Wn(e),hd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Hm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Hm(e)}else t===27?(t=He,ma(e.type)?(e=Do,Do=null,He=e):He=t):He=xt?an(e.stateNode.nextSibling):null;return!0}function Ma(){He=xt=null,Me=!1}function nc(){var e=$n;return e!==null&&(Ot===null?Ot=e:Ot.push.apply(Ot,e),$n=null),e}function tl(e){$n===null?$n=[e]:$n.push(e)}var ac=be(null),Ca=null,En=null;function ea(e,t,n){V(ac,t._currentValue),t._currentValue=n}function Tn(e){e._currentValue=ac.current,Z(ac)}function ic(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function lc(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){var f=r.child;o=o.firstContext;e:for(;o!==null;){var v=o;o=r;for(var S=0;S<t.length;S++)if(v.context===t[S]){o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),ic(o.return,n,e),i||(f=null);break e}o=v.next}}else if(r.tag===18){if(f=r.return,f===null)throw Error(u(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),ic(f,n,e),f=null}else f=r.child;if(f!==null)f.return=r;else for(f=r;f!==null;){if(f===e){f=null;break}if(r=f.sibling,r!==null){r.return=f.return,f=r;break}f=f.return}r=f}}function di(e,t,n,i){e=null;for(var r=t,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var f=r.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var v=r.type;Ht(r.pendingProps.value,f.value)||(e!==null?e.push(v):e=[v])}}else if(r===cn.current){if(f=r.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Cl):e=[Cl])}r=r.return}e!==null&&lc(t,e,n,i),t.flags|=262144}function ms(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){Ca=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return yd(Ca,e)}function ps(e,t){return Ca===null&&Ea(e),yd(e,t)}function yd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},En===null){if(e===null)throw Error(u(308));En=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else En=En.next=t;return n}var ig=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},lg=a.unstable_scheduleCallback,sg=a.unstable_NormalPriority,st={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sc(){return{controller:new ig,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&lg(sg,function(){e.controller.abort()})}var al=null,rc=0,fi=0,mi=null;function rg(e,t){if(al===null){var n=al=[];rc=0,fi=uo(),mi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return rc++,t.then(gd,gd),t}function gd(){if(--rc===0&&al!==null){mi!==null&&(mi.status="fulfilled");var e=al;al=null,fi=0,mi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function cg(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var vd=q.S;q.S=function(e,t){nm=qt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&rg(e,t),vd!==null&&vd(e,t)};var Ta=be(null);function cc(){var e=Ta.current;return e!==null?e:ke.pooledCache}function hs(e,t){t===null?V(Ta,Ta.current):V(Ta,t.pool)}function xd(){var e=cc();return e===null?null:{parent:st._currentValue,pool:e}}var pi=Error(u(460)),oc=Error(u(474)),ys=Error(u(542)),gs={then:function(){}};function bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Dn,Dn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e;default:if(typeof t.status=="string")t.then(Dn,Dn);else{if(e=ke,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e}throw _a=t,pi}}function Ra(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_a=n,pi):n}}var _a=null;function jd(){if(_a===null)throw Error(u(459));var e=_a;return _a=null,e}function Sd(e){if(e===pi||e===ys)throw Error(u(483))}var hi=null,il=0;function vs(e){var t=il;return il+=1,hi===null&&(hi=[]),wd(hi,e,t)}function ll(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xs(e,t){throw t.$$typeof===b?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(C,D){if(e){var E=C.deletions;E===null?(C.deletions=[D],C.flags|=16):E.push(D)}}function n(C,D){if(!e)return null;for(;D!==null;)t(C,D),D=D.sibling;return null}function i(C){for(var D=new Map;C!==null;)C.key!==null?D.set(C.key,C):D.set(C.index,C),C=C.sibling;return D}function r(C,D){return C=Mn(C,D),C.index=0,C.sibling=null,C}function o(C,D,E){return C.index=E,e?(E=C.alternate,E!==null?(E=E.index,E<D?(C.flags|=67108866,D):E):(C.flags|=67108866,D)):(C.flags|=1048576,D)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function v(C,D,E,H){return D===null||D.tag!==6?(D=Jr(E,C.mode,H),D.return=C,D):(D=r(D,E),D.return=C,D)}function S(C,D,E,H){var ie=E.type;return ie===R?B(C,D,E.props.children,H,E.key):D!==null&&(D.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===X&&Ra(ie)===D.type)?(D=r(D,E.props),ll(D,E),D.return=C,D):(D=ds(E.type,E.key,E.props,null,C.mode,H),ll(D,E),D.return=C,D)}function T(C,D,E,H){return D===null||D.tag!==4||D.stateNode.containerInfo!==E.containerInfo||D.stateNode.implementation!==E.implementation?(D=$r(E,C.mode,H),D.return=C,D):(D=r(D,E.children||[]),D.return=C,D)}function B(C,D,E,H,ie){return D===null||D.tag!==7?(D=Na(E,C.mode,H,ie),D.return=C,D):(D=r(D,E),D.return=C,D)}function Q(C,D,E){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Jr(""+D,C.mode,E),D.return=C,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return E=ds(D.type,D.key,D.props,null,C.mode,E),ll(E,D),E.return=C,E;case A:return D=$r(D,C.mode,E),D.return=C,D;case X:return D=Ra(D),Q(C,D,E)}if(ge(D)||ve(D))return D=Na(D,C.mode,E,null),D.return=C,D;if(typeof D.then=="function")return Q(C,vs(D),E);if(D.$$typeof===M)return Q(C,ps(C,D),E);xs(C,D)}return null}function I(C,D,E,H){var ie=D!==null?D.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return ie!==null?null:v(C,D,""+E,H);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case N:return E.key===ie?S(C,D,E,H):null;case A:return E.key===ie?T(C,D,E,H):null;case X:return E=Ra(E),I(C,D,E,H)}if(ge(E)||ve(E))return ie!==null?null:B(C,D,E,H,null);if(typeof E.then=="function")return I(C,D,vs(E),H);if(E.$$typeof===M)return I(C,D,ps(C,E),H);xs(C,E)}return null}function z(C,D,E,H,ie){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return C=C.get(E)||null,v(D,C,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return C=C.get(H.key===null?E:H.key)||null,S(D,C,H,ie);case A:return C=C.get(H.key===null?E:H.key)||null,T(D,C,H,ie);case X:return H=Ra(H),z(C,D,E,H,ie)}if(ge(H)||ve(H))return C=C.get(E)||null,B(D,C,H,ie,null);if(typeof H.then=="function")return z(C,D,E,vs(H),ie);if(H.$$typeof===M)return z(C,D,E,ps(D,H),ie);xs(D,H)}return null}function J(C,D,E,H){for(var ie=null,Ee=null,ee=D,pe=D=0,Ne=null;ee!==null&&pe<E.length;pe++){ee.index>pe?(Ne=ee,ee=null):Ne=ee.sibling;var Te=I(C,ee,E[pe],H);if(Te===null){ee===null&&(ee=Ne);break}e&&ee&&Te.alternate===null&&t(C,ee),D=o(Te,D,pe),Ee===null?ie=Te:Ee.sibling=Te,Ee=Te,ee=Ne}if(pe===E.length)return n(C,ee),Me&&Cn(C,pe),ie;if(ee===null){for(;pe<E.length;pe++)ee=Q(C,E[pe],H),ee!==null&&(D=o(ee,D,pe),Ee===null?ie=ee:Ee.sibling=ee,Ee=ee);return Me&&Cn(C,pe),ie}for(ee=i(ee);pe<E.length;pe++)Ne=z(ee,C,pe,E[pe],H),Ne!==null&&(e&&Ne.alternate!==null&&ee.delete(Ne.key===null?pe:Ne.key),D=o(Ne,D,pe),Ee===null?ie=Ne:Ee.sibling=Ne,Ee=Ne);return e&&ee.forEach(function(va){return t(C,va)}),Me&&Cn(C,pe),ie}function re(C,D,E,H){if(E==null)throw Error(u(151));for(var ie=null,Ee=null,ee=D,pe=D=0,Ne=null,Te=E.next();ee!==null&&!Te.done;pe++,Te=E.next()){ee.index>pe?(Ne=ee,ee=null):Ne=ee.sibling;var va=I(C,ee,Te.value,H);if(va===null){ee===null&&(ee=Ne);break}e&&ee&&va.alternate===null&&t(C,ee),D=o(va,D,pe),Ee===null?ie=va:Ee.sibling=va,Ee=va,ee=Ne}if(Te.done)return n(C,ee),Me&&Cn(C,pe),ie;if(ee===null){for(;!Te.done;pe++,Te=E.next())Te=Q(C,Te.value,H),Te!==null&&(D=o(Te,D,pe),Ee===null?ie=Te:Ee.sibling=Te,Ee=Te);return Me&&Cn(C,pe),ie}for(ee=i(ee);!Te.done;pe++,Te=E.next())Te=z(ee,C,pe,Te.value,H),Te!==null&&(e&&Te.alternate!==null&&ee.delete(Te.key===null?pe:Te.key),D=o(Te,D,pe),Ee===null?ie=Te:Ee.sibling=Te,Ee=Te);return e&&ee.forEach(function(xv){return t(C,xv)}),Me&&Cn(C,pe),ie}function Be(C,D,E,H){if(typeof E=="object"&&E!==null&&E.type===R&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case N:e:{for(var ie=E.key;D!==null;){if(D.key===ie){if(ie=E.type,ie===R){if(D.tag===7){n(C,D.sibling),H=r(D,E.props.children),H.return=C,C=H;break e}}else if(D.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===X&&Ra(ie)===D.type){n(C,D.sibling),H=r(D,E.props),ll(H,E),H.return=C,C=H;break e}n(C,D);break}else t(C,D);D=D.sibling}E.type===R?(H=Na(E.props.children,C.mode,H,E.key),H.return=C,C=H):(H=ds(E.type,E.key,E.props,null,C.mode,H),ll(H,E),H.return=C,C=H)}return f(C);case A:e:{for(ie=E.key;D!==null;){if(D.key===ie)if(D.tag===4&&D.stateNode.containerInfo===E.containerInfo&&D.stateNode.implementation===E.implementation){n(C,D.sibling),H=r(D,E.children||[]),H.return=C,C=H;break e}else{n(C,D);break}else t(C,D);D=D.sibling}H=$r(E,C.mode,H),H.return=C,C=H}return f(C);case X:return E=Ra(E),Be(C,D,E,H)}if(ge(E))return J(C,D,E,H);if(ve(E)){if(ie=ve(E),typeof ie!="function")throw Error(u(150));return E=ie.call(E),re(C,D,E,H)}if(typeof E.then=="function")return Be(C,D,vs(E),H);if(E.$$typeof===M)return Be(C,D,ps(C,E),H);xs(C,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,D!==null&&D.tag===6?(n(C,D.sibling),H=r(D,E),H.return=C,C=H):(n(C,D),H=Jr(E,C.mode,H),H.return=C,C=H),f(C)):n(C,D)}return function(C,D,E,H){try{il=0;var ie=Be(C,D,E,H);return hi=null,ie}catch(ee){if(ee===pi||ee===ys)throw ee;var Ee=Qt(29,ee,null,C.mode);return Ee.lanes=H,Ee.return=C,Ee}}}var Ia=Ad(!0),Dd=Ad(!1),ta=!1;function uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Re&2)!==0){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=us(e),cd(e,null,n),t}return os(e,i,t,n),us(e)}function sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yu(e,n)}}function fc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?r=o=f:o=o.next=f,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var mc=!1;function rl(){if(mc){var e=mi;if(e!==null)throw e}}function cl(e,t,n,i){mc=!1;var r=e.updateQueue;ta=!1;var o=r.firstBaseUpdate,f=r.lastBaseUpdate,v=r.shared.pending;if(v!==null){r.shared.pending=null;var S=v,T=S.next;S.next=null,f===null?o=T:f.next=T,f=S;var B=e.alternate;B!==null&&(B=B.updateQueue,v=B.lastBaseUpdate,v!==f&&(v===null?B.firstBaseUpdate=T:v.next=T,B.lastBaseUpdate=S))}if(o!==null){var Q=r.baseState;f=0,B=T=S=null,v=o;do{var I=v.lane&-536870913,z=I!==v.lane;if(z?(De&I)===I:(i&I)===I){I!==0&&I===fi&&(mc=!0),B!==null&&(B=B.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var J=e,re=v;I=t;var Be=n;switch(re.tag){case 1:if(J=re.payload,typeof J=="function"){Q=J.call(Be,Q,I);break e}Q=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=re.payload,I=typeof J=="function"?J.call(Be,Q,I):J,I==null)break e;Q=x({},Q,I);break e;case 2:ta=!0}}I=v.callback,I!==null&&(e.flags|=64,z&&(e.flags|=8192),z=r.callbacks,z===null?r.callbacks=[I]:z.push(I))}else z={lane:I,tag:v.tag,payload:v.payload,callback:v.callback,next:null},B===null?(T=B=z,S=Q):B=B.next=z,f|=I;if(v=v.next,v===null){if(v=r.shared.pending,v===null)break;z=v,v=z.next,z.next=null,r.lastBaseUpdate=z,r.shared.pending=null}}while(!0);B===null&&(S=Q),r.baseState=S,r.firstBaseUpdate=T,r.lastBaseUpdate=B,o===null&&(r.shared.lanes=0),ca|=f,e.lanes=f,e.memoizedState=Q}}function Nd(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Md(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Nd(n[e],t)}var yi=be(null),bs=be(0);function Cd(e,t){e=Bn,V(bs,e),V(yi,t),Bn=e|t.baseLanes}function pc(){V(bs,Bn),V(yi,yi.current)}function hc(){Bn=bs.current,Z(yi),Z(bs)}var Vt=be(null),nn=null;function ia(e){var t=e.alternate;V(tt,tt.current&1),V(Vt,e),nn===null&&(t===null||yi.current!==null||t.memoizedState!==null)&&(nn=e)}function yc(e){V(tt,tt.current),V(Vt,e),nn===null&&(nn=e)}function Ed(e){e.tag===22?(V(tt,tt.current),V(Vt,e),nn===null&&(nn=e)):la()}function la(){V(tt,tt.current),V(Vt,Vt.current)}function Yt(e){Z(Vt),nn===e&&(nn=null),Z(tt)}var tt=be(0);function ws(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||So(n)||Ao(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rn=0,me=null,Ue=null,rt=null,js=!1,gi=!1,Oa=!1,Ss=0,ol=0,vi=null,og=0;function Xe(){throw Error(u(321))}function gc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function vc(e,t,n,i,r,o){return Rn=o,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?mf:Ic,Oa=!1,o=n(i,r),Oa=!1,gi&&(o=Rd(t,n,i,r)),Td(e),o}function Td(e){q.H=fl;var t=Ue!==null&&Ue.next!==null;if(Rn=0,rt=Ue=me=null,js=!1,ol=0,vi=null,t)throw Error(u(300));e===null||ct||(e=e.dependencies,e!==null&&ms(e)&&(ct=!0))}function Rd(e,t,n,i){me=e;var r=0;do{if(gi&&(vi=null),ol=0,gi=!1,25<=r)throw Error(u(301));if(r+=1,rt=Ue=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}q.H=pf,o=t(n,i)}while(gi);return o}function ug(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?ul(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(me.flags|=1024),t}function xc(){var e=Ss!==0;return Ss=0,e}function bc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function wc(e){if(js){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}js=!1}Rn=0,rt=Ue=me=null,gi=!1,ol=Ss=0,vi=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?me.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if(Ue===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=rt===null?me.memoizedState:rt.next;if(t!==null)rt=t,Ue=e;else{if(e===null)throw me.alternate===null?Error(u(467)):Error(u(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},rt===null?me.memoizedState=rt=e:rt=rt.next=e}return rt}function As(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(e){var t=ol;return ol+=1,vi===null&&(vi=[]),e=wd(vi,e,t),t=me,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?mf:Ic),e}function Ds(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ul(e);if(e.$$typeof===M)return bt(e)}throw Error(u(438,String(e)))}function jc(e){var t=null,n=me.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=me.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=As(),me.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=he;return t.index++,n}function _n(e,t){return typeof t=="function"?t(e):t}function Ns(e){var t=nt();return Sc(t,Ue,e)}function Sc(e,t,n){var i=e.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=n;var r=e.baseQueue,o=i.pending;if(o!==null){if(r!==null){var f=r.next;r.next=o.next,o.next=f}t.baseQueue=r=o,i.pending=null}if(o=e.baseState,r===null)e.memoizedState=o;else{t=r.next;var v=f=null,S=null,T=t,B=!1;do{var Q=T.lane&-536870913;if(Q!==T.lane?(De&Q)===Q:(Rn&Q)===Q){var I=T.revertLane;if(I===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),Q===fi&&(B=!0);else if((Rn&I)===I){T=T.next,I===fi&&(B=!0);continue}else Q={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},S===null?(v=S=Q,f=o):S=S.next=Q,me.lanes|=I,ca|=I;Q=T.action,Oa&&n(o,Q),o=T.hasEagerState?T.eagerState:n(o,Q)}else I={lane:Q,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},S===null?(v=S=I,f=o):S=S.next=I,me.lanes|=Q,ca|=Q;T=T.next}while(T!==null&&T!==t);if(S===null?f=o:S.next=v,!Ht(o,e.memoizedState)&&(ct=!0,B&&(n=mi,n!==null)))throw n;e.memoizedState=o,e.baseState=f,e.baseQueue=S,i.lastRenderedState=o}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ac(e){var t=nt(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var f=r=r.next;do o=e(o,f.action),f=f.next;while(f!==r);Ht(o,t.memoizedState)||(ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function _d(e,t,n){var i=me,r=nt(),o=Me;if(o){if(n===void 0)throw Error(u(407));n=n()}else n=t();var f=!Ht((Ue||r).memoizedState,n);if(f&&(r.memoizedState=n,ct=!0),r=r.queue,Mc(zd.bind(null,i,r,e),[e]),r.getSnapshot!==t||f||rt!==null&&rt.memoizedState.tag&1){if(i.flags|=2048,xi(9,{destroy:void 0},Od.bind(null,i,r,n,t),null),ke===null)throw Error(u(349));o||(Rn&127)!==0||Id(i,t,n)}return n}function Id(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t=As(),me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Od(e,t,n,i){t.value=n,t.getSnapshot=i,Ld(t)&&Ud(e)}function zd(e,t,n){return n(function(){Ld(t)&&Ud(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function Ud(e){var t=Da(e,2);t!==null&&zt(t,e,2)}function Dc(e){var t=Dt();if(typeof e=="function"){var n=e;if(e=n(),Oa){Gn(!0);try{n()}finally{Gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:e},t}function qd(e,t,n,i){return e.baseState=n,Sc(e,Ue,typeof i=="function"?i:_n)}function dg(e,t,n,i,r){if(Es(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};q.T!==null?n(!0):o.isTransition=!1,i(o),n=t.pending,n===null?(o.next=t.pending=o,Bd(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Bd(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=q.T,f={};q.T=f;try{var v=n(r,i),S=q.S;S!==null&&S(f,v),kd(e,t,v)}catch(T){Nc(e,t,T)}finally{o!==null&&f.types!==null&&(o.types=f.types),q.T=o}}else try{o=n(r,i),kd(e,t,o)}catch(T){Nc(e,t,T)}}function kd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Hd(e,t,i)},function(i){return Nc(e,t,i)}):Hd(e,t,n)}function Hd(e,t,n){t.status="fulfilled",t.value=n,Qd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Bd(e,n)))}function Nc(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Qd(t),t=t.next;while(t!==i)}e.action=null}function Qd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Vd(e,t){return t}function Yd(e,t){if(Me){var n=ke.formState;if(n!==null){e:{var i=me;if(Me){if(He){t:{for(var r=He,o=tn;r.nodeType!==8;){if(!o){r=null;break t}if(r=an(r.nextSibling),r===null){r=null;break t}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){He=an(r.nextSibling),i=r.data==="F!";break e}}Wn(i)}i=!1}i&&(t=n[0])}}return n=Dt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:t},n.queue=i,n=uf.bind(null,me,i),i.dispatch=n,i=Dc(!1),o=_c.bind(null,me,!1,i.queue),i=Dt(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=dg.bind(null,me,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Pd(e){var t=nt();return Kd(t,Ue,e)}function Kd(e,t,n){if(t=Sc(e,t,Vd)[0],e=Ns(_n)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ul(t)}catch(f){throw f===pi?ys:f}else i=t;t=nt();var r=t.queue,o=r.dispatch;return n!==t.memoizedState&&(me.flags|=2048,xi(9,{destroy:void 0},fg.bind(null,r,n),null)),[i,o,e]}function fg(e,t){e.action=t}function Fd(e){var t=nt(),n=Ue;if(n!==null)return Kd(t,n,e);nt(),t=t.memoizedState,n=nt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function xi(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=me.updateQueue,t===null&&(t=As(),me.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Gd(){return nt().memoizedState}function Ms(e,t,n,i){var r=Dt();me.flags|=e,r.memoizedState=xi(1|t,{destroy:void 0},n,i===void 0?null:i)}function Cs(e,t,n,i){var r=nt();i=i===void 0?null:i;var o=r.memoizedState.inst;Ue!==null&&i!==null&&gc(i,Ue.memoizedState.deps)?r.memoizedState=xi(t,o,n,i):(me.flags|=e,r.memoizedState=xi(1|t,o,n,i))}function Zd(e,t){Ms(8390656,8,e,t)}function Mc(e,t){Cs(2048,8,e,t)}function mg(e){me.flags|=4;var t=me.updateQueue;if(t===null)t=As(),me.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Xd(e){var t=nt().memoizedState;return mg({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Jd(e,t){return Cs(4,2,e,t)}function $d(e,t){return Cs(4,4,e,t)}function Wd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ef(e,t,n){n=n!=null?n.concat([e]):null,Cs(4,4,Wd.bind(null,t,e),n)}function Cc(){}function tf(e,t){var n=nt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&gc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function nf(e,t){var n=nt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&gc(t,i[1]))return i[0];if(i=e(),Oa){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[i,t],i}function Ec(e,t,n){return n===void 0||(Rn&1073741824)!==0&&(De&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=im(),me.lanes|=e,ca|=e,n)}function af(e,t,n,i){return Ht(n,t)?n:yi.current!==null?(e=Ec(e,n,i),Ht(e,t)||(ct=!0),e):(Rn&42)===0||(Rn&1073741824)!==0&&(De&261930)===0?(ct=!0,e.memoizedState=n):(e=im(),me.lanes|=e,ca|=e,t)}function lf(e,t,n,i,r){var o=Y.p;Y.p=o!==0&&8>o?o:8;var f=q.T,v={};q.T=v,_c(e,!1,t,n);try{var S=r(),T=q.S;if(T!==null&&T(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var B=cg(S,i);dl(e,t,B,Ft(e))}else dl(e,t,i,Ft(e))}catch(Q){dl(e,t,{then:function(){},status:"rejected",reason:Q},Ft())}finally{Y.p=o,f!==null&&v.types!==null&&(f.types=v.types),q.T=f}}function pg(){}function Tc(e,t,n,i){if(e.tag!==5)throw Error(u(476));var r=sf(e).queue;lf(e,r,t,ae,n===null?pg:function(){return rf(e),n(i)})}function sf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:ae},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rf(e){var t=sf(e);t.next===null&&(t=e.alternate.memoizedState),dl(e,t.next.queue,{},Ft())}function Rc(){return bt(Cl)}function cf(){return nt().memoizedState}function of(){return nt().memoizedState}function hg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ft();e=na(n);var i=aa(t,e,n);i!==null&&(zt(i,t,n),sl(i,t,n)),t={cache:sc()},e.payload=t;return}t=t.return}}function yg(e,t,n){var i=Ft();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Es(e)?df(t,n):(n=Zr(e,t,n,i),n!==null&&(zt(n,e,i),ff(n,t,i)))}function uf(e,t,n){var i=Ft();dl(e,t,n,i)}function dl(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Es(e))df(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,v=o(f,n);if(r.hasEagerState=!0,r.eagerState=v,Ht(v,f))return os(e,t,r,0),ke===null&&cs(),!1}catch{}if(n=Zr(e,t,r,i),n!==null)return zt(n,e,i),ff(n,t,i),!0}return!1}function _c(e,t,n,i){if(i={lane:2,revertLane:uo(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Es(e)){if(t)throw Error(u(479))}else t=Zr(e,n,i,2),t!==null&&zt(t,e,2)}function Es(e){var t=e.alternate;return e===me||t!==null&&t===me}function df(e,t){gi=js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ff(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yu(e,n)}}var fl={readContext:bt,use:Ds,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};fl.useEffectEvent=Xe;var mf={readContext:bt,use:Ds,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Zd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ms(4194308,4,Wd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){Ms(4,2,e,t)},useMemo:function(e,t){var n=Dt();t=t===void 0?null:t;var i=e();if(Oa){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Dt();if(n!==void 0){var r=n(t);if(Oa){Gn(!0);try{n(t)}finally{Gn(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=yg.bind(null,me,e),[i.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Dc(e);var t=e.queue,n=uf.bind(null,me,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Cc,useDeferredValue:function(e,t){var n=Dt();return Ec(n,e,t)},useTransition:function(){var e=Dc(!1);return e=lf.bind(null,me,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=me,r=Dt();if(Me){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),ke===null)throw Error(u(349));(De&127)!==0||Id(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Zd(zd.bind(null,i,o,e),[e]),i.flags|=2048,xi(9,{destroy:void 0},Od.bind(null,i,o,n,t),null),n},useId:function(){var e=Dt(),t=ke.identifierPrefix;if(Me){var n=bn,i=xn;n=(i&~(1<<32-kt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ss++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=og++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Rc,useFormState:Yd,useActionState:Yd,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_c.bind(null,me,!0,n),n.dispatch=t,[e,t]},useMemoCache:jc,useCacheRefresh:function(){return Dt().memoizedState=hg.bind(null,me)},useEffectEvent:function(e){var t=Dt(),n={impl:e};return t.memoizedState=n,function(){if((Re&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},Ic={readContext:bt,use:Ds,useCallback:tf,useContext:bt,useEffect:Mc,useImperativeHandle:ef,useInsertionEffect:Jd,useLayoutEffect:$d,useMemo:nf,useReducer:Ns,useRef:Gd,useState:function(){return Ns(_n)},useDebugValue:Cc,useDeferredValue:function(e,t){var n=nt();return af(n,Ue.memoizedState,e,t)},useTransition:function(){var e=Ns(_n)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:_d,useId:cf,useHostTransitionStatus:Rc,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var n=nt();return qd(n,Ue,e,t)},useMemoCache:jc,useCacheRefresh:of};Ic.useEffectEvent=Xd;var pf={readContext:bt,use:Ds,useCallback:tf,useContext:bt,useEffect:Mc,useImperativeHandle:ef,useInsertionEffect:Jd,useLayoutEffect:$d,useMemo:nf,useReducer:Ac,useRef:Gd,useState:function(){return Ac(_n)},useDebugValue:Cc,useDeferredValue:function(e,t){var n=nt();return Ue===null?Ec(n,e,t):af(n,Ue.memoizedState,e,t)},useTransition:function(){var e=Ac(_n)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:ul(e),t]},useSyncExternalStore:_d,useId:cf,useHostTransitionStatus:Rc,useFormState:Fd,useActionState:Fd,useOptimistic:function(e,t){var n=nt();return Ue!==null?qd(n,Ue,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:jc,useCacheRefresh:of};pf.useEffectEvent=Xd;function Oc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zc={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ft(),r=na(i);r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,i),t!==null&&(zt(t,e,i),sl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ft(),r=na(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,i),t!==null&&(zt(t,e,i),sl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),i=na(n);i.tag=2,t!=null&&(i.callback=t),t=aa(e,i,n),t!==null&&(zt(t,e,n),sl(t,e,n))}};function hf(e,t,n,i,r,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,f):t.prototype&&t.prototype.isPureReactComponent?!$i(n,i)||!$i(r,o):!0}function yf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function za(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function gf(e){rs(e)}function vf(e){console.error(e)}function xf(e){rs(e)}function Ts(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function bf(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Lc(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){Ts(e,t)},n}function wf(e){return e=na(e),e.tag=3,e}function jf(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){bf(t,n,i)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){bf(t,n,i),typeof r!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})})}function gg(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&di(t,n,r,!0),n=Vt.current,n!==null){switch(n.tag){case 31:case 13:return nn===null?Qs():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===gs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),ro(e,i,r)),!1;case 22:return n.flags|=65536,i===gs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),ro(e,i,r)),!1}throw Error(u(435,n.tag))}return ro(e,i,r),Qs(),!1}if(Me)return t=Vt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==tc&&(e=Error(u(422),{cause:i}),tl($t(e,n)))):(i!==tc&&(t=Error(u(423),{cause:i}),tl($t(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=$t(i,n),r=Lc(e.stateNode,i,r),fc(e,r),Je!==4&&(Je=2)),!1;var o=Error(u(520),{cause:i});if(o=$t(o,n),bl===null?bl=[o]:bl.push(o),Je!==4&&(Je=2),t===null)return!0;i=$t(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Lc(n.stateNode,i,e),fc(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(oa===null||!oa.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,r=wf(r),jf(r,e,n,i),fc(n,r),!1}n=n.return}while(n!==null);return!1}var Uc=Error(u(461)),ct=!1;function wt(e,t,n,i){t.child=e===null?Dd(t,null,n,i):Ia(t,e.child,n,i)}function Sf(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var f={};for(var v in i)v!=="ref"&&(f[v]=i[v])}else f=i;return Ea(t),i=vc(e,t,n,f,o,r),v=xc(),e!==null&&!ct?(bc(e,t,r),In(e,t,r)):(Me&&v&&Wr(t),t.flags|=1,wt(e,t,i,r),t.child)}function Af(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!Xr(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Df(e,t,o,i,r)):(e=ds(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Pc(e,r)){var f=o.memoizedProps;if(n=n.compare,n=n!==null?n:$i,n(f,i)&&e.ref===t.ref)return In(e,t,r)}return t.flags|=1,e=Mn(o,i),e.ref=t.ref,e.return=t,t.child=e}function Df(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if($i(o,i)&&e.ref===t.ref)if(ct=!1,t.pendingProps=i=o,Pc(e,r))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,In(e,t,r)}return qc(e,t,n,i,r)}function Nf(e,t,n,i){var r=i.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(i=t.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~o}else i=0,t.child=null;return Mf(e,t,o,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hs(t,o!==null?o.cachePool:null),o!==null?Cd(t,o):pc(),Ed(t);else return i=t.lanes=536870912,Mf(e,t,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(hs(t,o.cachePool),Cd(t,o),la(),t.memoizedState=null):(e!==null&&hs(t,null),pc(),la());return wt(e,t,r,n),t.child}function ml(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Mf(e,t,n,i,r){var o=cc();return o=o===null?null:{parent:st._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&hs(t,null),pc(),Ed(t),e!==null&&di(e,t,i,!0),t.childLanes=r,null}function Rs(e,t){return t=Is({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cf(e,t,n){return Ia(t,e.child,null,n),e=Rs(t,t.pendingProps),e.flags|=2,Yt(t),t.memoizedState=null,e}function vg(e,t,n){var i=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=Rs(t,i),t.lanes=536870912,ml(null,e);if(yc(t),(e=He)?(e=km(e,tn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=ud(e),n.return=t,t.child=n,xt=t,He=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return Rs(t,i)}var o=e.memoizedState;if(o!==null){var f=o.dehydrated;if(yc(t),r)if(t.flags&256)t.flags&=-257,t=Cf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(ct||di(e,t,n,!1),r=(n&e.childLanes)!==0,ct||r){if(i=ke,i!==null&&(f=gu(i,n),f!==0&&f!==o.retryLane))throw o.retryLane=f,Da(e,f),zt(i,e,f),Uc;Qs(),t=Cf(e,t,n)}else e=o.treeContext,He=an(f.nextSibling),xt=t,Me=!0,$n=null,tn=!1,e!==null&&md(t,e),t=Rs(t,i),t.flags|=4096;return t}return e=Mn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _s(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function qc(e,t,n,i,r){return Ea(t),n=vc(e,t,n,i,void 0,r),i=xc(),e!==null&&!ct?(bc(e,t,r),In(e,t,r)):(Me&&i&&Wr(t),t.flags|=1,wt(e,t,n,r),t.child)}function Ef(e,t,n,i,r,o){return Ea(t),t.updateQueue=null,n=Rd(t,i,n,r),Td(e),i=xc(),e!==null&&!ct?(bc(e,t,o),In(e,t,o)):(Me&&i&&Wr(t),t.flags|=1,wt(e,t,n,o),t.child)}function Tf(e,t,n,i,r){if(Ea(t),t.stateNode===null){var o=ri,f=n.contextType;typeof f=="object"&&f!==null&&(o=bt(f)),o=new n(i,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=zc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=i,o.state=t.memoizedState,o.refs={},uc(t),f=n.contextType,o.context=typeof f=="object"&&f!==null?bt(f):ri,o.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Oc(t,n,f,i),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&zc.enqueueReplaceState(o,o.state,null),cl(t,i,o,r),rl(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){o=t.stateNode;var v=t.memoizedProps,S=za(n,v);o.props=S;var T=o.context,B=n.contextType;f=ri,typeof B=="object"&&B!==null&&(f=bt(B));var Q=n.getDerivedStateFromProps;B=typeof Q=="function"||typeof o.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,B||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v||T!==f)&&yf(t,o,i,f),ta=!1;var I=t.memoizedState;o.state=I,cl(t,i,o,r),rl(),T=t.memoizedState,v||I!==T||ta?(typeof Q=="function"&&(Oc(t,n,Q,i),T=t.memoizedState),(S=ta||hf(t,n,S,i,I,T,f))?(B||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=T),o.props=i,o.state=T,o.context=f,i=S):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,dc(e,t),f=t.memoizedProps,B=za(n,f),o.props=B,Q=t.pendingProps,I=o.context,T=n.contextType,S=ri,typeof T=="object"&&T!==null&&(S=bt(T)),v=n.getDerivedStateFromProps,(T=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==Q||I!==S)&&yf(t,o,i,S),ta=!1,I=t.memoizedState,o.state=I,cl(t,i,o,r),rl();var z=t.memoizedState;f!==Q||I!==z||ta||e!==null&&e.dependencies!==null&&ms(e.dependencies)?(typeof v=="function"&&(Oc(t,n,v,i),z=t.memoizedState),(B=ta||hf(t,n,B,i,I,z,S)||e!==null&&e.dependencies!==null&&ms(e.dependencies))?(T||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,z,S),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,z,S)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=z),o.props=i,o.state=z,o.context=S,i=B):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,_s(e,t),i=(t.flags&128)!==0,o||i?(o=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&i?(t.child=Ia(t,e.child,null,r),t.child=Ia(t,null,n,r)):wt(e,t,n,r),t.memoizedState=o.state,e=t.child):e=In(e,t,r),e}function Rf(e,t,n,i){return Ma(),t.flags|=256,wt(e,t,n,i),t.child}var Bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:xd()}}function Hc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Kt),e}function _f(e,t,n){var i=t.pendingProps,r=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),f&&(r=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(r?ia(t):la(),(e=He)?(e=km(e,tn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=ud(e),n.return=t,t.child=n,xt=t,He=null)):e=null,e===null)throw Wn(t);return Ao(e)?t.lanes=32:t.lanes=536870912,null}var v=i.children;return i=i.fallback,r?(la(),r=t.mode,v=Is({mode:"hidden",children:v},r),i=Na(i,r,n,null),v.return=t,i.return=t,v.sibling=i,t.child=v,i=t.child,i.memoizedState=kc(n),i.childLanes=Hc(e,f,n),t.memoizedState=Bc,ml(null,i)):(ia(t),Qc(t,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(o)t.flags&256?(ia(t),t.flags&=-257,t=Vc(e,t,n)):t.memoizedState!==null?(la(),t.child=e.child,t.flags|=128,t=null):(la(),v=i.fallback,r=t.mode,i=Is({mode:"visible",children:i.children},r),v=Na(v,r,n,null),v.flags|=2,i.return=t,v.return=t,i.sibling=v,t.child=i,Ia(t,e.child,null,n),i=t.child,i.memoizedState=kc(n),i.childLanes=Hc(e,f,n),t.memoizedState=Bc,t=ml(null,i));else if(ia(t),Ao(v)){if(f=v.nextSibling&&v.nextSibling.dataset,f)var T=f.dgst;f=T,i=Error(u(419)),i.stack="",i.digest=f,tl({value:i,source:null,stack:null}),t=Vc(e,t,n)}else if(ct||di(e,t,n,!1),f=(n&e.childLanes)!==0,ct||f){if(f=ke,f!==null&&(i=gu(f,n),i!==0&&i!==S.retryLane))throw S.retryLane=i,Da(e,i),zt(f,e,i),Uc;So(v)||Qs(),t=Vc(e,t,n)}else So(v)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,He=an(v.nextSibling),xt=t,Me=!0,$n=null,tn=!1,e!==null&&md(t,e),t=Qc(t,i.children),t.flags|=4096);return t}return r?(la(),v=i.fallback,r=t.mode,S=e.child,T=S.sibling,i=Mn(S,{mode:"hidden",children:i.children}),i.subtreeFlags=S.subtreeFlags&65011712,T!==null?v=Mn(T,v):(v=Na(v,r,n,null),v.flags|=2),v.return=t,i.return=t,i.sibling=v,t.child=i,ml(null,i),i=t.child,v=e.child.memoizedState,v===null?v=kc(n):(r=v.cachePool,r!==null?(S=st._currentValue,r=r.parent!==S?{parent:S,pool:S}:r):r=xd(),v={baseLanes:v.baseLanes|n,cachePool:r}),i.memoizedState=v,i.childLanes=Hc(e,f,n),t.memoizedState=Bc,ml(e.child,i)):(ia(t),n=e.child,e=n.sibling,n=Mn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function Qc(e,t){return t=Is({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Is(e,t){return e=Qt(22,e,null,t),e.lanes=0,e}function Vc(e,t,n){return Ia(t,e.child,null,n),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function If(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ic(e.return,t,n)}function Yc(e,t,n,i,r,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=r,f.treeForkCount=o)}function Of(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;i=i.children;var f=tt.current,v=(f&2)!==0;if(v?(f=f&1|2,t.flags|=128):f&=1,V(tt,f),wt(e,t,i,n),i=Me?el:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&If(e,n,t);else if(e.tag===19)If(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ws(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Yc(t,!1,r,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ws(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Yc(t,!0,n,null,o,i);break;case"together":Yc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ca|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(di(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ms(e)))}function xg(e,t,n){switch(t.tag){case 3:Kn(t,t.stateNode.containerInfo),ea(t,st,e.memoizedState.cache),Ma();break;case 27:case 5:Fn(t);break;case 4:Kn(t,t.stateNode.containerInfo);break;case 10:ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ia(t),t.flags|=128,null):(n&t.child.childLanes)!==0?_f(e,t,n):(ia(t),e=In(e,t,n),e!==null?e.sibling:null);ia(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(di(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return Of(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),V(tt,tt.current),i)break;return null;case 22:return t.lanes=0,Nf(e,t,n,t.pendingProps);case 24:ea(t,st,e.memoizedState.cache)}return In(e,t,n)}function zf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!Pc(e,n)&&(t.flags&128)===0)return ct=!1,xg(e,t,n);ct=(e.flags&131072)!==0}else ct=!1,Me&&(t.flags&1048576)!==0&&fd(t,el,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Ra(t.elementType),t.type=e,typeof e=="function")Xr(e)?(i=za(e,i),t.tag=1,t=Tf(null,t,e,i,n)):(t.tag=0,t=qc(null,t,e,i,n));else{if(e!=null){var r=e.$$typeof;if(r===k){t.tag=11,t=Sf(null,t,e,i,n);break e}else if(r===F){t.tag=14,t=Af(null,t,e,i,n);break e}}throw t=ye(e)||e,Error(u(306,t,""))}}return t;case 0:return qc(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=za(i,t.pendingProps),Tf(e,t,i,r,n);case 3:e:{if(Kn(t,t.stateNode.containerInfo),e===null)throw Error(u(387));i=t.pendingProps;var o=t.memoizedState;r=o.element,dc(e,t),cl(t,i,null,n);var f=t.memoizedState;if(i=f.cache,ea(t,st,i),i!==o.cache&&lc(t,[st],n,!0),rl(),i=f.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Rf(e,t,i,n);break e}else if(i!==r){r=$t(Error(u(424)),t),tl(r),t=Rf(e,t,i,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,He=an(e.firstChild),xt=t,Me=!0,$n=null,tn=!0,n=Dd(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),i===r){t=In(e,t,n);break e}wt(e,t,i,n)}t=t.child}return t;case 26:return _s(e,t),e===null?(n=Km(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,i=Zs(Mt.current).createElement(n),i[vt]=t,i[Et]=e,jt(i,n,e),mt(i),t.stateNode=i):t.memoizedState=Km(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fn(t),e===null&&Me&&(i=t.stateNode=Vm(t.type,t.pendingProps,Mt.current),xt=t,tn=!0,r=He,ma(t.type)?(Do=r,He=an(i.firstChild)):He=r),wt(e,t,t.pendingProps.children,n),_s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((r=i=He)&&(i=Zg(i,t.type,t.pendingProps,tn),i!==null?(t.stateNode=i,xt=t,He=an(i.firstChild),tn=!1,r=!0):r=!1),r||Wn(t)),Fn(t),r=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,i=o.children,bo(r,o)?i=null:f!==null&&bo(r,f)&&(t.flags|=32),t.memoizedState!==null&&(r=vc(e,t,ug,null,null,n),Cl._currentValue=r),_s(e,t),wt(e,t,i,n),t.child;case 6:return e===null&&Me&&((e=n=He)&&(n=Xg(n,t.pendingProps,tn),n!==null?(t.stateNode=n,xt=t,He=null,e=!0):e=!1),e||Wn(t)),null;case 13:return _f(e,t,n);case 4:return Kn(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ia(t,null,i,n):wt(e,t,i,n),t.child;case 11:return Sf(e,t,t.type,t.pendingProps,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ea(t,t.type,i.value),wt(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ea(t),r=bt(r),i=i(r),t.flags|=1,wt(e,t,i,n),t.child;case 14:return Af(e,t,t.type,t.pendingProps,n);case 15:return Df(e,t,t.type,t.pendingProps,n);case 19:return Of(e,t,n);case 31:return vg(e,t,n);case 22:return Nf(e,t,n,t.pendingProps);case 24:return Ea(t),i=bt(st),e===null?(r=cc(),r===null&&(r=ke,o=sc(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:i,cache:r},uc(t),ea(t,st,r)):((e.lanes&n)!==0&&(dc(e,t),cl(t,null,null,n),rl()),r=e.memoizedState,o=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ea(t,st,i)):(i=o.cache,ea(t,st,i),i!==r.cache&&lc(t,[st],n,!0))),wt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function On(e){e.flags|=4}function Kc(e,t,n,i,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(cm())e.flags|=8192;else throw _a=gs,oc}else e.flags&=-16777217}function Lf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jm(t))if(cm())e.flags|=8192;else throw _a=gs,oc}function Os(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pu():536870912,e.lanes|=t,Si|=t)}function pl(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function bg(e,t,n){var i=t.pendingProps;switch(ec(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tn(st),Ct(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ui(t)?On(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),Qe(t),null;case 26:var r=t.type,o=t.memoizedState;return e===null?(On(t),o!==null?(Qe(t),Lf(t,o)):(Qe(t),Kc(t,r,null,i,n))):o?o!==e.memoizedState?(On(t),Qe(t),Lf(t,o)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&On(t),Qe(t),Kc(t,r,e,i,n)),null;case 27:if(vn(t),n=Mt.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}e=W.current,ui(t)?pd(t):(e=Vm(r,i,n),t.stateNode=e,On(t))}return Qe(t),null;case 5:if(vn(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(!i){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}if(o=W.current,ui(t))pd(t);else{var f=Zs(Mt.current);switch(o){case 1:o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":o=f.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?f.createElement("select",{is:i.is}):f.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?f.createElement(r,{is:i.is}):f.createElement(r)}}o[vt]=t,o[Et]=i;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=o;e:switch(jt(o,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&On(t)}}return Qe(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&On(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(u(166));if(e=Mt.current,ui(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=xt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||_m(e.nodeValue,n)),e||Wn(t,!0)}else e=Zs(e).createTextNode(i),e[vt]=t,t.stateNode=e}return Qe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=ui(t),n!==null){if(e===null){if(!i)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[vt]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else n=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Yt(t),t):(Yt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Qe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ui(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(u(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));r[vt]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),r=!1}else r=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Yt(t),t):(Yt(t),null)}return Yt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Os(t,t.updateQueue),Qe(t),null);case 4:return Ct(),e===null&&ho(t.stateNode.containerInfo),Qe(t),null;case 10:return Tn(t.type),Qe(t),null;case 19:if(Z(tt),i=t.memoizedState,i===null)return Qe(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)pl(i,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=ws(e),o!==null){for(t.flags|=128,pl(i,!1),e=o.updateQueue,t.updateQueue=e,Os(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)od(n,e),n=n.sibling;return V(tt,tt.current&1|2),Me&&Cn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&qt()>Bs&&(t.flags|=128,r=!0,pl(i,!1),t.lanes=4194304)}else{if(!r)if(e=ws(o),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Os(t,e),pl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return Qe(t),null}else 2*qt()-i.renderingStartTime>Bs&&n!==536870912&&(t.flags|=128,r=!0,pl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(e=i.last,e!==null?e.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qt(),e.sibling=null,n=tt.current,V(tt,r?n&1|2:n&1),Me&&Cn(t,i.treeForkCount),e):(Qe(t),null);case 22:case 23:return Yt(t),hc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),n=t.updateQueue,n!==null&&Os(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Z(Ta),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(st),Qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function wg(e,t){switch(ec(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(st),Ct(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vn(t),null;case 31:if(t.memoizedState!==null){if(Yt(t),t.alternate===null)throw Error(u(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Yt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(tt),null;case 4:return Ct(),null;case 10:return Tn(t.type),null;case 22:case 23:return Yt(t),hc(),e!==null&&Z(Ta),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tn(st),null;case 25:return null;default:return null}}function Uf(e,t){switch(ec(t),t.tag){case 3:Tn(st),Ct();break;case 26:case 27:case 5:vn(t);break;case 4:Ct();break;case 31:t.memoizedState!==null&&Yt(t);break;case 13:Yt(t);break;case 19:Z(tt);break;case 10:Tn(t.type);break;case 22:case 23:Yt(t),hc(),e!==null&&Z(Ta);break;case 24:Tn(st)}}function hl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,f=n.inst;i=o(),f.destroy=i}n=n.next}while(n!==r)}}catch(v){ze(t,t.return,v)}}function sa(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var o=r.next;i=o;do{if((i.tag&e)===e){var f=i.inst,v=f.destroy;if(v!==void 0){f.destroy=void 0,r=t;var S=n,T=v;try{T()}catch(B){ze(r,S,B)}}}i=i.next}while(i!==o)}}catch(B){ze(t,t.return,B)}}function qf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Md(t,n)}catch(i){ze(e,e.return,i)}}}function Bf(e,t,n){n.props=za(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ze(e,t,i)}}function yl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){ze(e,t,r)}}function wn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){ze(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function kf(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){ze(e,e.return,r)}}function Fc(e,t,n){try{var i=e.stateNode;Vg(i,e.type,n,t),i[Et]=t}catch(r){ze(e,e.return,r)}}function Hf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Dn));else if(i!==4&&(i===27&&ma(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function zs(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ma(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(zs(e,t,n),e=e.sibling;e!==null;)zs(e,t,n),e=e.sibling}function Qf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);jt(t,i,n),t[vt]=e,t[Et]=n}catch(o){ze(e,e.return,o)}}var zn=!1,ot=!1,Xc=!1,Vf=typeof WeakSet=="function"?WeakSet:Set,pt=null;function jg(e,t){if(e=e.containerInfo,vo=nr,e=ed(e),Vr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var f=0,v=-1,S=-1,T=0,B=0,Q=e,I=null;t:for(;;){for(var z;Q!==n||r!==0&&Q.nodeType!==3||(v=f+r),Q!==o||i!==0&&Q.nodeType!==3||(S=f+i),Q.nodeType===3&&(f+=Q.nodeValue.length),(z=Q.firstChild)!==null;)I=Q,Q=z;for(;;){if(Q===e)break t;if(I===n&&++T===r&&(v=f),I===o&&++B===i&&(S=f),(z=Q.nextSibling)!==null)break;Q=I,I=Q.parentNode}Q=z}n=v===-1||S===-1?null:{start:v,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(xo={focusedElem:e,selectionRange:n},nr=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){switch(t=pt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var J=za(n.type,r);e=i.getSnapshotBeforeUpdate(J,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(re){ze(n,n.return,re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)jo(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}}function Yf(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Un(e,n),i&4&&hl(5,n);break;case 1:if(Un(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){ze(n,n.return,f)}else{var r=za(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ze(n,n.return,f)}}i&64&&qf(n),i&512&&yl(n,n.return);break;case 3:if(Un(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Md(e,t)}catch(f){ze(n,n.return,f)}}break;case 27:t===null&&i&4&&Qf(n);case 26:case 5:Un(e,n),t===null&&i&4&&kf(n),i&512&&yl(n,n.return);break;case 12:Un(e,n);break;case 31:Un(e,n),i&4&&Ff(e,n);break;case 13:Un(e,n),i&4&&Gf(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Rg.bind(null,n),Jg(e,n))));break;case 22:if(i=n.memoizedState!==null||zn,!i){t=t!==null&&t.memoizedState!==null||ot,r=zn;var o=ot;zn=i,(ot=t)&&!o?qn(e,n,(n.subtreeFlags&8772)!==0):Un(e,n),zn=r,ot=o}break;case 30:break;default:Un(e,n)}}function Pf(e){var t=e.alternate;t!==null&&(e.alternate=null,Pf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,Rt=!1;function Ln(e,t,n){for(n=n.child;n!==null;)Kf(e,t,n),n=n.sibling}function Kf(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(ki,n)}catch{}switch(n.tag){case 26:ot||wn(n,t),Ln(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||wn(n,t);var i=Ye,r=Rt;ma(n.type)&&(Ye=n.stateNode,Rt=!1),Ln(e,t,n),Dl(n.stateNode),Ye=i,Rt=r;break;case 5:ot||wn(n,t);case 6:if(i=Ye,r=Rt,Ye=null,Ln(e,t,n),Ye=i,Rt=r,Ye!==null)if(Rt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(o){ze(n,t,o)}else try{Ye.removeChild(n.stateNode)}catch(o){ze(n,t,o)}break;case 18:Ye!==null&&(Rt?(e=Ye,qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ri(e)):qm(Ye,n.stateNode));break;case 4:i=Ye,r=Rt,Ye=n.stateNode.containerInfo,Rt=!0,Ln(e,t,n),Ye=i,Rt=r;break;case 0:case 11:case 14:case 15:sa(2,n,t),ot||sa(4,n,t),Ln(e,t,n);break;case 1:ot||(wn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Bf(n,t,i)),Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:ot=(i=ot)||n.memoizedState!==null,Ln(e,t,n),ot=i;break;default:Ln(e,t,n)}}function Ff(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ri(e)}catch(n){ze(t,t.return,n)}}}function Gf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ri(e)}catch(n){ze(t,t.return,n)}}function Sg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vf),t;default:throw Error(u(435,e.tag))}}function Ls(e,t){var n=Sg(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var r=_g.bind(null,e,i);i.then(r,r)}})}function _t(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],o=e,f=t,v=f;e:for(;v!==null;){switch(v.tag){case 27:if(ma(v.type)){Ye=v.stateNode,Rt=!1;break e}break;case 5:Ye=v.stateNode,Rt=!1;break e;case 3:case 4:Ye=v.stateNode.containerInfo,Rt=!0;break e}v=v.return}if(Ye===null)throw Error(u(160));Kf(o,f,r),Ye=null,Rt=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zf(t,e),t=t.sibling}var fn=null;function Zf(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),It(e),i&4&&(sa(3,e,e.return),hl(3,e),sa(5,e,e.return));break;case 1:_t(t,e),It(e),i&512&&(ot||n===null||wn(n,n.return)),i&64&&zn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=fn;if(_t(t,e),It(e),i&512&&(ot||n===null||wn(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":o=r.getElementsByTagName("title")[0],(!o||o[Vi]||o[vt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(i),r.head.insertBefore(o,r.querySelector("head > title"))),jt(o,i,n),o[vt]=e,mt(o),i=o;break e;case"link":var f=Zm("link","href",r).get(i+(n.href||""));if(f){for(var v=0;v<f.length;v++)if(o=f[v],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(v,1);break t}}o=r.createElement(i),jt(o,i,n),r.head.appendChild(o);break;case"meta":if(f=Zm("meta","content",r).get(i+(n.content||""))){for(v=0;v<f.length;v++)if(o=f[v],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(v,1);break t}}o=r.createElement(i),jt(o,i,n),r.head.appendChild(o);break;default:throw Error(u(468,i))}o[vt]=e,mt(o),i=o}e.stateNode=i}else Xm(r,e.type,e.stateNode);else e.stateNode=Gm(r,i,e.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?Xm(r,e.type,e.stateNode):Gm(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Fc(e,e.memoizedProps,n.memoizedProps)}break;case 27:_t(t,e),It(e),i&512&&(ot||n===null||wn(n,n.return)),n!==null&&i&4&&Fc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_t(t,e),It(e),i&512&&(ot||n===null||wn(n,n.return)),e.flags&32){r=e.stateNode;try{ei(r,"")}catch(J){ze(e,e.return,J)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,Fc(e,r,n!==null?n.memoizedProps:r)),i&1024&&(Xc=!0);break;case 6:if(_t(t,e),It(e),i&4){if(e.stateNode===null)throw Error(u(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(J){ze(e,e.return,J)}}break;case 3:if($s=null,r=fn,fn=Xs(t.containerInfo),_t(t,e),fn=r,It(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(J){ze(e,e.return,J)}Xc&&(Xc=!1,Xf(e));break;case 4:i=fn,fn=Xs(e.stateNode.containerInfo),_t(t,e),It(e),fn=i;break;case 12:_t(t,e),It(e);break;case 31:_t(t,e),It(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ls(e,i)));break;case 13:_t(t,e),It(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(qs=qt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ls(e,i)));break;case 22:r=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,T=zn,B=ot;if(zn=T||r,ot=B||S,_t(t,e),ot=B,zn=T,It(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||S||zn||ot||La(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(o=S.stateNode,r)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{v=S.stateNode;var Q=S.memoizedProps.style,I=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;v.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(J){ze(S,S.return,J)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=r?"":S.memoizedProps}catch(J){ze(S,S.return,J)}}}else if(t.tag===18){if(n===null){S=t;try{var z=S.stateNode;r?Bm(z,!0):Bm(S.stateNode,!1)}catch(J){ze(S,S.return,J)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Ls(e,n))));break;case 19:_t(t,e),It(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ls(e,i)));break;case 30:break;case 21:break;default:_t(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Hf(i)){n=i;break}i=i.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var r=n.stateNode,o=Gc(e);zs(e,o,r);break;case 5:var f=n.stateNode;n.flags&32&&(ei(f,""),n.flags&=-33);var v=Gc(e);zs(e,v,f);break;case 3:case 4:var S=n.stateNode.containerInfo,T=Gc(e);Zc(e,T,S);break;default:throw Error(u(161))}}catch(B){ze(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Xf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Xf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Un(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Yf(e,t.alternate,t),t=t.sibling}function La(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),La(t);break;case 1:wn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Bf(t,t.return,n),La(t);break;case 27:Dl(t.stateNode);case 26:case 5:wn(t,t.return),La(t);break;case 22:t.memoizedState===null&&La(t);break;case 30:La(t);break;default:La(t)}e=e.sibling}}function qn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:qn(r,o,n),hl(4,o);break;case 1:if(qn(r,o,n),i=o,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(T){ze(i,i.return,T)}if(i=o,r=i.updateQueue,r!==null){var v=i.stateNode;try{var S=r.shared.hiddenCallbacks;if(S!==null)for(r.shared.hiddenCallbacks=null,r=0;r<S.length;r++)Nd(S[r],v)}catch(T){ze(i,i.return,T)}}n&&f&64&&qf(o),yl(o,o.return);break;case 27:Qf(o);case 26:case 5:qn(r,o,n),n&&i===null&&f&4&&kf(o),yl(o,o.return);break;case 12:qn(r,o,n);break;case 31:qn(r,o,n),n&&f&4&&Ff(r,o);break;case 13:qn(r,o,n),n&&f&4&&Gf(r,o);break;case 22:o.memoizedState===null&&qn(r,o,n),yl(o,o.return);break;case 30:break;default:qn(r,o,n)}t=t.sibling}}function Jc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function $c(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function mn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jf(e,t,n,i),t=t.sibling}function Jf(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:mn(e,t,n,i),r&2048&&hl(9,t);break;case 1:mn(e,t,n,i);break;case 3:mn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(r&2048){mn(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,v=o.onPostCommit;typeof v=="function"&&v(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ze(t,t.return,S)}}else mn(e,t,n,i);break;case 31:mn(e,t,n,i);break;case 13:mn(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?mn(e,t,n,i):gl(e,t):o._visibility&2?mn(e,t,n,i):(o._visibility|=2,bi(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Jc(f,t);break;case 24:mn(e,t,n,i),r&2048&&$c(t.alternate,t);break;default:mn(e,t,n,i)}}function bi(e,t,n,i,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,f=t,v=n,S=i,T=f.flags;switch(f.tag){case 0:case 11:case 15:bi(o,f,v,S,r),hl(8,f);break;case 23:break;case 22:var B=f.stateNode;f.memoizedState!==null?B._visibility&2?bi(o,f,v,S,r):gl(o,f):(B._visibility|=2,bi(o,f,v,S,r)),r&&T&2048&&Jc(f.alternate,f);break;case 24:bi(o,f,v,S,r),r&&T&2048&&$c(f.alternate,f);break;default:bi(o,f,v,S,r)}t=t.sibling}}function gl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:gl(n,i),r&2048&&Jc(i.alternate,i);break;case 24:gl(n,i),r&2048&&$c(i.alternate,i);break;default:gl(n,i)}t=t.sibling}}var vl=8192;function wi(e,t,n){if(e.subtreeFlags&vl)for(e=e.child;e!==null;)$f(e,t,n),e=e.sibling}function $f(e,t,n){switch(e.tag){case 26:wi(e,t,n),e.flags&vl&&e.memoizedState!==null&&ov(n,fn,e.memoizedState,e.memoizedProps);break;case 5:wi(e,t,n);break;case 3:case 4:var i=fn;fn=Xs(e.stateNode.containerInfo),wi(e,t,n),fn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=vl,vl=16777216,wi(e,t,n),vl=i):wi(e,t,n));break;default:wi(e,t,n)}}function Wf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];pt=i,tm(i,e)}Wf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)em(e),e=e.sibling}function em(e){switch(e.tag){case 0:case 11:case 15:xl(e),e.flags&2048&&sa(9,e,e.return);break;case 3:xl(e);break;case 12:xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Us(e)):xl(e);break;default:xl(e)}}function Us(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];pt=i,tm(i,e)}Wf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),Us(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Us(t));break;default:Us(t)}e=e.sibling}}function tm(e,t){for(;pt!==null;){var n=pt;switch(n.tag){case 0:case 11:case 15:sa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,pt=i;else e:for(n=e;pt!==null;){i=pt;var r=i.sibling,o=i.return;if(Pf(i),i===n){pt=null;break e}if(r!==null){r.return=o,pt=r;break e}pt=o}}}var Ag={getCacheForType:function(e){var t=bt(st),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return bt(st).controller.signal}},Dg=typeof WeakMap=="function"?WeakMap:Map,Re=0,ke=null,je=null,De=0,Oe=0,Pt=null,ra=!1,ji=!1,Wc=!1,Bn=0,Je=0,ca=0,Ua=0,eo=0,Kt=0,Si=0,bl=null,Ot=null,to=!1,qs=0,nm=0,Bs=1/0,ks=null,oa=null,ft=0,ua=null,Ai=null,kn=0,no=0,ao=null,am=null,wl=0,io=null;function Ft(){return(Re&2)!==0&&De!==0?De&-De:q.T!==null?uo():vu()}function im(){if(Kt===0)if((De&536870912)===0||Me){var e=Gl;Gl<<=1,(Gl&3932160)===0&&(Gl=262144),Kt=e}else Kt=536870912;return e=Vt.current,e!==null&&(e.flags|=32),Kt}function zt(e,t,n){(e===ke&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Di(e,0),da(e,De,Kt,!1)),Qi(e,n),((Re&2)===0||e!==ke)&&(e===ke&&((Re&2)===0&&(Ua|=n),Je===4&&da(e,De,Kt,!1)),jn(e))}function lm(e,t,n){if((Re&6)!==0)throw Error(u(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Hi(e,t),r=i?Cg(e,t):so(e,t,!0),o=i;do{if(r===0){ji&&!i&&da(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Ng(n)){r=so(e,t,!1),o=!1;continue}if(r===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var v=e;r=bl;var S=v.current.memoizedState.isDehydrated;if(S&&(Di(v,f).flags|=256),f=so(v,f,!1),f!==2){if(Wc&&!S){v.errorRecoveryDisabledLanes|=o,Ua|=o,r=4;break e}o=Ot,Ot=r,o!==null&&(Ot===null?Ot=o:Ot.push.apply(Ot,o))}r=f}if(o=!1,r!==2)continue}}if(r===1){Di(e,0),da(e,t,0,!0);break}e:{switch(i=e,o=r,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:da(i,t,Kt,!ra);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(r=qs+300-qt(),10<r)){if(da(i,t,Kt,!ra),Xl(i,0,!0)!==0)break e;kn=t,i.timeoutHandle=Lm(sm.bind(null,i,n,Ot,ks,to,t,Kt,Ua,Si,ra,o,"Throttled",-0,0),r);break e}sm(i,n,Ot,ks,to,t,Kt,Ua,Si,ra,o,null,-0,0)}}break}while(!0);jn(e)}function sm(e,t,n,i,r,o,f,v,S,T,B,Q,I,z){if(e.timeoutHandle=-1,Q=t.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},$f(t,o,Q);var J=(o&62914560)===o?qs-qt():(o&4194048)===o?nm-qt():0;if(J=uv(Q,J),J!==null){kn=o,e.cancelPendingCommit=J(pm.bind(null,e,t,o,n,i,r,f,v,S,B,Q,null,I,z)),da(e,o,f,!T);return}}pm(e,t,o,n,i,r,f,v,S)}function Ng(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Ht(o(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t,n,i){t&=~eo,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-kt(r),f=1<<o;i[o]=-1,r&=~f}n!==0&&hu(e,n,t)}function Hs(){return(Re&6)===0?(jl(0),!1):!0}function lo(){if(je!==null){if(Oe===0)var e=je.return;else e=je,En=Ca=null,wc(e),hi=null,il=0,e=je;for(;e!==null;)Uf(e.alternate,e),e=e.return;je=null}}function Di(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Kg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),kn=0,lo(),ke=e,je=n=Mn(e.current,null),De=t,Oe=0,Pt=null,ra=!1,ji=Hi(e,t),Wc=!1,Si=Kt=eo=Ua=ca=Je=0,Ot=bl=null,to=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-kt(i),o=1<<r;t|=e[r],i&=~o}return Bn=t,cs(),n}function rm(e,t){me=null,q.H=fl,t===pi||t===ys?(t=jd(),Oe=3):t===oc?(t=jd(),Oe=4):Oe=t===Uc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,je===null&&(Je=1,Ts(e,$t(t,e.current)))}function cm(){var e=Vt.current;return e===null?!0:(De&4194048)===De?nn===null:(De&62914560)===De||(De&536870912)!==0?e===nn:!1}function om(){var e=q.H;return q.H=fl,e===null?fl:e}function um(){var e=q.A;return q.A=Ag,e}function Qs(){Je=4,ra||(De&4194048)!==De&&Vt.current!==null||(ji=!0),(ca&134217727)===0&&(Ua&134217727)===0||ke===null||da(ke,De,Kt,!1)}function so(e,t,n){var i=Re;Re|=2;var r=om(),o=um();(ke!==e||De!==t)&&(ks=null,Di(e,t)),t=!1;var f=Je;e:do try{if(Oe!==0&&je!==null){var v=je,S=Pt;switch(Oe){case 8:lo(),f=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(t=!0);var T=Oe;if(Oe=0,Pt=null,Ni(e,v,S,T),n&&ji){f=0;break e}break;default:T=Oe,Oe=0,Pt=null,Ni(e,v,S,T)}}Mg(),f=Je;break}catch(B){rm(e,B)}while(!0);return t&&e.shellSuspendCounter++,En=Ca=null,Re=i,q.H=r,q.A=o,je===null&&(ke=null,De=0,cs()),f}function Mg(){for(;je!==null;)dm(je)}function Cg(e,t){var n=Re;Re|=2;var i=om(),r=um();ke!==e||De!==t?(ks=null,Bs=qt()+500,Di(e,t)):ji=Hi(e,t);e:do try{if(Oe!==0&&je!==null){t=je;var o=Pt;t:switch(Oe){case 1:Oe=0,Pt=null,Ni(e,t,o,1);break;case 2:case 9:if(bd(o)){Oe=0,Pt=null,fm(t);break}t=function(){Oe!==2&&Oe!==9||ke!==e||(Oe=7),jn(e)},o.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:bd(o)?(Oe=0,Pt=null,fm(t)):(Oe=0,Pt=null,Ni(e,t,o,7));break;case 5:var f=null;switch(je.tag){case 26:f=je.memoizedState;case 5:case 27:var v=je;if(f?Jm(f):v.stateNode.complete){Oe=0,Pt=null;var S=v.sibling;if(S!==null)je=S;else{var T=v.return;T!==null?(je=T,Vs(T)):je=null}break t}}Oe=0,Pt=null,Ni(e,t,o,5);break;case 6:Oe=0,Pt=null,Ni(e,t,o,6);break;case 8:lo(),Je=6;break e;default:throw Error(u(462))}}Eg();break}catch(B){rm(e,B)}while(!0);return En=Ca=null,q.H=i,q.A=r,Re=n,je!==null?0:(ke=null,De=0,cs(),Je)}function Eg(){for(;je!==null&&!Pl();)dm(je)}function dm(e){var t=zf(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?Vs(e):je=t}function fm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ef(n,t,t.pendingProps,t.type,void 0,De);break;case 11:t=Ef(n,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:wc(t);default:Uf(n,t),t=je=od(t,Bn),t=zf(n,t,Bn)}e.memoizedProps=e.pendingProps,t===null?Vs(e):je=t}function Ni(e,t,n,i){En=Ca=null,wc(t),hi=null,il=0;var r=t.return;try{if(gg(e,r,t,n,De)){Je=1,Ts(e,$t(n,e.current)),je=null;return}}catch(o){if(r!==null)throw je=r,o;Je=1,Ts(e,$t(n,e.current)),je=null;return}t.flags&32768?(Me||i===1?e=!0:ji||(De&536870912)!==0?e=!1:(ra=e=!0,(i===2||i===9||i===3||i===6)&&(i=Vt.current,i!==null&&i.tag===13&&(i.flags|=16384))),mm(t,e)):Vs(t)}function Vs(e){var t=e;do{if((t.flags&32768)!==0){mm(t,ra);return}e=t.return;var n=bg(t.alternate,t,Bn);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Je===0&&(Je=5)}function mm(e,t){do{var n=wg(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);Je=6,je=null}function pm(e,t,n,i,r,o,f,v,S){e.cancelPendingCommit=null;do Ys();while(ft!==0);if((Re&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Gr,cy(e,n,o,f,v,S),e===ke&&(je=ke=null,De=0),Ai=t,ua=e,kn=n,no=o,ao=r,am=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ig(Kl,function(){return xm(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=q.T,q.T=null,r=Y.p,Y.p=2,f=Re,Re|=4;try{jg(e,t,n)}finally{Re=f,Y.p=r,q.T=i}}ft=1,hm(),ym(),gm()}}function hm(){if(ft===1){ft=0;var e=ua,t=Ai,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=q.T,q.T=null;var i=Y.p;Y.p=2;var r=Re;Re|=4;try{Zf(t,e);var o=xo,f=ed(e.containerInfo),v=o.focusedElem,S=o.selectionRange;if(f!==v&&v&&v.ownerDocument&&Wu(v.ownerDocument.documentElement,v)){if(S!==null&&Vr(v)){var T=S.start,B=S.end;if(B===void 0&&(B=T),"selectionStart"in v)v.selectionStart=T,v.selectionEnd=Math.min(B,v.value.length);else{var Q=v.ownerDocument||document,I=Q&&Q.defaultView||window;if(I.getSelection){var z=I.getSelection(),J=v.textContent.length,re=Math.min(S.start,J),Be=S.end===void 0?re:Math.min(S.end,J);!z.extend&&re>Be&&(f=Be,Be=re,re=f);var C=$u(v,re),D=$u(v,Be);if(C&&D&&(z.rangeCount!==1||z.anchorNode!==C.node||z.anchorOffset!==C.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)){var E=Q.createRange();E.setStart(C.node,C.offset),z.removeAllRanges(),re>Be?(z.addRange(E),z.extend(D.node,D.offset)):(E.setEnd(D.node,D.offset),z.addRange(E))}}}}for(Q=[],z=v;z=z.parentNode;)z.nodeType===1&&Q.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Q.length;v++){var H=Q[v];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}nr=!!vo,xo=vo=null}finally{Re=r,Y.p=i,q.T=n}}e.current=t,ft=2}}function ym(){if(ft===2){ft=0;var e=ua,t=Ai,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=q.T,q.T=null;var i=Y.p;Y.p=2;var r=Re;Re|=4;try{Yf(e,t.alternate,t)}finally{Re=r,Y.p=i,q.T=n}}ft=3}}function gm(){if(ft===4||ft===3){ft=0,Wh();var e=ua,t=Ai,n=kn,i=am;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,Ai=ua=null,vm(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(oa=null),Ar(n),t=t.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(ki,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=q.T,r=Y.p,Y.p=2,q.T=null;try{for(var o=e.onRecoverableError,f=0;f<i.length;f++){var v=i[f];o(v.value,{componentStack:v.stack})}}finally{q.T=t,Y.p=r}}(kn&3)!==0&&Ys(),jn(e),r=e.pendingLanes,(n&261930)!==0&&(r&42)!==0?e===io?wl++:(wl=0,io=e):wl=0,jl(0)}}function vm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function Ys(){return hm(),ym(),gm(),xm()}function xm(){if(ft!==5)return!1;var e=ua,t=no;no=0;var n=Ar(kn),i=q.T,r=Y.p;try{Y.p=32>n?32:n,q.T=null,n=ao,ao=null;var o=ua,f=kn;if(ft=0,Ai=ua=null,kn=0,(Re&6)!==0)throw Error(u(331));var v=Re;if(Re|=4,em(o.current),Jf(o,o.current,f,n),Re=v,jl(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(ki,o)}catch{}return!0}finally{Y.p=r,q.T=i,vm(e,t)}}function bm(e,t,n){t=$t(n,t),t=Lc(e.stateNode,t,2),e=aa(e,t,2),e!==null&&(Qi(e,2),jn(e))}function ze(e,t,n){if(e.tag===3)bm(e,e,n);else for(;t!==null;){if(t.tag===3){bm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oa===null||!oa.has(i))){e=$t(n,e),n=wf(2),i=aa(t,n,2),i!==null&&(jf(n,i,t,e),Qi(i,2),jn(i));break}}t=t.return}}function ro(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Dg;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Wc=!0,r.add(n),e=Tg.bind(null,e,t,n),t.then(e,e))}function Tg(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ke===e&&(De&n)===n&&(Je===4||Je===3&&(De&62914560)===De&&300>qt()-qs?(Re&2)===0&&Di(e,0):eo|=n,Si===De&&(Si=0)),jn(e)}function wm(e,t){t===0&&(t=pu()),e=Da(e,t),e!==null&&(Qi(e,t),jn(e))}function Rg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wm(e,n)}function _g(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(u(314))}i!==null&&i.delete(t),wm(e,n)}function Ig(e,t){return un(e,t)}var Ps=null,Mi=null,co=!1,Ks=!1,oo=!1,fa=0;function jn(e){e!==Mi&&e.next===null&&(Mi===null?Ps=Mi=e:Mi=Mi.next=e),Ks=!0,co||(co=!0,zg())}function jl(e,t){if(!oo&&Ks){oo=!0;do for(var n=!1,i=Ps;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var o=0;else{var f=i.suspendedLanes,v=i.pingedLanes;o=(1<<31-kt(42|e)+1)-1,o&=r&~(f&~v),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Dm(i,o))}else o=De,o=Xl(i,i===ke?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(o&3)===0||Hi(i,o)||(n=!0,Dm(i,o));i=i.next}while(n);oo=!1}}function Og(){jm()}function jm(){Ks=co=!1;var e=0;fa!==0&&Pg()&&(e=fa);for(var t=qt(),n=null,i=Ps;i!==null;){var r=i.next,o=Sm(i,t);o===0?(i.next=null,n===null?Ps=r:n.next=r,r===null&&(Mi=n)):(n=i,(e!==0||(o&3)!==0)&&(Ks=!0)),i=r}ft!==0&&ft!==5||jl(e),fa!==0&&(fa=0)}function Sm(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-kt(o),v=1<<f,S=r[f];S===-1?((v&n)===0||(v&i)!==0)&&(r[f]=ry(v,t)):S<=t&&(e.expiredLanes|=v),o&=~v}if(t=ke,n=De,n=Xl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Le(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Hi(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Le(i),Ar(n)){case 2:case 8:n=fu;break;case 32:n=Kl;break;case 268435456:n=mu;break;default:n=Kl}return i=Am.bind(null,e),n=un(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Le(i),e.callbackPriority=2,e.callbackNode=null,2}function Am(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ys()&&e.callbackNode!==n)return null;var i=De;return i=Xl(e,e===ke?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(lm(e,i,t),Sm(e,qt()),e.callbackNode!=null&&e.callbackNode===n?Am.bind(null,e):null)}function Dm(e,t){if(Ys())return null;lm(e,t,!0)}function zg(){Fg(function(){(Re&6)!==0?un(du,Og):jm()})}function uo(){if(fa===0){var e=fi;e===0&&(e=Fl,Fl<<=1,(Fl&261888)===0&&(Fl=256)),fa=e}return fa}function Nm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:es(""+e)}function Mm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Lg(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var o=Nm((r[Et]||null).action),f=i.submitter;f&&(t=(t=f[Et]||null)?Nm(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var v=new is("action","action",null,i,r);e.push({event:v,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fa!==0){var S=f?Mm(r,f):new FormData(r);Tc(n,{pending:!0,data:S,method:r.method,action:o},null,S)}}else typeof o=="function"&&(v.preventDefault(),S=f?Mm(r,f):new FormData(r),Tc(n,{pending:!0,data:S,method:r.method,action:o},o,S))},currentTarget:r}]})}}for(var fo=0;fo<Fr.length;fo++){var mo=Fr[fo],Ug=mo.toLowerCase(),qg=mo[0].toUpperCase()+mo.slice(1);dn(Ug,"on"+qg)}dn(ad,"onAnimationEnd"),dn(id,"onAnimationIteration"),dn(ld,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(eg,"onTransitionRun"),dn(tg,"onTransitionStart"),dn(ng,"onTransitionCancel"),dn(sd,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Cm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var f=i.length-1;0<=f;f--){var v=i[f],S=v.instance,T=v.currentTarget;if(v=v.listener,S!==o&&r.isPropagationStopped())break e;o=v,r.currentTarget=T;try{o(r)}catch(B){rs(B)}r.currentTarget=null,o=S}else for(f=0;f<i.length;f++){if(v=i[f],S=v.instance,T=v.currentTarget,v=v.listener,S!==o&&r.isPropagationStopped())break e;o=v,r.currentTarget=T;try{o(r)}catch(B){rs(B)}r.currentTarget=null,o=S}}}}function Se(e,t){var n=t[Dr];n===void 0&&(n=t[Dr]=new Set);var i=e+"__bubble";n.has(i)||(Em(t,e,2,!1),n.add(i))}function po(e,t,n){var i=0;t&&(i|=4),Em(n,e,i,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function ho(e){if(!e[Fs]){e[Fs]=!0,wu.forEach(function(n){n!=="selectionchange"&&(Bg.has(n)||po(n,!1,e),po(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,po("selectionchange",!1,t))}}function Em(e,t,n,i){switch(ip(t)){case 2:var r=mv;break;case 8:r=pv;break;default:r=To}n=r.bind(null,t,n,e),r=void 0,!Or||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function yo(e,t,n,i,r){var o=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var v=i.stateNode.containerInfo;if(v===r)break;if(f===4)for(f=i.return;f!==null;){var S=f.tag;if((S===3||S===4)&&f.stateNode.containerInfo===r)return;f=f.return}for(;v!==null;){if(f=Za(v),f===null)return;if(S=f.tag,S===5||S===6||S===26||S===27){i=o=f;continue e}v=v.parentNode}}i=i.return}Iu(function(){var T=o,B=_r(n),Q=[];e:{var I=rd.get(e);if(I!==void 0){var z=is,J=e;switch(e){case"keypress":if(ns(n)===0)break e;case"keydown":case"keyup":z=_y;break;case"focusin":J="focus",z=qr;break;case"focusout":J="blur",z=qr;break;case"beforeblur":case"afterblur":z=qr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=zy;break;case ad:case id:case ld:z=Sy;break;case sd:z=Uy;break;case"scroll":case"scrollend":z=vy;break;case"wheel":z=By;break;case"copy":case"cut":case"paste":z=Dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=qu;break;case"toggle":case"beforetoggle":z=Hy}var re=(t&4)!==0,Be=!re&&(e==="scroll"||e==="scrollend"),C=re?I!==null?I+"Capture":null:I;re=[];for(var D=T,E;D!==null;){var H=D;if(E=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||E===null||C===null||(H=Pi(D,C),H!=null&&re.push(Al(D,H,E))),Be)break;D=D.return}0<re.length&&(I=new z(I,J,null,n,B),Q.push({event:I,listeners:re}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",I&&n!==Rr&&(J=n.relatedTarget||n.fromElement)&&(Za(J)||J[Ga]))break e;if((z||I)&&(I=B.window===B?B:(I=B.ownerDocument)?I.defaultView||I.parentWindow:window,z?(J=n.relatedTarget||n.toElement,z=T,J=J?Za(J):null,J!==null&&(Be=h(J),re=J.tag,J!==Be||re!==5&&re!==27&&re!==6)&&(J=null)):(z=null,J=T),z!==J)){if(re=Lu,H="onMouseLeave",C="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(re=qu,H="onPointerLeave",C="onPointerEnter",D="pointer"),Be=z==null?I:Yi(z),E=J==null?I:Yi(J),I=new re(H,D+"leave",z,n,B),I.target=Be,I.relatedTarget=E,H=null,Za(B)===T&&(re=new re(C,D+"enter",J,n,B),re.target=E,re.relatedTarget=Be,H=re),Be=H,z&&J)t:{for(re=kg,C=z,D=J,E=0,H=C;H;H=re(H))E++;H=0;for(var ie=D;ie;ie=re(ie))H++;for(;0<E-H;)C=re(C),E--;for(;0<H-E;)D=re(D),H--;for(;E--;){if(C===D||D!==null&&C===D.alternate){re=C;break t}C=re(C),D=re(D)}re=null}else re=null;z!==null&&Tm(Q,I,z,re,!1),J!==null&&Be!==null&&Tm(Q,Be,J,re,!0)}}e:{if(I=T?Yi(T):window,z=I.nodeName&&I.nodeName.toLowerCase(),z==="select"||z==="input"&&I.type==="file")var Ee=Ku;else if(Yu(I))if(Fu)Ee=Jy;else{Ee=Zy;var ee=Gy}else z=I.nodeName,!z||z.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?T&&Tr(T.elementType)&&(Ee=Ku):Ee=Xy;if(Ee&&(Ee=Ee(e,T))){Pu(Q,Ee,n,B);break e}ee&&ee(e,I,T),e==="focusout"&&T&&I.type==="number"&&T.memoizedProps.value!=null&&Er(I,"number",I.value)}switch(ee=T?Yi(T):window,e){case"focusin":(Yu(ee)||ee.contentEditable==="true")&&(ii=ee,Yr=T,Wi=null);break;case"focusout":Wi=Yr=ii=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,td(Q,n,B);break;case"selectionchange":if(Wy)break;case"keydown":case"keyup":td(Q,n,B)}var pe;if(kr)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ai?Qu(e,n)&&(Ne="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ne="onCompositionStart");Ne&&(Bu&&n.locale!=="ko"&&(ai||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ai&&(pe=Ou()):(Xn=B,zr="value"in Xn?Xn.value:Xn.textContent,ai=!0)),ee=Gs(T,Ne),0<ee.length&&(Ne=new Uu(Ne,e,null,n,B),Q.push({event:Ne,listeners:ee}),pe?Ne.data=pe:(pe=Vu(n),pe!==null&&(Ne.data=pe)))),(pe=Vy?Yy(e,n):Py(e,n))&&(Ne=Gs(T,"onBeforeInput"),0<Ne.length&&(ee=new Uu("onBeforeInput","beforeinput",null,n,B),Q.push({event:ee,listeners:Ne}),ee.data=pe)),Lg(Q,e,T,n,B)}Cm(Q,t)})}function Al(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gs(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=Pi(e,n),r!=null&&i.unshift(Al(e,r,o)),r=Pi(e,t),r!=null&&i.push(Al(e,r,o))),e.tag===3)return i;e=e.return}return[]}function kg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Tm(e,t,n,i,r){for(var o=t._reactName,f=[];n!==null&&n!==i;){var v=n,S=v.alternate,T=v.stateNode;if(v=v.tag,S!==null&&S===i)break;v!==5&&v!==26&&v!==27||T===null||(S=T,r?(T=Pi(n,o),T!=null&&f.unshift(Al(n,T,S))):r||(T=Pi(n,o),T!=null&&f.push(Al(n,T,S)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Hg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function Rm(e){return(typeof e=="string"?e:""+e).replace(Hg,`
`).replace(Qg,"")}function _m(e,t){return t=Rm(t),Rm(e)===t}function qe(e,t,n,i,r,o){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ei(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ei(e,""+i);break;case"className":$l(e,"class",i);break;case"tabIndex":$l(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":$l(e,n,i);break;case"style":Ru(e,i,o);break;case"data":if(t!=="object"){$l(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=es(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&qe(e,t,"name",r.name,r,null),qe(e,t,"formEncType",r.formEncType,r,null),qe(e,t,"formMethod",r.formMethod,r,null),qe(e,t,"formTarget",r.formTarget,r,null)):(qe(e,t,"encType",r.encType,r,null),qe(e,t,"method",r.method,r,null),qe(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=es(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Dn);break;case"onScroll":i!=null&&Se("scroll",e);break;case"onScrollEnd":i!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=es(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Jl(e,"popover",i);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Jl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yy.get(n)||n,Jl(e,n,i))}}function go(e,t,n,i,r,o){switch(n){case"style":Ru(e,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ei(e,i):(typeof i=="number"||typeof i=="bigint")&&ei(e,""+i);break;case"onScroll":i!=null&&Se("scroll",e);break;case"onScrollEnd":i!=null&&Se("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ju.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),o=e[Et]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,r),typeof i=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Jl(e,n,i)}}}function jt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var i=!1,r=!1,o;for(o in n)if(n.hasOwnProperty(o)){var f=n[o];if(f!=null)switch(o){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:qe(e,t,o,f,n,null)}}r&&qe(e,t,"srcSet",n.srcSet,n,null),i&&qe(e,t,"src",n.src,n,null);return;case"input":Se("invalid",e);var v=o=f=r=null,S=null,T=null;for(i in n)if(n.hasOwnProperty(i)){var B=n[i];if(B!=null)switch(i){case"name":r=B;break;case"type":f=B;break;case"checked":S=B;break;case"defaultChecked":T=B;break;case"value":o=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(u(137,t));break;default:qe(e,t,i,B,n,null)}}Mu(e,o,v,S,T,f,r,!1);return;case"select":Se("invalid",e),i=f=o=null;for(r in n)if(n.hasOwnProperty(r)&&(v=n[r],v!=null))switch(r){case"value":o=v;break;case"defaultValue":f=v;break;case"multiple":i=v;default:qe(e,t,r,v,n,null)}t=o,n=f,e.multiple=!!i,t!=null?Wa(e,!!i,t,!1):n!=null&&Wa(e,!!i,n,!0);return;case"textarea":Se("invalid",e),o=r=i=null;for(f in n)if(n.hasOwnProperty(f)&&(v=n[f],v!=null))switch(f){case"value":i=v;break;case"defaultValue":r=v;break;case"children":o=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(u(91));break;default:qe(e,t,f,v,n,null)}Eu(e,i,r,o);return;case"option":for(S in n)n.hasOwnProperty(S)&&(i=n[S],i!=null)&&(S==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":qe(e,t,S,i,n,null));return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(i=0;i<Sl.length;i++)Se(Sl[i],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in n)if(n.hasOwnProperty(T)&&(i=n[T],i!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:qe(e,t,T,i,n,null)}return;default:if(Tr(t)){for(B in n)n.hasOwnProperty(B)&&(i=n[B],i!==void 0&&go(e,t,B,i,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(i=n[v],i!=null&&qe(e,t,v,i,n,null))}function Vg(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,f=null,v=null,S=null,T=null,B=null;for(z in n){var Q=n[z];if(n.hasOwnProperty(z)&&Q!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":S=Q;default:i.hasOwnProperty(z)||qe(e,t,z,null,i,Q)}}for(var I in i){var z=i[I];if(Q=n[I],i.hasOwnProperty(I)&&(z!=null||Q!=null))switch(I){case"type":o=z;break;case"name":r=z;break;case"checked":T=z;break;case"defaultChecked":B=z;break;case"value":f=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(u(137,t));break;default:z!==Q&&qe(e,t,I,z,i,Q)}}Cr(e,f,v,S,T,B,o,r);return;case"select":z=f=v=I=null;for(o in n)if(S=n[o],n.hasOwnProperty(o)&&S!=null)switch(o){case"value":break;case"multiple":z=S;default:i.hasOwnProperty(o)||qe(e,t,o,null,i,S)}for(r in i)if(o=i[r],S=n[r],i.hasOwnProperty(r)&&(o!=null||S!=null))switch(r){case"value":I=o;break;case"defaultValue":v=o;break;case"multiple":f=o;default:o!==S&&qe(e,t,r,o,i,S)}t=v,n=f,i=z,I!=null?Wa(e,!!n,I,!1):!!i!=!!n&&(t!=null?Wa(e,!!n,t,!0):Wa(e,!!n,n?[]:"",!1));return;case"textarea":z=I=null;for(v in n)if(r=n[v],n.hasOwnProperty(v)&&r!=null&&!i.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:qe(e,t,v,null,i,r)}for(f in i)if(r=i[f],o=n[f],i.hasOwnProperty(f)&&(r!=null||o!=null))switch(f){case"value":I=r;break;case"defaultValue":z=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(u(91));break;default:r!==o&&qe(e,t,f,r,i,o)}Cu(e,I,z);return;case"option":for(var J in n)I=n[J],n.hasOwnProperty(J)&&I!=null&&!i.hasOwnProperty(J)&&(J==="selected"?e.selected=!1:qe(e,t,J,null,i,I));for(S in i)I=i[S],z=n[S],i.hasOwnProperty(S)&&I!==z&&(I!=null||z!=null)&&(S==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":qe(e,t,S,I,i,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in n)I=n[re],n.hasOwnProperty(re)&&I!=null&&!i.hasOwnProperty(re)&&qe(e,t,re,null,i,I);for(T in i)if(I=i[T],z=n[T],i.hasOwnProperty(T)&&I!==z&&(I!=null||z!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(u(137,t));break;default:qe(e,t,T,I,i,z)}return;default:if(Tr(t)){for(var Be in n)I=n[Be],n.hasOwnProperty(Be)&&I!==void 0&&!i.hasOwnProperty(Be)&&go(e,t,Be,void 0,i,I);for(B in i)I=i[B],z=n[B],!i.hasOwnProperty(B)||I===z||I===void 0&&z===void 0||go(e,t,B,I,i,z);return}}for(var C in n)I=n[C],n.hasOwnProperty(C)&&I!=null&&!i.hasOwnProperty(C)&&qe(e,t,C,null,i,I);for(Q in i)I=i[Q],z=n[Q],!i.hasOwnProperty(Q)||I===z||I==null&&z==null||qe(e,t,Q,I,i,z)}function Im(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Yg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],o=r.transferSize,f=r.initiatorType,v=r.duration;if(o&&v&&Im(f)){for(f=0,v=r.responseEnd,i+=1;i<n.length;i++){var S=n[i],T=S.startTime;if(T>v)break;var B=S.transferSize,Q=S.initiatorType;B&&Im(Q)&&(S=S.responseEnd,f+=B*(S<v?1:(v-T)/(S-T)))}if(--i,t+=8*(o+f)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vo=null,xo=null;function Zs(e){return e.nodeType===9?e:e.ownerDocument}function Om(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wo=null;function Pg(){var e=window.event;return e&&e.type==="popstate"?e===wo?!1:(wo=e,!0):(wo=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,Kg=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(e){return Um.resolve(null).then(e).catch(Gg)}:Lm;function Gg(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function qm(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(r),Ri(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Dl(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Dl(n);for(var o=n.firstChild;o;){var f=o.nextSibling,v=o.nodeName;o[Vi]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=f}}else n==="body"&&Dl(e.ownerDocument.body);n=r}while(n);Ri(t)}function Bm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function jo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jo(n),Nr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Zg(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Vi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function Xg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=an(e.nextSibling),e===null))return null;return e}function km(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=an(e.nextSibling),e===null))return null;return e}function So(e){return e.data==="$?"||e.data==="$~"}function Ao(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Do=null;function Hm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return an(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Qm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Vm(e,t,n){switch(t=Zs(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Dl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nr(e)}var ln=new Map,Ym=new Set;function Xs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hn=Y.d;Y.d={f:$g,r:Wg,D:ev,C:tv,L:nv,m:av,X:lv,S:iv,M:sv};function $g(){var e=Hn.f(),t=Hs();return e||t}function Wg(e){var t=Xa(e);t!==null&&t.tag===5&&t.type==="form"?rf(t):Hn.r(e)}var Ci=typeof document>"u"?null:document;function Pm(e,t,n){var i=Ci;if(i&&typeof t=="string"&&t){var r=Xt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ym.has(r)||(Ym.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),jt(t,"link",e),mt(t),i.head.appendChild(t)))}}function ev(e){Hn.D(e),Pm("dns-prefetch",e,null)}function tv(e,t){Hn.C(e,t),Pm("preconnect",e,t)}function nv(e,t,n){Hn.L(e,t,n);var i=Ci;if(i&&e&&t){var r='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Xt(n.imageSizes)+'"]')):r+='[href="'+Xt(e)+'"]';var o=r;switch(t){case"style":o=Ei(e);break;case"script":o=Ti(e)}ln.has(o)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ln.set(o,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Nl(o))||t==="script"&&i.querySelector(Ml(o))||(t=i.createElement("link"),jt(t,"link",e),mt(t),i.head.appendChild(t)))}}function av(e,t){Hn.m(e,t);var n=Ci;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Xt(i)+'"][href="'+Xt(e)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ti(e)}if(!ln.has(o)&&(e=x({rel:"modulepreload",href:e},t),ln.set(o,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ml(o)))return}i=n.createElement("link"),jt(i,"link",e),mt(i),n.head.appendChild(i)}}}function iv(e,t,n){Hn.S(e,t,n);var i=Ci;if(i&&e){var r=Ja(i).hoistableStyles,o=Ei(e);t=t||"default";var f=r.get(o);if(!f){var v={loading:0,preload:null};if(f=i.querySelector(Nl(o)))v.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ln.get(o))&&No(e,n);var S=f=i.createElement("link");mt(S),jt(S,"link",e),S._p=new Promise(function(T,B){S.onload=T,S.onerror=B}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Js(f,t,i)}f={type:"stylesheet",instance:f,count:1,state:v},r.set(o,f)}}}function lv(e,t){Hn.X(e,t);var n=Ci;if(n&&e){var i=Ja(n).hoistableScripts,r=Ti(e),o=i.get(r);o||(o=n.querySelector(Ml(r)),o||(e=x({src:e,async:!0},t),(t=ln.get(r))&&Mo(e,t),o=n.createElement("script"),mt(o),jt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}function sv(e,t){Hn.M(e,t);var n=Ci;if(n&&e){var i=Ja(n).hoistableScripts,r=Ti(e),o=i.get(r);o||(o=n.querySelector(Ml(r)),o||(e=x({src:e,async:!0,type:"module"},t),(t=ln.get(r))&&Mo(e,t),o=n.createElement("script"),mt(o),jt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}function Km(e,t,n,i){var r=(r=Mt.current)?Xs(r):null;if(!r)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ei(n.href),n=Ja(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ei(n.href);var o=Ja(r).hoistableStyles,f=o.get(e);if(f||(r=r.ownerDocument||r,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=r.querySelector(Nl(e)))&&!o._p&&(f.instance=o,f.state.loading=5),ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ln.set(e,n),o||rv(r,e,n,f.state))),t&&i===null)throw Error(u(528,""));return f}if(t&&i!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ti(n),n=Ja(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Ei(e){return'href="'+Xt(e)+'"'}function Nl(e){return'link[rel="stylesheet"]['+e+"]"}function Fm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function rv(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),jt(t,"link",n),mt(t),e.head.appendChild(t))}function Ti(e){return'[src="'+Xt(e)+'"]'}function Ml(e){return"script[async]"+e}function Gm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(i)return t.instance=i,mt(i),i;var r=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),mt(i),jt(i,"style",r),Js(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ei(n.href);var o=e.querySelector(Nl(r));if(o)return t.state.loading|=4,t.instance=o,mt(o),o;i=Fm(n),(r=ln.get(r))&&No(i,r),o=(e.ownerDocument||e).createElement("link"),mt(o);var f=o;return f._p=new Promise(function(v,S){f.onload=v,f.onerror=S}),jt(o,"link",i),t.state.loading|=4,Js(o,n.precedence,e),t.instance=o;case"script":return o=Ti(n.src),(r=e.querySelector(Ml(o)))?(t.instance=r,mt(r),r):(i=n,(r=ln.get(o))&&(i=x({},n),Mo(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),mt(r),jt(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Js(i,n.precedence,e));return t.instance}function Js(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,f=0;f<i.length;f++){var v=i[f];if(v.dataset.precedence===t)o=v;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function No(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $s=null;function Zm(e,t,n){if($s===null){var i=new Map,r=$s=new Map;r.set(n,i)}else r=$s,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[Vi]||o[vt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var v=i.get(f);v?v.push(o):i.set(f,[o])}}return i}function Xm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function cv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ov(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=Ei(i.href),o=t.querySelector(Nl(r));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ws.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,mt(o);return}o=t.ownerDocument||t,i=Fm(i),(r=ln.get(r))&&No(i,r),o=o.createElement("link"),mt(o);var f=o;f._p=new Promise(function(v,S){f.onload=v,f.onerror=S}),jt(o,"link",i),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ws.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Co=0;function uv(e,t){return e.stylesheets&&e.count===0&&tr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Co===0&&(Co=62500*Yg());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Co?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var er=null;function tr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,er=new Map,t.forEach(dv,e),er=null,Ws.call(e))}function dv(e,t){if(!(t.state.loading&4)){var n=er.get(e);if(n)var i=n.get(null);else{n=new Map,er.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var f=r[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),i=f)}i&&n.set(null,i)}r=t.instance,f=r.getAttribute("data-precedence"),o=n.get(f)||i,o===i&&n.set(null,r),n.set(f,r),this.count++,i=Ws.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Cl={$$typeof:M,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function fv(e,t,n,i,r,o,f,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function $m(e,t,n,i,r,o,f,v,S,T,B,Q){return e=new fv(e,t,n,f,S,T,B,Q,v),t=1,o===!0&&(t|=24),o=Qt(3,null,null,t),e.current=o,o.stateNode=e,t=sc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},uc(o),e}function Wm(e){return e?(e=ri,e):ri}function ep(e,t,n,i,r,o){r=Wm(r),i.context===null?i.context=r:i.pendingContext=r,i=na(t),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=aa(e,i,t),n!==null&&(zt(n,e,t),sl(n,e,t))}function tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eo(e,t){tp(e,t),(e=e.alternate)&&tp(e,t)}function np(e){if(e.tag===13||e.tag===31){var t=Da(e,67108864);t!==null&&zt(t,e,67108864),Eo(e,67108864)}}function ap(e){if(e.tag===13||e.tag===31){var t=Ft();t=Sr(t);var n=Da(e,t);n!==null&&zt(n,e,t),Eo(e,t)}}var nr=!0;function mv(e,t,n,i){var r=q.T;q.T=null;var o=Y.p;try{Y.p=2,To(e,t,n,i)}finally{Y.p=o,q.T=r}}function pv(e,t,n,i){var r=q.T;q.T=null;var o=Y.p;try{Y.p=8,To(e,t,n,i)}finally{Y.p=o,q.T=r}}function To(e,t,n,i){if(nr){var r=Ro(i);if(r===null)yo(e,t,i,ar,n),lp(e,i);else if(yv(r,e,t,n,i))i.stopPropagation();else if(lp(e,i),t&4&&-1<hv.indexOf(e)){for(;r!==null;){var o=Xa(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=ba(o.pendingLanes);if(f!==0){var v=o;for(v.pendingLanes|=2,v.entangledLanes|=2;f;){var S=1<<31-kt(f);v.entanglements[1]|=S,f&=~S}jn(o),(Re&6)===0&&(Bs=qt()+500,jl(0))}}break;case 31:case 13:v=Da(o,2),v!==null&&zt(v,o,2),Hs(),Eo(o,2)}if(o=Ro(i),o===null&&yo(e,t,i,ar,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else yo(e,t,i,null,n)}}function Ro(e){return e=_r(e),_o(e)}var ar=null;function _o(e){if(ar=null,e=Za(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=w(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ar=e,null}function ip(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ey()){case du:return 2;case fu:return 8;case Kl:case ty:return 32;case mu:return 268435456;default:return 32}default:return 32}}var Io=!1,pa=null,ha=null,ya=null,El=new Map,Tl=new Map,ga=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lp(e,t){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":El.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function Rl(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Xa(t),t!==null&&np(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function yv(e,t,n,i,r){switch(t){case"focusin":return pa=Rl(pa,e,t,n,i,r),!0;case"dragenter":return ha=Rl(ha,e,t,n,i,r),!0;case"mouseover":return ya=Rl(ya,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return El.set(o,Rl(El.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Tl.set(o,Rl(Tl.get(o)||null,e,t,n,i,r)),!0}return!1}function sp(e){var t=Za(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=w(n),t!==null){e.blockedOn=t,xu(e.priority,function(){ap(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,xu(e.priority,function(){ap(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ir(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ro(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Rr=i,n.target.dispatchEvent(i),Rr=null}else return t=Xa(n),t!==null&&np(t),e.blockedOn=n,!1;t.shift()}return!0}function rp(e,t,n){ir(e)&&n.delete(t)}function gv(){Io=!1,pa!==null&&ir(pa)&&(pa=null),ha!==null&&ir(ha)&&(ha=null),ya!==null&&ir(ya)&&(ya=null),El.forEach(rp),Tl.forEach(rp)}function lr(e,t){e.blockedOn===t&&(e.blockedOn=null,Io||(Io=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,gv)))}var sr=null;function cp(e){sr!==e&&(sr=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){sr===e&&(sr=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(_o(i||n)===null)continue;break}var o=Xa(n);o!==null&&(e.splice(t,3),t-=3,Tc(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Ri(e){function t(S){return lr(S,e)}pa!==null&&lr(pa,e),ha!==null&&lr(ha,e),ya!==null&&lr(ya,e),El.forEach(t),Tl.forEach(t);for(var n=0;n<ga.length;n++){var i=ga[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)sp(n),n.blockedOn===null&&ga.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],f=r[Et]||null;if(typeof o=="function")f||cp(n);else if(f){var v=null;if(o&&o.hasAttribute("formAction")){if(r=o,f=o[Et]||null)v=f.formAction;else if(_o(r)!==null)continue}else v=f.action;typeof v=="function"?n[i+1]=v:(n.splice(i,3),i-=3),cp(n)}}}function op(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(f){return r=f})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Oo(e){this._internalRoot=e}rr.prototype.render=Oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,i=Ft();ep(n,i,e,t,null,null)},rr.prototype.unmount=Oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ep(e.current,2,null,e,null,null),Hs(),t[Ga]=null}};function rr(e){this._internalRoot=e}rr.prototype.unstable_scheduleHydration=function(e){if(e){var t=vu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ga.length&&t!==0&&t<ga[n].priority;n++);ga.splice(n,0,e),n===0&&sp(e)}};var up=l.version;if(up!=="19.2.3")throw Error(u(527,up,"19.2.3"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var vv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cr.isDisabled&&cr.supportsFiber)try{ki=cr.inject(vv),Bt=cr}catch{}}return Il.createRoot=function(e,t){if(!d(e))throw Error(u(299));var n=!1,i="",r=gf,o=vf,f=xf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=$m(e,1,!1,null,null,n,i,null,r,o,f,op),e[Ga]=t.current,ho(e),new Oo(t)},Il.hydrateRoot=function(e,t,n){if(!d(e))throw Error(u(299));var i=!1,r="",o=gf,f=vf,v=xf,S=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),t=$m(e,1,!0,t,n??null,i,r,S,o,f,v,op),t.context=Wm(null),n=t.current,i=Ft(),i=Sr(i),r=na(i),r.callback=null,aa(n,r,i),n=i,t.current.lanes=n,Qi(t,n),jn(t),e[Ga]=t.current,ho(e),new rr(t)},Il.version="19.2.3",Il}var gp;function Bv(){if(gp)return Lo.exports;gp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),Lo.exports=qv(),Lo.exports}var kv=Bv();function Pe(a,l,c="en-US"){const u=a/100;return new Intl.NumberFormat(c,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2}).format(u)}function zi(a){const l=parseFloat(a.replace(/[^0-9.-]/g,""));return isNaN(l)?0:Math.round(l*100)}function Zp(a,l="en-US"){return new Date(a).toLocaleDateString(l,{month:"short",day:"numeric",year:"numeric"})}function Zw(a){const l=new Date(a),c=String(l.getDate()).padStart(2,"0"),u=String(l.getMonth()+1).padStart(2,"0"),d=l.getFullYear();return`${c}/${u}/${d}`}function Hv(a,l){const c=new Date(a),d=new Date().getTime()-c.getTime(),h=Math.floor(d/(1e3*60*60*24));return l?h===0?l("time.today"):h===1?l("time.yesterday"):h<7?l("time.daysAgo",{days:h}):h<30?l("time.weeksAgo",{weeks:Math.floor(h/7)}):h<365?l("time.monthsAgo",{months:Math.floor(h/30)}):l("time.yearsAgo",{years:Math.floor(h/365)}):h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:h<30?`${Math.floor(h/7)} weeks ago`:h<365?`${Math.floor(h/30)} months ago`:`${Math.floor(h/365)} years ago`}function Qv(a){const l=new Date(a),c=new Date;c.setHours(0,0,0,0),l.setHours(0,0,0,0);const u=l.getTime()-c.getTime();return Math.ceil(u/(1e3*60*60*24))}function Ko(a){const l=new Date;switch(a){case"this-month":{const c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"last-month":{const c=new Date(l.getFullYear(),l.getMonth()-1,1),u=new Date(l.getFullYear(),l.getMonth(),0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"this-year":{const c=new Date(l.getFullYear(),0,1),u=new Date(l.getFullYear(),11,31);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}default:return{dateFrom:"2000-01-01",dateTo:"2100-12-31"}}}function se(...a){return a.filter(Boolean).join(" ")}function Qn(){return new Date().toISOString().split("T")[0]}const Vv={save:"Save",saving:"Saving...",cancel:"Cancel",delete:"Delete",archive:"Archive",add:"Add",edit:"Edit",loading:"Loading...",search:"Search...",close:"Close",confirm:"Confirm",noClient:"No client",noProject:"No project",all:"All",markPaid:"Mark Paid",duplicate:"Duplicate",undo:"Undo",previous:"Previous",next:"Next",uncategorized:"Uncategorized",noResults:"No results found"},Yv={transactionDuplicated:"Transaction created",transactionUndone:"Transaction undone"},Pv={overview:"Overview",projects:"Projects",clients:"Clients",transactions:"Transactions",documents:"Documents",retainers:"Retainers",moneyAnswers:"Answers",expenses:"Expenses",reports:"Reports",settings:"Settings",download:"Download",new:"New",collapse:"Collapse sidebar",expand:"Expand sidebar",sections:{work:"Work",money:"Money",system:"System"},newMenu:{document:"New Document",transaction:"New Transaction",client:"New Client",expense:"New Expense"}},Kv={income:"Income",expense:"Expense",project:"Project",client:"Client",document:"Document"},Fv={title:"Transactions",empty:"No transactions found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first transaction to get started",addTransaction:"Add Transaction",searchPlaceholder:"Search transactions...",confirmDelete:"Are you sure you want to delete this transaction?",type:{income:"Income",expense:"Expense",receivable:"Receivable"},status:{paid:"Paid",unpaid:"Unpaid",overdue:"{days}d overdue",dueIn:"Due in {days}d",dueToday:"Due today"},columns:{date:"Date",type:"Type",client:"Client",project:"Project",category:"Category",amount:"Amount",status:"Status"},hasDocument:"Has linked document"},Gv={title:"Overview",kpi:{paidIncome:"Paid Income",unpaidReceivables:"Unpaid Receivables",expenses:"Expenses",net:"Net (Paid - Expenses)"},needsAttention:"Needs Attention",noAttention:"No overdue or upcoming receivables",recentActivity:"Recent Activity",noRecent:"No recent transactions"},Zv={title:"Projects",empty:"No projects found",emptySearch:"Try adjusting your search",emptyHint:"Create your first project to get started",addProject:"Add Project",searchPlaceholder:"Search projects...",allFields:"All fields",notFound:"Project not found",notFoundHint:"This project may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this project?",columns:{project:"Project",client:"Client",field:"Field",paid:"Paid",unpaid:"Unpaid",expenses:"Expenses",net:"Net",lastActivity:"Last Activity"},tabs:{summary:"Summary",transactions:"Transactions"},detail:{projectDetails:"Project Details",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this project."},fields:{design:"Design",development:"Development",consulting:"Consulting",marketing:"Marketing",legal:"Legal",maintenance:"Maintenance",other:"Other"}},Xv={title:"Clients",empty:"No clients found",emptySearch:"Try adjusting your search",emptyHint:"Add your first client to get started",addClient:"Add Client",searchPlaceholder:"Search clients...",notFound:"Client not found",notFoundHint:"This client may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this client?",columns:{client:"Client",activeProjects:"Active Projects",paidIncome:"Paid Income",unpaid:"Unpaid",lastPayment:"Last Payment",lastActivity:"Last Activity"},tabs:{summary:"Summary",projects:"Projects",receivables:"Receivables",transactions:"Transactions"},detail:{clientDetails:"Client Details",email:"Email",phone:"Phone",noProjects:"No projects",noProjectsHint:"Add your first project for this client.",noReceivables:"No receivables",noReceivablesHint:"All payments have been received.",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this client."},receivables:{dueDate:"Due Date",daysOverdue:"Days Overdue",action:"Action"}},Jv={title:"Reports",exportCsv:"Export CSV",presets:{summary:"Summary",thisMonth:"This Month",thisYear:"This Year",byProject:"By Project",byClient:"By Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Aging"},period:{month:"Month",quarter:"Quarter",year:"Year",custom:"Custom"},currencyMode:{usd:"USD",ils:"ILS",both:"Both"},drillDown:{paidIncome:"View paid income transactions",unpaidIncome:"View unpaid receivables",expenses:"View expenses"},search:{project:"Search projects...",client:"Search clients..."},selectCurrencyForAmounts:"Select a specific currency to see amounts",sections:{financialSummary:"Financial Summary",incomeByProject:"Income by Project",incomeByClient:"Income by Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Receivables Aging"},aging:{current:"Current (not due)",days1to30:"1-30 days overdue",days31to60:"31-60 days overdue",days60plus:"60+ days overdue"},noExpenses:"No expenses in this period"},$v={title:"Download",recommendedForYou:"Recommended for you",loading:"Loading...",comingSoon:"Coming Soon",version:"Version",size:"Size",requires:"Requires",sha256:"SHA-256",copy:"Copy",checksumCopied:"Checksum copied",howToInstall:"How to install",releaseNotes:"Release notes",allVersions:"All versions",mac:{title:"macOS",downloadDmg:"Download DMG",step1:"Download the DMG",step2:'Drag "" to Applications',step3:"Open and approve if prompted"},windows:{title:"Windows",downloadMsi:"Download MSI",step1:"Download the MSI installer",step2:"Run the installer",step3:"Follow the installation wizard",altExe:"Alternative: Download EXE installer"}},Wv={title:"Settings",language:{title:"Language",description:"Choose your preferred language"},theme:{title:"Theme",description:"Choose your preferred appearance",light:"Light",dark:"Dark",system:"System"},currency:{title:"Currency",enabled:"Enabled Currencies",enabledDesc:"Select which currencies to track",default:"Default Currency",defaultDesc:"Default selection in filters"},data:{title:"Data Management",export:"Export Data",exportDesc:"Download a backup of all your data",exportBtn:"Export JSON",exporting:"Exporting...",exported:"Exported successfully!",exportFailed:"Export failed",import:"Import Data",importDesc:"Restore from a backup file (replaces all data)",importBtn:"Import JSON",importing:"Importing...",imported:"Imported successfully! Refreshing...",importFailed:"Import failed: {error}",invalidFile:"Invalid backup file format",deleteAll:"Delete All Data",deleteAllDesc:"Permanently delete all local data",deleteAllBtn:"Delete All Data",reset:"Reset Data",resetDesc:"Reset to sample data for testing",resetBtn:"Reset Data",resetConfirm:"Are you sure you want to reset all data? This will replace your data with sample data.",deleteModal:{title:"Delete All Data",warning:"This will permanently delete all your local data including clients, projects, and transactions. This action cannot be undone.",stepA:{title:"Step 1: Export Backup",desc:"You must export a backup of your data before deletion.",btn:"Export Backup (CSV)",exporting:"Exporting...",done:"Backup exported!",error:"Export failed"},stepB:{title:"Step 2: Confirm Deletion",checkbox:"I have saved my backup files",btn:"Delete Permanently",deleting:"Deleting...",error:"Deletion failed"},success:"All data deleted successfully"}},about:{title:"About",name:"Mutaba3a - Mini CRM",description:"A local-first financial tracking tool for freelancers and small businesses. Your data is stored locally in your browser using IndexedDB."},updates:{title:"Updates",checking:"Checking for updates...",upToDate:"You're up to date",currentVersion:"Current version",latestVersion:"Latest version",updateAvailable:"A new version is available",updateNow:"Update Now",checkFailed:"Unable to check for updates"},desktopApp:{title:"Desktop App",download:"Download Desktop App",downloadDesc:"Get the native app for better performance",downloadBtn:"Download",downloadMac:"Download for macOS",downloadWindows:"Download for Windows"}},e0={message:"Get the native Mac app for a better experience",cta:"Download",dismiss:"Dismiss"},t0={available:"Version {{version}} is available",downloading:"Downloading update... {{progress}}%",ready:"Update ready",restart:"Restart to Update",download:"Download",dismiss:"Later",error:"Update failed"},n0={title:"Expenses",profileExpenses:"{name} Expenses",addExpense:"Add Expense",addRecurring:"Add Recurring",empty:"No expenses found",emptyHint:"Add your first expense to get started",emptyProfiles:"No business profiles",emptyProfilesHint:"Create a business profile to track expenses",emptyExpenses:"No expenses",emptyExpensesSearch:"Try adjusting your search or filters",emptyExpensesHint:"Add your first expense to get started",searchPlaceholder:"Search expenses...",confirmDelete:"Are you sure you want to delete this expense?",confirmDeleteRule:"Are you sure you want to delete this recurring rule?",year:"Year",month:"Month",allMonths:"All Months",allCategories:"All Categories",totalExpenses:"Total Expenses",totalUSD:"Total (USD)",totalILS:"Total (ILS)",viewReceipts:"View Receipts",manageReceipts:"Manage Receipts",allProfilesOverview:"All Profiles Overview",recurringRules:"Recurring Rules",fromRecurring:"From recurring rule",monthly:"monthly",yearly:"yearly",pause:"Pause",resume:"Resume",paused:"Paused",profileNotFound:"Profile not found",profileNotFoundHint:"This profile may have been deleted or doesn't exist",untitled:"Untitled",unknownProfile:"Unknown Profile",overview:{title:"Expenses Overview",allProfiles:"All Profiles",profileBreakdown:"Expense by Profile",totalExpenses:"Total Expenses",monthlyBreakdown:"Monthly Breakdown",byProfile:"By Profile",noProfiles:"No business profiles found",profile:"Profile",total:"Total",percentage:"Share"},forecast:{title:"Expense Forecast",minimumNeeded:"Minimum Needed",untilEndOfYear:"Until end of {year}",monthsRemaining:"Months Remaining",yearTotal:"Year Total",activeRules:"Active Rules",monthlyForecast:"Monthly Forecast",month:"Month",projected:"Projected",actual:"Actual",delta:"Delta",current:"Current",total:"Total",byProfile:"By Profile",empty:"No forecast data",emptyHint:"Add recurring expenses to see forecast",activeRecurringRules:"Active Recurring Rules"},receipts:{title:"Receipts",upload:"Upload Receipt",uploading:"Uploading...",total:"Total",linked:"Linked",unlinked:"Unlinked",allTab:"All",inboxTab:"Inbox",suggestionsTab:"Suggestions",linkToExpense:"Link to Expense",link:"Link",unlink:"Unlink",unlinkFromExpense:"Unlink",exportZip:"Export ZIP",exporting:"Exporting...",download:"Download",empty:"No receipts",emptyHint:"Upload your first receipt",noReceipts:"No receipts",noReceiptsHint:"Upload your first receipt",fileTooLarge:"File too large (max {maxSize})",invalidFileType:"Invalid file type. Please upload an image or PDF",uploadFailed:"Failed to upload receipt",selectExpense:"Select Expense to Link",noExpensesToLink:"No expenses to link. Create an expense first.",confirmUnlink:"Are you sure you want to unlink this receipt?",confirmDelete:"Are you sure you want to delete this receipt?"},recurring:{title:"Recurring Expenses",addRule:"Add Recurring",frequency:"Frequency",monthly:"Monthly",yearly:"Yearly",startDate:"Start Date",endMode:"End Mode",endOfYear:"End of Year",untilDate:"Until Date",noEnd:"No End",endDate:"End Date",pause:"Pause",resume:"Resume",paused:"Paused",active:"Active"},columns:{date:"Date",title:"Title",vendor:"Vendor",category:"Category",amount:"Amount",receipts:"Receipts"},categories:{title:"Categories",addCategory:"Add Category",name:"Name",color:"Color",setup:"Set Up Categories",setupTitle:"Set Up Expense Categories",selectPreset:"Choose a category preset that best matches your business type:",seedCategories:"Create Categories",presets:{general:"General Business",startup:"Tech Startup",lawFirm:"Law Firm",freelancer:"Freelancer"},presetDescriptions:{general:"Office rent, utilities, software, marketing, travel, and more",startup:"Cloud infrastructure, SaaS, AI services, development tools, coworking",lawFirm:"Legal research, bar fees, court filing, expert witnesses, case management",freelancer:"Software tools, cloud storage, marketing, professional development"}}},a0={transaction:{new:"New Transaction",edit:"Edit Transaction",typeIncome:"Income",typeIncomeDesc:"Paid",typeReceivable:"Receivable",typeReceivableDesc:"Unpaid",typeExpense:"Expense",typeExpenseDesc:"Cost",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",dueDate:"Due Date",client:"Client",clientPlaceholder:"Select client...",project:"Project",projectPlaceholder:"Select project...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes..."},client:{new:"New Client",edit:"Edit Client",name:"Name",namePlaceholder:"Client name...",email:"Email",emailPlaceholder:"client@example.com",phone:"Phone",phonePlaceholder:"+1-555-0100",notes:"Notes",notesPlaceholder:"Additional notes about this client..."},project:{new:"New Project",edit:"Edit Project",name:"Name",namePlaceholder:"Project name...",client:"Client",clientPlaceholder:"Select client...",field:"Field",fieldPlaceholder:"Select field...",notes:"Notes",notesPlaceholder:"Additional notes about this project..."},expense:{new:"New Expense",edit:"Edit Expense",newRecurring:"New Recurring Expense",editRecurring:"Edit Recurring Expense",typeOneTime:"One-time",typeOneTimeDesc:"Single expense",typeRecurring:"Recurring",typeRecurringDesc:"Repeats monthly/yearly",profile:"Profile",profilePlaceholder:"Select profile...",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",vendor:"Vendor",vendorPlaceholder:"Business or vendor name...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes...",frequency:"Frequency",startDate:"Start Date",endMode:"End Mode",endDate:"End Date",receipts:"Receipts",addReceipt:"Add Receipt",linkReceipt:"Link from Inbox"},retainer:{new:"New Retainer",edit:"Edit Retainer",client:"Client",clientPlaceholder:"Select client...",title:"Title",titlePlaceholder:"e.g. Monthly retainer",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date (optional)",project:"Project (optional)",projectPlaceholder:"Select project...",status:"Status",notes:"Notes",notesPlaceholder:"Additional notes...",schedulePreview:"Schedule Preview",enterDetailsForPreview:"Enter amount and start date to see schedule",andMore:"and more..."}},i0={thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",allTime:"All Time",custom:"Custom",all:"All",type:{all:"All",income:"Income",receivable:"Receivable",expense:"Expense"},status:{all:"All",paid:"Paid",unpaid:"Unpaid",overdue:"Overdue"}},l0={required:"This field is required",amountRequired:"Amount is required",dateRequired:"Date is required",nameRequired:"Name is required"},s0={today:"Today",yesterday:"Yesterday",daysAgo:"{days} days ago",weeksAgo:"{weeks} weeks ago",monthsAgo:"{months} months ago",yearsAgo:"{years} years ago",daysOverdue:"{days} days overdue",dueInDays:"Due in {days} days"},r0={live:"Live",cached:"Cached",none:"Unavailable",bannerTitle:"Exchange Rate",showBanner:"Show exchange rate",refresh:"Refresh rate",minimize:"Minimize",drag:"Drag to move"},c0={title:"Welcome to Mutaba3a",subtitle:"Let's set up your business profile",infoTitle:"What is a Business Profile?",bullet1:"Your company name, logo, and branding",bullet2:"Contact information for invoices",bullet3:"Tax ID and registration details",multipleProfiles:"You can create multiple profiles if you manage different businesses.",setUpNow:"Set Up Now",skipForNow:"Skip for now",skipNote:"Skip creates a default profile you can customize later in Settings."},o0={noProfile:"No Profile",setUpBusiness:"Set up business",addProfile:"Add Business Profile",manageProfiles:"Manage Profiles",switchTo:"Switch to {name}",current:"Current"},u0={title:"Business Profile Required",description:"To create invoices and documents, you need to set up a business profile first.",createProfile:"Create Business Profile"},d0={createNew:"Create new"},f0={suggestions:{title:"Match suggestions",link:"Link",noMatches:"No matching expenses found",createAndLink:"Create Expense & Link",highConfidence:"High confidence matches",mediumConfidence:"Likely matches",lowConfidence:"Possible matches",allLinked:"All receipts linked",allLinkedHint:"Great job! All your receipts have been linked to expenses."}},m0={title:"Bulk Upload Receipts",button:"Bulk Upload",dropzoneTitle:"Drop files here or click to browse",dropzoneHint:"Up to {maxFiles} files, max {maxSize} each",autoDetectMonth:"Auto-detect month from file date",batchMonth:"Batch month override",selectMonth:"Select month...",total:"Total",success:"Uploaded",duplicates:"Skipped (duplicates)",errors:"Failed",upload:"Upload",uploading:"Uploading",retryFailed:"Retry failed",statusPending:"Pending",duplicate:"Duplicate file"},p0={title:"Monthly Close",checklist:"Close Checklist",monthClosed:"Month Closed",closedAt:"Closed on {date}",readyToClose:"Ready to Close",notReady:"Not Ready to Close",allTasksComplete:"All required tasks have been completed.",completeTasks:"Complete the checklist items below before closing.",receiptsLinked:"All receipts linked to expenses",allLinked:"All receipts linked",unlinkedCount:"{count} unlinked receipts",viewReceipts:"View Receipts",allCategorized:"All expenses categorized",allCategorizedStatus:"All expenses have categories",uncategorizedCount:"{count} uncategorized expenses",viewExpenses:"View Expenses",recurringConfirmed:"Recurring expenses confirmed",recurringConfirmedHint:"Verify all recurring expenses are correct for this month",zipExported:"Receipts exported (optional)",zipExportedHint:"Export a ZIP backup of all receipts",exportZip:"Export ZIP",closeMonth:"Close Month",notesLabel:"Notes (optional)",notesPlaceholder:"Add any notes about this month's close...",closeMonthButton:"Close Month",completeChecklistFirst:"Complete all required checklist items before closing the month.",confirmClose:"Are you sure you want to close this month? This will mark it as finalized.",confirmReopen:"Are you sure you want to reopen this month? This will allow editing again.",reopen:"Reopen Month",warning:{title:"Closed Month",text:"{month} has been closed. Editing expenses in closed months is not recommended.",reopenButton:"Reopen to Edit"}},h0={title:"Retainers",new:"New Retainer",addRetainer:"Add Retainer",matchPayment:"Match Payment",empty:"No retainers found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first retainer to track recurring income",searchPlaceholder:"Search retainers...",selectToInspect:"Select a retainer to view details",confirmArchive:"Are you sure you want to archive this retainer?",confirmPause:"Are you sure you want to pause this retainer? Future payments will be canceled.",confirmEnd:"Are you sure you want to end this retainer? This cannot be undone.",activate:"Activate",pause:"Pause",resume:"Resume",end:"End",summary:"Summary",activeCount:"Active Retainers",monthlyExpected:"Monthly Expected",totalDue:"Total Due",totalOverdue:"Total Overdue",filters:{view:"View",all:"All",due:"Due Now",active:"Active",ending:"Ending Soon",status:"Status",currency:"Currency",client:"Client"},status:{draft:"Draft",active:"Active",paused:"Paused",ended:"Ended"},cadence:{monthly:"Monthly",quarterly:"Quarterly"},state:{upcoming:"Upcoming",due:"Due",received:"Received",partial:"Partial",missed:"Missed",canceled:"Canceled"},columns:{status:"Status",title:"Title",client:"Client",amount:"Amount",cadence:"Cadence",nextDue:"Next Due",dueNow:"Due Now"},inspector:{overview:"Overview",schedule:"Schedule",transactions:"Transactions",notes:"Notes",client:"Client",project:"Project",amount:"Amount",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date",status:"Status"}},y0={selectTransaction:"Select Transaction",selectProjectedIncome:"Select Payment Period",selectTransactionDesc:"Choose an income transaction to match with a retainer payment",selectProjectedDesc:"Choose the payment period to link this transaction to",searchTransactions:"Search transactions...",searchProjected:"Search periods...",createNewTransaction:"Create New Transaction",noMatchingTransactions:"No matching transactions found",noUnlinkedTransactions:"No unlinked income transactions",noMatchingProjected:"No matching periods found",noDueItems:"No due payment periods",untitled:"Untitled transaction",untitledRetainer:"Untitled retainer",suggestions:"Suggestions",otherDueItems:"Other Due Periods",confidence:{high:"High",medium:"Medium",low:"Low"}},g0={hero:{headline:"Your finances belong on your device, not in the cloud",subheadline:"Track income, expenses, and receivables locally. No account. No subscription. Free for personal use.",trust:"Free for personal use. No account required.",ctaPrimary:"Open Web App",ctaSecondary:"Download Desktop App"},problem:{headline:"Freelancers deserve better than spreadsheets",pain1:"You track income in one spreadsheet, expenses in another",pain2:"You forget who owes you money until it's too late",pain3:"You can't work when the WiFi goes out",pain4:"Your financial data lives on servers you don't control"},howItWorks:{headline:"Three steps to financial clarity",step1Title:"Track Everything in One Place",step1Desc:"Income, expenses, and receivables. Clients, projects, and categories. All linked, all local.",step2Title:"Work Offline, Sync Never",step2Desc:"Your data stays on your device. No cloud sync by default. Export anytime.",step3Title:"Know What You're Owed",step3Desc:"See overdue payments at a glance. Generate invoices. Track until paid.",cta:"Try it now"},features:{headline:"Everything you need, nothing you don't",ledger:{title:"Transaction Ledger",desc:"Track income, expenses, and receivables in a unified ledger"},clients:{title:"Client & Project Management",desc:"Organize work by client and project, see totals and history"},documents:{title:"Document Generation",desc:"Create invoices, receipts, and credit notes (bilingual AR/EN)"},retainers:{title:"Retainer Management",desc:"Track recurring income contracts and payment schedules"},expenses:{title:"Expense Tracking",desc:"Profile-scoped expenses with receipt management and recurring rules"},answers:{title:"Money Answers Dashboard",desc:"Unified financial cockpit with cash flow timeline"},reports:{title:"Reports & Export",desc:"Built-in report presets with CSV export"},currency:{title:"Multi-Currency",desc:"Native USD and ILS support with optional FX conversion"}},privacy:{headline:"Your data. Your device. Your rules.",point1:"No account required to use",point2:"No tracking or analytics",point3:"No cloud sync by default",point4:"Data stored locally (IndexedDB/SQLite)",point5:"Export everything as JSON anytime",point6:"Source-available on GitHub"},platforms:{headline:"Native apps for Mac and Windows",pwa:"Or use in your browser at any time",downloadMac:"Download for macOS",downloadWindows:"Download for Windows"},pricing:{headline:"Free for personal use",personal:"Free for personal and educational use",commercial:"Commercial license required for business use",support:"Support development",supportCta:"Support on Buy Me a Coffee"},faq:{headline:"Frequently Asked Questions",q1:"Is Mutaba3a really free?",a1:"Free for personal and educational use. A commercial license is required for business use.",q2:"Where is my data stored?",a2:"Locally on your device. The web version uses IndexedDB. The desktop app uses SQLite.",q3:"What if I need multiple devices?",a3:"Export JSON and import on another device. Cloud sync with end-to-end encryption is on the roadmap.",q4:"Does it work offline?",a4:"Yes. After the initial load, the web app works offline. The desktop app always works offline.",q5:"What currencies are supported?",a5:"USD and ILS are built-in. Track them separately or unified with FX conversion.",q6:"Can I create invoices?",a6:"Yes. Invoices, receipts, and credit notesall bilingual (Arabic and English).",q7:"Is there a mobile app?",a7:"The PWA works on mobile browsers. Native mobile apps are on the roadmap.",q8:"How do I back up my data?",a8:"Export to JSON from Settings. Import on any device instantly.",q9:"What's the difference between web and desktop?",a9:"Same features. Desktop has native performance and automatic updates.",q10:"How can I support the project?",a10:"Buy Me a Coffee or purchase a commercial license when available."},finalCta:{headline:"Start tracking your finances today",trust:"No account. No tracking. Free for personal use."},footer:{copyright:"Mutaba3a",github:"GitHub",privacy:"Privacy"},langToggle:{en:"EN",ar:"AR"}},v0={title:"Answers",includeReceivables:"Include receivables",includeProjections:"Include projections",cashFlowTimeline:"Cash Flow Timeline",guidanceTitle:"Action Items",noData:"No data for this period",mode:{month:"Month",year:"Year"},yearMode:{totalInflow:"Total Inflow",totalOutflow:"Total Outflow",netIncome:"Net Income",avgAwaiting:"Avg. Awaiting",retainerStability:"Retainer Stability",monthlyTrend:"Monthly Trend",insights:"Year Insights",bestMonth:"Best Month",worstMonth:"Worst Month",retainerHealth:"Retainer Health",paymentsReceived:"{{received}} of {{total}} payments received",noDataForYear:"No data for this year",yearTrend:"Year Trend",trendUp:"Improving",trendDown:"Declining",vsFirstHalf:"vs. first half",onTimePayments:"on-time payments"},kpi:{willMakeIt:"End of Month Forecast",endOfMonthForecast:"Cash + expected income - expected costs",cashOnHand:"Cash on Hand",currentBalance:"Actual balance to date",comingVsLeaking:"Coming vs Leaking",netForecast:"Net forecast"},legend:{inflow:"Inflow",outflow:"Outflow",runningBalance:"Running balance"},unifiedNote:"All amounts shown in ILS (unified)",dayDetail:{inflow:"Inflow",outflow:"Outflow",net:"Net",noEvents:"No events on this day",inflows:"Inflows",outflows:"Outflows"},source:{actualIncome:"Paid income",actualCost:"Expense",receivable:"Receivable",profileExpense:"Expense",projectedExpense:"Projected expense",retainer:"Retainer"},state:{paid:"Paid",unpaid:"Unpaid",overdue:"Overdue",upcoming:"Upcoming",missed:"Missed",cancelled:"Cancelled"},guidance:{allGood:"Looking good! No action items right now.",impact:"Impact",category:{collect:"Collect",reduce:"Reduce",delay:"Delay",hygiene:"Hygiene"}}},x0={common:Vv,toast:Yv,nav:Pv,addMenu:Kv,transactions:Fv,overview:Gv,projects:Zv,clients:Xv,reports:Jv,download:$v,settings:Wv,downloadBanner:e0,updateBanner:t0,expenses:n0,drawer:a0,filters:i0,validation:l0,time:s0,fx:r0,welcome:c0,profileSwitcher:o0,documentGuard:u0,vendor:d0,receipts:f0,bulkUpload:m0,monthClose:p0,retainers:h0,retainerMatching:y0,landing:g0,moneyAnswers:v0},b0={save:"",saving:" ...",cancel:"",delete:"",archive:"",add:"",edit:"",loading:" ...",search:"...",close:"",confirm:"",noClient:" ",noProject:" ",all:"",markPaid:" ",duplicate:"",undo:"",previous:"",next:"",uncategorized:" ",noResults:"  "},w0={transactionDuplicated:"  ",transactionUndone:"   "},j0={overview:" ",projects:"",clients:"",transactions:"",documents:"",retainers:" ",moneyAnswers:"",expenses:"",reports:"",settings:"",download:"",new:"",collapse:"  ",expand:"  ",sections:{work:"",money:"",system:""},newMenu:{document:" ",transaction:" ",client:" ",expense:" "}},S0={income:"",expense:"",project:"",client:"",document:""},A0={title:"",empty:"  ",emptySearch:"    ",emptyHint:"   ",addTransaction:" ",searchPlaceholder:"  ...",confirmDelete:"      ",type:{income:"",expense:"",receivable:""},status:{paid:"",unpaid:" ",overdue:" {days} ",dueIn:"  {days} ",dueToday:" "},columns:{date:"",type:"",client:"",project:"",category:"",amount:"",status:""},hasDocument:" "},D0={title:" ",kpi:{paidIncome:" ",unpaidReceivables:"  ",expenses:"",net:" ( - )"},needsAttention:" ",noAttention:"     ",recentActivity:" ",noRecent:"   "},N0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addProject:" ",searchPlaceholder:"  ...",allFields:" ",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{project:"",client:"",field:"",paid:"",unpaid:" ",expenses:"",net:"",lastActivity:" "},tabs:{summary:"",transactions:""},detail:{projectDetails:" ",noTransactions:"  ",noTransactionsHint:"    ."},fields:{design:"",development:"",consulting:"",marketing:"",legal:"",maintenance:"",other:""}},M0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addClient:" ",searchPlaceholder:"  ...",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{client:"",activeProjects:" ",paidIncome:" ",unpaid:" ",lastPayment:" ",lastActivity:" "},tabs:{summary:"",projects:"",receivables:"",transactions:""},detail:{clientDetails:" ",email:" ",phone:"",noProjects:"  ",noProjectsHint:"    .",noReceivables:"  ",noReceivablesHint:"   .",noTransactions:"  ",noTransactionsHint:"    ."},receivables:{dueDate:" ",daysOverdue:" ",action:""}},C0={title:"",exportCsv:" CSV",presets:{summary:"",thisMonth:" ",thisYear:" ",byProject:" ",byClient:" ",expensesByProject:"  ",unpaidAging:" "},period:{month:"",quarter:" ",year:"",custom:""},currencyMode:{usd:"",ils:"",both:""},drillDown:{paidIncome:"  ",unpaidIncome:"   ",expenses:" "},search:{project:"  ...",client:"  ..."},selectCurrencyForAmounts:"    ",sections:{financialSummary:" ",incomeByProject:"  ",incomeByClient:"  ",expensesByProject:"  ",unpaidAging:"   "},aging:{current:" ( )",days1to30:" 1-30 ",days31to60:" 31-60 ",days60plus:"   60 "},noExpenses:"     "},E0={title:"",recommendedForYou:"  ",loading:" ...",comingSoon:"",version:"",size:"",requires:"",sha256:"SHA-256",copy:"",checksumCopied:"   ",howToInstall:" ",releaseNotes:" ",allVersions:" ",mac:{title:"macOS",downloadDmg:" DMG",step1:"  DMG",step2:' ""  ',step3:"     "},windows:{title:"Windows",downloadMsi:" MSI",step1:"  MSI",step2:"  ",step3:"  ",altExe:":   EXE"}},T0={title:"",language:{title:"",description:"  "},theme:{title:"",description:"  ",light:"",dark:"",system:""},currency:{title:"",enabled:" ",enabledDesc:"    ",default:" ",defaultDesc:"   "},data:{title:" ",export:" ",exportDesc:"     ",exportBtn:" JSON",exporting:" ...",exported:"  !",exportFailed:" ",import:" ",importDesc:"     (  )",importBtn:" JSON",importing:" ...",imported:"  !  ...",importFailed:" : {error}",invalidFile:"     ",deleteAll:"  ",deleteAllDesc:"    ",deleteAllBtn:"  ",reset:"  ",resetDesc:"     ",resetBtn:" ",resetConfirm:"            .",deleteModal:{title:"  ",warning:"             .      .",stepA:{title:" 1:   ",desc:"       .",btn:"   (CSV)",exporting:" ...",done:"   !",error:" "},stepB:{title:" 2:  ",checkbox:"    ",btn:" ",deleting:" ...",error:" "},success:"    "}},about:{title:" ",name:" -   ",description:"       .       IndexedDB."},updates:{title:"",checking:"   ...",upToDate:"  ",currentVersion:" ",latestVersion:" ",updateAvailable:"  ",updateNow:" ",checkFailed:"   "},desktopApp:{title:"  ",download:"   ",downloadDesc:"     ",downloadBtn:"",downloadMac:"  macOS",downloadWindows:"  Windows"}},R0={message:"   Mac   ",cta:"",dismiss:""},_0={available:" {{version}} ",downloading:" ... {{progress}}%",ready:" ",restart:"  ",download:"",dismiss:"",error:" "},I0={title:"",profileExpenses:" {name}",addExpense:" ",addRecurring:" ",empty:"  ",emptyHint:"   ",emptyProfiles:"   ",emptyProfilesHint:"    ",emptyExpenses:"  ",emptyExpensesSearch:"    ",emptyExpensesHint:"   ",searchPlaceholder:"  ...",confirmDelete:"      ",confirmDeleteRule:"       ",year:"",month:"",allMonths:" ",allCategories:" ",totalExpenses:" ",totalUSD:" ()",totalILS:" ()",viewReceipts:" ",manageReceipts:" ",allProfilesOverview:"    ",recurringRules:" ",fromRecurring:"  ",monthly:"",yearly:"",pause:"",resume:"",paused:"",profileNotFound:"  ",profileNotFoundHint:"       ",untitled:" ",unknownProfile:"  ",overview:{title:"   ",allProfiles:" ",profileBreakdown:"  ",totalExpenses:" ",monthlyBreakdown:" ",byProfile:" ",noProfiles:"   ",profile:"",total:"",percentage:""},forecast:{title:" ",minimumNeeded:"  ",untilEndOfYear:"  {year}",monthsRemaining:" ",yearTotal:" ",activeRules:" ",monthlyForecast:" ",month:"",projected:"",actual:"",delta:"",current:"",total:"",byProfile:" ",empty:"   ",emptyHint:"    ",activeRecurringRules:"  "},receipts:{title:"",upload:" ",uploading:" ...",total:"",linked:"",unlinked:" ",allTab:"",inboxTab:"",suggestionsTab:"",linkToExpense:" ",link:"",unlink:" ",unlinkFromExpense:" ",exportZip:" ZIP",exporting:" ...",download:"",empty:"  ",emptyHint:"  ",noReceipts:"  ",noReceiptsHint:"  ",fileTooLarge:"   (  {maxSize})",invalidFileType:"   .     PDF",uploadFailed:"  ",selectExpense:"  ",noExpensesToLink:"   .   .",confirmUnlink:"       ",confirmDelete:"      "},recurring:{title:" ",addRule:" ",frequency:"",monthly:"",yearly:"",startDate:" ",endMode:" ",endOfYear:" ",untilDate:" ",noEnd:" ",endDate:" ",pause:"",resume:"",paused:"",active:""},columns:{date:"",title:"",vendor:"",category:"",amount:"",receipts:""},categories:{title:"",addCategory:" ",name:"",color:"",setup:" ",setupTitle:"  ",selectPreset:"      :",seedCategories:" ",presets:{general:"  ",startup:"  ",lawFirm:" ",freelancer:" "},presetDescriptions:{general:"      ",startup:"   SaaS        ",lawFirm:"         ",freelancer:"      "}}},O0={title:" ",addRetainer:" ",matchPayment:" ",empty:"   ",emptyHint:"     ",searchPlaceholder:"  ...",confirmArchive:"      ",view:{all:"",dueNow:" ",active:"",endingSoon:" "},status:{title:"",draft:"",active:"",paused:"",ended:""},cadence:{monthly:"",quarterly:" "},columns:{status:"",title:"",client:"",amount:"",cadence:"",nextDue:" ",dueNow:""},inspector:{placeholder:"    ",overview:" ",schedule:" ",linkedTransactions:" ",noLinkedTransactions:"    ",client:"",project:"",amount:"",cadence:"",paymentDay:" ",startDate:" ",endDate:" ",noEndDate:"",notes:"",dueAmount:" ",actions:"",edit:"",pause:"",resume:"",end:"",match:" ",confirmPause:"      ",confirmEnd:"      "},summary:{active:"",dueNow:" ",mtd:"  ()"},scheduleState:{upcoming:"",due:"",received:"",partial:"",missed:"",canceled:""},filters:{status:"",currency:"",client:"",allStatuses:" ",allCurrencies:" ",allClients:" "}},z0={selectTransaction:" ",selectProjectedIncome:"  ",selectTransactionDesc:"       .",selectProjectedDesc:"       .",searchTransactions:"  ...",searchProjected:"   ...",createNewTransaction:"  ",noMatchingTransactions:"   ",noUnlinkedTransactions:"   ",noMatchingProjected:"    ",noDueItems:"   ",untitled:" ",untitledRetainer:"  ",suggestions:"",otherDueItems:"  ",confidence:{high:" ",medium:" ",low:" "}},L0={transaction:{new:" ",edit:" ",typeIncome:"",typeIncomeDesc:"",typeReceivable:"",typeReceivableDesc:" ",typeExpense:"",typeExpenseDesc:"",amount:"",amountPlaceholder:"0.00",currency:"",date:"",dueDate:" ",client:"",clientPlaceholder:" ...",project:"",projectPlaceholder:" ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ..."},client:{new:" ",edit:" ",name:"",namePlaceholder:" ...",email:" ",emailPlaceholder:"client@example.com",phone:"",phonePlaceholder:"+966-5X-XXX-XXXX",notes:"",notesPlaceholder:"    ..."},project:{new:" ",edit:" ",name:"",namePlaceholder:" ...",client:"",clientPlaceholder:" ...",field:"",fieldPlaceholder:" ...",notes:"",notesPlaceholder:"    ..."},expense:{new:" ",edit:" ",newRecurring:"  ",editRecurring:"  ",typeOneTime:" ",typeOneTimeDesc:" ",typeRecurring:"",typeRecurringDesc:" /",profile:"",profilePlaceholder:" ...",amount:"",amountPlaceholder:"0.00",currency:"",date:"",vendor:"",vendorPlaceholder:"   ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ...",frequency:"",startDate:" ",endMode:" ",endDate:" ",receipts:"",addReceipt:" ",linkReceipt:"  "},retainer:{new:"  ",edit:"  ",client:"",clientPlaceholder:" ...",title:"",titlePlaceholder:":   ...",amount:"",amountPlaceholder:"0.00",currency:"",cadence:"",paymentDay:" ",startDate:" ",endDate:"  ()",project:" ()",projectPlaceholder:" ...",status:"",notes:"",notesPlaceholder:"    ...",schedulePreview:" ",enterDetailsForPreview:"    ",andMore:"..."}},U0={thisMonth:" ",lastMonth:" ",thisYear:" ",allTime:" ",custom:"",all:"",type:{all:"",income:"",receivable:"",expense:""},status:{all:"",paid:"",unpaid:" ",overdue:""}},q0={required:"  ",amountRequired:" ",dateRequired:" ",nameRequired:" "},B0={today:"",yesterday:"",daysAgo:" {days} ",weeksAgo:" {weeks} ",monthsAgo:" {months} ",yearsAgo:" {years} ",daysOverdue:" {days} ",dueInDays:"  {days} "},k0={live:"",cached:"",none:" ",bannerTitle:" ",showBanner:"  ",refresh:" ",minimize:"",drag:" "},H0={title:"   ",subtitle:"    ",infoTitle:"    ",bullet1:"   ",bullet2:"  ",bullet3:"   ",multipleProfiles:"         .",setUpNow:" ",skipForNow:" ",skipNote:"        ."},Q0={noProfile:"  ",setUpBusiness:"  ",addProfile:"  ",manageProfiles:" ",switchTo:"  {name}",current:""},V0={title:"   ",description:"        .",createProfile:"  "},Y0={createNew:" "},P0={suggestions:{title:" ",link:"",noMatches:"     ",createAndLink:"  ",highConfidence:"  ",mediumConfidence:" ",lowConfidence:" ",allLinked:"  ",allLinkedHint:"!     ."}},K0={title:"  ",button:" ",dropzoneTitle:"     ",dropzoneHint:" {maxFiles}    {maxSize}  ",autoDetectMonth:"     ",batchMonth:"  ",selectMonth:" ...",total:"",success:" ",duplicates:"  ()",errors:"",upload:"",uploading:" ",retryFailed:" ",statusPending:" ",duplicate:" "},F0={title:" ",checklist:" ",monthClosed:"  ",closedAt:"   {date}",readyToClose:" ",notReady:"  ",allTasksComplete:"    .",completeTasks:"     .",receiptsLinked:"   ",allLinked:"  ",unlinkedCount:"{count}   ",viewReceipts:" ",allCategorized:"  ",allCategorizedStatus:"   ",uncategorizedCount:"{count}   ",viewExpenses:" ",recurringConfirmed:"  ",recurringConfirmedHint:"       ",zipExported:"  ()",zipExportedHint:"     ",exportZip:" ZIP",closeMonth:" ",notesLabel:" ()",notesPlaceholder:"      ...",closeMonthButton:" ",completeChecklistFirst:"       .",confirmClose:"         .",confirmReopen:"           .",reopen:"  ",warning:{title:" ",text:"  {month}.       .",reopenButton:"  "}},G0={hero:{headline:"     ",subheadline:"    .  .  .   .",trust:"  .    .",ctaPrimary:" ",ctaSecondary:"   "},problem:{headline:"     ",pain1:"       ",pain2:"       ",pain3:"     ",pain4:"     "},howItWorks:{headline:"   ",step1Title:"     ",step1Desc:"  .   .   .",step2Title:"  ",step2Desc:"   .   .    .",step3Title:"   ",step3Desc:"   .  .   .",cta:" "},features:{headline:"     ",ledger:{title:" ",desc:"      "},clients:{title:"  ",desc:"       "},documents:{title:" ",desc:"     ( )"},retainers:{title:"  ",desc:"     "},expenses:{title:" ",desc:"       "},answers:{title:"  ",desc:"       "},reports:{title:" ",desc:"     CSV"},currency:{title:" ",desc:"      "}},privacy:{headline:". . .",point1:"    ",point2:"   ",point3:"   ",point4:"   (IndexedDB/SQLite)",point5:"    JSON   ",point6:"    GitHub"},platforms:{headline:"   Mac  Windows",pwa:"      ",downloadMac:"  macOS",downloadWindows:"  Windows"},pricing:{headline:"  ",personal:"   ",commercial:"     ",support:" ",supportCta:"  Buy Me a Coffee"},faq:{headline:" ",q1:"   ",a1:"   .      .",q2:"  ",a2:"  .    IndexedDB.     SQLite.",q3:"    ",a3:" JSON    .    .",q4:"   ",a4:".        .     .",q5:"  ",a5:"   .       .",q6:"   ",a6:".       ( ).",q7:"   ",a7:"     .    .",q8:"   ",a8:"  JSON  .     .",q9:"     ",a9:" .       .",q10:"   ",a10:" Buy Me a Coffee      ."},finalCta:{headline:"   ",trust:" .  .   ."},footer:{copyright:"",github:"GitHub",privacy:""},langToggle:{en:"EN",ar:""}},Z0={title:"",includeReceivables:" ",includeProjections:" ",cashFlowTimeline:"  ",guidanceTitle:" ",noData:"    ",mode:{month:"",year:""},yearMode:{totalInflow:" ",totalOutflow:" ",netIncome:" ",avgAwaiting:" ",retainerStability:" ",monthlyTrend:" ",insights:" ",bestMonth:" ",worstMonth:" ",retainerHealth:" ",paymentsReceived:"  {{received}}  {{total}} ",noDataForYear:"    ",yearTrend:" ",trendUp:" ",trendDown:" ",vsFirstHalf:"  ",onTimePayments:"  "},kpi:{willMakeIt:"  ",endOfMonthForecast:" +   -  ",cashOnHand:" ",currentBalance:"   ",comingVsLeaking:"  ",netForecast:" "},legend:{inflow:"",outflow:"",runningBalance:" "},unifiedNote:"   ()",dayDetail:{inflow:"",outflow:"",net:"",noEvents:"     ",inflows:"",outflows:""},source:{actualIncome:" ",actualCost:"",receivable:"",profileExpense:"",projectedExpense:" ",retainer:" "},state:{paid:"",unpaid:" ",overdue:"",upcoming:"",missed:"",cancelled:""},guidance:{allGood:"    !     .",impact:"",category:{collect:"",reduce:"",delay:"",hygiene:""}}},X0={common:b0,toast:w0,nav:j0,addMenu:S0,transactions:A0,overview:D0,projects:N0,clients:M0,reports:C0,download:E0,settings:T0,downloadBanner:R0,updateBanner:_0,expenses:I0,retainers:O0,retainerMatching:z0,drawer:L0,filters:U0,validation:q0,time:B0,fx:k0,welcome:H0,profileSwitcher:Q0,documentGuard:V0,vendor:Y0,receipts:P0,bulkUpload:K0,monthClose:F0,landing:G0,moneyAnswers:Z0},J0={en:x0,ar:X0},Xp="mutaba3a-language";function $0(){return navigator.language.split("-")[0].toLowerCase()==="ar"?"ar":"en"}function W0(){if(typeof window>"u")return"en";const a=localStorage.getItem(Xp);return a==="en"||a==="ar"?a:$0()}function e1(a){return a==="ar"?"rtl":"ltr"}function Bl(a){return a==="ar"?"ar":"en-US"}const Jp=O.createContext(null);function Bo({children:a}){const[l,c]=O.useState(W0),u=e1(l);O.useEffect(()=>{document.documentElement.lang=l,document.documentElement.dir=u,localStorage.setItem(Xp,l)},[l,u]);const d=O.useCallback(g=>{c(g)},[]),h=O.useCallback((g,p)=>{const m=g.split(".");let y=J0[l];for(const x of m)if(y&&typeof y=="object"&&x in y)y=y[x];else return console.warn(`Translation missing: ${g} (${l})`),g;return typeof y!="string"?(console.warn(`Translation not a string: ${g} (${l})`),g):p?Object.entries(p).reduce((x,[b,N])=>x.replace(new RegExp(`\\{${b}\\}`,"g"),String(N)),y):y},[l]),w={language:l,direction:u,setLanguage:d,t:h};return s.jsx(Jp.Provider,{value:w,children:a})}function Yn(){const a=O.useContext(Jp);if(!a)throw new Error("useLanguage must be used within a LanguageProvider");return a}function Fe(){return Yn().t}function t1(){return Yn().direction}const n1="https://api.github.com/repos/vAWK3/mutaba3a/releases/latest",Fo="latest-release-info",a1=3600*1e3;function i1(){try{const a=sessionStorage.getItem(Fo);if(!a)return null;const l=JSON.parse(a);return Date.now()-l.timestamp>a1?(sessionStorage.removeItem(Fo),null):l}catch{return null}}function l1(a){const l={...a,timestamp:Date.now()};sessionStorage.setItem(Fo,JSON.stringify(l))}async function $p(){const a=await fetch(n1,{headers:{Accept:"application/vnd.github.v3+json"}});if(!a.ok)throw new Error(`GitHub API returned ${a.status}`);const l=await a.json(),c=l.tag_name,u=l.html_url,d=l.assets||[],h=c.startsWith("v")?c.slice(1):c,w=d.some(p=>p.name.includes("macos")||p.name.endsWith(".dmg")),g=d.some(p=>p.name.includes("windows")||p.name.endsWith(".msi")||p.name.endsWith(".exe"));return{version:h,releaseNotesUrl:u,hasMacBuild:w,hasWindowsBuild:g}}function Xw(){const[a,l]=O.useState({release:null,isLoading:!0,error:null});return O.useEffect(()=>{(async()=>{const u=i1();if(u){l({release:{version:u.version,releaseNotesUrl:u.releaseNotesUrl,hasMacBuild:u.hasMacBuild,hasWindowsBuild:u.hasWindowsBuild},isLoading:!1,error:null});return}try{const d=await $p();l1(d),l({release:d,isLoading:!1,error:null})}catch(d){l({release:null,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}const Go="update-check-result",s1=3600*1e3;function r1(a,l){const c=m=>m.split(".").map(y=>parseInt(y,10)||0),[u=0,d=0,h=0]=c(a),[w=0,g=0,p=0]=c(l);return w!==u?w-u:g!==d?g-d:p-h}function c1(){try{const a=sessionStorage.getItem(Go);if(!a)return null;const l=JSON.parse(a);return Date.now()-l.timestamp>s1?(sessionStorage.removeItem(Go),null):l}catch{return null}}function o1(a,l){const c={latestVersion:a,hasUpdate:l,timestamp:Date.now()};sessionStorage.setItem(Go,JSON.stringify(c))}function u1(){try{if(window.__TAURI_INTERNALS__)return"0.0.20"}catch{}return"0.0.20"}function d1(){const[a,l]=O.useState({latestVersion:null,hasUpdate:!1,isLoading:!0,error:null});return O.useEffect(()=>{(async()=>{const u=c1();if(u){l({latestVersion:u.latestVersion,hasUpdate:u.hasUpdate,isLoading:!1,error:null});return}try{const h=(await $p()).version,w=u1(),g=r1(w,h)>0;o1(h,g),l({latestVersion:h,hasUpdate:g,isLoading:!1,error:null})}catch(d){l({latestVersion:null,hasUpdate:!1,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}class f1 extends Ev{clients;projects;categories;transactions;fxRates;settings;businessProfiles;documents;documentSequences;expenses;recurringRules;receipts;expenseCategories;vendors;monthCloseStatuses;retainerAgreements;projectedIncome;localDevice;trustedPeers;opLog;peerCursors;entityFieldMeta;moneyEventVersions;conflictQueue;syncHistory;constructor(){super("mutaba3a"),this.version(1).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id"}),this.version(2).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt"}),this.version(3).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]"}),this.version(4).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, monthKey, createdAt",expenseCategories:"id, profileId, name"}),this.version(5).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed"}),this.version(6).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"}),this.version(7).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"})}}const j=new f1;function m1(a){let l=0,c=0,u=0;for(const d of a)d.kind==="income"?d.status==="paid"?l+=d.amountMinor:c+=d.amountMinor:u+=d.amountMinor;return{paidIncomeMinor:l,unpaidIncomeMinor:c,expensesMinor:u}}function fr(a){const l={USD:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0},ILS:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0}};for(const c of a){const u=l[c.currency];u&&(c.kind==="income"?c.status==="paid"?u.paidIncomeMinor+=c.amountMinor:u.unpaidIncomeMinor+=c.amountMinor:u.expensesMinor+=c.amountMinor)}return l}function mr(a,l={}){let c=0,u=0,d=0,h,w;for(const g of a)g.kind==="income"?g.status==="paid"?(c+=g.amountMinor,l.trackPayments&&(!w||g.paidAt&&g.paidAt>w)&&(w=g.paidAt)):u+=g.amountMinor:d+=g.amountMinor,(!h||g.occurredAt>h)&&(h=g.occurredAt);return{paidIncomeMinor:c,unpaidIncomeMinor:u,expensesMinor:d,lastActivityAt:h,lastPaymentAt:w}}function vp(a,l){return a.filter(c=>!(c.deletedAt||l.dateFrom&&c.occurredAt<l.dateFrom||l.dateTo&&c.occurredAt>l.dateTo+"T23:59:59"||l.currency&&c.currency!==l.currency))}function pr(a,l,c,u){return a.filter(d=>!(d.deletedAt||l==="project"&&d.projectId!==c||l==="client"&&d.clientId!==c||u&&d.currency!==u))}function Zo(a,l,c,u){return a.filter(d=>!(d.deletedAt||l==="project"&&d.projectId!==c||l==="client"&&d.clientId!==c||u.currency&&d.currency!==u.currency||u.dateFrom&&d.occurredAt<u.dateFrom||u.dateTo&&d.occurredAt>u.dateTo+"T23:59:59"))}function p1(a){return new Map(a.map(l=>[l.id,l.name]))}function Wp(a){return a.sort((l,c)=>!l.lastActivityAt&&!c.lastActivityAt?0:l.lastActivityAt?c.lastActivityAt?c.lastActivityAt.localeCompare(l.lastActivityAt):-1:1)}function Va(){return crypto.randomUUID()}function _e(){return new Date().toISOString()}function xp(){return new Date().toISOString().split("T")[0]}const sn={async list(a=!1){let l=j.clients.toCollection();return a||(l=j.clients.filter(c=>!c.archivedAt)),l.sortBy("name")},async get(a){return j.clients.get(a)},async create(a){const l=_e(),c={...a,id:Va(),createdAt:l,updatedAt:l};return await j.clients.add(c),c},async update(a,l){await j.clients.update(a,{...l,updatedAt:_e()})},async archive(a){await j.clients.update(a,{archivedAt:_e(),updatedAt:_e()})},async delete(a){await j.clients.delete(a)}},pn={async list(a){return(await j.projects.toCollection().toArray()).filter(u=>!(!a?.includeArchived&&u.archivedAt||a?.clientId&&u.clientId!==a.clientId)).sort((u,d)=>u.name.localeCompare(d.name))},async get(a){return j.projects.get(a)},async create(a){const l=_e(),c={...a,id:Va(),createdAt:l,updatedAt:l};return await j.projects.add(c),c},async update(a,l){await j.projects.update(a,{...l,updatedAt:_e()})},async archive(a){await j.projects.update(a,{archivedAt:_e(),updatedAt:_e()})},async delete(a){await j.projects.delete(a)}},or={async list(a){return a?j.categories.where("kind").equals(a).sortBy("name"):j.categories.orderBy("name").toArray()},async get(a){return j.categories.get(a)},async create(a){const l={...a,id:Va()};return await j.categories.add(l),l},async update(a,l){await j.categories.update(a,l)},async delete(a){await j.categories.delete(a)}},it={async list(a={}){const l=await j.transactions.toArray(),c=await j.clients.toArray(),u=await j.projects.toArray(),d=await j.categories.toArray(),h=new Map(c.map(b=>[b.id,b.name])),w=new Map(u.map(b=>[b.id,b.name])),g=new Map(d.map(b=>[b.id,b.name])),p=xp();let m=l.filter(b=>{if(b.deletedAt||a.dateFrom&&b.occurredAt<a.dateFrom||a.dateTo&&b.occurredAt>a.dateTo+"T23:59:59"||a.currency&&b.currency!==a.currency||a.kind&&b.kind!==a.kind||a.clientId&&b.clientId!==a.clientId||a.projectId&&b.projectId!==a.projectId)return!1;if(a.status){if(a.status==="overdue"){if(!(b.kind==="income"&&b.status==="unpaid"&&b.dueDate&&b.dueDate<p))return!1}else if(b.status!==a.status)return!1}if(a.search){const N=a.search.toLowerCase(),A=b.clientId?h.get(b.clientId):"",R=b.projectId?w.get(b.projectId):"";if(!(b.title?.toLowerCase().includes(N)||b.notes?.toLowerCase().includes(N)||A?.toLowerCase().includes(N)||R?.toLowerCase().includes(N)))return!1}return!0});const y=a.sort?.by||"occurredAt",x=a.sort?.dir||"desc";return m.sort((b,N)=>{const A=b[y],R=N[y];return typeof A=="string"&&typeof R=="string"?x==="asc"?A.localeCompare(R):R.localeCompare(A):typeof A=="number"&&typeof R=="number"?x==="asc"?A-R:R-A:0}),a.offset&&(m=m.slice(a.offset)),a.limit&&(m=m.slice(0,a.limit)),m.map(b=>({...b,clientName:b.clientId?h.get(b.clientId):void 0,projectName:b.projectId?w.get(b.projectId):void 0,categoryName:b.categoryId?g.get(b.categoryId):void 0}))},async get(a){return j.transactions.get(a)},async create(a){const l=_e(),c={...a,id:Va(),createdAt:l,updatedAt:l};return await j.transactions.add(c),c},async update(a,l){await j.transactions.update(a,{...l,updatedAt:_e()})},async markPaid(a){const l=_e();await j.transactions.update(a,{status:"paid",paidAt:l,updatedAt:l})},async softDelete(a){await j.transactions.update(a,{deletedAt:_e(),updatedAt:_e()})},async getOverviewTotals(a){const l=await j.transactions.toArray(),c=vp(l,a);return m1(c)},async getOverviewTotalsByCurrency(a){const l=await j.transactions.toArray(),c=vp(l,{dateFrom:a.dateFrom,dateTo:a.dateTo});return fr(c)},async getAttentionReceivables(a){const l=xp(),c=new Date;c.setDate(c.getDate()+7);const u=c.toISOString().split("T")[0];return(await this.list({kind:"income",currency:a.currency})).filter(h=>h.status!=="unpaid"||!h.dueDate?!1:h.dueDate<l||h.dueDate<=u).sort((h,w)=>(h.dueDate||"").localeCompare(w.dueDate||""))}},eh={async list(a){const l=await pn.list(),c=await j.clients.toArray(),u=await j.transactions.toArray(),d=p1(c),h=l.filter(w=>{if(a?.search){const g=a.search.toLowerCase(),p=w.clientId?d.get(w.clientId):"";if(!w.name.toLowerCase().includes(g)&&!p?.toLowerCase().includes(g))return!1}return!(a?.field&&w.field!==a.field)}).map(w=>{const g=pr(u,"project",w.id,a?.currency),p=mr(g);let m={};if(!a?.currency){const y=pr(u,"project",w.id),x=fr(y);m={paidIncomeMinorUSD:x.USD.paidIncomeMinor,paidIncomeMinorILS:x.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:x.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:x.ILS.unpaidIncomeMinor,expensesMinorUSD:x.USD.expensesMinor,expensesMinorILS:x.ILS.expensesMinor}}return{id:w.id,name:w.name,clientId:w.clientId,clientName:w.clientId?d.get(w.clientId):void 0,field:w.field,...p,netMinor:p.paidIncomeMinor-p.expensesMinor,...m}});return Wp(h)},async get(a,l){const c=await pn.get(a);if(!c)return;const u=c.clientId?await sn.get(c.clientId):void 0,d=await j.transactions.toArray(),h=Zo(d,"project",a,l||{}),w=mr(h);let g={};if(!l?.currency){const p=Zo(d,"project",a,{dateFrom:l?.dateFrom,dateTo:l?.dateTo}),m=fr(p);g={paidIncomeMinorUSD:m.USD.paidIncomeMinor,paidIncomeMinorILS:m.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:m.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:m.ILS.unpaidIncomeMinor,expensesMinorUSD:m.USD.expensesMinor,expensesMinorILS:m.ILS.expensesMinor}}return{id:c.id,name:c.name,clientId:c.clientId,clientName:u?.name,field:c.field,...w,netMinor:w.paidIncomeMinor-w.expensesMinor,...g}}},th={async list(a){const l=await sn.list(),c=await j.projects.toArray(),u=await j.transactions.toArray(),d=l.filter(h=>{if(a?.search){const w=a.search.toLowerCase();if(!h.name.toLowerCase().includes(w))return!1}return!0}).map(h=>{const w=c.filter(y=>y.clientId===h.id&&!y.archivedAt),g=pr(u,"client",h.id,a?.currency),p=mr(g,{trackPayments:!0});let m={};if(!a?.currency){const y=pr(u,"client",h.id),x=fr(y);m={paidIncomeMinorUSD:x.USD.paidIncomeMinor,paidIncomeMinorILS:x.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:x.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:x.ILS.unpaidIncomeMinor}}return{id:h.id,name:h.name,activeProjectCount:w.length,paidIncomeMinor:p.paidIncomeMinor,unpaidIncomeMinor:p.unpaidIncomeMinor,lastPaymentAt:p.lastPaymentAt,lastActivityAt:p.lastActivityAt,...m}});return Wp(d)},async get(a,l){const c=await sn.get(a);if(!c)return;const u=await j.projects.toArray(),d=await j.transactions.toArray(),h=u.filter(p=>p.clientId===a&&!p.archivedAt),w=Zo(d,"client",a,l||{}),g=mr(w,{trackPayments:!0});return{id:c.id,name:c.name,activeProjectCount:h.length,paidIncomeMinor:g.paidIncomeMinor,unpaidIncomeMinor:g.unpaidIncomeMinor,lastPaymentAt:g.lastPaymentAt,lastActivityAt:g.lastActivityAt}}},ur={async list(){return j.fxRates.orderBy("effectiveDate").reverse().toArray()},async getLatest(a,l){const c=await j.fxRates.where("[baseCurrency+quoteCurrency]").equals([a,l]).sortBy("effectiveDate");return c[c.length-1]},async create(a){const l={...a,id:Va(),createdAt:_e()};return await j.fxRates.add(l),l},async delete(a){await j.fxRates.delete(a)}},nh={async get(){const a=await j.settings.get("default");return a||{id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}},async update(a){const l=await this.get();await j.settings.put({...l,...a,id:"default"})}},at={async list(a=!1){let l=j.businessProfiles.toCollection();return a||(l=j.businessProfiles.filter(c=>!c.archivedAt)),l.sortBy("name")},async get(a){return j.businessProfiles.get(a)},async getDefault(){return(await j.businessProfiles.filter(l=>l.isDefault&&!l.archivedAt).toArray())[0]},async create(a){const l=_e();a.isDefault&&await j.businessProfiles.toCollection().modify({isDefault:!1});const c={...a,id:Va(),createdAt:l,updatedAt:l};return await j.businessProfiles.add(c),c},async update(a,l){l.isDefault&&await j.businessProfiles.toCollection().modify({isDefault:!1}),await j.businessProfiles.update(a,{...l,updatedAt:_e()})},async setDefault(a){await j.businessProfiles.toCollection().modify({isDefault:!1}),await j.businessProfiles.update(a,{isDefault:!0,updatedAt:_e()})},async archive(a){if((await this.get(a))?.isDefault){const c=await j.businessProfiles.filter(u=>u.id!==a&&!u.archivedAt).toArray();c.length>0&&await j.businessProfiles.update(c[0].id,{isDefault:!0})}await j.businessProfiles.update(a,{archivedAt:_e(),updatedAt:_e(),isDefault:!1})},async delete(a){await j.businessProfiles.delete(a)}},ko={invoice:"INV",receipt:"REC",invoice_receipt:"IR",credit_note:"CN",price_offer:"PO",proforma_invoice:"PI",donation_receipt:"DR"},lu={async getNextNumber(a,l){const c=`${a}:${l}`;let u=await j.documentSequences.get(c);u||(u={id:c,businessProfileId:a,documentType:l,lastNumber:0,prefix:ko[l],prefixEnabled:!0,updatedAt:_e()});const d=await j.documents.where("type").equals(l).filter(p=>!p.deletedAt).toArray();let h=u.lastNumber;for(const p of d){const m=p.number.match(/(\d+)$/);m&&(h=Math.max(h,parseInt(m[1],10)))}const w=h+1;u.lastNumber=w,u.updatedAt=_e(),await j.documentSequences.put(u);const g=String(w).padStart(4,"0");return u.prefixEnabled?`${u.prefix}-${g}`:g},async get(a,l){return j.documentSequences.get(`${a}:${l}`)},async listByBusinessProfile(a){return j.documentSequences.where("businessProfileId").equals(a).toArray()},async update(a,l,c){const u=`${a}:${l}`;let d=await j.documentSequences.get(u);d||(d={id:u,businessProfileId:a,documentType:l,lastNumber:0,prefix:ko[l],prefixEnabled:!0,updatedAt:_e()}),await j.documentSequences.put({...d,...c,updatedAt:_e()})},async getOrCreate(a,l){const c=`${a}:${l}`;let u=await j.documentSequences.get(c);return u||(u={id:c,businessProfileId:a,documentType:l,lastNumber:0,prefix:ko[l],prefixEnabled:!0,updatedAt:_e()},await j.documentSequences.put(u)),u}},Lt={async list(a={}){const l=await j.documents.toArray(),c=await j.clients.toArray(),u=await j.businessProfiles.toArray(),d=new Map(c.map(m=>[m.id,m.name])),h=new Map(u.map(m=>[m.id,m.name]));let w=l.filter(m=>{if(m.deletedAt||a.dateFrom&&m.issueDate<a.dateFrom||a.dateTo&&m.issueDate>a.dateTo+"T23:59:59"||a.currency&&m.currency!==a.currency||a.type&&m.type!==a.type||a.status&&m.status!==a.status||a.businessProfileId&&m.businessProfileId!==a.businessProfileId||a.clientId&&m.clientId!==a.clientId)return!1;if(a.search){const y=a.search.toLowerCase(),x=m.clientId?d.get(m.clientId):"";if(!(m.number?.toLowerCase().includes(y)||m.subject?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||x?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"issueDate",p=a.sort?.dir||"desc";return w.sort((m,y)=>{const x=m[g],b=y[g];return typeof x=="string"&&typeof b=="string"?p==="asc"?x.localeCompare(b):b.localeCompare(x):typeof x=="number"&&typeof b=="number"?p==="asc"?x-b:b-x:0}),a.offset&&(w=w.slice(a.offset)),a.limit&&(w=w.slice(0,a.limit)),w.map(m=>({...m,clientName:m.clientId?d.get(m.clientId):void 0,businessProfileName:h.get(m.businessProfileId)}))},async get(a){return j.documents.get(a)},async getByNumber(a){return(await j.documents.where("number").equals(a).toArray())[0]},async isNumberTaken(a,l){return!!await j.documents.where("number").equals(a).filter(u=>!u.deletedAt&&u.id!==l).first()},async create(a){const l=_e(),c=await lu.getNextNumber(a.businessProfileId,a.type),u={...a,id:Va(),number:c,createdAt:l,updatedAt:l};return await j.documents.add(u),u},async update(a,l){await j.documents.update(a,{...l,updatedAt:_e()})},async markPaid(a){const l=_e();await j.documents.update(a,{status:"paid",paidAt:l,updatedAt:l})},async markVoided(a){await j.documents.update(a,{status:"voided",updatedAt:_e()})},async markIssued(a){await j.documents.update(a,{status:"issued",updatedAt:_e()})},async softDelete(a){await j.documents.update(a,{deletedAt:_e(),updatedAt:_e()})},async linkTransactions(a,l){const c=await this.get(a);if(!c)return;const u=new Set(c.linkedTransactionIds||[]);l.forEach(d=>u.add(d)),await this.update(a,{linkedTransactionIds:Array.from(u)});for(const d of l)await it.update(d,{linkedDocumentId:a})},async unlinkTransaction(a,l){const c=await this.get(a);c&&(await this.update(a,{linkedTransactionIds:(c.linkedTransactionIds||[]).filter(u=>u!==l)}),await it.update(l,{linkedDocumentId:void 0}))}};async function h1(){await j.settings.get("default")||(await j.settings.put({id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}),console.log("Database initialized with default settings"))}async function Jw(){await j.transaction("rw",[j.transactions,j.projects,j.clients,j.categories,j.fxRates],async()=>{await j.transactions.clear(),await j.projects.clear(),await j.clients.clear(),await j.categories.clear(),await j.fxRates.clear()}),console.log("All data deleted (settings preserved)")}async function $w(){await j.transactions.clear(),await j.projects.clear(),await j.clients.clear(),await j.categories.clear(),await j.fxRates.clear(),await j.settings.clear(),console.log("Database cleared")}class ut{ts;counter;nodeId;constructor(l,c,u){this.nodeId=l,this.ts=c??Date.now(),this.counter=u??0}tick(){const l=Date.now();return l>this.ts?(this.ts=l,this.counter=0):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}receive(l){const c=Date.now();return c>this.ts&&c>l.ts?(this.ts=c,this.counter=0):this.ts===l.ts?this.counter=Math.max(this.counter,l.counter)+1:l.ts>this.ts?(this.ts=l.ts,this.counter=l.counter+1):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}now(){return{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}static compare(l,c){return l.ts!==c.ts?l.ts-c.ts:l.counter!==c.counter?l.counter-c.counter:l.nodeId.localeCompare(c.nodeId)}static lt(l,c){return ut.compare(l,c)<0}static lte(l,c){return ut.compare(l,c)<=0}static gt(l,c){return ut.compare(l,c)>0}static gte(l,c){return ut.compare(l,c)>=0}static eq(l,c){return l.ts===c.ts&&l.counter===c.counter&&l.nodeId===c.nodeId}static max(l,c){return ut.compare(l,c)>=0?l:c}static min(l,c){return ut.compare(l,c)<=0?l:c}static serialize(l){const c=l.ts.toString(36).padStart(11,"0"),u=l.counter.toString(36).padStart(5,"0"),d=l.nodeId.slice(0,8).padEnd(8,"0");return`${c}-${u}-${d}`}static parse(l){const c=l.split("-");if(c.length<3)throw new Error(`Invalid HLC string: ${l}`);return{ts:parseInt(c[0],36),counter:parseInt(c[1],36),nodeId:c.slice(2).join("-")}}static zero(){return{ts:0,counter:0,nodeId:""}}static zeroString(){return ut.serialize(ut.zero())}static isZero(l){return l.ts===0&&l.counter===0&&l.nodeId===""}static toDate(l){return new Date(l.ts)}static fromDate(l,c){return{ts:l.getTime(),counter:0,nodeId:c}}}let Xo=null;function y1(a){Xo=new ut(a)}function ah(){if(!Xo)throw new Error("HLC not initialized. Call initializeClock() first.");return Xo}function g1(){return ah().tick()}function v1(a){return ah().receive(a)}let Ba=null;async function ih(){if(Ba)return Ba;const a=await j.localDevice.toArray();if(a.length>0)return Ba=a[0],Ba;const l={id:crypto.randomUUID(),name:await x1(),type:lh(),publicKey:"",privateKey:"",createdAt:new Date().toISOString()};return await j.localDevice.add(l),Ba=l,l}function xa(){if(!Ba)throw new Error("Local device not initialized. Call getOrCreateLocalDevice() first.");return Ba}function lh(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window?"desktop":"web"}async function x1(){const a=lh(),l=navigator.platform||"Unknown";if(a==="desktop")try{const{invoke:c}=await Ce(async()=>{const{invoke:d}=await import("./core-BEOw45JP.js");return{invoke:d}},[]);return await c("get_hostname")||`Desktop (${l})`}catch{return`Desktop (${l})`}return`Web Browser (${l})`}async function kl(a){const l=xa(),c=g1(),u={id:crypto.randomUUID(),hlc:ut.serialize(c),entityType:a.entityType,entityId:a.entityId,opType:a.opType,field:a.field,value:a.value,previousValue:a.previousValue,createdBy:l.id,createdAt:new Date().toISOString(),appliedAt:new Date().toISOString()};if(await j.opLog.add(u),a.field&&a.opType==="update"&&await Jo(a.entityType,a.entityId,a.field,c,a.value,l.id),typeof window<"u"&&"__TAURI_INTERNALS__"in window)try{const{invoke:d}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]);await d("store_local_sync_op",{op:u}),console.log("[OpsEngine] Stored op for mobile sync:",u.id)}catch(d){console.error("[OpsEngine] Failed to store op in Rust:",d)}return u}async function su(a){if(await j.opLog.get(a.id))return{applied:!1,skipped:!0,reason:"already_applied"};const c=ut.parse(a.hlc);v1(c);let u;return a.entityType==="transaction"&&a.opType==="update"?u=await w1(a):a.opType==="update"&&a.field?u=await b1(a):u=await sh(a),await j.opLog.add({...a,appliedAt:new Date().toISOString()}),u}async function b1(a){const l=ut.parse(a.hlc),c=await j.entityFieldMeta.where("[entityType+entityId+field]").equals([a.entityType,a.entityId,a.field]).first();if(c){const u=ut.parse(c.hlc);if(ut.lte(l,u))return{applied:!1,reason:"lww_local_wins"};const d=xa();if(c.updatedBy===d.id&&c.updatedBy!==a.createdBy){const h=await E1(a,c);return await hr(a),await Jo(a.entityType,a.entityId,a.field,l,a.value,a.createdBy),{applied:!0,conflict:h}}}return await hr(a),await Jo(a.entityType,a.entityId,a.field,l,a.value,a.createdBy),{applied:!0}}async function w1(a){const l=await j.transactions.get(a.entityId);if(!l)return sh(a);const c=xa(),u=ut.parse(a.hlc);if((await j.moneyEventVersions.where("transactionId").equals(a.entityId).toArray()).some(w=>w.createdBy===c.id)){const w=await T1(a,l);return await bp(a.entityId,l,u,a.createdBy,!1),await hr(a),{applied:!0,conflict:w}}return await bp(a.entityId,l,u,a.createdBy,!1),await hr(a),{applied:!0}}async function sh(a){switch(a.opType){case"create":await j1(a);break;case"delete":await S1(a);break;case"archive":await A1(a);break;case"unarchive":await D1(a);break;case"mark_paid":await N1(a);break;case"resolve_conflict":await M1(a);break;case"set_active_version":await C1(a);break;default:console.warn(`Unknown op type: ${a.opType}`)}return{applied:!0}}async function j1(a){const l=a.value;switch(a.entityType){case"client":await j.clients.put(l);break;case"project":await j.projects.put(l);break;case"transaction":await j.transactions.put(l);break;case"category":await j.categories.put(l);break;case"fxRate":await j.fxRates.put(l);break;case"document":await j.documents.put(l);break;case"businessProfile":await j.businessProfiles.put(l);break}}async function hr(a){if(!a.field)return;const l=vr(a.entityType);await l.get(a.entityId)&&await l.update(a.entityId,{[a.field]:a.value,updatedAt:new Date().toISOString()})}async function S1(a){const l=vr(a.entityType);a.entityType==="transaction"||a.entityType==="document"?await l.update(a.entityId,{deletedAt:new Date().toISOString()}):await l.delete(a.entityId)}async function A1(a){await vr(a.entityType).update(a.entityId,{archivedAt:a.value,updatedAt:new Date().toISOString()})}async function D1(a){await vr(a.entityType).update(a.entityId,{archivedAt:void 0,updatedAt:new Date().toISOString()})}async function N1(a){a.entityType==="transaction"?await j.transactions.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()}):a.entityType==="document"&&await j.documents.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()})}async function M1(a){const l=a.value;await j.conflictQueue.update(l.conflictId,{status:"resolved",resolution:l.resolution,resolvedAt:new Date().toISOString(),resolutionOpId:a.id})}async function C1(a){const{transactionId:l,versionId:c}=a.value;await j.moneyEventVersions.where("transactionId").equals(l).modify({isActive:!1}),await j.moneyEventVersions.update(c,{isActive:!0});const u=await j.moneyEventVersions.get(c);u&&await j.transactions.put(u.data)}function vr(a){switch(a){case"client":return j.clients;case"project":return j.projects;case"transaction":return j.transactions;case"category":return j.categories;case"fxRate":return j.fxRates;case"document":return j.documents;case"businessProfile":return j.businessProfiles;default:throw new Error(`Unknown entity type: ${a}`)}}async function Jo(a,l,c,u,d,h){const w={entityType:a,entityId:l,field:c,hlc:ut.serialize(u),value:d,updatedBy:h};await j.entityFieldMeta.put(w)}async function E1(a,l){const c=xa(),u=await j.opLog.where("[entityType+entityId]").equals([a.entityType,a.entityId]).filter(w=>w.field===a.field&&w.createdBy===c.id).last(),d=await rh(a.createdBy),h={id:crypto.randomUUID(),entityType:a.entityType,entityId:a.entityId,conflictType:"profile_field",field:a.field,localOp:u,remoteOp:a,localValue:l.value,remoteValue:a.value,localDeviceName:c.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await j.conflictQueue.add(h),h}async function T1(a,l,c){const u=xa(),d=await rh(a.createdBy),h=await j.opLog.where("[entityType+entityId]").equals(["transaction",a.entityId]).filter(g=>g.createdBy===u.id).last(),w={id:crypto.randomUUID(),entityType:"transaction",entityId:a.entityId,conflictType:"money_event_version",localOp:h,remoteOp:a,localValue:l,remoteValue:a.value,localDeviceName:u.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await j.conflictQueue.add(w),w}async function bp(a,l,c,u,d){const h=await j.moneyEventVersions.where("transactionId").equals(a).count(),w={id:crypto.randomUUID(),transactionId:a,version:h+1,hlc:ut.serialize(c),data:l,isActive:d,createdBy:u,createdAt:new Date().toISOString()};return await j.moneyEventVersions.add(w),w}async function rh(a){return(await j.trustedPeers.get(a))?.name||"Unknown Device"}async function R1(a){const l=[...a].sort((h,w)=>h.hlc.localeCompare(w.hlc));let c=0,u=0;const d=[];for(const h of l){const w=await su(h);w.applied?c++:w.skipped&&u++,w.conflict&&d.push(w.conflict)}return{applied:c,skipped:u,conflicts:d}}async function ch(a){const l=xa();return j.opLog.where("hlc").above(a).filter(c=>c.createdBy===l.id).sortBy("hlc")}const _1=Object.freeze(Object.defineProperty({__proto__:null,applyOp:su,applyOps:R1,captureOp:kl,getLocalDevice:xa,getLocalOpsSince:ch,getOrCreateLocalDevice:ih},Symbol.toStringTag,{value:"Module"}));async function I1(a,l){await kl({entityType:a,entityId:l.id,opType:"create",value:l})}async function Ho(a,l,c,u){for(const[d,h]of Object.entries(c))d==="id"||d==="createdAt"||await kl({entityType:a,entityId:l,opType:"update",field:d,value:h,previousValue:u?u[d]:void 0})}async function O1(a,l){await kl({entityType:a,entityId:l,opType:"delete"})}async function z1(a,l){await kl({entityType:a,entityId:l,opType:"archive",value:new Date().toISOString()})}sn.list.bind(sn),sn.get.bind(sn);pn.list.bind(pn),pn.get.bind(pn);it.list.bind(it),it.get.bind(it),it.getOverviewTotals.bind(it),it.getOverviewTotalsByCurrency.bind(it),it.getAttentionReceivables.bind(it);or.list.bind(or),or.get.bind(or);ur.list.bind(ur),ur.getLatest.bind(ur);const L1={list:at.list.bind(at),get:at.get.bind(at),getDefault:at.getDefault.bind(at),async create(a){const l=await at.create(a);return await I1("businessProfile",l),l},async update(a,l){const c=await at.get(a);await at.update(a,l),await Ho("businessProfile",a,l,c)},async setDefault(a){const c=(await at.list()).find(d=>d.isDefault);await at.setDefault(a),c&&c.id!==a&&await Ho("businessProfile",c.id,{isDefault:!1},c);const u=await at.get(a);u&&await Ho("businessProfile",a,{isDefault:!0},{...u,isDefault:!1})},async archive(a){await at.archive(a),await z1("businessProfile",a)},async delete(a){await at.delete(a),await O1("businessProfile",a)}};Lt.list.bind(Lt),Lt.get.bind(Lt),Lt.getByNumber.bind(Lt);function Ui(a){a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]}),a.invalidateQueries({queryKey:["overviewTotals"]}),a.invalidateQueries({queryKey:["overviewTotalsByCurrency"]}),a.invalidateQueries({queryKey:["attentionReceivables"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}const dt={transactions:a=>["transactions",a],transaction:a=>["transaction",a],overviewTotals:(a,l,c)=>["overviewTotals",{dateFrom:a,dateTo:l,currency:c}],overviewTotalsByCurrency:(a,l)=>["overviewTotalsByCurrency",{dateFrom:a,dateTo:l}],attentionReceivables:a=>["attentionReceivables",{currency:a}],clients:()=>["clients"],client:a=>["client",a],clientSummaries:(a,l)=>["clientSummaries",{currency:a,search:l}],clientSummary:(a,l,c,u)=>["clientSummary",a,{dateFrom:l,dateTo:c,currency:u}],projects:a=>["projects",{clientId:a}],project:a=>["project",a],projectSummaries:(a,l,c)=>["projectSummaries",{currency:a,search:l,field:c}],projectSummary:(a,l,c,u)=>["projectSummary",a,{dateFrom:l,dateTo:c,currency:u}],categories:a=>["categories",{kind:a}],settings:()=>["settings"],fxRate:(a,l)=>["fxRate",a,l],documents:a=>["documents",a],document:a=>["document",a],documentSequences:a=>["documentSequences",a],businessProfiles:()=>["businessProfiles"],businessProfile:a=>["businessProfile",a],defaultBusinessProfile:()=>["defaultBusinessProfile"]};function oh(a){return fe({queryKey:dt.transactions(a),queryFn:()=>it.list(a)})}function wp(a){return fe({queryKey:dt.transaction(a),queryFn:()=>it.get(a),enabled:!!a})}function U1(a,l,c){return fe({queryKey:dt.overviewTotals(a,l,c),queryFn:()=>it.getOverviewTotals({dateFrom:a,dateTo:l,currency:c})})}function q1(a,l){return fe({queryKey:dt.overviewTotalsByCurrency(a,l),queryFn:()=>it.getOverviewTotalsByCurrency({dateFrom:a,dateTo:l})})}function B1(a){return fe({queryKey:dt.attentionReceivables(a),queryFn:()=>it.getAttentionReceivables({currency:a})})}function k1(){const a=ce();return oe({mutationFn:l=>it.create(l),onSuccess:()=>Ui(a)})}function H1(){const a=ce();return oe({mutationFn:({id:l,data:c})=>it.update(l,c),onSuccess:()=>Ui(a)})}function Q1(){const a=ce();return oe({mutationFn:l=>it.markPaid(l),onSuccess:()=>Ui(a)})}function V1(){const a=ce();return oe({mutationFn:l=>it.softDelete(l),onSuccess:()=>Ui(a)})}function xr(){return fe({queryKey:dt.clients(),queryFn:()=>sn.list()})}function Y1(a){return fe({queryKey:dt.client(a),queryFn:()=>sn.get(a),enabled:!!a})}function Ww(a,l){return fe({queryKey:dt.clientSummaries(a,l),queryFn:()=>th.list({currency:a,search:l})})}function ej(a,l){return fe({queryKey:dt.clientSummary(a,l?.dateFrom,l?.dateTo,l?.currency),queryFn:()=>th.get(a,l),enabled:!!a})}function P1(){const a=ce();return oe({mutationFn:l=>sn.create(l),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function K1(){const a=ce();return oe({mutationFn:({id:l,data:c})=>sn.update(l,c),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["client"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}})}function F1(){const a=ce();return oe({mutationFn:l=>sn.archive(l),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function uh(a){return fe({queryKey:dt.projects(a),queryFn:()=>pn.list({clientId:a})})}function G1(a){return fe({queryKey:dt.project(a),queryFn:()=>pn.get(a),enabled:!!a})}function tj(a,l,c){return fe({queryKey:dt.projectSummaries(a,l,c),queryFn:()=>eh.list({currency:a,search:l,field:c})})}function nj(a,l){return fe({queryKey:dt.projectSummary(a,l?.dateFrom,l?.dateTo,l?.currency),queryFn:()=>eh.get(a,l),enabled:!!a})}function Z1(){const a=ce();return oe({mutationFn:l=>pn.create(l),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function X1(){const a=ce();return oe({mutationFn:({id:l,data:c})=>pn.update(l,c),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["project"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]})}})}function J1(){const a=ce();return oe({mutationFn:l=>pn.archive(l),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function aj(){return fe({queryKey:dt.settings(),queryFn:()=>nh.get()})}function ij(){const a=ce();return oe({mutationFn:nh.update,onSuccess:()=>{a.invalidateQueries({queryKey:["settings"]})}})}function qi(a){a.invalidateQueries({queryKey:["documents"]}),a.invalidateQueries({queryKey:["document"]})}function $1(a){return fe({queryKey:dt.documents(a),queryFn:()=>Lt.list(a)})}function jp(a){return fe({queryKey:dt.document(a),queryFn:()=>Lt.get(a),enabled:!!a})}function W1(){const a=ce();return oe({mutationFn:l=>Lt.create(l),onSuccess:()=>{qi(a),Ui(a)}})}function ex(){const a=ce();return oe({mutationFn:({id:l,data:c})=>Lt.update(l,c),onSuccess:()=>qi(a)})}function lj(){const a=ce();return oe({mutationFn:l=>Lt.markPaid(l),onSuccess:()=>{qi(a),Ui(a)}})}function tx(){const a=ce();return oe({mutationFn:l=>Lt.markVoided(l),onSuccess:()=>qi(a)})}function sj(){const a=ce();return oe({mutationFn:l=>Lt.markIssued(l),onSuccess:()=>qi(a)})}function nx(){const a=ce();return oe({mutationFn:l=>Lt.softDelete(l),onSuccess:()=>qi(a)})}function br(a){a.invalidateQueries({queryKey:["businessProfiles"]}),a.invalidateQueries({queryKey:["businessProfile"]}),a.invalidateQueries({queryKey:["defaultBusinessProfile"]})}function Hl(){return fe({queryKey:dt.businessProfiles(),queryFn:()=>at.list()})}function ax(a){return fe({queryKey:dt.businessProfile(a),queryFn:()=>at.get(a),enabled:!!a})}function dh(){return fe({queryKey:dt.defaultBusinessProfile(),queryFn:()=>at.getDefault()})}function fh(){const a=ce();return oe({mutationFn:l=>at.create(l),onSuccess:()=>br(a)})}function ix(){const a=ce();return oe({mutationFn:({id:l,data:c})=>at.update(l,c),onSuccess:()=>br(a)})}function lx(){const a=ce();return oe({mutationFn:l=>at.setDefault(l),onSuccess:()=>br(a)})}function sx(){const a=ce();return oe({mutationFn:l=>L1.archive(l),onSuccess:()=>br(a)})}function rj(a){return fe({queryKey:dt.documentSequences(a),queryFn:()=>lu.listByBusinessProfile(a),enabled:!!a})}function cj(){const a=ce();return oe({mutationFn:({businessProfileId:l,documentType:c,updates:u})=>lu.update(l,c,u),onSuccess:()=>{a.invalidateQueries({queryKey:["documentSequences"]})}})}const Sp=a=>{let l;const c=new Set,u=(m,y)=>{const x=typeof m=="function"?m(l):m;if(!Object.is(x,l)){const b=l;l=y??(typeof x!="object"||x===null)?x:Object.assign({},l,x),c.forEach(N=>N(l,b))}},d=()=>l,g={setState:u,getState:d,getInitialState:()=>p,subscribe:m=>(c.add(m),()=>c.delete(m))},p=l=a(u,d,g);return g},rx=(a=>a?Sp(a):Sp),cx=a=>a;function ox(a,l=cx){const c=Ve.useSyncExternalStore(a.subscribe,Ve.useCallback(()=>l(a.getState()),[a,l]),Ve.useCallback(()=>l(a.getInitialState()),[a,l]));return Ve.useDebugValue(c),c}const Ap=a=>{const l=rx(a),c=u=>ox(l,u);return Object.assign(c,l),c},wr=(a=>a?Ap(a):Ap),yt=wr(a=>({transactionDrawer:{isOpen:!1,mode:"create"},openTransactionDrawer:l=>a({transactionDrawer:{isOpen:!0,mode:l?.mode||"create",transactionId:l?.transactionId,defaultKind:l?.defaultKind,defaultClientId:l?.defaultClientId,defaultProjectId:l?.defaultProjectId,duplicateFromId:l?.duplicateFromId}}),closeTransactionDrawer:()=>a({transactionDrawer:{isOpen:!1,mode:"create"}}),clientDrawer:{isOpen:!1,mode:"create"},openClientDrawer:l=>a({clientDrawer:{isOpen:!0,mode:l?.mode||"create",clientId:l?.clientId}}),closeClientDrawer:()=>a({clientDrawer:{isOpen:!1,mode:"create"}}),projectDrawer:{isOpen:!1,mode:"create"},openProjectDrawer:l=>a({projectDrawer:{isOpen:!0,mode:l?.mode||"create",projectId:l?.projectId,defaultClientId:l?.defaultClientId}}),closeProjectDrawer:()=>a({projectDrawer:{isOpen:!1,mode:"create"}}),documentDrawer:{isOpen:!1,mode:"create"},openDocumentDrawer:l=>a({documentDrawer:{isOpen:!0,mode:l?.mode||"create",documentId:l?.documentId,defaultType:l?.defaultType,defaultClientId:l?.defaultClientId,defaultBusinessProfileId:l?.defaultBusinessProfileId,refDocumentId:l?.refDocumentId}}),closeDocumentDrawer:()=>a({documentDrawer:{isOpen:!1,mode:"create"}}),businessProfileDrawer:{isOpen:!1,mode:"create"},openBusinessProfileDrawer:l=>a({businessProfileDrawer:{isOpen:!0,mode:l?.mode||"create",profileId:l?.profileId}}),closeBusinessProfileDrawer:()=>a({businessProfileDrawer:{isOpen:!1,mode:"create"}}),expenseDrawer:{isOpen:!1,mode:"create"},openExpenseDrawer:l=>a({expenseDrawer:{isOpen:!0,mode:l?.mode||"create",expenseId:l?.expenseId,recurringRuleId:l?.recurringRuleId,defaultProfileId:l?.defaultProfileId,isRecurring:l?.isRecurring,prefillData:l?.prefillData,linkReceiptId:l?.linkReceiptId}}),closeExpenseDrawer:()=>a({expenseDrawer:{isOpen:!1,mode:"create"}}),retainerDrawer:{isOpen:!1,mode:"create"},openRetainerDrawer:l=>a({retainerDrawer:{isOpen:!0,mode:l?.mode||"create",retainerId:l?.retainerId,defaultProfileId:l?.defaultProfileId,defaultClientId:l?.defaultClientId,defaultProjectId:l?.defaultProjectId}}),closeRetainerDrawer:()=>a({retainerDrawer:{isOpen:!1,mode:"create"}}),retainerMatchingDrawer:{isOpen:!1,step:"select-transaction"},openRetainerMatchingDrawer:l=>a({retainerMatchingDrawer:{isOpen:!0,step:l?.step||"select-transaction",transactionId:l?.transactionId,projectedIncomeId:l?.projectedIncomeId}}),closeRetainerMatchingDrawer:()=>a({retainerMatchingDrawer:{isOpen:!1,step:"select-transaction",transactionId:void 0,projectedIncomeId:void 0}}),setRetainerMatchingStep:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,step:l}})),setRetainerMatchingTransaction:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,transactionId:l,step:"select-projected"}})),setRetainerMatchingProjectedIncome:l=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,projectedIncomeId:l}})),selectedRetainerId:void 0,selectRetainer:l=>a({selectedRetainerId:l}),dayDetailDrawer:{isOpen:!1},openDayDetailDrawer:l=>a({dayDetailDrawer:{isOpen:!0,date:l.date}}),closeDayDetailDrawer:()=>a({dayDetailDrawer:{isOpen:!1,date:void 0}})}));wr(a=>({currency:void 0,setCurrency:l=>a({currency:l})}));function ux({collapsed:a=!1}){const l=Fe(),[c,u]=O.useState(!1),d=O.useRef(null),{data:h=[],isLoading:w}=Hl(),{data:g,isLoading:p}=dh(),m=lx(),{openBusinessProfileDrawer:y}=yt(),x=w||p;O.useEffect(()=>{function R(_){d.current&&!d.current.contains(_.target)&&u(!1)}return c&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[c]),O.useEffect(()=>{function R(_){_.key==="Escape"&&u(!1)}return c&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[c]);const b=R=>{m.mutate(R),u(!1)},N=()=>{y({mode:"create"}),u(!1)};if(x)return s.jsx("div",{className:"profile-switcher profile-switcher-loading",children:s.jsx("div",{className:"profile-switcher-skeleton"})});if(h.length===0)return s.jsxs("button",{className:`profile-switcher profile-switcher-empty ${a?"collapsed":""}`,onClick:N,title:a?l("profileSwitcher.setUpBusiness"):void 0,children:[s.jsx("div",{className:"profile-switcher-avatar profile-switcher-avatar-empty",children:s.jsx(Np,{})}),!a&&s.jsx("span",{className:"profile-switcher-name",children:l("profileSwitcher.setUpBusiness")})]});const A=g||h[0];return s.jsxs("div",{className:`profile-switcher-container ${a?"collapsed":""}`,ref:d,children:[s.jsxs("button",{className:`profile-switcher ${a?"collapsed":""}`,onClick:()=>u(!c),"aria-expanded":c,"aria-haspopup":"listbox",title:a?A.name:void 0,children:[s.jsx(Dp,{profile:A}),!a&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"profile-switcher-name",children:A.name}),s.jsx(dx,{className:c?"rotated":""})]})]}),c&&s.jsxs("div",{className:`profile-switcher-dropdown ${a?"collapsed-dropdown":""}`,role:"listbox",children:[s.jsx("div",{className:"profile-switcher-list",children:h.map(R=>s.jsxs("button",{className:`profile-switcher-option ${R.id===A.id?"active":""}`,onClick:()=>b(R.id),role:"option","aria-selected":R.id===A.id,children:[s.jsx(Dp,{profile:R,size:"small"}),s.jsxs("span",{className:"profile-switcher-option-name",children:[R.name,R.nameEn&&s.jsx("span",{className:"profile-switcher-option-name-en",children:R.nameEn})]}),R.id===A.id&&s.jsx(fx,{className:"profile-switcher-check"})]},R.id))}),s.jsx("div",{className:"profile-switcher-divider"}),s.jsxs("button",{className:"profile-switcher-action",onClick:N,children:[s.jsx(Np,{}),l("profileSwitcher.addProfile")]}),s.jsxs(Ul,{to:"/settings",className:"profile-switcher-action",onClick:()=>u(!1),children:[s.jsx(mx,{}),l("profileSwitcher.manageProfiles")]})]})]})}function Dp({profile:a,size:l="medium"}){const c=l==="small"?"profile-switcher-avatar-sm":"";if(a.logoDataUrl)return s.jsx("img",{src:a.logoDataUrl,alt:"",className:`profile-switcher-avatar ${c}`});const u=a.name.split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase();return s.jsx("div",{className:`profile-switcher-avatar profile-switcher-avatar-initials ${c}`,style:{backgroundColor:a.primaryColor||"var(--color-accent)"},children:u})}function dx({className:a}){return s.jsx("svg",{className:`profile-switcher-chevron ${a||""}`,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})}function fx({className:a}){return s.jsx("svg",{className:a,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function Np(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function mx(){return s.jsxs("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}const Mp="sidebarCollapsed";function px(){const[a,l]=O.useState(()=>{try{return localStorage.getItem(Mp)==="1"}catch{return!1}}),c=O.useCallback(()=>{l(u=>{const d=!u;try{localStorage.setItem(Mp,d?"1":"0")}catch{}return d})},[]);return[a,c]}const hx=[{key:"work",labelKey:"nav.sections.work",items:[{path:"/",labelKey:"nav.overview",icon:xx,exact:!0},{path:"/projects",labelKey:"nav.projects",icon:bx},{path:"/clients",labelKey:"nav.clients",icon:mh}]},{key:"money",labelKey:"nav.sections.money",items:[{path:"/transactions",labelKey:"nav.transactions",icon:ph},{path:"/documents",labelKey:"nav.documents",icon:hh},{path:"/retainers",labelKey:"nav.retainers",icon:Sx},{path:"/money-answers",labelKey:"nav.moneyAnswers",icon:Mx},{path:"/expenses",labelKey:"nav.expenses",icon:yh},{path:"/reports",labelKey:"nav.reports",icon:wx}]}],yx=[{path:"/download",labelKey:"nav.download",icon:jx},{path:"/settings",labelKey:"nav.settings",icon:Ax,badge:"hasUpdate"}],gx=[{key:"document",labelKey:"nav.newMenu.document",icon:hh},{key:"transaction",labelKey:"nav.newMenu.transaction",icon:ph},{key:"client",labelKey:"nav.newMenu.client",icon:mh},{key:"expense",labelKey:"nav.newMenu.expense",icon:yh}];function vx(){const a=bv(),l=au(),c=Fe(),{hasUpdate:u}=d1(),[d,h]=px(),[w,g]=O.useState(!1),p=O.useRef(null),m=O.useRef(null),y=yt(L=>L.openDocumentDrawer),x=yt(L=>L.openTransactionDrawer),b=yt(L=>L.openClientDrawer),N=yt(L=>L.openExpenseDrawer);O.useEffect(()=>{if(!w)return;function L(k){p.current&&!p.current.contains(k.target)&&m.current&&!m.current.contains(k.target)&&g(!1)}function M(k){k.key==="Escape"&&(g(!1),m.current?.focus())}return document.addEventListener("mousedown",L),document.addEventListener("keydown",M),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("keydown",M)}},[w]);const A=L=>L.exact?a.pathname===L.path:a.pathname===L.path||a.pathname.startsWith(L.path+"/"),R=L=>{switch(g(!1),L){case"document":y({mode:"create"}),l({to:"/documents"});break;case"transaction":x({mode:"create",defaultKind:"income"});break;case"client":b({mode:"create"});break;case"expense":N({mode:"create"}),l({to:"/expenses"});break}},_=(L,M=!1)=>{const k=L.icon,K=A(L),$=M&&L.badge==="hasUpdate"&&u;return s.jsxs(Ul,{to:L.path,className:se("nav-item",K&&"active"),"aria-current":K?"page":void 0,title:d?c(L.labelKey):void 0,children:[K&&s.jsx("span",{className:"nav-item-rail","aria-hidden":"true"}),s.jsxs("span",{className:"nav-item-icon-wrapper",children:[s.jsx(k,{className:"nav-icon"}),d&&$&&s.jsx("span",{className:"nav-item-dot","aria-label":c("settings.updates.updateAvailable")})]}),!d&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"nav-item-label",children:c(L.labelKey)}),$&&s.jsx("span",{className:"update-indicator"})]})]},L.path)},U=L=>s.jsxs("div",{className:"nav-section",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c(L.labelKey)}),s.jsx("div",{className:"nav-section-items",children:L.items.map(M=>_(M))})]},L.key);return s.jsxs("aside",{className:se("sidebar",d&&"collapsed"),children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsxs(Ul,{to:"/",className:"brand","aria-label":"",children:[s.jsx("img",{className:"brand-mark",src:"/icons/icon-512.png",srcSet:"/icons/icon-512.png 1x, /icons/icon-1024.png 2x",alt:"",width:28,height:28,loading:"eager",decoding:"async"}),!d&&s.jsx("span",{className:"brand-name",lang:"ar",dir:"rtl",children:""})]}),s.jsx("button",{type:"button",className:"sidebar-collapse-toggle",onClick:h,"aria-label":c(d?"nav.expand":"nav.collapse"),title:c(d?"nav.expand":"nav.collapse"),children:s.jsx(Dx,{className:se("nav-icon",d&&"rotated")})})]}),s.jsx("div",{className:"sidebar-profile",children:s.jsx(ux,{collapsed:d})}),s.jsxs("div",{className:"new-action-section",children:[s.jsxs("button",{ref:m,type:"button",className:se("new-action-btn",w&&"active"),onClick:()=>g(!w),title:d?c("nav.new"):void 0,"aria-expanded":w,"aria-haspopup":"menu",children:[s.jsx(Nx,{className:"nav-icon"}),!d&&s.jsx("span",{className:"new-action-label",children:c("nav.new")})]}),w&&s.jsx("div",{ref:p,className:se("new-action-menu",d&&"collapsed-menu"),role:"menu",children:gx.map(L=>{const M=L.icon;return s.jsxs("button",{type:"button",className:"new-action-menu-item",role:"menuitem",onClick:()=>R(L.key),children:[s.jsx(M,{className:"nav-icon"}),s.jsx("span",{children:c(L.labelKey)})]},L.key)})})]}),s.jsx("nav",{className:"sidebar-nav",children:hx.map(U)}),s.jsxs("div",{className:"sidebar-footer",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c("nav.sections.system")}),yx.map(L=>_(L,!0))]}),d&&s.jsx("button",{type:"button",className:"sidebar-expand-toggle",onClick:h,"aria-label":c("nav.expand"),title:c("nav.expand"),children:s.jsx(Cx,{className:"nav-icon"})})]})}function xx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}function bx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function mh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})})}function ph({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}function wx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})})}function hh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function yh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})})}function jx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}function Sx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})}function Ax({className:a}){return s.jsxs("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}function Dx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}function Nx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function Mx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})})}function Cx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})})}const Cp=(a,l,c)=>{if(a&&"reportValidity"in a){const u=Po(c,l);a.setCustomValidity(u&&u.message||""),a.reportValidity()}},$o=(a,l)=>{for(const c in l.fields){const u=l.fields[c];u&&u.ref&&"reportValidity"in u.ref?Cp(u.ref,c,a):u&&u.refs&&u.refs.forEach(d=>Cp(d,c,a))}},Ep=(a,l)=>{l.shouldUseNativeValidation&&$o(a,l);const c={};for(const u in a){const d=Po(l.fields,u),h=Object.assign(a[u]||{},{ref:d&&d.ref});if(Ex(l.names||Object.keys(a),u)){const w=Object.assign({},Po(c,u));zo(w,"root",h),zo(c,u,w)}else zo(c,u,h)}return c},Ex=(a,l)=>{const c=Tp(l);return a.some(u=>Tp(u).match(`^${c}\\.\\d+`))};function Tp(a){return a.replace(/\]|\[/g,"")}function Rp(a,l){try{var c=a()}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}function Tx(a,l){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,w=u.path.join(".");if(!c[w])if("unionErrors"in u){var g=u.unionErrors[0].errors[0];c[w]={message:g.message,type:g.code}}else c[w]={message:h,type:d};if("unionErrors"in u&&u.unionErrors.forEach(function(y){return y.errors.forEach(function(x){return a.push(x)})}),l){var p=c[w].types,m=p&&p[u.code];c[w]=Gp(w,l,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Rx(a,l){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,w=u.path.join(".");if(!c[w])if(u.code==="invalid_union"&&u.errors.length>0){var g=u.errors[0][0];c[w]={message:g.message,type:g.code}}else c[w]={message:h,type:d};if(u.code==="invalid_union"&&u.errors.forEach(function(y){return y.forEach(function(x){return a.push(x)})}),l){var p=c[w].types,m=p&&p[u.code];c[w]=Gp(w,l,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Ya(a,l,c){if(c===void 0&&(c={}),(function(u){return"_def"in u&&typeof u._def=="object"&&"typeName"in u._def})(a))return function(u,d,h){try{return Promise.resolve(Rp(function(){return Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](u,l)).then(function(w){return h.shouldUseNativeValidation&&$o({},h),{errors:{},values:c.raw?Object.assign({},u):w}})},function(w){if((function(g){return Array.isArray(g?.issues)})(w))return{values:{},errors:Ep(Tx(w.errors,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw w}))}catch(w){return Promise.reject(w)}};if((function(u){return"_zod"in u&&typeof u._zod=="object"})(a))return function(u,d,h){try{return Promise.resolve(Rp(function(){return Promise.resolve((c.mode==="sync"?Tv:Rv)(a,u,l)).then(function(w){return h.shouldUseNativeValidation&&$o({},h),{errors:{},values:c.raw?Object.assign({},u):w}})},function(w){if((function(g){return g instanceof _v})(w))return{values:{},errors:Ep(Rx(w.issues,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw w}))}catch(w){return Promise.reject(w)}};throw new Error("Invalid input: not a Zod schema")}function At({title:a,onClose:l,children:c,footer:u}){return O.useEffect(()=>{function d(h){h.key==="Escape"&&l()}return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[l]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-overlay",onClick:l}),s.jsxs("div",{className:"drawer",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"drawer-header",children:[s.jsx("h2",{className:"drawer-title",children:a}),s.jsx("button",{className:"drawer-close",onClick:l,"aria-label":"Close",children:s.jsx(_x,{})})]}),s.jsx("div",{className:"drawer-body",children:c}),u&&s.jsx("div",{className:"drawer-footer",children:u})]})]})}function _x(){return s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}let Ix=0;const gh=wr(a=>({toasts:[],addToast:l=>{const c=`toast-${++Ix}`;return a(u=>({toasts:[...u.toasts,{...l,id:c}]})),c},removeToast:l=>{a(c=>({toasts:c.toasts.filter(u=>u.id!==l)}))}}));function Ox(){const{addToast:a,removeToast:l}=gh();return{showToast:(u,d)=>{const h=d?.duration??(d?.action?5e3:3e3);return a({message:u,action:d?.action,duration:h})},removeToast:l}}const zx=Vn({type:St(["income","receivable","expense"]),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),occurredAt:te().min(1,"Date is required"),clientId:te().optional(),projectId:te().optional(),dueDate:te().optional(),title:te().optional(),notes:te().optional()});function Lx(){const{transactionDrawer:a,closeTransactionDrawer:l}=yt(),{mode:c,transactionId:u,defaultKind:d,defaultClientId:h,defaultProjectId:w,duplicateFromId:g}=a,p=Fe(),{showToast:m}=Ox(),{data:y,isLoading:x}=wp(u||""),{data:b}=wp(g||""),{data:N=[]}=xr(),{data:A=[]}=uh(),R=k1(),_=H1(),U=V1(),L=()=>y?y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income":d==="expense"?"expense":"income",M=Qa({resolver:Ya(zx),defaultValues:{type:L(),amount:"",currency:"USD",occurredAt:Qn(),clientId:h||"",projectId:w||"",dueDate:"",title:"",notes:""}}),{watch:k,setValue:K,reset:$}=M,F=k("type"),X=k("clientId");O.useEffect(()=>{if(y){const le=y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income";$({type:le,amount:(y.amountMinor/100).toString(),currency:y.currency,occurredAt:y.occurredAt.split("T")[0],clientId:y.clientId||"",projectId:y.projectId||"",dueDate:y.dueDate||"",title:y.title||"",notes:y.notes||""})}},[y,$]),O.useEffect(()=>{if(g&&b&&c==="create"){const le=b.kind==="expense"?"expense":"receivable";$({type:le,amount:(b.amountMinor/100).toString(),currency:b.currency,occurredAt:Qn(),clientId:b.clientId||"",projectId:b.projectId||"",dueDate:"",title:b.title||"",notes:b.notes||""})}},[g,b,c,$]);const ue=X?A.filter(le=>le.clientId===X):A,he=async le=>{const ye=le.type==="expense"?"expense":"income",ge=le.type==="receivable"?"unpaid":"paid",q={kind:ye,status:ge,title:le.title||void 0,clientId:le.clientId||void 0,projectId:le.projectId||void 0,amountMinor:zi(le.amount),currency:le.currency,occurredAt:new Date(le.occurredAt).toISOString(),dueDate:le.type==="receivable"&&le.dueDate?le.dueDate:void 0,paidAt:ge==="paid"?new Date().toISOString():void 0,notes:le.notes||void 0};try{if(c==="edit"&&u)await _.mutateAsync({id:u,data:q});else{const Y=await R.mutateAsync(q);g&&Y&&m(p("toast.transactionDuplicated"),{action:{label:p("common.undo"),onClick:()=>{U.mutate(Y.id)}},duration:5e3})}l()}catch(Y){console.error("Failed to save transaction:",Y)}},ne=async()=>{if(u&&confirm(p("transactions.confirmDelete")))try{await U.mutateAsync(u),l()}catch(le){console.error("Failed to delete transaction:",le)}},ve=R.isPending||_.isPending;return c==="edit"&&x?s.jsx(At,{title:p("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:p(c==="edit"?"drawer.transaction.edit":"drawer.transaction.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:ne,disabled:U.isPending,children:p("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:p("common.cancel")}),s.jsx("button",{type:"submit",form:"transaction-form",className:"btn btn-primary",disabled:ve,children:p(ve?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"transaction-form",onSubmit:M.handleSubmit(he),children:[s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="income"&&"active"),onClick:()=>K("type","income"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeIncome")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeIncomeDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="receivable"&&"active"),onClick:()=>K("type","receivable"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeReceivable")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeReceivableDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="expense"&&"active"),onClick:()=>K("type","expense"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeExpense")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeExpenseDesc")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",M.formState.errors.amount&&"input-error"),placeholder:p("drawer.transaction.amountPlaceholder"),...M.register("amount")}),M.formState.errors.amount&&s.jsx("p",{className:"form-error",children:p("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.currency")," *"]}),s.jsx(Ie,{name:"currency",control:M.control,render:({field:le})=>s.jsxs("select",{className:"select",style:{width:"100%"},...le,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.date")," *"]}),s.jsx("input",{type:"date",className:se("input",M.formState.errors.occurredAt&&"input-error"),...M.register("occurredAt")})]}),F==="receivable"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.dueDate")}),s.jsx("input",{type:"date",className:"input",...M.register("dueDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.client")}),s.jsx(Ie,{name:"clientId",control:M.control,render:({field:le})=>s.jsxs("select",{className:"select",style:{width:"100%"},...le,children:[s.jsx("option",{value:"",children:p("drawer.transaction.clientPlaceholder")}),N.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.project")}),s.jsx(Ie,{name:"projectId",control:M.control,render:({field:le})=>s.jsxs("select",{className:"select",style:{width:"100%"},...le,children:[s.jsx("option",{value:"",children:p("drawer.transaction.projectPlaceholder")}),ue.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.title")}),s.jsx("input",{type:"text",className:"input",placeholder:p("drawer.transaction.titlePlaceholder"),...M.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.notes")}),s.jsx("textarea",{className:"textarea",placeholder:p("drawer.transaction.notesPlaceholder"),...M.register("notes")})]})]})})}const Ux=Vn({name:te().min(1,"Name is required"),email:te().email("Invalid email").optional().or(Iv("")),phone:te().optional(),notes:te().optional()});function qx(){const{clientDrawer:a,closeClientDrawer:l}=yt(),{mode:c,clientId:u}=a,d=Fe(),{data:h,isLoading:w}=Y1(u||""),g=P1(),p=K1(),m=F1(),y=Qa({resolver:Ya(Ux),defaultValues:{name:"",email:"",phone:"",notes:""}});O.useEffect(()=>{h&&y.reset({name:h.name,email:h.email||"",phone:h.phone||"",notes:h.notes||""})},[h,y]);const x=async A=>{const R={name:A.name,email:A.email||void 0,phone:A.phone||void 0,notes:A.notes||void 0};try{c==="edit"&&u?await p.mutateAsync({id:u,data:R}):await g.mutateAsync(R),l()}catch(_){console.error("Failed to save client:",_)}},b=async()=>{if(u&&confirm(d("clients.confirmArchive")))try{await m.mutateAsync(u),l()}catch(A){console.error("Failed to archive client:",A)}},N=g.isPending||p.isPending;return c==="edit"&&w?s.jsx(At,{title:d("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:d(c==="edit"?"drawer.client.edit":"drawer.client.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:b,disabled:m.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"client-form",className:"btn btn-primary",disabled:N,children:d(N?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"client-form",onSubmit:y.handleSubmit(x),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[d("drawer.client.name")," *"]}),s.jsx("input",{type:"text",className:se("input",y.formState.errors.name&&"input-error"),placeholder:d("drawer.client.namePlaceholder"),...y.register("name")}),y.formState.errors.name&&s.jsx("p",{className:"form-error",children:d("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.email")}),s.jsx("input",{type:"email",className:se("input",y.formState.errors.email&&"input-error"),placeholder:d("drawer.client.emailPlaceholder"),...y.register("email")}),y.formState.errors.email&&s.jsx("p",{className:"form-error",children:y.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.phone")}),s.jsx("input",{type:"tel",className:"input",placeholder:d("drawer.client.phonePlaceholder"),...y.register("phone")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.notes")}),s.jsx("textarea",{className:"textarea",placeholder:d("drawer.client.notesPlaceholder"),...y.register("notes")})]})]})})}const Bx=["design","development","consulting","marketing","legal","maintenance","other"],kx=Vn({name:te().min(1,"Name is required"),clientId:te().optional(),field:te().optional(),notes:te().optional()});function Hx(){const{projectDrawer:a,closeProjectDrawer:l}=yt(),{mode:c,projectId:u,defaultClientId:d}=a,h=Fe(),{data:w,isLoading:g}=G1(u||""),{data:p=[]}=xr(),m=Z1(),y=X1(),x=J1(),b=Qa({resolver:Ya(kx),defaultValues:{name:"",clientId:d||"",field:"",notes:""}});O.useEffect(()=>{w&&b.reset({name:w.name,clientId:w.clientId||"",field:w.field||"",notes:w.notes||""})},[w,b]);const N=async _=>{const U={name:_.name,clientId:_.clientId||void 0,field:_.field||void 0,notes:_.notes||void 0};try{c==="edit"&&u?await y.mutateAsync({id:u,data:U}):await m.mutateAsync(U),l()}catch(L){console.error("Failed to save project:",L)}},A=async()=>{if(u&&confirm(h("projects.confirmArchive")))try{await x.mutateAsync(u),l()}catch(_){console.error("Failed to archive project:",_)}},R=m.isPending||y.isPending;return c==="edit"&&g?s.jsx(At,{title:h("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:h(c==="edit"?"drawer.project.edit":"drawer.project.new"),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:A,disabled:x.isPending,children:h("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:h("common.cancel")}),s.jsx("button",{type:"submit",form:"project-form",className:"btn btn-primary",disabled:R,children:h(R?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"project-form",onSubmit:b.handleSubmit(N),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[h("drawer.project.name")," *"]}),s.jsx("input",{type:"text",className:se("input",b.formState.errors.name&&"input-error"),placeholder:h("drawer.project.namePlaceholder"),...b.register("name")}),b.formState.errors.name&&s.jsx("p",{className:"form-error",children:h("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.client")}),s.jsx(Ie,{name:"clientId",control:b.control,render:({field:_})=>s.jsxs("select",{className:"select",style:{width:"100%"},..._,children:[s.jsx("option",{value:"",children:h("drawer.project.clientPlaceholder")}),p.map(U=>s.jsx("option",{value:U.id,children:U.name},U.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.field")}),s.jsx(Ie,{name:"field",control:b.control,render:({field:_})=>s.jsxs("select",{className:"select",style:{width:"100%"},..._,children:[s.jsx("option",{value:"",children:h("drawer.project.fieldPlaceholder")}),Bx.map(U=>{const L=U.charAt(0).toUpperCase()+U.slice(1);return s.jsx("option",{value:L,children:h(`projects.fields.${U}`)},U)})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.notes")}),s.jsx("textarea",{className:"textarea",placeholder:h("drawer.project.notesPlaceholder"),...b.register("notes")})]})]})})}const Qx=Vn({name:te().min(1,"Business name is required"),nameEn:te().optional(),email:te().email("Invalid email"),phone:te().optional(),taxId:te().optional(),businessType:St(["exempt","authorized","company","lawyer","none"]),address1:te().optional(),address1En:te().optional(),city:te().optional(),cityEn:te().optional(),country:te().optional(),countryEn:te().optional(),postalCode:te().optional(),primaryColor:te().optional(),defaultCurrency:St(["USD","ILS"]),defaultLanguage:St(["ar","en"]),isDefault:iu()}),Vx=[{value:"none",label:"Individual / Freelancer"},{value:"exempt",label:"Exempt Dealer"},{value:"authorized",label:"Authorized Dealer"},{value:"company",label:"Company / Corporation"},{value:"lawyer",label:"Lawyer / Law Firm"}];function Yx(){const{businessProfileDrawer:a,closeBusinessProfileDrawer:l}=yt(),{mode:c,profileId:u}=a,d=Fe(),h=O.useRef(null),[w,g]=O.useState(null),{data:p,isLoading:m}=ax(u||""),y=fh(),x=ix(),b=sx(),N=Qa({resolver:Ya(Qx),defaultValues:{name:"",nameEn:"",email:"",phone:"",taxId:"",businessType:"none",address1:"",address1En:"",city:"",cityEn:"",country:"",countryEn:"",postalCode:"",primaryColor:"#3b82f6",defaultCurrency:"USD",defaultLanguage:"en",isDefault:!1}});O.useEffect(()=>{p&&(N.reset({name:p.name,nameEn:p.nameEn||"",email:p.email,phone:p.phone||"",taxId:p.taxId||"",businessType:p.businessType,address1:p.address1||"",address1En:p.address1En||"",city:p.city||"",cityEn:p.cityEn||"",country:p.country||"",countryEn:p.countryEn||"",postalCode:p.postalCode||"",primaryColor:p.primaryColor||"#3b82f6",defaultCurrency:p.defaultCurrency,defaultLanguage:p.defaultLanguage,isDefault:p.isDefault}),p.logoDataUrl&&g(p.logoDataUrl))},[p,N]);const A=L=>{const M=L.target.files?.[0];if(!M)return;const k=new FileReader;k.onloadend=()=>{const K=k.result;g(K)},k.readAsDataURL(M)},R=async L=>{const M={name:L.name,nameEn:L.nameEn||void 0,email:L.email,phone:L.phone||void 0,taxId:L.taxId||void 0,businessType:L.businessType,address1:L.address1||void 0,address1En:L.address1En||void 0,city:L.city||void 0,cityEn:L.cityEn||void 0,country:L.country||void 0,countryEn:L.countryEn||void 0,postalCode:L.postalCode||void 0,logoDataUrl:w||void 0,primaryColor:L.primaryColor||void 0,defaultCurrency:L.defaultCurrency,defaultLanguage:L.defaultLanguage,isDefault:L.isDefault};try{c==="edit"&&u?await x.mutateAsync({id:u,data:M}):await y.mutateAsync(M),l()}catch(k){console.error("Failed to save business profile:",k)}},_=async()=>{if(u&&confirm("Are you sure you want to archive this business profile?"))try{await b.mutateAsync(u),l()}catch(L){console.error("Failed to archive profile:",L)}},U=y.isPending||x.isPending;return c==="edit"&&m?s.jsx(At,{title:d("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:c==="edit"?"Edit Business Profile":"New Business Profile",onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&!p?.isDefault&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:_,disabled:b.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"business-profile-form",className:"btn btn-primary",disabled:U,children:d(U?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"business-profile-form",onSubmit:N.handleSubmit(R),children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Logo"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[w?s.jsx("img",{src:w,alt:"Logo preview",style:{width:64,height:64,objectFit:"contain",borderRadius:4}}):s.jsx("div",{style:{width:64,height:64,backgroundColor:"var(--color-bg-secondary)",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-tertiary)",fontSize:12},children:"No logo"}),s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h.current?.click(),children:w?"Change":"Upload"}),w&&s.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>g(null),children:"Remove"})]}),s.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:A,style:{display:"none"}})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (Arabic) *"}),s.jsx("input",{type:"text",className:se("input",N.formState.errors.name&&"input-error"),placeholder:" ",dir:"rtl",...N.register("name")}),N.formState.errors.name&&s.jsx("p",{className:"form-error",children:N.formState.errors.name.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"Company Name",...N.register("nameEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Email *"}),s.jsx("input",{type:"email",className:se("input",N.formState.errors.email&&"input-error"),placeholder:"email@example.com",...N.register("email")}),N.formState.errors.email&&s.jsx("p",{className:"form-error",children:N.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Phone"}),s.jsx("input",{type:"tel",className:"input",placeholder:"+972 50 000 0000",...N.register("phone")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Type"}),s.jsx("select",{className:"select",...N.register("businessType"),children:Vx.map(L=>s.jsx("option",{value:L.value,children:L.label},L.value))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Tax ID"}),s.jsx("input",{type:"text",className:"input",placeholder:"Tax/VAT Number",...N.register("taxId")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...N.register("address1")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"123 Main St",...N.register("address1En")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...N.register("city")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"City",...N.register("cityEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Currency"}),s.jsxs("select",{className:"select",...N.register("defaultCurrency"),children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Language"}),s.jsxs("select",{className:"select",...N.register("defaultLanguage"),children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brand Color"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("input",{type:"color",style:{width:40,height:32,padding:0,border:"none",cursor:"pointer"},...N.register("primaryColor")}),s.jsx("input",{type:"text",className:"input",style:{width:120},placeholder:"#3b82f6",...N.register("primaryColor")})]})]}),s.jsx("div",{className:"form-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",...N.register("isDefault")}),s.jsx("span",{children:"Set as default profile"})]})})]})})}const Px="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Kx=(a=21)=>{let l="",c=crypto.getRandomValues(new Uint8Array(a|=0));for(;a--;)l+=Px[c[a]&63];return l};const Fx=[{value:"invoice",label:"Invoice",labelAr:""},{value:"receipt",label:"Receipt",labelAr:""},{value:"invoice_receipt",label:"Invoice Receipt",labelAr:" "},{value:"credit_note",label:"Credit Note",labelAr:" "},{value:"price_offer",label:"Price Offer",labelAr:" "},{value:"proforma_invoice",label:"Proforma Invoice",labelAr:" "},{value:"donation_receipt",label:"Donation Receipt",labelAr:" "}],Gx=[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cheque",label:"Cheque"},{value:"credit_card",label:"Credit Card"},{value:"other",label:"Other"}],Zx=[{value:"template1",label:"Classic"},{value:"template2",label:"Modern"},{value:"template3",label:"Minimal"}],Xx=Vn({name:te().min(1,"Item name is required"),quantity:Oi().min(.01,"Quantity must be positive"),rateMinor:Oi().min(0,"Rate must be non-negative"),discountMinor:Oi().min(0).default(0),taxExempt:iu().default(!1)}),Jx=Vn({id:te(),amountMinor:Oi().min(0),currency:St(["USD","ILS"]),method:St(["cash","bank_transfer","cheque","credit_card","other"]),notes:te().optional(),paidAt:te()}),$x=Vn({type:St(["invoice","receipt","invoice_receipt","credit_note","price_offer","proforma_invoice","donation_receipt"]),number:te().optional(),businessProfileId:te().min(1,"Business profile is required"),clientId:te().optional(),subject:te().optional(),brief:te().optional(),notes:te().optional(),currency:St(["USD","ILS"]),language:St(["ar","en"]),templateId:te(),issueDate:te().min(1,"Issue date is required"),dueDate:te().optional(),taxRate:Oi().min(0).max(1),vatEnabled:iu().default(!0),items:dp(Xx).min(1,"At least one item is required"),payments:dp(Jx).optional(),refDocumentId:te().optional()});function Qo(a){return a.quantity*a.rateMinor-a.discountMinor}function _i(a,l){return(a/100).toLocaleString("en-US",{style:"currency",currency:l,minimumFractionDigits:2})}function Wx(){const{documentDrawer:a,closeDocumentDrawer:l}=yt(),{mode:c,documentId:u,defaultType:d,defaultClientId:h,defaultBusinessProfileId:w,refDocumentId:g}=a,p=Fe(),{data:m,isLoading:y}=jp(u||""),{data:x=[]}=xr(),{data:b=[]}=Hl(),{data:N}=dh(),{data:A}=jp(g||""),{data:R=[]}=$1({}),_=W1(),U=ex(),L=nx(),M=tx(),k=()=>m?m.businessProfileId:w||(N?N.id:b.length>0?b[0].id:""),K=Qa({resolver:Ya($x),defaultValues:{type:d||"invoice",number:"",businessProfileId:k(),clientId:h||"",subject:"",brief:"",notes:"",currency:"USD",language:"en",templateId:"template1",issueDate:Qn(),dueDate:"",taxRate:.18,vatEnabled:!0,items:[{name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1}],payments:[],refDocumentId:g||""}}),{watch:$,setValue:F,reset:X,control:ue}=K,he=$("type"),ne=$("currency"),ve=$("taxRate"),le=$("vatEnabled"),ye=$("items"),ge=$("payments")||[],{fields:q,append:Y,remove:ae}=fp({control:ue,name:"items"}),{fields:xe,append:G,remove:be}=fp({control:ue,name:"payments"}),Z=JSON.stringify(ye),V=O.useMemo(()=>{const P=ye||[],de=P.reduce((un,Le)=>un+Qo(Le),0);let et=0;if(le){const un=P.reduce((Le,Pl)=>Pl.taxExempt?Le:Le+Qo(Pl),0);et=Math.round(un*ve)}const lt=de+et;return{subtotal:de,tax:et,total:lt}},[Z,ve,le]),W=O.useMemo(()=>ge.reduce((P,de)=>P+(de.amountMinor||0),0),[ge]);O.useEffect(()=>{m&&X({type:m.type,number:m.number,businessProfileId:m.businessProfileId,clientId:m.clientId||"",subject:m.subject||"",brief:m.brief||"",notes:m.notes||"",currency:m.currency,language:m.language,templateId:m.templateId,issueDate:m.issueDate.split("T")[0],dueDate:m.dueDate||"",taxRate:m.taxRate,vatEnabled:m.vatEnabled??!0,items:m.items.map(P=>({name:P.name,quantity:P.quantity,rateMinor:P.rateMinor,discountMinor:P.discountMinor,taxExempt:P.taxExempt})),payments:m.payments.map(P=>({id:P.id,amountMinor:P.amountMinor,currency:P.currency,method:P.method,notes:P.notes||"",paidAt:P.paidAt.split("T")[0]})),refDocumentId:m.refDocumentId||""})},[m,X]),O.useEffect(()=>{const P=K.getValues("businessProfileId"),de=b.find(et=>et.id===P);de&&c==="create"&&!m&&(F("currency",de.defaultCurrency),F("language",de.defaultLanguage))},[K.watch("businessProfileId"),b,c,m,F]),O.useEffect(()=>{A&&c==="create"&&he==="credit_note"&&(F("businessProfileId",A.businessProfileId),F("clientId",A.clientId||""),F("currency",A.currency),F("language",A.language),F("templateId",A.templateId),F("taxRate",A.taxRate),F("items",A.items.map(P=>({name:P.name,quantity:P.quantity,rateMinor:P.rateMinor,discountMinor:P.discountMinor,taxExempt:P.taxExempt}))))},[A,c,he,F]);const gt=async P=>{const de=P.items.map(Le=>({name:Le.name,quantity:Le.quantity,rateMinor:Le.rateMinor,rateVatMinor:Le.taxExempt?Le.rateMinor:Math.round(Le.rateMinor*(1+P.taxRate)),discountMinor:Le.discountMinor,taxExempt:Le.taxExempt})),et=(P.payments||[]).map(Le=>({id:Le.id,amountMinor:Le.amountMinor,currency:Le.currency,method:Le.method,notes:Le.notes,paidAt:new Date(Le.paidAt).toISOString()}));let lt="draft";he==="receipt"||he==="invoice_receipt"||he==="donation_receipt"?lt="paid":(he==="price_offer"||he==="proforma_invoice")&&(lt="issued");const un={type:P.type,status:lt,businessProfileId:P.businessProfileId,clientId:P.clientId||void 0,subject:P.subject||void 0,brief:P.brief||void 0,notes:P.notes||void 0,items:de,payments:et,subtotalMinor:V.subtotal,discountMinor:0,taxMinor:V.tax,totalMinor:V.total,taxRate:P.taxRate,vatEnabled:P.vatEnabled,currency:P.currency,language:P.language,issueDate:new Date(P.issueDate).toISOString(),dueDate:P.dueDate?P.dueDate:void 0,paidAt:lt==="paid"?new Date().toISOString():void 0,refDocumentId:P.refDocumentId||void 0,linkedTransactionIds:m?.linkedTransactionIds||[],templateId:P.templateId};try{if(c==="edit"&&u){const Le=m?.status==="draft"&&P.number&&P.number!==m.number?{...un,number:P.number}:un;await U.mutateAsync({id:u,data:Le})}else await _.mutateAsync(un);l()}catch(Le){console.error("Failed to save document:",Le)}},Mt=async()=>{if(u&&confirm("Are you sure you want to delete this document?"))try{await L.mutateAsync(u),l()}catch(P){console.error("Failed to delete document:",P)}},cn=async()=>{if(u&&confirm("Are you sure you want to void this document? This action cannot be undone."))try{await M.mutateAsync(u),l()}catch(P){console.error("Failed to void document:",P)}},Kn=()=>{Y({name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1})},Ct=()=>{G({id:Kx(),amountMinor:V.total-W,currency:ne,method:"cash",notes:"",paidAt:Qn()})},Fn=_.isPending||U.isPending,vn=he==="receipt"||he==="invoice_receipt"||he==="donation_receipt",Sn=he==="invoice"||he==="proforma_invoice",Fa=he==="credit_note",on=R.filter(P=>P.status!=="voided"&&(P.type==="invoice"||P.type==="invoice_receipt"));if(c==="edit"&&y)return s.jsx(At,{title:p("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});if(b.length===0)return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:l,children:s.jsxs("div",{className:"document-guard",children:[s.jsx("div",{className:"document-guard-icon",children:s.jsx(eb,{})}),s.jsx("h3",{className:"document-guard-title",children:p("documentGuard.title")}),s.jsx("p",{className:"document-guard-description",children:p("documentGuard.description")}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{l();const{openBusinessProfileDrawer:P}=yt.getState();P({mode:"create"})},children:p("documentGuard.createProfile")})]})});const we=c==="edit"&&m&&m.status!=="draft";return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"drawer-footer-left",children:[c==="edit"&&m?.status==="draft"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:Mt,disabled:L.isPending,children:p("common.delete")}),c==="edit"&&m?.status==="issued"&&s.jsx("button",{type:"button",className:"btn btn-warning",onClick:cn,disabled:M.isPending,children:"Void Document"})]}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:p("common.cancel")}),!we&&s.jsx("button",{type:"submit",form:"document-form",className:"btn btn-primary",disabled:Fn,children:p(Fn?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"document-form",onSubmit:K.handleSubmit(gt),children:[we&&s.jsxs("div",{className:"alert alert-info",style:{marginBottom:16},children:["This document is ",m?.status," and cannot be edited."]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Type *"}),s.jsx("div",{className:"document-type-grid",children:Fx.map(P=>s.jsx("button",{type:"button",className:se("document-type-btn",he===P.value&&"active"),onClick:()=>!we&&F("type",P.value),disabled:we,children:P.label},P.value))})]}),c==="edit"&&m&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Number"}),s.jsx("input",{type:"text",className:"input",...K.register("number"),disabled:we,placeholder:"e.g., INV-0001"}),s.jsx("p",{className:"form-hint",children:we?"Document numbers can only be changed for draft documents.":"You can manually change the document number. Must be unique."})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Profile *"}),s.jsx(Ie,{name:"businessProfileId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:we,children:[s.jsx("option",{value:"",children:"Select profile..."}),b.map(de=>s.jsxs("option",{value:de.id,children:[de.name," ",de.nameEn?`(${de.nameEn})`:"",de.isDefault?" - Default":""]},de.id))]})}),K.formState.errors.businessProfileId&&s.jsx("p",{className:"form-error",children:K.formState.errors.businessProfileId.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Client"}),s.jsx(Ie,{name:"clientId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:we,children:[s.jsx("option",{value:"",children:"No client"}),x.map(de=>s.jsx("option",{value:de.id,children:de.name},de.id))]})})]})]}),Fa&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Reference Document *"}),s.jsx(Ie,{name:"refDocumentId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:we,children:[s.jsx("option",{value:"",children:"Select original document..."}),on.map(de=>s.jsxs("option",{value:de.id,children:[de.number," - ",_i(de.totalMinor,de.currency)]},de.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Subject"}),s.jsx("input",{type:"text",className:"input",placeholder:"Document subject...",...K.register("subject"),disabled:we})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brief Description"}),s.jsx("textarea",{className:"textarea",placeholder:"Brief description...",rows:2,...K.register("brief"),disabled:we})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Currency *"}),s.jsx(Ie,{name:"currency",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:we,children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Language *"}),s.jsx(Ie,{name:"language",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:we,children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Template"}),s.jsx(Ie,{name:"templateId",control:ue,render:({field:P})=>s.jsx("select",{className:"select",...P,disabled:we,children:Zx.map(de=>s.jsx("option",{value:de.value,children:de.label},de.value))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Issue Date *"}),s.jsx("input",{type:"date",className:se("input",K.formState.errors.issueDate&&"input-error"),...K.register("issueDate"),disabled:we})]}),Sn&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Due Date"}),s.jsx("input",{type:"date",className:"input",...K.register("dueDate"),disabled:we})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"VAT"}),s.jsxs("div",{className:"vat-toggle-row",children:[s.jsx(Ie,{name:"vatEnabled",control:ue,render:({field:P})=>s.jsxs("label",{className:"toggle-label",children:[s.jsx("input",{type:"checkbox",checked:P.value,onChange:de=>{P.onChange(de.target.checked),de.target.checked&&ve===0&&F("taxRate",.18)},disabled:we}),s.jsx("span",{children:"Enable VAT"})]})}),le&&s.jsx(Ie,{name:"taxRate",control:ue,render:({field:P})=>s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"input input-sm",style:{width:80},value:P.value*100,onChange:de=>P.onChange(parseFloat(de.target.value)/100||0),disabled:we})}),le&&s.jsx("span",{className:"text-muted",children:"%"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Line Items"}),!we&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Kn,children:"+ Add Item"})]}),q.map((P,de)=>s.jsxs("div",{className:"line-item-row",children:[s.jsx("div",{className:"line-item-main",children:s.jsx("input",{type:"text",className:"input",placeholder:"Item name",...K.register(`items.${de}.name`),disabled:we})}),s.jsx("div",{className:"line-item-qty",children:s.jsx(Ie,{name:`items.${de}.quantity`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"input",placeholder:"Qty",value:et.value,onChange:lt=>et.onChange(parseFloat(lt.target.value)||0),disabled:we})})}),s.jsx("div",{className:"line-item-rate",children:s.jsx(Ie,{name:`items.${de}.rateMinor`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Rate",value:et.value/100,onChange:lt=>et.onChange(Math.round(parseFloat(lt.target.value)*100)||0),disabled:we})})}),s.jsx("div",{className:"line-item-total",children:_i(Qo(ye[de]||{quantity:0,rateMinor:0,discountMinor:0}),ne)}),!we&&q.length>1&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>ae(de),title:"Remove item",children:""})]},P.id)),K.formState.errors.items&&s.jsx("p",{className:"form-error",children:"At least one item is required"})]}),s.jsxs("div",{className:"totals-section",children:[s.jsxs("div",{className:"totals-row",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:_i(V.subtotal,ne)})]}),le&&s.jsxs("div",{className:"totals-row",children:[s.jsxs("span",{children:["VAT (",(ve*100).toFixed(0),"%)"]}),s.jsx("span",{children:_i(V.tax,ne)})]}),s.jsxs("div",{className:"totals-row totals-total",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:_i(V.total,ne)})]})]}),vn&&s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Payment Details"}),!we&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Ct,children:"+ Add Payment"})]}),xe.map((P,de)=>s.jsxs("div",{className:"payment-row",children:[s.jsx("div",{className:"payment-method",children:s.jsx(Ie,{name:`payments.${de}.method`,control:ue,render:({field:et})=>s.jsx("select",{className:"select",...et,disabled:we,children:Gx.map(lt=>s.jsx("option",{value:lt.value,children:lt.label},lt.value))})})}),s.jsx("div",{className:"payment-amount",children:s.jsx(Ie,{name:`payments.${de}.amountMinor`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Amount",value:(et.value??0)/100,onChange:lt=>et.onChange(Math.round(parseFloat(lt.target.value)*100)||0),disabled:we})})}),s.jsx("div",{className:"payment-date",children:s.jsx("input",{type:"date",className:"input",...K.register(`payments.${de}.paidAt`),disabled:we})}),!we&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>be(de),title:"Remove payment",children:""})]},P.id)),xe.length>0&&s.jsxs("div",{className:"totals-row",style:{marginTop:8},children:[s.jsx("span",{children:"Total Paid"}),s.jsx("span",{children:_i(W,ne)})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Notes"}),s.jsx("textarea",{className:"textarea",placeholder:"Additional notes (will appear on document)...",rows:3,...K.register("notes"),disabled:we})]})]})})}function eb(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const tb=["llc","inc","inc.","ltd","ltd.","corp","corp.","corporation","company","co","co.","llp","plc","gmbh","ag","sa","sarl","",'"',""],nb=["the"];function ka(a){if(!a)return"";let l=a.toLowerCase().trim().replace(/[.,;:!?'"()[\]{}@#$%^&*+=<>\\|`~]/g,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();for(const c of tb){const u=new RegExp(`\\s+${_p(c)}$`,"i");l=l.replace(u,"")}for(const c of nb){const u=new RegExp(`^${_p(c)}\\s+`,"i");l=l.replace(u,"")}return l.trim()}function ab(a,l){if(a.length===0)return l.length;if(l.length===0)return a.length;const c=[];for(let u=0;u<=l.length;u++)c[u]=[u];for(let u=0;u<=a.length;u++)c[0][u]=u;for(let u=1;u<=l.length;u++)for(let d=1;d<=a.length;d++)l.charAt(u-1)===a.charAt(d-1)?c[u][d]=c[u-1][d-1]:c[u][d]=Math.min(c[u-1][d-1]+1,c[u][d-1]+1,c[u-1][d]+1);return c[l.length][a.length]}function ql(a,l){const c=ka(a),u=ka(l);if(c===u)return 1;if(!c||!u)return 0;const d=ab(c,u),h=Math.max(c.length,u.length);return 1-d/h}function _p(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ib(a){const l=ka(a);return l?l.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "):""}function Bi(){return crypto.randomUUID()}function Ke(){return new Date().toISOString()}const gn={async list(a={}){const l=await j.expenses.toArray(),c=await j.expenseCategories.toArray(),u=await j.receipts.toArray(),d=new Map(c.map(m=>[m.id,m])),h=new Map;u.forEach(m=>{m.expenseId&&h.set(m.expenseId,(h.get(m.expenseId)||0)+1)});let w=l.filter(m=>{if(!a.includeDeleted&&m.deletedAt||a.profileId&&m.profileId!==a.profileId||a.categoryId&&m.categoryId!==a.categoryId||a.currency&&m.currency!==a.currency||a.year&&new Date(m.occurredAt).getFullYear()!==a.year||a.month&&new Date(m.occurredAt).getMonth()+1!==a.month)return!1;if(a.search){const y=a.search.toLowerCase(),x=m.categoryId?d.get(m.categoryId)?.name:"";if(!(m.title?.toLowerCase().includes(y)||m.vendor?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||x?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"occurredAt",p=a.sort?.dir||"desc";return w.sort((m,y)=>{const x=m[g],b=y[g];return typeof x=="string"&&typeof b=="string"?p==="asc"?x.localeCompare(b):b.localeCompare(x):typeof x=="number"&&typeof b=="number"?p==="asc"?x-b:b-x:0}),a.offset&&(w=w.slice(a.offset)),a.limit&&(w=w.slice(0,a.limit)),w.map(m=>{const y=m.categoryId?d.get(m.categoryId):void 0;return{...m,categoryName:y?.name,categoryColor:y?.color,receiptCount:h.get(m.id)||0,isFromRecurring:!!m.recurringRuleId}})},async get(a){return j.expenses.get(a)},async create(a){const l=Ke(),c={...a,id:Bi(),createdAt:l,updatedAt:l};return await j.expenses.add(c),c},async update(a,l){await j.expenses.update(a,{...l,updatedAt:Ke()})},async softDelete(a){await j.expenses.update(a,{deletedAt:Ke(),updatedAt:Ke()})},async delete(a){await j.expenses.delete(a)},async getYearlyTotals(a,l){const c=await j.expenses.where("profileId").equals(a).filter(g=>g.deletedAt?!1:new Date(g.occurredAt).getFullYear()===l).toArray();let u=0,d=0;const h=new Map;for(let g=1;g<=12;g++)h.set(g,{USD:0,ILS:0});c.forEach(g=>{const p=new Date(g.occurredAt).getMonth()+1,m=h.get(p);g.currency==="USD"?(u+=g.amountMinor,m.USD+=g.amountMinor):(d+=g.amountMinor,m.ILS+=g.amountMinor)});const w=[];for(let g=1;g<=12;g++){const p=h.get(g);w.push({month:g,totalMinorUSD:p.USD,totalMinorILS:p.ILS})}return{totalMinorUSD:u,totalMinorILS:d,byMonth:w}},async getAllProfilesTotals(a){const l=await j.businessProfiles.filter(u=>!u.archivedAt).toArray(),c=[];for(const u of l){const d=await this.getYearlyTotals(u.id,a);c.push({profileId:u.id,profileName:u.name,year:a,totalMinorUSD:d.totalMinorUSD,totalMinorILS:d.totalMinorILS,monthlyBreakdown:d.byMonth})}return c},async getReceiptCount(a){return j.receipts.where("expenseId").equals(a).count()}},Pn={async list(a){let l=j.recurringRules.toCollection();return a&&(l=j.recurringRules.where("profileId").equals(a)),l.toArray()},async listActive(a){return(await this.list(a)).filter(c=>!c.isPaused)},async get(a){return j.recurringRules.get(a)},async create(a){const l=Ke(),c={...a,id:Bi(),createdAt:l,updatedAt:l};return await j.recurringRules.add(c),c},async update(a,l){await j.recurringRules.update(a,{...l,updatedAt:Ke()})},async pause(a){await j.recurringRules.update(a,{isPaused:!0,updatedAt:Ke()})},async resume(a){await j.recurringRules.update(a,{isPaused:!1,updatedAt:Ke()})},async delete(a){await j.recurringRules.delete(a)}},yn={async list(a={}){let l=await j.receipts.toArray();return l=l.filter(c=>!(a.profileId&&c.profileId!==a.profileId||a.expenseId&&c.expenseId!==a.expenseId||a.monthKey&&c.monthKey!==a.monthKey||a.unlinkedOnly&&c.expenseId)),l.sort((c,u)=>u.createdAt.localeCompare(c.createdAt)),a.offset&&(l=l.slice(a.offset)),a.limit&&(l=l.slice(0,a.limit)),l},async get(a){return j.receipts.get(a)},async create(a){const l=Ke(),c={...a,id:Bi(),createdAt:l,updatedAt:l};return await j.receipts.add(c),c},async update(a,l){await j.receipts.update(a,{...l,updatedAt:Ke()})},async delete(a){await j.receipts.delete(a)},async linkToExpense(a,l){const c=await gn.get(l),u=c?c.occurredAt.substring(0,7):new Date().toISOString().substring(0,7);await j.receipts.update(a,{expenseId:l,monthKey:u,updatedAt:Ke()})},async unlinkFromExpense(a){await j.receipts.update(a,{expenseId:void 0,updatedAt:Ke()})},async getUnlinkedByProfile(a){return j.receipts.where("profileId").equals(a).filter(l=>!l.expenseId).toArray()},async getByProfileAndMonth(a,l){return j.receipts.where("profileId").equals(a).filter(c=>c.monthKey===l).toArray()},async getLinkedByProfileAndMonth(a,l){return j.receipts.where("profileId").equals(a).filter(c=>c.monthKey===l&&!!c.expenseId).toArray()}},vh={async list(a){return j.expenseCategories.where("profileId").equals(a).sortBy("name")},async get(a){return j.expenseCategories.get(a)},async create(a){const l={...a,id:Bi()};return await j.expenseCategories.add(l),l},async update(a,l){await j.expenseCategories.update(a,l)},async delete(a){await j.expenseCategories.delete(a)}},xh={async list(a){return j.vendors.where("profileId").equals(a).sortBy("canonicalName")},async get(a){return j.vendors.get(a)},async create(a){const l=Ke(),c={...a,id:Bi(),createdAt:l,updatedAt:l};return await j.vendors.add(c),c},async update(a,l){await j.vendors.update(a,{...l,updatedAt:Ke()})},async delete(a){const l=await j.expenses.where("vendorId").equals(a).toArray();for(const u of l)await j.expenses.update(u.id,{vendorId:void 0,updatedAt:Ke()});const c=await j.receipts.where("vendorId").equals(a).toArray();for(const u of c)await j.receipts.update(u.id,{vendorId:void 0,updatedAt:Ke()});await j.vendors.delete(a)},async findByAlias(a,l){if(!l)return;const c=ka(l);if(!c)return;const u=await this.list(a),d=u.find(h=>ka(h.canonicalName)===c);if(d)return d;for(const h of u)if(h.aliases.map(g=>ka(g)).includes(c))return h;for(const h of u){if(ql(l,h.canonicalName)>=.85)return h;for(const g of h.aliases)if(ql(l,g)>=.85)return h}},async findOrCreate(a,l){const c=await this.findByAlias(a,l);return c||this.create({profileId:a,canonicalName:ib(l),aliases:[l]})},async mergeVendors(a,l){const c=await this.get(a),u=await this.get(l);if(!c||!u)return;const d=[...new Set([...c.aliases,...u.aliases,u.canonicalName])];await this.update(a,{aliases:d});const h=await j.expenses.where("vendorId").equals(l).toArray();for(const g of h)await j.expenses.update(g.id,{vendorId:a,updatedAt:Ke()});const w=await j.receipts.where("vendorId").equals(l).toArray();for(const g of w)await j.receipts.update(g.id,{vendorId:a,updatedAt:Ke()});await j.vendors.delete(l)},async addAlias(a,l){const c=await this.get(a);c&&(c.aliases.includes(l)||await this.update(a,{aliases:[...c.aliases,l]}))}},Ql={async get(a){return j.monthCloseStatuses.get(a)},async getByProfileAndMonth(a,l){const c=`${a}:${l}`;return this.get(c)},async getOrCreate(a,l){const c=`${a}:${l}`,u=await this.get(c);if(u)return u;const d=Ke(),h={id:c,profileId:a,monthKey:l,isClosed:!1,checklist:{receiptsLinked:!1,recurringConfirmed:!1,categorized:!1,zipExported:!1},createdAt:d,updatedAt:d};return await j.monthCloseStatuses.add(h),h},async updateChecklist(a,l,c){const u=await this.getOrCreate(a,l);await j.monthCloseStatuses.update(u.id,{checklist:{...u.checklist,...c},updatedAt:Ke()})},async closeMonth(a,l,c){const u=await this.getOrCreate(a,l);await j.monthCloseStatuses.update(u.id,{isClosed:!0,closedAt:Ke(),notes:c,updatedAt:Ke()})},async reopenMonth(a,l){const c=await this.getOrCreate(a,l);await j.monthCloseStatuses.update(c.id,{isClosed:!1,closedAt:void 0,updatedAt:Ke()})},async isMonthClosed(a,l){return(await this.getByProfileAndMonth(a,l))?.isClosed??!1},async getComputedStatus(a,l){const u=(await yn.getByProfileAndMonth(a,l)).filter(p=>!p.expenseId).length,[d,h]=l.split("-").map(Number),g=(await gn.list({profileId:a,year:d,month:h})).filter(p=>!p.categoryId).length;return{monthKey:l,profileId:a,unlinkedReceiptsCount:u,uncategorizedExpensesCount:g,isFullyLinked:u===0,isFullyCategorized:g===0}},async list(a){return j.monthCloseStatuses.where("profileId").equals(a).toArray()}};function lb(a,l){let c=0,u=0,d=0;if(a.amountMinor&&l.amountMinor){const g=Math.abs(a.amountMinor-l.amountMinor)/l.amountMinor;g<=.01?c=50:g<=.05?c=40:g<=.1?c=30:g<=.2&&(c=20)}if(a.occurredAt&&l.occurredAt){const w=new Date(a.occurredAt),g=new Date(l.occurredAt),p=Math.abs(Math.floor((w.getTime()-g.getTime())/(1e3*60*60*24)));p===0?u=25:p<=3?u=20:p<=7?u=15:p<=30&&(u=10)}else{const w=l.occurredAt.substring(0,7);a.monthKey===w&&(u=10)}if(a.vendorId&&l.vendorId&&a.vendorId===l.vendorId)d=25;else if(a.vendorRaw&&l.vendor){const w=ql(a.vendorRaw,l.vendor);w>=.8?d=20:w>=.5&&(d=10)}return{score:c+u+d,breakdown:{amountScore:c,dateScore:u,vendorScore:d}}}async function sb(a,l=5){const c=await yn.get(a);if(!c||c.expenseId)return[];const[u,d]=c.monthKey.split("-").map(Number),h=[];for(let m=d-1;m<=d+1;m++){let y=u,x=m;m<1?(y=u-1,x=12):m>12&&(y=u+1,x=1);const b=await gn.list({profileId:c.profileId,year:y,month:x});h.push(...b)}const w=new Set((await yn.list({profileId:c.profileId})).filter(m=>m.expenseId).map(m=>m.expenseId)),g=h.filter(m=>!w.has(m.id)),p=[];for(const m of g){const{score:y,breakdown:x}=lb(c,m);if(y>=40){let b;y>=80?b="high":y>=60?b="medium":b="low",p.push({receiptId:a,expenseId:m.id,score:y,confidence:b,breakdown:x,expense:m})}}return p.sort((m,y)=>y.score-m.score).slice(0,l)}async function rb(a){const l=await yn.getUnlinkedByProfile(a),c=[];for(const u of l){const d=await sb(u.id);c.push({receipt:u,suggestions:d})}return c}async function cb(a,l,c,u){return(await yn.getByProfileAndMonth(a,u)).some(h=>h.fileName===l&&h.sizeBytes===c)}async function ob(a){const l=Ke(),c=[];for(const u of a){const d={...u,id:Bi(),createdAt:l,updatedAt:l};await j.receipts.add(d),c.push(d)}return c}function ub(a,l,c){const u=new Date(a.startDate),d=new Date(l,c-1,1);if(d<u)return!1;if(a.endMode==="endOfYear"){const h=u.getFullYear();if(l>h)return!1}else if(a.endMode==="untilDate"&&a.endDate){const h=new Date(a.endDate);if(d>h)return!1}return a.frequency==="monthly"?!0:a.frequency==="yearly"?c===u.getMonth()+1:!1}function db(a,l,c,u){return a.filter(d=>d.currency===u&&!d.isPaused).reduce((d,h)=>ub(h,l,c)?d+h.amountMinor:d,0)}function fb(a,l,c,u){return a.filter(d=>{if(d.deletedAt||d.currency!==u)return!1;const h=new Date(d.occurredAt);return h.getFullYear()===l&&h.getMonth()+1===c}).reduce((d,h)=>d+h.amountMinor,0)}function mb(a){const{recurringRules:l,actualExpenses:c,year:u,currency:d,profileId:h,profileName:w}=a,g=new Date,p=g.getFullYear(),m=g.getMonth()+1,y=[];let x=0;for(let N=1;N<=12;N++)if(u<p||u===p&&N<=m){const R=fb(c,u,N,d);y.push({month:N,year:u,projectedMinor:R,actualMinor:R,isPast:!0}),x+=R}else{const R=db(l,u,N,d);y.push({month:N,year:u,projectedMinor:R,isPast:!1}),x+=R}let b=0;return u===p?b=12-m:u>p&&(b=12),{profileId:h,profileName:w,year:u,monthsRemaining:b,projectedTotalMinor:x,currency:d,breakdown:y}}const bh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Utilities",nameAr:"",color:"#8b5cf6"},{name:"Software & Subscriptions",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud & Hosting",nameAr:" ",color:"#0ea5e9"},{name:"Communication",nameAr:"",color:"#10b981"},{name:"Marketing & Ads",nameAr:" ",color:"#f59e0b"},{name:"Travel & Transport",nameAr:" ",color:"#ef4444"},{name:"Equipment & Hardware",nameAr:" ",color:"#ec4899"},{name:"Professional Services",nameAr:" ",color:"#14b8a6"},{name:"Insurance",nameAr:"",color:"#f97316"},{name:"Bank Fees",nameAr:" ",color:"#64748b"},{name:"Taxes & Licenses",nameAr:" ",color:"#a855f7"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],wh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Coworking Space",nameAr:"  ",color:"#8b5cf6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Infrastructure",nameAr:" ",color:"#0ea5e9"},{name:"SaaS Subscriptions",nameAr:" SaaS",color:"#3b82f6"},{name:"Development Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Marketing & Growth",nameAr:" ",color:"#f59e0b"},{name:"Legal & Compliance",nameAr:" ",color:"#a855f7"},{name:"Accounting Services",nameAr:" ",color:"#ec4899"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Team Perks",nameAr:" ",color:"#22c55e"},{name:"Contractor Payments",nameAr:" ",color:"#f97316"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],jh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Legal Research Tools",nameAr:"  ",color:"#3b82f6"},{name:"Case Management Software",nameAr:"  ",color:"#06b6d4"},{name:"Bar Association Fees",nameAr:"  ",color:"#a855f7"},{name:"Continuing Legal Education",nameAr:"  ",color:"#8b5cf6"},{name:"Court Filing Fees",nameAr:"  ",color:"#f97316"},{name:"Process Service",nameAr:" ",color:"#14b8a6"},{name:"Expert Witnesses",nameAr:" ",color:"#ec4899"},{name:"Professional Liability Insurance",nameAr:"  ",color:"#ef4444"},{name:"Document Management",nameAr:" ",color:"#10b981"},{name:"Client Entertainment",nameAr:" ",color:"#f59e0b"},{name:"Travel Expenses",nameAr:" ",color:"#0ea5e9"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Communication",nameAr:"",color:"#64748b"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Sh=[{name:"Software & Tools",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Storage",nameAr:" ",color:"#0ea5e9"},{name:"Communication Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Coworking Space",nameAr:"  ",color:"#6366f1"},{name:"Marketing",nameAr:"",color:"#f59e0b"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Professional Development",nameAr:" ",color:"#a855f7"},{name:"Accounting & Tax",nameAr:" ",color:"#ec4899"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Wo=new Map;[...bh,...wh,...jh,...Sh].forEach(a=>{Wo.has(a.name)||Wo.set(a.name,a)});const pb=Array.from(Wo.values()),hb={general:bh,startup:wh,lawFirm:jh,freelancer:Sh};async function yb(a,l="general",c="en"){const u=hb[l];for(const d of u)await vh.create({profileId:a,name:c==="ar"?d.nameAr:d.name,color:d.color})}const Nt={expenses:a=>["expenses",a],expense:a=>["expense",a],expenseYearlyTotals:(a,l)=>["expenseYearlyTotals",a,l],allProfilesExpenseTotals:a=>["allProfilesExpenseTotals",a],recurringRules:a=>["recurringRules",{profileId:a}],recurringRule:a=>["recurringRule",a],activeRecurringRules:a=>["activeRecurringRules",{profileId:a}],receipts:a=>["receipts",a],receipt:a=>["receipt",a],unlinkedReceipts:a=>["unlinkedReceipts",a],receiptsByMonth:(a,l)=>["receiptsByMonth",a,l],receiptMatchSuggestions:a=>["receiptMatchSuggestions",a],unlinkedReceiptsWithSuggestions:a=>["unlinkedReceiptsWithSuggestions",a],expenseCategories:a=>["expenseCategories",a],expenseCategory:a=>["expenseCategory",a],expenseForecast:(a,l,c)=>["expenseForecast",a,l,c],vendors:a=>["vendors",a],vendor:a=>["vendor",a],monthCloseStatus:(a,l)=>["monthCloseStatus",a,l],monthCloseComputed:(a,l)=>["monthCloseComputed",a,l],monthCloseList:a=>["monthCloseList",a]};function ru(a){a.invalidateQueries({queryKey:["expenses"]}),a.invalidateQueries({queryKey:["expense"]}),a.invalidateQueries({queryKey:["expenseYearlyTotals"]}),a.invalidateQueries({queryKey:["allProfilesExpenseTotals"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Vl(a){a.invalidateQueries({queryKey:["recurringRules"]}),a.invalidateQueries({queryKey:["recurringRule"]}),a.invalidateQueries({queryKey:["activeRecurringRules"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Yl(a){a.invalidateQueries({queryKey:["receipts"]}),a.invalidateQueries({queryKey:["receipt"]}),a.invalidateQueries({queryKey:["unlinkedReceipts"]}),a.invalidateQueries({queryKey:["receiptsByMonth"]}),a.invalidateQueries({queryKey:["expenses"]})}function gb(a){a.invalidateQueries({queryKey:["expenseCategories"]}),a.invalidateQueries({queryKey:["expenseCategory"]})}function vb(a){a.invalidateQueries({queryKey:["vendors"]}),a.invalidateQueries({queryKey:["vendor"]})}function cu(a){a.invalidateQueries({queryKey:["monthCloseStatus"]}),a.invalidateQueries({queryKey:["monthCloseComputed"]}),a.invalidateQueries({queryKey:["monthCloseList"]})}function xb(a){a.invalidateQueries({queryKey:["receiptMatchSuggestions"]}),a.invalidateQueries({queryKey:["unlinkedReceiptsWithSuggestions"]})}function oj(a){return fe({queryKey:Nt.expenses(a),queryFn:()=>gn.list(a)})}function bb(a){return fe({queryKey:Nt.expense(a),queryFn:()=>gn.get(a),enabled:!!a})}function uj(a,l){return fe({queryKey:Nt.expenseYearlyTotals(a,l),queryFn:()=>gn.getYearlyTotals(a,l),enabled:!!a&&!!l})}function dj(a){return fe({queryKey:Nt.allProfilesExpenseTotals(a),queryFn:()=>gn.getAllProfilesTotals(a),enabled:!!a})}function wb(){const a=ce();return oe({mutationFn:l=>gn.create(l),onSuccess:()=>ru(a)})}function jb(){const a=ce();return oe({mutationFn:({id:l,data:c})=>gn.update(l,c),onSuccess:()=>ru(a)})}function Sb(){const a=ce();return oe({mutationFn:l=>gn.softDelete(l),onSuccess:()=>ru(a)})}function fj(a){return fe({queryKey:Nt.recurringRules(a),queryFn:()=>Pn.list(a)})}function mj(a){return fe({queryKey:Nt.activeRecurringRules(a),queryFn:()=>Pn.listActive(a)})}function Ab(a){return fe({queryKey:Nt.recurringRule(a),queryFn:()=>Pn.get(a),enabled:!!a})}function Db(){const a=ce();return oe({mutationFn:l=>Pn.create(l),onSuccess:()=>Vl(a)})}function Nb(){const a=ce();return oe({mutationFn:({id:l,data:c})=>Pn.update(l,c),onSuccess:()=>Vl(a)})}function pj(){const a=ce();return oe({mutationFn:l=>Pn.pause(l),onSuccess:()=>Vl(a)})}function hj(){const a=ce();return oe({mutationFn:l=>Pn.resume(l),onSuccess:()=>Vl(a)})}function Mb(){const a=ce();return oe({mutationFn:l=>Pn.delete(l),onSuccess:()=>Vl(a)})}function yj(a){return fe({queryKey:Nt.unlinkedReceipts(a),queryFn:()=>yn.getUnlinkedByProfile(a),enabled:!!a})}function gj(a,l){return fe({queryKey:Nt.receiptsByMonth(a,l),queryFn:()=>yn.getByProfileAndMonth(a,l),enabled:!!a&&!!l})}function vj(){const a=ce();return oe({mutationFn:l=>yn.create(l),onSuccess:()=>Yl(a)})}function xj(){const a=ce();return oe({mutationFn:l=>yn.delete(l),onSuccess:()=>Yl(a)})}function Cb(){const a=ce();return oe({mutationFn:({receiptId:l,expenseId:c})=>yn.linkToExpense(l,c),onSuccess:()=>Yl(a)})}function bj(){const a=ce();return oe({mutationFn:l=>yn.unlinkFromExpense(l),onSuccess:()=>Yl(a)})}function Eb(a){return fe({queryKey:Nt.expenseCategories(a),queryFn:()=>vh.list(a),enabled:!!a})}function wj(a,l,c){return fe({queryKey:Nt.expenseForecast(a,l,c),queryFn:async()=>{const u=[];for(const d of l){const[h,w,g]=await Promise.all([at.get(d),Pn.listActive(d),gn.list({profileId:d,year:a})]);if(h){const p=mb({recurringRules:w.filter(m=>m.currency===c),actualExpenses:g.filter(m=>m.currency===c),year:a,currency:c,profileId:d,profileName:h.name});u.push(p)}}return u},enabled:!!a&&l.length>0})}function jj(){const a=ce();return oe({mutationFn:({profileId:l,preset:c,language:u})=>yb(l,c,u),onSuccess:()=>gb(a)})}function Tb(a){return fe({queryKey:Nt.vendors(a),queryFn:()=>xh.list(a),enabled:!!a})}function Rb(){const a=ce();return oe({mutationFn:({profileId:l,rawVendor:c})=>xh.findOrCreate(l,c),onSuccess:()=>vb(a)})}function Sj(a){return fe({queryKey:Nt.unlinkedReceiptsWithSuggestions(a),queryFn:()=>rb(a),enabled:!!a})}function Aj(){return oe({mutationFn:({profileId:a,fileName:l,sizeBytes:c,monthKey:u})=>cb(a,l,c,u)})}function Dj(){const a=ce();return oe({mutationFn:l=>ob(l),onSuccess:()=>{Yl(a),xb(a)}})}function Nj(a,l){return fe({queryKey:Nt.monthCloseStatus(a,l),queryFn:()=>Ql.getOrCreate(a,l),enabled:!!a&&!!l})}function Mj(a,l){return fe({queryKey:Nt.monthCloseComputed(a,l),queryFn:()=>Ql.getComputedStatus(a,l),enabled:!!a&&!!l})}function Cj(){const a=ce();return oe({mutationFn:({profileId:l,monthKey:c,updates:u})=>Ql.updateChecklist(l,c,u),onSuccess:()=>cu(a)})}function Ej(){const a=ce();return oe({mutationFn:({profileId:l,monthKey:c,notes:u})=>Ql.closeMonth(l,c,u),onSuccess:()=>cu(a)})}function Tj(){const a=ce();return oe({mutationFn:({profileId:l,monthKey:c})=>Ql.reopenMonth(l,c),onSuccess:()=>cu(a)})}function _b({profileId:a,value:l,onChange:c,placeholder:u,disabled:d,className:h}){const w=Fe(),g=O.useRef(null),p=O.useRef(null),[m,y]=O.useState(!1),[x,b]=O.useState(l),[N,A]=O.useState(-1),{data:R=[]}=Tb(a),_=Rb(),U=(()=>{if(!x.trim())return R.map(ne=>({id:ne.id,name:ne.canonicalName,isNew:!1}));const F=ka(x),X=[];for(const ne of R){let le=ql(x,ne.canonicalName);for(const ye of ne.aliases){const ge=ql(x,ye);ge>le&&(le=ge)}(le>.3||ne.canonicalName.toLowerCase().includes(F))&&X.push({vendor:ne,score:le})}X.sort((ne,ve)=>ve.score-ne.score);const ue=X.map(({vendor:ne,score:ve})=>({id:ne.id,name:ne.canonicalName,isNew:!1,similarity:ve}));return!X.some(ne=>ne.score>=.95)&&x.trim()&&ue.push({id:"new",name:x.trim(),isNew:!0}),ue})();O.useEffect(()=>{l!==x&&b(l)},[l]),O.useEffect(()=>{const F=X=>{p.current&&!p.current.contains(X.target)&&g.current&&!g.current.contains(X.target)&&y(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const L=F=>{const X=F.target.value;b(X),y(!0),A(-1),c(X,void 0)},M=O.useCallback(async F=>{if(F.isNew)try{const X=await _.mutateAsync({profileId:a,rawVendor:F.name});b(X.canonicalName),c(X.canonicalName,X.id)}catch{b(F.name),c(F.name,void 0)}else b(F.name),c(F.name,F.id);y(!1),A(-1)},[_,c,a]),k=F=>{if(!m){(F.key==="ArrowDown"||F.key==="Enter")&&(y(!0),F.preventDefault());return}switch(F.key){case"ArrowDown":F.preventDefault(),A(X=>X<U.length-1?X+1:X);break;case"ArrowUp":F.preventDefault(),A(X=>X>0?X-1:X);break;case"Enter":F.preventDefault(),N>=0&&N<U.length?M(U[N]):U.length===1&&M(U[0]);break;case"Escape":y(!1),A(-1);break;case"Tab":y(!1);break}},K=()=>{y(!0)},$=()=>{setTimeout(()=>{p.current?.contains(document.activeElement)||y(!1)},150)};return s.jsxs("div",{className:se("vendor-typeahead",h),children:[s.jsx("input",{ref:g,type:"text",className:"input",value:x,onChange:L,onKeyDown:k,onFocus:K,onBlur:$,placeholder:u||w("drawer.expense.vendorPlaceholder"),disabled:d,autoComplete:"off",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-autocomplete":"list"}),m&&U.length>0&&s.jsx("div",{ref:p,className:"vendor-typeahead-dropdown",role:"listbox",children:U.map((F,X)=>s.jsx("button",{type:"button",className:se("vendor-typeahead-option",N===X&&"highlighted",F.isNew&&"is-new"),onClick:()=>M(F),onMouseEnter:()=>A(X),role:"option","aria-selected":N===X,children:F.isNew?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"vendor-typeahead-create-label",children:[w("vendor.createNew"),":"]}),s.jsx("span",{className:"vendor-typeahead-name",children:F.name})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"vendor-typeahead-name",children:F.name}),F.similarity&&F.similarity<1&&s.jsxs("span",{className:"vendor-typeahead-score",children:[Math.round(F.similarity*100),"%"]})]})},F.id))})]})}const Ib=Vn({expenseType:St(["onetime","recurring"]),profileId:te().min(1,"Profile is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),occurredAt:te().min(1,"Date is required"),title:te().optional(),vendor:te().optional(),vendorId:te().optional(),categoryId:te().min(1,"Category is required"),notes:te().optional(),frequency:St(["monthly","yearly"]).optional(),startDate:te().optional(),endMode:St(["endOfYear","untilDate","noEnd"]).optional(),endDate:te().optional()}).superRefine((a,l)=>{a.expenseType==="recurring"&&(a.title||l.addIssue({code:_l.custom,message:"Title is required for recurring expenses",path:["title"]}),a.frequency||l.addIssue({code:_l.custom,message:"Frequency is required",path:["frequency"]}),a.startDate||l.addIssue({code:_l.custom,message:"Start date is required",path:["startDate"]}),a.endMode||l.addIssue({code:_l.custom,message:"End mode is required",path:["endMode"]}),a.endMode==="untilDate"&&!a.endDate&&l.addIssue({code:_l.custom,message:"End date is required",path:["endDate"]}))});function Ob(){const{expenseDrawer:a,closeExpenseDrawer:l}=yt(),{mode:c,expenseId:u,recurringRuleId:d,defaultProfileId:h,isRecurring:w,prefillData:g,linkReceiptId:p}=a,m=Fe(),{language:y}=Yn(),{data:x=[]}=Hl(),{data:b,isLoading:N}=bb(u||""),{data:A,isLoading:R}=Ab(d||""),_=Cb(),U=Qa({resolver:Ya(Ib),defaultValues:{expenseType:w?"recurring":"onetime",profileId:h||"",amount:g?.amountMinor?(g.amountMinor/100).toString():"",currency:g?.currency||"USD",occurredAt:g?.occurredAt?.split("T")[0]||Qn(),title:g?.title||"",vendor:g?.vendor||"",vendorId:g?.vendorId||"",categoryId:g?.categoryId||"",notes:"",frequency:"monthly",startDate:Qn(),endMode:"endOfYear",endDate:""}}),{watch:L,setValue:M,reset:k}=U,K=L("expenseType"),$=L("profileId"),F=L("endMode"),{data:X=[]}=Eb($),ue=O.useMemo(()=>pb.map(Z=>({id:Z.name,profileId:$,name:y==="ar"?Z.nameAr:Z.name,color:Z.color})),[y,$]),he=X.length>0?X:ue,ne=wb(),ve=jb(),le=Sb(),ye=Db(),ge=Nb(),q=Mb();O.useEffect(()=>{b&&k({expenseType:"onetime",profileId:b.profileId,amount:(b.amountMinor/100).toString(),currency:b.currency,occurredAt:b.occurredAt.split("T")[0],title:b.title||"",vendor:b.vendor||"",vendorId:b.vendorId||"",categoryId:b.categoryId||"",notes:b.notes||"",frequency:"monthly",startDate:Qn(),endMode:"endOfYear",endDate:""})},[b,k]),O.useEffect(()=>{A&&k({expenseType:"recurring",profileId:A.profileId,amount:(A.amountMinor/100).toString(),currency:A.currency,occurredAt:A.startDate,title:A.title,vendor:A.vendor||"",categoryId:A.categoryId||"",notes:"",frequency:A.frequency,startDate:A.startDate,endMode:A.endMode,endDate:A.endDate||""})},[A,k]),O.useEffect(()=>{x.length===1&&!$&&M("profileId",x[0].id)},[x,$,M]);const Y=async Z=>{try{if(Z.expenseType==="recurring"){const V={profileId:Z.profileId,title:Z.title||"",vendor:Z.vendor||void 0,categoryId:Z.categoryId||void 0,amountMinor:zi(Z.amount),currency:Z.currency,frequency:Z.frequency,startDate:Z.startDate||Qn(),endMode:Z.endMode,endDate:Z.endMode==="untilDate"?Z.endDate:void 0,isPaused:!1};c==="edit"&&d?await ge.mutateAsync({id:d,data:V}):await ye.mutateAsync(V)}else{const V={profileId:Z.profileId,title:Z.title||void 0,vendor:Z.vendor||void 0,vendorId:Z.vendorId||void 0,categoryId:Z.categoryId||void 0,amountMinor:zi(Z.amount),currency:Z.currency,occurredAt:new Date(Z.occurredAt).toISOString(),notes:Z.notes||void 0};if(c==="edit"&&u)await ve.mutateAsync({id:u,data:V});else{const W=await ne.mutateAsync(V);p&&W&&await _.mutateAsync({receiptId:p,expenseId:W.id})}}l()}catch(V){console.error("Failed to save expense:",V)}},ae=async()=>{if(d){if(!confirm(m("expenses.confirmDelete")))return;try{await q.mutateAsync(d),l()}catch(Z){console.error("Failed to delete recurring rule:",Z)}}else if(u){if(!confirm(m("expenses.confirmDelete")))return;try{await le.mutateAsync(u),l()}catch(Z){console.error("Failed to delete expense:",Z)}}},xe=ne.isPending||ve.isPending||ye.isPending||ge.isPending;if(c==="edit"&&u&&N||c==="edit"&&d&&R)return s.jsx(At,{title:m("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const be=()=>m(c==="edit"?d?"drawer.expense.editRecurring":"drawer.expense.edit":K==="recurring"?"drawer.expense.newRecurring":"drawer.expense.new");return s.jsx(At,{title:be(),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:ae,disabled:le.isPending||q.isPending,children:m("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:m("common.cancel")}),s.jsx("button",{type:"submit",form:"expense-form",className:"btn btn-primary",disabled:xe,children:m(xe?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"expense-form",onSubmit:U.handleSubmit(Y),children:[c==="create"&&s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:se("type-selector-btn",K==="onetime"&&"active"),onClick:()=>M("expenseType","onetime"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeOneTime")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeOneTimeDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",K==="recurring"&&"active"),onClick:()=>M("expenseType","recurring"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeRecurring")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeRecurringDesc")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.profile")," *"]}),s.jsx(Ie,{name:"profileId",control:U.control,render:({field:Z})=>s.jsxs("select",{className:se("select",U.formState.errors.profileId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.profilePlaceholder")}),x.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),U.formState.errors.profileId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",U.formState.errors.amount&&"input-error"),placeholder:m("drawer.expense.amountPlaceholder"),...U.register("amount")}),U.formState.errors.amount&&s.jsx("p",{className:"form-error",children:m("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.currency")," *"]}),s.jsx(Ie,{name:"currency",control:U.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),K==="onetime"?s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.date")," *"]}),s.jsx("input",{type:"date",className:se("input",U.formState.errors.occurredAt&&"input-error"),...U.register("occurredAt")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.frequency")," *"]}),s.jsx(Ie,{name:"frequency",control:U.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"monthly",children:m("expenses.recurring.monthly")}),s.jsx("option",{value:"yearly",children:m("expenses.recurring.yearly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.startDate")," *"]}),s.jsx("input",{type:"date",className:se("input",U.formState.errors.startDate&&"input-error"),...U.register("startDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endMode")," *"]}),s.jsx(Ie,{name:"endMode",control:U.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"endOfYear",children:m("expenses.recurring.endOfYear")}),s.jsx("option",{value:"untilDate",children:m("expenses.recurring.untilDate")}),s.jsx("option",{value:"noEnd",children:m("expenses.recurring.noEnd")})]})})]}),F==="untilDate"&&s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endDate")," *"]}),s.jsx("input",{type:"date",className:se("input",U.formState.errors.endDate&&"input-error"),...U.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.title")," ",K==="recurring"&&"*"]}),s.jsx("input",{type:"text",className:se("input",U.formState.errors.title&&"input-error"),placeholder:m("drawer.expense.titlePlaceholder"),...U.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.vendor")}),s.jsx(Ie,{name:"vendor",control:U.control,render:({field:Z})=>s.jsx(_b,{profileId:$,value:Z.value||"",vendorId:L("vendorId"),onChange:(V,W)=>{Z.onChange(V),M("vendorId",W||"")},disabled:!$})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.category")," *"]}),s.jsx(Ie,{name:"categoryId",control:U.control,render:({field:Z})=>s.jsxs("select",{className:se("select",U.formState.errors.categoryId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.categoryPlaceholder")}),he.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),U.formState.errors.categoryId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),K==="onetime"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.notes")}),s.jsx("textarea",{className:"textarea",placeholder:m("drawer.expense.notesPlaceholder"),...U.register("notes")})]})]})})}function Ah(){return crypto.randomUUID()}function ht(){return new Date().toISOString()}function Li(){return new Date().toISOString().split("T")[0]}function Dh(a,l){const c=new Date(a),d=new Date(l).getTime()-c.getTime();return Math.floor(d/(1e3*60*60*24))}function ou(a,l){return new Date(a,l+1,0).getDate()}function Ip(a,l,c){const u=ou(a,l),d=Math.min(c,u);return`${a}-${String(l+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`}function zb(a,l){const c=`${a}-${String(l+1).padStart(2,"0")}-01`,u=ou(a,l),d=`${a}-${String(l+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`;return{periodStart:c,periodEnd:d}}function Lb(a,l){const c=l*3,u=c+2,d=`${a}-${String(c+1).padStart(2,"0")}-01`,h=ou(a,u),w=`${a}-${String(u+1).padStart(2,"0")}-${String(h).padStart(2,"0")}`;return{periodStart:d,periodEnd:w}}const rn={async list(a={}){const l=await j.retainerAgreements.toArray(),c=await j.clients.toArray(),u=await j.projects.toArray(),d=await j.businessProfiles.toArray(),h=await j.projectedIncome.toArray(),w=new Map(c.map(x=>[x.id,x.name])),g=new Map(u.map(x=>[x.id,x.name])),p=new Map(d.map(x=>[x.id,x.name])),m=new Map;h.forEach(x=>{const b=m.get(x.sourceId)||[];b.push(x),m.set(x.sourceId,b)});let y=l.filter(x=>{if(x.archivedAt||a.profileId&&x.profileId!==a.profileId||a.status&&x.status!==a.status||a.currency&&x.currency!==a.currency||a.clientId&&x.clientId!==a.clientId||a.projectId&&x.projectId!==a.projectId)return!1;if(a.search){const b=a.search.toLowerCase(),N=w.get(x.clientId)||"",A=x.projectId&&g.get(x.projectId)||"";if(!(x.title.toLowerCase().includes(b)||N.toLowerCase().includes(b)||A.toLowerCase().includes(b)))return!1}return!0});return a.dueOnly&&(y=y.filter(x=>(m.get(x.id)||[]).some(N=>N.state==="due"))),y.sort((x,b)=>b.createdAt.localeCompare(x.createdAt)),y.map(x=>{const b=m.get(x.id)||[],N=b.filter(M=>M.state==="due"),A=b.filter(M=>M.state==="received"||M.state==="partial"),R=b.filter(M=>M.state==="upcoming"),_=N.reduce((M,k)=>M+(k.expectedAmountMinor-k.receivedAmountMinor),0),U=R.length>0?R.sort((M,k)=>M.expectedDate.localeCompare(k.expectedDate))[0].expectedDate:void 0,L=A.length>0?A.sort((M,k)=>(k.receivedAt||"").localeCompare(M.receivedAt||""))[0]:void 0;return{...x,profileName:p.get(x.profileId),clientName:w.get(x.clientId),projectName:x.projectId?g.get(x.projectId):void 0,nextExpectedDate:U,dueNowAmountMinor:_,lastReceivedDate:L?.receivedAt,lastReceivedAmountMinor:L?.receivedAmountMinor}})},async get(a){return j.retainerAgreements.get(a)},async getDisplay(a){const l=await this.get(a);if(!l)return;const c=l.profileId?await j.businessProfiles.get(l.profileId):void 0,u=l.clientId?await j.clients.get(l.clientId):void 0,d=l.projectId?await j.projects.get(l.projectId):void 0,h=await hn.getByRetainer(a),w=h.filter(b=>b.state==="due"),g=h.filter(b=>b.state==="received"||b.state==="partial"),p=h.filter(b=>b.state==="upcoming"),m=w.reduce((b,N)=>b+(N.expectedAmountMinor-N.receivedAmountMinor),0),y=p.length>0?p.sort((b,N)=>b.expectedDate.localeCompare(N.expectedDate))[0].expectedDate:void 0,x=g.length>0?g.sort((b,N)=>(N.receivedAt||"").localeCompare(b.receivedAt||""))[0]:void 0;return{...l,profileName:c?.name,clientName:u?.name,projectName:d?.name,nextExpectedDate:y,dueNowAmountMinor:m,lastReceivedDate:x?.receivedAt,lastReceivedAmountMinor:x?.receivedAmountMinor}},async create(a){const l=ht(),c={...a,id:Ah(),createdAt:l,updatedAt:l};return await j.retainerAgreements.add(c),c.status==="active"&&await Ol.generateSchedule(c.id),c},async update(a,l){const c=await this.get(a);if(!c)return;await j.retainerAgreements.update(a,{...l,updatedAt:ht()}),["amountMinor","cadence","paymentDay","startDate","endDate"].some(h=>h in l)&&c.status==="active"&&await Ol.regenerateSchedule(a)},async archive(a){await j.retainerAgreements.update(a,{archivedAt:ht(),updatedAt:ht()})},async activate(a){const l=await this.get(a);!l||l.status!=="draft"||(await j.retainerAgreements.update(a,{status:"active",updatedAt:ht()}),await Ol.generateSchedule(a))},async pause(a){const l=await this.get(a);if(!l||l.status!=="active")return;await j.retainerAgreements.update(a,{status:"paused",updatedAt:ht()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await j.projectedIncome.update(u.id,{state:"canceled",updatedAt:ht()})},async resume(a){const l=await this.get(a);!l||l.status!=="paused"||(await j.retainerAgreements.update(a,{status:"active",updatedAt:ht()}),await Ol.regenerateSchedule(a))},async end(a){const l=await this.get(a);if(!l||l.status!=="active"&&l.status!=="paused")return;await j.retainerAgreements.update(a,{status:"ended",endDate:Li(),updatedAt:ht()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await j.projectedIncome.update(u.id,{state:"canceled",updatedAt:ht()})}},hn={async list(a={}){const l=await j.projectedIncome.toArray(),c=await j.clients.toArray(),u=await j.projects.toArray(),d=await j.retainerAgreements.toArray(),h=new Map(c.map(y=>[y.id,y.name])),w=new Map(u.map(y=>[y.id,y.name])),g=new Map(d.map(y=>[y.id,y.title])),p=Li();let m=l.filter(y=>!(a.profileId&&y.profileId!==a.profileId||a.sourceId&&y.sourceId!==a.sourceId||a.clientId&&y.clientId!==a.clientId||a.currency&&y.currency!==a.currency||a.state&&!(Array.isArray(a.state)?a.state:[a.state]).includes(y.state)||a.dateFrom&&y.expectedDate<a.dateFrom||a.dateTo&&y.expectedDate>a.dateTo));return m.sort((y,x)=>y.expectedDate.localeCompare(x.expectedDate)),m.map(y=>{const x=y.state==="due"?Dh(y.expectedDate,p):void 0;return{...y,clientName:h.get(y.clientId),projectName:y.projectId?w.get(y.projectId):void 0,retainerTitle:g.get(y.sourceId),daysOverdue:x!==void 0&&x>0?x:void 0}})},async getByRetainer(a){return j.projectedIncome.where("sourceId").equals(a).toArray()},async getDueItems(a){return this.list({state:"due",currency:a})},async getForForecast(a,l,c){return this.list({state:["upcoming","due","partial"],dateFrom:a,dateTo:l,currency:c})},async get(a){return j.projectedIncome.get(a)},async update(a,l){await j.projectedIncome.update(a,{...l,updatedAt:ht()})}},Ol={async generateSchedule(a){const l=await rn.get(a);if(!l||l.status!=="active")return;const c=ht(),u=Li(),d=new Date;d.setMonth(d.getMonth()+12);const h=l.endDate&&l.endDate<d.toISOString().split("T")[0]?l.endDate:d.toISOString().split("T")[0],w=await hn.getByRetainer(a),g=new Set(w.map(y=>`${y.periodStart}-${y.periodEnd}`)),p=[];let m=new Date(l.startDate);for(;m.toISOString().split("T")[0]<=h;){const y=m.getFullYear(),x=m.getMonth();let b,N,A;if(l.cadence==="monthly"){const L=zb(y,x);b=L.periodStart,N=L.periodEnd,A=Ip(y,x,l.paymentDay),m.setMonth(m.getMonth()+1)}else{const L=Math.floor(x/3),M=Lb(y,L);b=M.periodStart,N=M.periodEnd;const k=L*3+2;A=Ip(y,k,l.paymentDay),m.setMonth(m.getMonth()+3)}if(N<l.startDate)continue;const R=`${b}-${N}`;if(g.has(R))continue;if(l.endDate&&b>l.endDate)break;const _=A<=u?"due":"upcoming",U={id:Ah(),profileId:l.profileId,sourceType:"retainer",sourceId:a,clientId:l.clientId,projectId:l.projectId,currency:l.currency,expectedAmountMinor:l.amountMinor,expectedDate:A,periodStart:b,periodEnd:N,state:_,receivedAmountMinor:0,matchedTransactionIds:[],createdAt:c,updatedAt:c};p.push(U)}p.length>0&&await j.projectedIncome.bulkAdd(p)},async regenerateSchedule(a){const l=await rn.get(a);if(!l)return;const u=(await hn.getByRetainer(a)).filter(d=>d.state==="upcoming"||d.state==="canceled");for(const d of u)await j.projectedIncome.delete(d.id);l.status==="active"&&await this.generateSchedule(a)},async updateDueStates(){const a=Li(),l=await j.projectedIncome.where("state").equals("upcoming").toArray();for(const c of l)c.expectedDate<=a&&await j.projectedIncome.update(c.id,{state:"due",updatedAt:ht()})}},Nh={async getSuggestionsForTransaction(a){const l=await j.transactions.get(a);if(!l)return[];if(l.kind!=="income"||l.status!=="paid")return[];const u=(await hn.list({state:["due","partial"],currency:l.currency})).filter(h=>h.receivedAmountMinor<h.expectedAmountMinor&&!h.matchedTransactionIds.includes(a)),d=[];for(const h of u){const w=this.calculateMatchScore(l,h);if(w>=40){let g;w>=80?g="high":w>=60?g="medium":g="low",d.push({projectedIncomeId:h.id,score:w,confidence:g,projectedIncome:h})}}return d.sort((h,w)=>w.score-h.score).slice(0,10)},calculateMatchScore(a,l){let c=0;if(a.currency!==l.currency)return 0;c+=30,a.clientId&&a.clientId===l.clientId&&(c+=30);const u=l.expectedAmountMinor-l.receivedAmountMinor,d=Math.abs(a.amountMinor-u),h=u>0?d/u:1;h<=.01?c+=25:h<=.05?c+=20:h<=.1?c+=15:h<=.2&&(c+=10);const w=a.occurredAt.split("T")[0],g=Math.abs(Dh(w,l.expectedDate));return g<=3?c+=15:g<=7?c+=12:g<=14?c+=8:g<=30&&(c+=4),c},async matchTransaction(a,l){const c=await hn.get(a),u=await j.transactions.get(l);if(!c||!u)return;const d=[...c.matchedTransactionIds,l],h=c.receivedAmountMinor+u.amountMinor;let w=c.state;h>=c.expectedAmountMinor?w="received":h>0&&(w="partial"),await j.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:w==="received"?ht():c.receivedAt,state:w,updatedAt:ht()}),await j.transactions.update(l,{linkedProjectedIncomeId:a,updatedAt:ht()})},async unmatchTransaction(a,l){const c=await hn.get(a),u=await j.transactions.get(l);if(!c||!u)return;const d=c.matchedTransactionIds.filter(p=>p!==l),h=Math.max(0,c.receivedAmountMinor-u.amountMinor);let w=c.state;const g=Li();h===0?w=c.expectedDate<=g?"due":"upcoming":w="partial",await j.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:d.length>0?c.receivedAt:void 0,state:w,updatedAt:ht()}),await j.transactions.update(l,{linkedProjectedIncomeId:void 0,updatedAt:ht()})},async getAllSuggestionsForUnlinkedTransactions(){const a=await j.transactions.filter(p=>p.kind==="income"&&p.status==="paid"&&!p.deletedAt&&!p.linkedProjectedIncomeId).toArray(),l=await j.clients.toArray(),c=await j.projects.toArray(),u=await j.categories.toArray(),d=new Map(l.map(p=>[p.id,p.name])),h=new Map(c.map(p=>[p.id,p.name])),w=new Map(u.map(p=>[p.id,p.name])),g=[];for(const p of a){const m=await this.getSuggestionsForTransaction(p.id);if(m.length>0){const y={...p,clientName:p.clientId?d.get(p.clientId):void 0,projectName:p.projectId?h.get(p.projectId):void 0,categoryName:p.categoryId?w.get(p.categoryId):void 0};g.push({transaction:y,suggestions:m})}}return g}};async function Ub(a,l){const c=await j.retainerAgreements.filter(b=>b.status==="active"&&!b.archivedAt).toArray(),u=await hn.list({profileId:a,state:"due"}),d=Li();let h=0,w=0,g=0;for(const b of c){if(a&&b.profileId!==a||l&&b.currency!==l)continue;h++;const N=b.cadence==="quarterly"?b.amountMinor/3:b.amountMinor;b.currency==="USD"?w+=N:g+=N}let p=0,m=0,y=0,x=0;for(const b of u){if(l&&b.currency!==l)continue;const N=b.expectedAmountMinor-b.receivedAmountMinor;b.currency==="USD"?(p+=N,b.expectedDate<d&&(y+=N)):(m+=N,b.expectedDate<d&&(x+=N))}return{activeCount:h,totalExpectedMonthlyUsdMinor:w,totalExpectedMonthlyIlsMinor:g,totalDueUsdMinor:p,totalDueIlsMinor:m,totalOverdueUsdMinor:y,totalOverdueIlsMinor:x}}const Pa={retainers:a=>["retainers",a],retainer:a=>["retainer",a],retainerDisplay:a=>["retainerDisplay",a],retainerSummary:(a,l)=>["retainerSummary",a,l],projectedIncome:a=>["projectedIncome",a],retainerSchedule:a=>["retainerSchedule",a],dueItems:a=>["dueItems",a],forecastItems:(a,l,c)=>["forecastItems",a,l,c],matchSuggestions:a=>["retainerMatchSuggestions",a],allMatchSuggestions:()=>["allRetainerMatchSuggestions"]};function Mh(a){a.invalidateQueries({queryKey:["retainers"]}),a.invalidateQueries({queryKey:["retainer"]}),a.invalidateQueries({queryKey:["retainerDisplay"]}),a.invalidateQueries({queryKey:["retainerSummary"]})}function Ch(a){a.invalidateQueries({queryKey:["projectedIncome"]}),a.invalidateQueries({queryKey:["retainerSchedule"]}),a.invalidateQueries({queryKey:["dueItems"]}),a.invalidateQueries({queryKey:["forecastItems"]})}function qb(a){a.invalidateQueries({queryKey:["retainerMatchSuggestions"]}),a.invalidateQueries({queryKey:["allRetainerMatchSuggestions"]})}function Ka(a){Mh(a),Ch(a),qb(a)}function Rj(a={}){return fe({queryKey:Pa.retainers(a),queryFn:()=>rn.list(a)})}function Bb(a){return fe({queryKey:Pa.retainer(a),queryFn:()=>rn.get(a),enabled:!!a})}function _j(a){return fe({queryKey:Pa.retainerDisplay(a),queryFn:()=>rn.getDisplay(a),enabled:!!a})}function Ij(a,l){return fe({queryKey:Pa.retainerSummary(a,l),queryFn:()=>Ub(a,l)})}function kb(){const a=ce();return oe({mutationFn:l=>rn.create(l),onSuccess:()=>Ka(a)})}function Hb(){const a=ce();return oe({mutationFn:({id:l,data:c})=>rn.update(l,c),onSuccess:()=>Ka(a)})}function Qb(){const a=ce();return oe({mutationFn:l=>rn.archive(l),onSuccess:()=>Mh(a)})}function Oj(){const a=ce();return oe({mutationFn:l=>rn.activate(l),onSuccess:()=>Ka(a)})}function zj(){const a=ce();return oe({mutationFn:l=>rn.pause(l),onSuccess:()=>Ka(a)})}function Lj(){const a=ce();return oe({mutationFn:l=>rn.resume(l),onSuccess:()=>Ka(a)})}function Uj(){const a=ce();return oe({mutationFn:l=>rn.end(l),onSuccess:()=>Ka(a)})}function qj(a){return fe({queryKey:Pa.retainerSchedule(a),queryFn:()=>hn.getByRetainer(a),enabled:!!a})}function Vb(a){return fe({queryKey:Pa.dueItems(a),queryFn:()=>hn.getDueItems(a)})}function Bj(){const a=ce();return oe({mutationFn:()=>Ol.updateDueStates(),onSuccess:()=>Ch(a)})}function Yb(a){return fe({queryKey:Pa.matchSuggestions(a),queryFn:()=>Nh.getSuggestionsForTransaction(a),enabled:!!a})}function Pb(){const a=ce();return oe({mutationFn:({projectedIncomeId:l,transactionId:c})=>Nh.matchTransaction(l,c),onSuccess:()=>{Ka(a),a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]})}})}const Kb=Vn({profileId:te().min(1,"Profile is required"),clientId:te().min(1,"Client is required"),title:te().min(1,"Title is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),cadence:St(["monthly","quarterly"]),paymentDay:Oi().min(1).max(28),startDate:te().min(1,"Start date is required"),endDate:te().optional(),projectId:te().optional(),notes:te().optional(),status:St(["draft","active","paused","ended"])});function Fb(){const{retainerDrawer:a,closeRetainerDrawer:l}=yt(),{mode:c,retainerId:u,defaultProfileId:d,defaultClientId:h,defaultProjectId:w}=a,g=Fe(),{language:p}=Yn(),m=Bl(p),{data:y=[]}=Hl(),{data:x=[]}=xr(),{data:b=[]}=uh(),{data:N,isLoading:A}=Bb(u||""),R=O.useMemo(()=>d||y.find(W=>W.isDefault)?.id||y[0]?.id||"",[d,y]),_=Math.min(new Date().getDate(),28),U=Qa({resolver:Ya(Kb),defaultValues:{profileId:R,clientId:h||"",title:"",amount:"",currency:"USD",cadence:"monthly",paymentDay:_,startDate:Qn(),endDate:"",projectId:w||"",notes:"",status:"draft"}}),{watch:L,setValue:M,reset:k,formState:{errors:K}}=U,$=L("clientId"),F=L("amount"),X=L("currency"),ue=L("cadence"),he=L("paymentDay"),ne=L("startDate"),ve=L("endDate"),le=O.useMemo(()=>$?b.filter(V=>!V.clientId||V.clientId===$):b,[b,$]),ye=O.useMemo(()=>{const V=zi(F);if(!ne||!V)return[];const W=[],gt=new Date(ne),Mt=ve?new Date(ve):null,cn=new Date;cn.setMonth(cn.getMonth()+12);const Kn=Mt&&Mt<cn?Mt:cn;let Ct=new Date(gt);const Fn=ue==="quarterly"?3:1;for(;Ct<=Kn&&W.length<6;){const vn=Ct.getFullYear(),Sn=Ct.getMonth(),Fa=new Date(vn,Sn+1,0).getDate(),on=Math.min(he,Fa),we=new Date(vn,Sn,on);we>=gt&&W.push({date:we.toISOString().split("T")[0],periodLabel:ue==="quarterly"?`Q${Math.floor(Sn/3)+1} ${vn}`:we.toLocaleDateString(m,{month:"short",year:"numeric"})}),Ct.setMonth(Ct.getMonth()+Fn)}return W},[ne,ve,ue,he,F,m]),ge=kb(),q=Hb(),Y=Qb();O.useEffect(()=>{N&&k({profileId:N.profileId,clientId:N.clientId,title:N.title,amount:(N.amountMinor/100).toString(),currency:N.currency,cadence:N.cadence,paymentDay:N.paymentDay,startDate:N.startDate,endDate:N.endDate||"",projectId:N.projectId||"",notes:N.notes||"",status:N.status})},[N,k]),O.useEffect(()=>{c==="create"&&R&&!U.getValues("profileId")&&M("profileId",R)},[c,R,M,U]),O.useEffect(()=>{if(c==="create"&&$&&!U.getValues("title")){const V=x.find(W=>W.id===$);V&&M("title",`${V.name} retainer`)}},[$,x,c,M,U]);const ae=async V=>{try{const W={profileId:V.profileId,clientId:V.clientId,title:V.title,amountMinor:zi(V.amount),currency:V.currency,cadence:V.cadence,paymentDay:V.paymentDay,startDate:V.startDate,endDate:V.endDate||void 0,projectId:V.projectId||void 0,notes:V.notes||void 0,status:V.status};c==="edit"&&u?await q.mutateAsync({id:u,data:W}):await ge.mutateAsync(W),l()}catch(W){console.error("Failed to save retainer:",W)}},xe=async()=>{if(u&&confirm(g("retainers.confirmArchive")))try{await Y.mutateAsync(u),l()}catch(V){console.error("Failed to archive retainer:",V)}},G=ge.isPending||q.isPending;if(c==="edit"&&u&&A)return s.jsx(At,{title:g("common.loading"),onClose:l,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const Z=()=>g(c==="edit"?"drawer.retainer.edit":"drawer.retainer.new");return s.jsx(At,{title:Z(),onClose:l,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:xe,disabled:Y.isPending,children:g("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:g("common.cancel")}),s.jsx("button",{type:"submit",form:"retainer-form",className:"btn btn-primary",disabled:G,children:g(G?"common.saving":"common.save")})]})]}),children:s.jsxs("div",{className:"retainer-drawer-layout",children:[s.jsxs("form",{id:"retainer-form",className:"retainer-drawer-form",onSubmit:U.handleSubmit(ae),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.expense.profile")," *"]}),s.jsx(Ie,{name:"profileId",control:U.control,render:({field:V})=>s.jsxs("select",{className:se("select",K.profileId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.expense.profilePlaceholder")}),y.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),K.profileId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.client")," *"]}),s.jsx(Ie,{name:"clientId",control:U.control,render:({field:V})=>s.jsxs("select",{className:se("select",K.clientId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.clientPlaceholder")}),x.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),K.clientId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.title")," *"]}),s.jsx("input",{type:"text",className:se("input",K.title&&"input-error"),placeholder:g("drawer.retainer.titlePlaceholder"),...U.register("title")}),K.title&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",K.amount&&"input-error"),placeholder:g("drawer.retainer.amountPlaceholder"),...U.register("amount")}),K.amount&&s.jsx("p",{className:"form-error",children:g("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.currency")," *"]}),s.jsx(Ie,{name:"currency",control:U.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.cadence")," *"]}),s.jsx(Ie,{name:"cadence",control:U.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"monthly",children:g("retainers.cadence.monthly")}),s.jsx("option",{value:"quarterly",children:g("retainers.cadence.quarterly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.paymentDay")," *"]}),s.jsx(Ie,{name:"paymentDay",control:U.control,render:({field:V})=>s.jsx("select",{className:"select",style:{width:"100%"},value:V.value,onChange:W=>V.onChange(Number(W.target.value)),children:Array.from({length:28},(W,gt)=>gt+1).map(W=>s.jsx("option",{value:W,children:W},W))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.startDate")," *"]}),s.jsx("input",{type:"date",className:se("input",K.startDate&&"input-error"),...U.register("startDate")}),K.startDate&&s.jsx("p",{className:"form-error",children:g("validation.dateRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.endDate")}),s.jsx("input",{type:"date",className:"input",...U.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.project")}),s.jsx(Ie,{name:"projectId",control:U.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.projectPlaceholder")}),le.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})})]}),c==="edit"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.status")}),s.jsx(Ie,{name:"status",control:U.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"draft",children:g("retainers.status.draft")}),s.jsx("option",{value:"active",children:g("retainers.status.active")}),s.jsx("option",{value:"paused",children:g("retainers.status.paused")}),s.jsx("option",{value:"ended",children:g("retainers.status.ended")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.notes")}),s.jsx("textarea",{className:"textarea",placeholder:g("drawer.retainer.notesPlaceholder"),...U.register("notes")})]})]}),s.jsxs("div",{className:"retainer-drawer-preview",children:[s.jsx("h4",{className:"preview-title",children:g("drawer.retainer.schedulePreview")}),ye.length>0?s.jsxs("div",{className:"preview-schedule",children:[ye.map((V,W)=>s.jsxs("div",{className:"preview-schedule-item",children:[s.jsx("span",{className:"preview-schedule-date",children:V.periodLabel}),s.jsx("span",{className:"preview-schedule-amount",children:Pe(zi(F),X,m)})]},W)),ye.length===6&&s.jsx("div",{className:"preview-schedule-more",children:g("drawer.retainer.andMore")})]}):s.jsx("p",{className:"preview-empty",children:g("drawer.retainer.enterDetailsForPreview")})]})]})})}function Eh({value:a,onChange:l,placeholder:c,debounceMs:u=200}){const d=Fe(),h=c??d("common.search"),[w,g]=O.useState(a),p=O.useRef(void 0);O.useEffect(()=>{g(a)},[a]);const m=y=>{g(y),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{l(y)},u)};return O.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),s.jsxs("div",{className:"search-input",children:[s.jsx(Gb,{}),s.jsx("input",{type:"text",value:w,onChange:y=>m(y.target.value),placeholder:h}),w&&s.jsx("button",{onClick:()=>{g(""),l("")},className:"btn-ghost",style:{padding:0,width:20,height:20},children:s.jsx(Zb,{})})]})}function Gb(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,style:{color:"var(--color-text-muted)",flexShrink:0},children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}function Zb(){return s.jsx("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}function Xb({value:a,onChange:l,enabledCurrencies:c=["USD","ILS"],showAll:u=!0}){const d=Fe();return s.jsxs("div",{className:"segment-control",children:[u&&s.jsx("button",{className:se("segment-button",a===void 0&&"active"),onClick:()=>l(void 0),children:d("common.all")}),c.map(h=>s.jsx("button",{className:se("segment-button",a===h&&"active"),onClick:()=>l(h),children:h},h))]})}function Jb({dateFrom:a,dateTo:l,onChange:c}){const u=Fe(),[d,h]=O.useState(!1),[w,g]=O.useState(a),[p,m]=O.useState(l),y=[{value:"this-month",labelKey:"filters.thisMonth"},{value:"last-month",labelKey:"filters.lastMonth"},{value:"this-year",labelKey:"filters.thisYear"},{value:"all",labelKey:"filters.allTime"}],b=(()=>{for(const _ of y){const U=Ko(_.value);if(U.dateFrom===a&&U.dateTo===l)return _.value}return"custom"})();O.useEffect(()=>{b==="custom"&&Promise.resolve().then(()=>{g(a),m(l)})},[a,l,b]);const N=_=>{if(_==="custom"){h(!0),g(a),m(l);return}h(!1);const U=Ko(_);c(U.dateFrom,U.dateTo)},A=(_,U)=>{_==="from"?(g(U),U&&p&&c(U,p)):(m(U),w&&U&&c(w,U))},R=b==="custom"||d;return s.jsxs("div",{className:"date-range-control",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsxs("select",{className:"select",value:R?"custom":b,onChange:_=>N(_.target.value),children:[y.map(_=>s.jsx("option",{value:_.value,children:u(_.labelKey)},_.value)),s.jsx("option",{value:"custom",children:u("filters.custom")})]}),R&&s.jsxs("div",{className:"custom-date-inputs",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsx("input",{type:"date",className:"input",value:w,onChange:_=>A("from",_.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}}),s.jsx("span",{style:{color:"var(--color-text-muted)"},children:""}),s.jsx("input",{type:"date",className:"input",value:p,onChange:_=>A("to",_.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}})]})]})}function $b(){const{retainerMatchingDrawer:a,closeRetainerMatchingDrawer:l,setRetainerMatchingTransaction:c,openTransactionDrawer:u}=yt(),{step:d,transactionId:h}=a,w=Fe(),g=Pb(),p=()=>w(d==="select-transaction"?"retainerMatching.selectTransaction":"retainerMatching.selectProjectedIncome"),m=async y=>{if(h)try{await g.mutateAsync({projectedIncomeId:y,transactionId:h}),l()}catch(x){console.error("Failed to match transaction:",x)}};return s.jsx(At,{title:p(),onClose:l,footer:s.jsx("div",{className:"drawer-footer-right",children:s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:w("common.cancel")})}),children:d==="select-transaction"?s.jsx(Wb,{onSelect:y=>c(y),onCreateNew:()=>{l(),u({mode:"create",defaultKind:"income"})}}):s.jsx(e2,{transactionId:h,onSelect:m,isMatching:g.isPending})})}function Wb({onSelect:a,onCreateNew:l}){const c=Fe(),{language:u}=Yn(),d=Bl(u),[h,w]=O.useState(""),{data:g=[],isLoading:p}=oh({kind:"income",status:"paid",sort:{by:"occurredAt",dir:"desc"},limit:50}),m=O.useMemo(()=>g.filter(x=>!x.linkedProjectedIncomeId),[g]),y=O.useMemo(()=>{if(!h)return m;const x=h.toLowerCase();return m.filter(b=>b.title?.toLowerCase().includes(x)||b.clientName?.toLowerCase().includes(x)||b.projectName?.toLowerCase().includes(x))},[m,h]);return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:c("retainerMatching.selectTransactionDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Eh,{value:h,onChange:w,placeholder:c("retainerMatching.searchTransactions")})}),s.jsx("div",{className:"matching-actions",children:s.jsxs("button",{className:"btn btn-secondary",onClick:l,children:["+ ",c("retainerMatching.createNewTransaction")]})}),p?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):y.length===0?s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:c(h?"retainerMatching.noMatchingTransactions":"retainerMatching.noUnlinkedTransactions")})}):s.jsx("div",{className:"matching-list",children:y.map(x=>s.jsxs("button",{className:"matching-item",onClick:()=>a(x.id),children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:x.title||x.clientName||c("retainerMatching.untitled")}),s.jsxs("span",{className:"matching-item-meta",children:[Zp(x.occurredAt,d),x.clientName&&`  ${x.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount amount-positive",children:Pe(x.amountMinor,x.currency,d)})]},x.id))})]})}function e2({transactionId:a,onSelect:l,isMatching:c}){const u=Fe(),{language:d}=Yn(),h=Bl(d),[w,g]=O.useState(""),{data:p=[],isLoading:m}=Yb(a),{data:y=[],isLoading:x}=Vb(),b=O.useMemo(()=>{const A=new Set(p.map(_=>_.projectedIncomeId)),R=y.filter(_=>!A.has(_.id));if(w){const _=w.toLowerCase(),U=L=>L.retainerTitle?.toLowerCase().includes(_)||L.clientName?.toLowerCase().includes(_);return{suggestions:p.filter(L=>U(L.projectedIncome)),others:R.filter(U)}}return{suggestions:p,others:R}},[p,y,w]),N=m||x;return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:u("retainerMatching.selectProjectedDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Eh,{value:w,onChange:g,placeholder:u("retainerMatching.searchProjected")})}),N?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):s.jsxs(s.Fragment,{children:[b.suggestions.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.suggestions")}),s.jsx("div",{className:"matching-list",children:b.suggestions.map(A=>s.jsxs("button",{className:"matching-item matching-item-suggested",onClick:()=>l(A.projectedIncomeId),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:A.projectedIncome.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(A.projectedIncome.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),A.projectedIncome.clientName&&`  ${A.projectedIncome.clientName}`]})]}),s.jsxs("div",{className:"matching-item-right",children:[s.jsx("span",{className:"matching-item-amount",children:Pe(A.projectedIncome.expectedAmountMinor-A.projectedIncome.receivedAmountMinor,A.projectedIncome.currency,h)}),s.jsx(t2,{confidence:A.confidence})]})]},A.projectedIncomeId))})]}),b.others.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.otherDueItems")}),s.jsx("div",{className:"matching-list",children:b.others.map(A=>s.jsxs("button",{className:"matching-item",onClick:()=>l(A.id),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:A.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(A.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),A.clientName&&`  ${A.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount",children:Pe(A.expectedAmountMinor-A.receivedAmountMinor,A.currency,h)})]},A.id))})]}),b.suggestions.length===0&&b.others.length===0&&s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:u(w?"retainerMatching.noMatchingProjected":"retainerMatching.noDueItems")})})]})]})}function t2({confidence:a}){const l=Fe();return s.jsx("span",{className:se("confidence-badge",`confidence-${a}`),children:l(`retainerMatching.confidence.${a}`)})}function n2(){const a=Fe(),{language:l}=Yn(),c=O.useRef(null),{data:u,isLoading:d,isError:h}=Hl(),w=fh(),{openBusinessProfileDrawer:g,businessProfileDrawer:p}=yt(),m=!d&&!h&&Array.isArray(u)&&u.length===0,y=p.isOpen,x=m&&!y;O.useEffect(()=>{x&&c.current&&c.current.focus()},[x]);const b=async()=>{const A=l==="ar"?"  ":"Default Profile";await w.mutateAsync({name:A,email:"",businessType:"none",defaultCurrency:"USD",defaultLanguage:l==="ar"?"ar":"en",isDefault:!0})},N=()=>{g({mode:"create"})};return x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"welcome-modal-overlay"}),s.jsx("div",{className:"welcome-modal",role:"dialog","aria-modal":"true","aria-labelledby":"welcome-modal-title",ref:c,tabIndex:-1,children:s.jsxs("div",{className:"welcome-modal-content",children:[s.jsx("div",{className:"welcome-modal-icon",children:s.jsx(a2,{})}),s.jsx("h2",{id:"welcome-modal-title",className:"welcome-modal-title",children:a("welcome.title")}),s.jsx("p",{className:"welcome-modal-subtitle",children:a("welcome.subtitle")}),s.jsxs("div",{className:"welcome-modal-info",children:[s.jsx("h3",{className:"welcome-modal-info-title",children:a("welcome.infoTitle")}),s.jsxs("ul",{className:"welcome-modal-list",children:[s.jsx("li",{children:a("welcome.bullet1")}),s.jsx("li",{children:a("welcome.bullet2")}),s.jsx("li",{children:a("welcome.bullet3")})]}),s.jsx("p",{className:"welcome-modal-info-note",children:a("welcome.multipleProfiles")})]}),s.jsxs("div",{className:"welcome-modal-actions",children:[s.jsx("button",{className:"btn btn-primary",onClick:N,children:a("welcome.setUpNow")}),s.jsx("button",{className:"btn btn-ghost",onClick:b,disabled:w.isPending,children:w.isPending?a("common.saving"):a("welcome.skipForNow")})]}),s.jsx("p",{className:"welcome-modal-skip-note",children:a("welcome.skipNote")})]})})]}):null}function a2(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const Op="hideDownloadBanner";function i2(){if(typeof navigator>"u")return!1;const a=navigator.platform?.toLowerCase()||"",l=navigator.userAgent?.toLowerCase()||"";return a.includes("mac")||l.includes("macintosh")}function l2(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window}function s2(){const a=Fe(),[l,c]=O.useState(!1);O.useEffect(()=>{!i2()||l2()||localStorage.getItem(Op)==="true"||c(!0)},[]);const u=O.useCallback(()=>{localStorage.setItem(Op,"true"),c(!1)},[]);return l?s.jsxs("div",{className:"mac-download-banner",role:"banner",children:[s.jsx("span",{className:"mac-download-banner-message",children:a("downloadBanner.message")}),s.jsxs("div",{className:"mac-download-banner-actions",children:[s.jsx(Ul,{to:"/download",className:"mac-download-banner-cta","data-cta":"download-banner-mac",children:a("downloadBanner.cta")}),s.jsx("button",{type:"button",className:"mac-download-banner-dismiss",onClick:u,"aria-label":a("downloadBanner.dismiss"),children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}const r2="https://api.frankfurter.dev/v1/latest",eu="mutaba3a_fx_cache";function Th(a,l){try{const c=localStorage.getItem(eu);if(!c)return null;const u=JSON.parse(c),d=`${a}-${l}`;return u[d]||null}catch{return null}}function zp(a){try{const l=localStorage.getItem(eu),c=l?JSON.parse(l):{},u=`${a.base}-${a.quote}`;c[u]=a,localStorage.setItem(eu,JSON.stringify(c))}catch{}}async function c2(a="USD",l="ILS"){const c=Th(a,l),u=new Date().toISOString();if(!navigator.onLine)return c?{rate:c.rate,base:a,quote:l,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:l,date:"",source:"none",fetchedAt:u};try{const d=`${r2}?base=${a}`,h=await fetch(d);if(!h.ok)throw new Error(`HTTP ${h.status}`);const w=await h.json(),g=w.rates[l];if(typeof g!="number"||g<=0)throw new Error("Invalid rate received");const p={rate:g,base:a,quote:l,date:w.date,fetchedAt:u};zp(p);const m={rate:1/g,base:l,quote:a,date:w.date,fetchedAt:u};return zp(m),{rate:g,base:a,quote:l,date:w.date,source:"live",fetchedAt:u}}catch(d){return console.warn("FX fetch failed:",d),c?{rate:c.rate,base:a,quote:l,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:l,date:"",source:"none",fetchedAt:u}}}function Lp(a,l,c,u){return l===c?a:Math.round(a*u)}function o2(a,l,c,u){if(u===null||u<=0)return null;if(c==="ILS"){const d=Lp(a,"USD","ILS",u);return l+d}else{const d=1/u,h=Lp(l,"ILS","USD",d);return a+h}}const Up={rate:(a,l)=>["fxRate",a,l]};function Rh(a="USD",l="ILS"){const c=ce(),{data:u,isLoading:d,isError:h,refetch:w}=fe({queryKey:Up.rate(a,l),queryFn:()=>c2(a,l),staleTime:14400*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0,retry:2,retryDelay:1e3,placeholderData:()=>{const p=Th(a,l);if(p)return{rate:p.rate,base:a,quote:l,date:p.date,source:"cached",fetchedAt:p.fetchedAt}}}),g=()=>{c.invalidateQueries({queryKey:Up.rate(a,l)}),w()};return{rate:u?.rate&&u.rate>0?u.rate:null,source:u?.source??"none",isLoading:d,isError:h,rateDate:u?.date||null,lastUpdated:u?.fetchedAt||null,refetch:g}}const _h="mutaba3a-theme";function u2(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function qp(){if(typeof window>"u")return"system";const a=localStorage.getItem(_h);return a==="light"||a==="dark"||a==="system"?a:"system"}function Bp(a){return a==="system"?u2():a}const Ih=O.createContext(null);function Vo({children:a}){const[l,c]=O.useState(qp),[u,d]=O.useState(()=>Bp(qp()));O.useEffect(()=>{const g=Bp(l);d(g),l==="system"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",l),localStorage.setItem(_h,l)},[l]),O.useEffect(()=>{if(l!=="system")return;const g=window.matchMedia("(prefers-color-scheme: dark)"),p=m=>{d(m.matches?"dark":"light")};return g.addEventListener("change",p),()=>g.removeEventListener("change",p)},[l]);const h=O.useCallback(g=>{c(g)},[]),w={theme:l,resolvedTheme:u,setTheme:h};return s.jsx(Ih.Provider,{value:w,children:a})}function d2(){const a=O.useContext(Ih);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a}const Oh="mutaba3a_fx_banner_state",f2={isMinimized:!1,position:{x:0,y:0}};function m2(){try{const a=localStorage.getItem(Oh);if(a)return JSON.parse(a)}catch{}return f2}function p2(a){try{localStorage.setItem(Oh,JSON.stringify(a))}catch{}}function h2(a){const l=["light","dark","system"],c=l.indexOf(a);return l[(c+1)%l.length]}function y2(){const a=Fe(),{rate:l,source:c,isLoading:u,lastUpdated:d,refetch:h}=Rh("USD","ILS"),{theme:w,resolvedTheme:g,setTheme:p}=d2(),[m,y]=O.useState(m2),[x,b]=O.useState(!1),[N,A]=O.useState({x:0,y:0}),R=O.useRef(null);O.useEffect(()=>{p2(m)},[m]);const _=O.useCallback(X=>{const ue=X.target;if(ue.closest(".fx-banner-actions")||ue.closest("button")||ue.tagName==="BUTTON")return;X.preventDefault(),b(!0);const he=R.current;if(he){const ne=he.getBoundingClientRect();A({x:X.clientX-ne.left,y:X.clientY-ne.top})}},[]);O.useEffect(()=>{if(!x)return;const X=he=>{const ne=R.current;if(!ne)return;const ve=he.clientX-N.x,le=he.clientY-N.y,ye=window.innerWidth-ne.offsetWidth,ge=window.innerHeight-ne.offsetHeight;y(q=>({...q,position:{x:Math.max(0,Math.min(ve,ye)),y:Math.max(0,Math.min(le,ge))}}))},ue=()=>{b(!1)};return document.addEventListener("mousemove",X),document.addEventListener("mouseup",ue),()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",ue)}},[x,N]);const U=O.useCallback(()=>{y(X=>({...X,isMinimized:!X.isMinimized}))},[]),L=O.useCallback(()=>{h()},[h]),M=O.useCallback(()=>{p(h2(w))},[w,p]),k=a(`settings.theme.${w}`),K=l!==null?l.toFixed(4):"",$=d?Hv(d,a):"",F=m.position.x!==0||m.position.y!==0?{left:m.position.x,top:m.position.y,right:"auto",bottom:"auto"}:{};return m.isMinimized?s.jsxs("div",{ref:R,className:se("fx-banner-minimized",x&&"dragging"),style:F,onMouseDown:_,children:[s.jsx("div",{className:"fx-banner-drag-handle fx-banner-drag-handle-mini",title:a("fx.drag"),children:s.jsxs("svg",{width:"6",height:"10",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("button",{className:"fx-banner-mini-content",onClick:U,title:a("fx.showBanner"),children:[s.jsx("span",{className:"fx-banner-mini-icon",children:"$"}),c!=="none"&&l!==null&&s.jsx("span",{className:"fx-banner-mini-rate",children:l.toFixed(2)})]}),s.jsx("button",{className:"fx-banner-mini-theme",onClick:M,title:k,"aria-label":k,children:g==="dark"?s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})})]}):s.jsxs("div",{ref:R,className:se("fx-rate-banner",x&&"dragging"),style:F,onMouseDown:_,role:"banner","aria-label":a("fx.bannerTitle"),children:[s.jsx("div",{className:"fx-banner-drag-handle",title:a("fx.drag"),children:s.jsxs("svg",{width:"8",height:"14",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("div",{className:"fx-banner-content",children:[s.jsxs("div",{className:"fx-banner-rate",children:[s.jsxs("span",{className:"fx-banner-formula",children:["$1 = ",K," "]}),s.jsx("span",{className:se("fx-banner-source",`source-${c}`),children:u?s.jsx("span",{className:"fx-loading",children:"..."}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fx-source-dot"}),a(`fx.${c}`)]})})]}),$&&c!=="none"&&s.jsx("div",{className:"fx-banner-updated",children:$})]}),s.jsxs("div",{className:"fx-banner-actions",children:[s.jsx("button",{className:"fx-banner-btn",onClick:M,title:k,"aria-label":k,children:g==="dark"?s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})}),s.jsx("button",{className:"fx-banner-btn",onClick:L,disabled:u,title:a("fx.refresh"),"aria-label":a("fx.refresh"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:u?"spinning":"",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{className:"fx-banner-btn",onClick:U,title:a("fx.minimize"),"aria-label":a("fx.minimize"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})]})]})}const kp=a=>Symbol.iterator in a,Hp=a=>"entries"in a,Qp=(a,l)=>{const c=a instanceof Map?a:new Map(a.entries()),u=l instanceof Map?l:new Map(l.entries());if(c.size!==u.size)return!1;for(const[d,h]of c)if(!u.has(d)||!Object.is(h,u.get(d)))return!1;return!0},g2=(a,l)=>{const c=a[Symbol.iterator](),u=l[Symbol.iterator]();let d=c.next(),h=u.next();for(;!d.done&&!h.done;){if(!Object.is(d.value,h.value))return!1;d=c.next(),h=u.next()}return!!d.done&&!!h.done};function v2(a,l){return Object.is(a,l)?!0:typeof a!="object"||a===null||typeof l!="object"||l===null||Object.getPrototypeOf(a)!==Object.getPrototypeOf(l)?!1:kp(a)&&kp(l)?Hp(a)&&Hp(l)?Qp(a,l):g2(a,l):Qp({entries:()=>Object.entries(a)},{entries:()=>Object.entries(l)})}function uu(a){const l=Ve.useRef(void 0);return c=>{const u=a(c);return v2(l.current,u)?l.current:l.current=u}}const Gt=wr((a,l)=>({status:"idle",lastSyncAt:null,lastError:null,serverRunning:!1,serverPort:null,serverExpiresAt:null,pendingOpsCount:0,pendingConflictsCount:0,discoveredPeers:[],isDiscovering:!1,trustedPeers:[],syncProgress:null,isExportModalOpen:!1,isImportModalOpen:!1,isPairingModalOpen:!1,isConflictBannerDismissed:!1,setStatus:c=>a({status:c}),setLastSync:c=>a({lastSyncAt:c}),setLastError:c=>a({lastError:c}),setServerRunning:(c,u,d)=>a({serverRunning:c,serverPort:u??null,serverExpiresAt:d??null}),setPendingOpsCount:c=>a({pendingOpsCount:c}),setPendingConflictsCount:c=>a({pendingConflictsCount:c}),refreshCounts:async()=>{try{const c=await j.localDevice.toCollection().first();if(!c)a({pendingOpsCount:0});else{const d=await j.opLog.filter(h=>h.createdBy===c.id).count();a({pendingOpsCount:d})}const u=await j.conflictQueue.where("status").equals("open").count();a({pendingConflictsCount:u})}catch(c){console.error("Failed to refresh sync counts:",c)}},setDiscoveredPeers:c=>a({discoveredPeers:c}),setIsDiscovering:c=>a({isDiscovering:c}),startDiscovery:async()=>{const{isDiscovering:c}=l();if(!c){a({isDiscovering:!0,discoveredPeers:[]});try{if(typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{invoke:u}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]),d=await u("discover_lan_peers");a({discoveredPeers:d})}}catch(u){console.error("Failed to discover peers:",u)}finally{a({isDiscovering:!1})}}},setTrustedPeers:c=>a({trustedPeers:c}),refreshTrustedPeers:async()=>{try{const c=await j.trustedPeers.where("status").equals("verified").toArray();a({trustedPeers:c})}catch(c){console.error("Failed to refresh trusted peers:",c)}},setSyncProgress:c=>a({syncProgress:c}),updateSyncProgress:c=>{const u=l().syncProgress;u&&a({syncProgress:{...u,...c}})},openExportModal:()=>a({isExportModalOpen:!0}),closeExportModal:()=>a({isExportModalOpen:!1}),openImportModal:()=>a({isImportModalOpen:!0}),closeImportModal:()=>a({isImportModalOpen:!1}),openPairingModal:()=>a({isPairingModalOpen:!0}),closePairingModal:()=>a({isPairingModalOpen:!1}),dismissConflictBanner:()=>a({isConflictBannerDismissed:!0}),resetConflictBanner:()=>a({isConflictBannerDismissed:!1}),initialize:async()=>{await l().refreshCounts(),await l().refreshTrustedPeers();const c=await j.syncHistory.orderBy("completedAt").reverse().first();if(c&&a({lastSyncAt:c.completedAt}),typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{listen:u}=await Ce(async()=>{const{listen:h}=await import("./event-DXqYWlmG.js");return{listen:h}},__vite__mapDeps([0,1])),{invoke:d}=await Ce(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[]);await u("sync:ops_received",async h=>{console.log("[SyncStore] Received sync:ops_received event, count:",h.payload);try{const w=await d("get_pending_sync_ops");console.log("[SyncStore] Fetched pending ops:",w.length);for(const p of w)console.log("[SyncStore] Applying op:",p.id,p.opType,p.entityType),await su(p);const g=await d("clear_pending_sync_ops");console.log("[SyncStore] Cleared pending ops:",g),await l().refreshCounts(),a({lastSyncAt:new Date().toISOString()})}catch(w){console.error("[SyncStore] Failed to process sync operations:",w),a({lastError:String(w)})}}),console.log("[SyncStore] Tauri event listener registered for sync:ops_received")}}}));function kj(){return Gt(uu(a=>({status:a.status,pendingConflicts:a.pendingConflictsCount,lastSyncAt:a.lastSyncAt,serverRunning:a.serverRunning})))}function Hj(){return Gt(uu(a=>({openExportModal:a.openExportModal,openImportModal:a.openImportModal,openPairingModal:a.openPairingModal,startDiscovery:a.startDiscovery,refreshCounts:a.refreshCounts})))}function x2(){return Gt(uu(a=>({count:a.pendingConflictsCount,isDismissed:a.isConflictBannerDismissed,dismiss:a.dismissConflictBanner,reset:a.resetConflictBanner})))}const Ut=O.forwardRef(({variant:a="primary",size:l="md",children:c,isLoading:u,disabled:d,className:h="",...w},g)=>{const p=["btn",`btn-${a}`,`btn-${l}`,u&&"btn-loading",h].filter(Boolean).join(" ");return s.jsxs("button",{ref:g,className:p,disabled:d||u,...w,children:[u&&s.jsx("span",{className:"btn-spinner","aria-hidden":"true"}),s.jsx("span",{className:u?"btn-content-hidden":"",children:c})]})});Ut.displayName="Button";const b2=O.forwardRef(({variant:a="default",padding:l="md",children:c,className:u="",...d},h)=>{const w=["card",`card-${a}`,`card-padding-${l}`,u].filter(Boolean).join(" ");return s.jsx("div",{ref:h,className:w,...d,children:c})});b2.displayName="Card";const w2=O.forwardRef(({title:a,action:l,children:c,className:u="",...d},h)=>s.jsx("div",{ref:h,className:`card-header ${u}`,...d,children:c||s.jsxs(s.Fragment,{children:[a&&s.jsx("h3",{className:"card-title",children:a}),l&&s.jsx("div",{className:"card-action",children:l})]})}));w2.displayName="CardHeader";const j2=O.forwardRef(({children:a,className:l="",...c},u)=>s.jsx("div",{ref:u,className:`card-content ${l}`,...c,children:a}));j2.displayName="CardContent";const S2=O.forwardRef(({children:a,className:l="",...c},u)=>s.jsx("div",{ref:u,className:`card-footer ${l}`,...c,children:a}));S2.displayName="CardFooter";function A2(){const{count:a,isDismissed:l,dismiss:c}=x2(),u=au();if(a===0||l)return null;const d=()=>{u({to:"/settings",search:{section:"sync"}})},h=w=>{w.stopPropagation(),c()};return s.jsxs("div",{className:"conflict-banner",role:"alert",children:[s.jsxs("div",{className:"conflict-banner__content",children:[s.jsx("span",{className:"conflict-banner__icon",children:""}),s.jsxs("span",{className:"conflict-banner__text",children:[s.jsxs("strong",{children:[a," ",a===1?"edit":"edits"]})," detected on multiple devices"]})]}),s.jsxs("div",{className:"conflict-banner__actions",children:[s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--review",onClick:d,children:"Review"}),s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--dismiss",onClick:h,"aria-label":"Dismiss",children:""})]})]})}class qa extends Error{code;constructor(l,c){super(c),this.code=l,this.name="SyncError"}}const zh=new Uint8Array([77,83,89,78]),Lh=1,Uh=0,zl=16,Ll=12,D2=6e5;async function qh(a,l){const c=new TextEncoder,u=await crypto.subtle.importKey("raw",c.encode(a),"PBKDF2",!1,["deriveKey"]),d=new Uint8Array(l).buffer;return crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:D2,hash:"SHA-256"},u,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function N2(a,l){const u=new TextEncoder().encode(JSON.stringify(a)),d=crypto.getRandomValues(new Uint8Array(zl)),h=crypto.getRandomValues(new Uint8Array(Ll)),w=await qh(l,d),g=await crypto.subtle.encrypt({name:"AES-GCM",iv:h},w,u),p=12+zl+Ll,m=new Uint8Array(p+g.byteLength);let y=0;return m.set(zh,y),y+=4,new DataView(m.buffer).setUint32(y,Lh,!0),y+=4,new DataView(m.buffer).setUint32(y,Uh,!0),y+=4,m.set(d,y),y+=zl,m.set(h,y),y+=Ll,m.set(new Uint8Array(g),y),m.buffer}async function Bh(a,l){const c=new DataView(a),u=new Uint8Array(a);let d=0;const h=u.slice(d,d+4);if(!E2(h,zh))throw new qa("BUNDLE_CORRUPT","Invalid bundle file - not a valid .msync file");d+=4;const w=c.getUint32(d,!0);if(w!==Lh)throw new qa("BUNDLE_CORRUPT",`Unsupported bundle version: ${w}`);if(d+=4,c.getUint32(d,!0)!==Uh)throw new qa("BUNDLE_CORRUPT","Unsupported key derivation function");d+=4;const p=u.slice(d,d+zl);d+=zl;const m=u.slice(d,d+Ll);d+=Ll;const y=u.slice(d),x=await qh(l,p);let b;try{b=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},x,y)}catch{throw new qa("BUNDLE_BAD_PASSPHRASE","Wrong passphrase or corrupted bundle")}const A=new TextDecoder().decode(b);try{const R=JSON.parse(A);if(!R.manifest||!Array.isArray(R.ops))throw new qa("BUNDLE_CORRUPT","Invalid bundle structure");return R}catch(R){throw R instanceof qa?R:new qa("BUNDLE_CORRUPT","Failed to parse bundle contents")}}function M2(a){const l=[];let c=0;a.length<8?l.push("At least 8 characters"):a.length>=12?c+=2:c+=1,/[a-z]/.test(a)&&(c+=1),/[A-Z]/.test(a)&&(c+=1),/[0-9]/.test(a)&&(c+=1),/[^a-zA-Z0-9]/.test(a)&&(c+=1),(!/[a-z]/.test(a)||!/[A-Z]/.test(a))&&l.push("Mix of upper and lowercase letters"),/[0-9]/.test(a)||l.push("At least one number");const u=[/^123/,/password/i,/qwerty/i,/admin/i];for(const h of u)if(h.test(a)){c-=1,l.push("Avoid common patterns");break}let d;return c<3?d="weak":c<5?d="fair":d="strong",{valid:a.length>=8&&c>=3,strength:d,feedback:l}}function C2(a=4){const l=["apple","baker","candy","delta","eagle","frost","green","happy","index","joker","karma","lemon","maple","north","ocean","piano","queen","river","solar","tiger","ultra","vivid","water","xenon","yacht","zebra","amber","blaze","coral","dusk","ember","flame","grove","haven","ivory","jade","kayak","lunar","marble","nova","opal","prism","quartz","ridge","storm","tide","unity","valley","wave","axis","bloom","cloud","drift","echo","fern","glow","haze","iris","jewel","knot","leaf","mist","nest","orbit"],c=[],u=new Uint32Array(a);crypto.getRandomValues(u);for(let d=0;d<a;d++){const h=u[d]%l.length;c.push(l[h])}return c.join("-")}function E2(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==l[c])return!1;return!0}async function T2(a){const l=xa();let c=a.sinceHlc||ut.zeroString();if(a.targetPeerId){const N=await j.peerCursors.get(a.targetPeerId);N?.lastSentHlc&&(c=N.lastSentHlc)}const u=await ch(c);if(u.length===0)throw new Error("No operations to export");const d=JSON.stringify(u),h=await kh(d),w=u[u.length-1].hlc,g={bundleVersion:1,createdAt:new Date().toISOString(),createdBy:l.id,createdByName:l.name,sinceHlc:c!==ut.zeroString()?c:void 0,untilHlc:w,opCount:u.length,contentHash:h},m=await N2({manifest:g,ops:u},a.passphrase),y=new Date().toISOString().split("T")[0],x=new Date().toISOString().split("T")[1].slice(0,5).replace(":",""),b=`mutaba3a-sync_${l.name.replace(/[^a-zA-Z0-9]/g,"-")}_${y}_${x}.msync`;return{data:m,filename:b,opCount:u.length,manifest:g}}async function R2(a,l){const c=await Bh(a,l),u=await I2(c.ops),d=c.ops.length-u;return{manifest:c.manifest,alreadyImported:d===0,newOpsCount:d}}async function _2(a,l){const c=await Bh(a,l),u=JSON.stringify(c.ops);if(await kh(u)!==c.manifest.contentHash)throw new Error("Bundle integrity check failed - content may be corrupted");const{applyOps:h}=await Ce(async()=>{const{applyOps:p}=await Promise.resolve().then(()=>_1);return{applyOps:p}},void 0),w=await h(c.ops),g={id:crypto.randomUUID(),method:"bundle_import",peerName:c.manifest.createdByName,pulledCount:w.applied,pushedCount:0,conflictCount:w.conflicts.length,startedAt:new Date().toISOString(),completedAt:new Date().toISOString(),status:w.conflicts.length>0?"partial":"success"};return await j.syncHistory.add(g),{applied:w.applied,skipped:w.skipped,conflicts:w.conflicts.length,historyId:g.id}}async function kh(a){const c=new TextEncoder().encode(a),u=await crypto.subtle.digest("SHA-256",c);return"sha256:"+Array.from(new Uint8Array(u)).map(h=>h.toString(16).padStart(2,"0")).join("")}async function I2(a){let l=0;for(const c of a)await j.opLog.get(c.id)&&l++;return l}function O2(a,l){const c=new Blob([a],{type:"application/octet-stream"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}async function z2(a){return new Promise((l,c)=>{const u=new FileReader;u.onload=()=>l(u.result),u.onerror=()=>c(new Error("Failed to read file")),u.readAsArrayBuffer(a)})}function L2(a){return a.toLowerCase().endsWith(".msync")}const yr=O.forwardRef(({label:a,error:l,hint:c,className:u="",id:d,...h},w)=>{const g=d||(a?`input-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("input",{ref:w,id:g,className:`input ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":l?`${g}-error`:c?`${g}-hint`:void 0,...h}),l&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});yr.displayName="Input";const U2=O.forwardRef(({label:a,error:l,hint:c,className:u="",id:d,...h},w)=>{const g=d||(a?`textarea-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("textarea",{ref:w,id:g,className:`textarea ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":l?`${g}-error`:c?`${g}-hint`:void 0,...h}),l&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});U2.displayName="Textarea";const q2=O.forwardRef(({label:a,error:l,hint:c,children:u,className:d="",id:h,...w},g)=>{const p=h||(a?`select-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),m=!!l;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:p,className:"input-label",children:a}),s.jsxs("div",{className:"select-wrapper",children:[s.jsx("select",{ref:g,id:p,className:`select ${m?"input-error":""} ${d}`,"aria-invalid":m,"aria-describedby":l?`${p}-error`:c?`${p}-hint`:void 0,...w,children:u}),s.jsx("span",{className:"select-chevron","aria-hidden":"true",children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:s.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l&&s.jsx("p",{id:`${p}-error`,className:"input-error-message",role:"alert",children:l}),c&&!l&&s.jsx("p",{id:`${p}-hint`,className:"input-hint",children:c})]})});q2.displayName="Select";function B2(){const a=Gt(k=>k.isExportModalOpen),l=Gt(k=>k.closeExportModal),[c,u]=O.useState(""),[d,h]=O.useState(""),[w,g]=O.useState(!1),[p,m]=O.useState(!1),[y,x]=O.useState(null),[b,N]=O.useState(null);if(!a)return null;const A=M2(c),R=c===d,_=A.valid&&R&&c.length>0,U=()=>{const k=C2(4);u(k),h(k),g(!0)},L=async()=>{if(_){m(!0),x(null);try{const k=await T2({passphrase:c});O2(k.data,k.filename),N({filename:k.filename,opCount:k.opCount})}catch(k){x(k instanceof Error?k.message:"Export failed")}finally{m(!1)}}},M=()=>{u(""),h(""),g(!1),x(null),N(null),l()};return s.jsx("div",{className:"modal-overlay",onClick:M,children:s.jsxs("div",{className:"export-modal",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"export-modal__header",children:[s.jsx("h2",{className:"export-modal__title",children:"Export Sync Bundle"}),s.jsx("button",{className:"export-modal__close",onClick:M,children:""})]}),b?s.jsx("div",{className:"export-modal__body",children:s.jsxs("div",{className:"export-success",children:[s.jsx("span",{className:"export-success__icon",children:""}),s.jsx("h3",{className:"export-success__title",children:"Export Complete"}),s.jsxs("p",{className:"export-success__message",children:["Exported ",b.opCount," changes to:",s.jsx("br",{}),s.jsx("code",{children:b.filename})]}),s.jsxs("p",{className:"export-success__hint",children:["Share this file with your other device and import it there.",s.jsx("br",{}),"Keep your passphrase safe - you'll need it to import."]})]})}):s.jsxs("div",{className:"export-modal__body",children:[s.jsx("p",{className:"export-modal__description",children:"Create an encrypted file containing your recent changes. You'll need the passphrase to import this bundle on another device."}),y&&s.jsx("div",{className:"export-modal__error",children:y}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"export-modal__input-row",children:[s.jsx(yr,{type:w?"text":"password",value:c,onChange:k=>u(k.target.value),placeholder:"Enter a strong passphrase"}),s.jsx("button",{type:"button",className:"export-modal__toggle-visibility",onClick:()=>g(!w),children:w?"":""})]}),c&&!A.valid&&s.jsx("ul",{className:"export-modal__feedback",children:A.feedback.map((k,K)=>s.jsx("li",{children:k},K))}),c&&s.jsxs("div",{className:`export-modal__strength export-modal__strength--${A.strength}`,children:["Strength: ",A.strength]})]}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Confirm Passphrase"}),s.jsx(yr,{type:w?"text":"password",value:d,onChange:k=>h(k.target.value),placeholder:"Confirm your passphrase"}),d&&!R&&s.jsx("div",{className:"export-modal__error-inline",children:"Passphrases don't match"})]}),s.jsx("button",{type:"button",className:"export-modal__generate",onClick:U,children:"Generate secure passphrase"})]}),s.jsx("div",{className:"export-modal__footer",children:b?s.jsx(Ut,{onClick:M,children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(Ut,{variant:"ghost",onClick:M,children:"Cancel"}),s.jsx(Ut,{onClick:L,disabled:!_||p,children:p?"Exporting...":"Export Bundle"})]})})]})})}function k2(){const a=Gt(G=>G.isImportModalOpen),l=Gt(G=>G.closeImportModal),c=Gt(G=>G.refreshCounts),[u,d]=O.useState("select"),[h,w]=O.useState(null),[g,p]=O.useState(null),[m,y]=O.useState(""),[x,b]=O.useState(!1),[N,A]=O.useState(!1),[R,_]=O.useState(null),[U,L]=O.useState(null),[M,k]=O.useState(null),[K,$]=O.useState(!1),F=O.useRef(null),X=O.useCallback(()=>{d("select"),w(null),p(null),y(""),b(!1),A(!1),_(null),L(null),k(null),$(!1)},[]),ue=()=>{X(),l()},he=async G=>{if(_(null),!L2(G.name)){_("Please select a .msync file");return}try{const be=await z2(G);w(G),p(be),d("decrypt")}catch(be){_(be instanceof Error?be.message:"Failed to read file")}},ne=G=>{const be=G.target.files?.[0];be&&he(be)},ve=O.useCallback(G=>{G.preventDefault(),$(!1);const be=G.dataTransfer.files[0];be&&he(be)},[]),le=O.useCallback(G=>{G.preventDefault(),$(!0)},[]),ye=O.useCallback(G=>{G.preventDefault(),$(!1)},[]),ge=async()=>{if(!(!g||!m)){A(!0),_(null);try{const G=await R2(g,m);L(G),d("preview")}catch(G){const be=G instanceof Error?G.message:"Failed to decrypt bundle";be.includes("decrypt")||be.includes("passphrase")?_("Incorrect passphrase. Please try again."):_(be)}finally{A(!1)}}},q=async()=>{if(!(!g||!m)){A(!0),_(null);try{const G=await _2(g,m);k(G),d("success"),c()}catch(G){_(G instanceof Error?G.message:"Import failed")}finally{A(!1)}}},Y=()=>{w(null),p(null),y(""),_(null),d("select"),F.current&&(F.current.value="")},ae=G=>G<1024?`${G} B`:G<1024*1024?`${(G/1024).toFixed(1)} KB`:`${(G/(1024*1024)).toFixed(1)} MB`,xe=G=>new Date(G).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return a?s.jsx("div",{className:"modal-overlay",onClick:ue,children:s.jsxs("div",{className:"import-modal",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"import-modal__header",children:[s.jsx("h2",{className:"import-modal__title",children:"Import Sync Bundle"}),s.jsx("button",{className:"import-modal__close",onClick:ue,children:""})]}),u==="success"&&M?s.jsx("div",{className:"import-modal__body",children:s.jsxs("div",{className:"import-success",children:[s.jsx("span",{className:"import-success__icon",children:""}),s.jsx("h3",{className:"import-success__title",children:"Import Complete"}),s.jsxs("p",{className:"import-success__message",children:["Successfully imported ",M.applied," changes.",M.skipped>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),M.skipped," changes were already synced."]}),M.conflicts>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),M.conflicts," conflicts need review."]})]})]})}):s.jsxs("div",{className:"import-modal__body",children:[u==="select"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"import-modal__description",children:"Select a .msync file to import changes from another device."}),R&&s.jsx("div",{className:"import-modal__error",children:R}),s.jsxs("div",{className:`import-modal__dropzone ${K?"import-modal__dropzone--active":""}`,onClick:()=>F.current?.click(),onDrop:ve,onDragOver:le,onDragLeave:ye,children:[s.jsx("p",{className:"import-modal__dropzone-text",children:"Drop .msync file here or click to browse"}),s.jsx("p",{className:"import-modal__dropzone-hint",children:"Only .msync files are supported"})]}),s.jsx("input",{ref:F,type:"file",accept:".msync",onChange:ne,style:{display:"none"}})]}),u==="decrypt"&&h&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h.name}),s.jsx("div",{className:"import-modal__file-size",children:ae(h.size)})]}),s.jsx("button",{className:"import-modal__file-remove",onClick:Y,title:"Remove file",children:""})]}),R&&s.jsx("div",{className:"import-modal__error",children:R}),s.jsxs("div",{className:"import-modal__field",children:[s.jsx("label",{className:"import-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"import-modal__input-row",children:[s.jsx(yr,{type:x?"text":"password",value:m,onChange:G=>y(G.target.value),placeholder:"Enter the passphrase used to create this bundle",onKeyDown:G=>G.key==="Enter"&&m&&ge()}),s.jsx("button",{type:"button",className:"import-modal__toggle-visibility",onClick:()=>b(!x),children:x?"":""})]})]})]}),u==="preview"&&U&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h?.name}),s.jsx("div",{className:"import-modal__file-size",children:h&&ae(h.size)})]})]}),R&&s.jsx("div",{className:"import-modal__error",children:R}),U.alreadyImported&&s.jsx("div",{className:"import-modal__warning",children:"This bundle has already been imported. No new changes to apply."}),s.jsxs("div",{className:"import-modal__preview",children:[s.jsx("div",{className:"import-modal__preview-title",children:"Bundle Details"}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"From device"}),s.jsx("span",{className:"import-modal__preview-value",children:U.manifest.createdByName})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Created"}),s.jsx("span",{className:"import-modal__preview-value",children:xe(U.manifest.createdAt)})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Total changes"}),s.jsx("span",{className:"import-modal__preview-value",children:U.manifest.opCount})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"New changes"}),s.jsx("span",{className:"import-modal__preview-value",children:U.newOpsCount})]})]})]})]}),s.jsx("div",{className:"import-modal__footer",children:u==="success"?s.jsx(Ut,{onClick:ue,children:"Done"}):u==="preview"?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{variant:"ghost",onClick:()=>d("decrypt"),children:"Back"}),s.jsx(Ut,{onClick:q,disabled:N||(U?.alreadyImported??!1),children:N?"Importing...":"Import Changes"})]}):u==="decrypt"?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{variant:"ghost",onClick:ue,children:"Cancel"}),s.jsx(Ut,{onClick:ge,disabled:!m||N,children:N?"Decrypting...":"Continue"})]}):s.jsx(Ut,{variant:"ghost",onClick:ue,children:"Cancel"})})]})}):null}var H2=Object.defineProperty,gr=Object.getOwnPropertySymbols,Hh=Object.prototype.hasOwnProperty,Qh=Object.prototype.propertyIsEnumerable,Vp=(a,l,c)=>l in a?H2(a,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[l]=c,tu=(a,l)=>{for(var c in l||(l={}))Hh.call(l,c)&&Vp(a,c,l[c]);if(gr)for(var c of gr(l))Qh.call(l,c)&&Vp(a,c,l[c]);return a},nu=(a,l)=>{var c={};for(var u in a)Hh.call(a,u)&&l.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&gr)for(var u of gr(a))l.indexOf(u)<0&&Qh.call(a,u)&&(c[u]=a[u]);return c};var Ha;(a=>{const l=class Ae{constructor(p,m,y,x){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<Ae.MIN_VERSION||p>Ae.MAX_VERSION)throw new RangeError("Version value out of range");if(x<-1||x>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let b=[];for(let A=0;A<this.size;A++)b.push(!1);for(let A=0;A<this.size;A++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const N=this.addEccAndInterleave(y);if(this.drawCodewords(N),x==-1){let A=1e9;for(let R=0;R<8;R++){this.applyMask(R),this.drawFormatBits(R);const _=this.getPenaltyScore();_<A&&(x=R,A=_),this.applyMask(R)}}d(0<=x&&x<=7),this.mask=x,this.applyMask(x),this.drawFormatBits(x),this.isFunction=[]}static encodeText(p,m){const y=a.QrSegment.makeSegments(p);return Ae.encodeSegments(y,m)}static encodeBinary(p,m){const y=a.QrSegment.makeBytes(p);return Ae.encodeSegments([y],m)}static encodeSegments(p,m,y=1,x=40,b=-1,N=!0){if(!(Ae.MIN_VERSION<=y&&y<=x&&x<=Ae.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let A,R;for(A=y;;A++){const M=Ae.getNumDataCodewords(A,m)*8,k=w.getTotalBits(p,A);if(k<=M){R=k;break}if(A>=x)throw new RangeError("Data too long")}for(const M of[Ae.Ecc.MEDIUM,Ae.Ecc.QUARTILE,Ae.Ecc.HIGH])N&&R<=Ae.getNumDataCodewords(A,M)*8&&(m=M);let _=[];for(const M of p){c(M.mode.modeBits,4,_),c(M.numChars,M.mode.numCharCountBits(A),_);for(const k of M.getData())_.push(k)}d(_.length==R);const U=Ae.getNumDataCodewords(A,m)*8;d(_.length<=U),c(0,Math.min(4,U-_.length),_),c(0,(8-_.length%8)%8,_),d(_.length%8==0);for(let M=236;_.length<U;M^=253)c(M,8,_);let L=[];for(;L.length*8<_.length;)L.push(0);return _.forEach((M,k)=>L[k>>>3]|=M<<7-(k&7)),new Ae(A,m,L,b)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let y=0;y<m;y++)for(let x=0;x<m;x++)y==0&&x==0||y==0&&x==m-1||y==m-1&&x==0||this.drawAlignmentPattern(p[y],p[x]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let y=m;for(let b=0;b<10;b++)y=y<<1^(y>>>9)*1335;const x=(m<<10|y)^21522;d(x>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,u(x,b));this.setFunctionModule(8,7,u(x,6)),this.setFunctionModule(8,8,u(x,7)),this.setFunctionModule(7,8,u(x,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,u(x,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,u(x,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,u(x,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;d(m>>>18==0);for(let y=0;y<18;y++){const x=u(m,y),b=this.size-11+y%3,N=Math.floor(y/3);this.setFunctionModule(b,N,x),this.setFunctionModule(N,b,x)}}drawFinderPattern(p,m){for(let y=-4;y<=4;y++)for(let x=-4;x<=4;x++){const b=Math.max(Math.abs(x),Math.abs(y)),N=p+x,A=m+y;0<=N&&N<this.size&&0<=A&&A<this.size&&this.setFunctionModule(N,A,b!=2&&b!=4)}}drawAlignmentPattern(p,m){for(let y=-2;y<=2;y++)for(let x=-2;x<=2;x++)this.setFunctionModule(p+x,m+y,Math.max(Math.abs(x),Math.abs(y))!=1)}setFunctionModule(p,m,y){this.modules[m][p]=y,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,y=this.errorCorrectionLevel;if(p.length!=Ae.getNumDataCodewords(m,y))throw new RangeError("Invalid argument");const x=Ae.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][m],b=Ae.ECC_CODEWORDS_PER_BLOCK[y.ordinal][m],N=Math.floor(Ae.getNumRawDataModules(m)/8),A=x-N%x,R=Math.floor(N/x);let _=[];const U=Ae.reedSolomonComputeDivisor(b);for(let M=0,k=0;M<x;M++){let K=p.slice(k,k+R-b+(M<A?0:1));k+=K.length;const $=Ae.reedSolomonComputeRemainder(K,U);M<A&&K.push(0),_.push(K.concat($))}let L=[];for(let M=0;M<_[0].length;M++)_.forEach((k,K)=>{(M!=R-b||K>=A)&&L.push(k[M])});return d(L.length==N),L}drawCodewords(p){if(p.length!=Math.floor(Ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let x=0;x<this.size;x++)for(let b=0;b<2;b++){const N=y-b,R=(y+1&2)==0?this.size-1-x:x;!this.isFunction[R][N]&&m<p.length*8&&(this.modules[R][N]=u(p[m>>>3],7-(m&7)),m++)}}d(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let y=0;y<this.size;y++){let x;switch(p){case 0:x=(y+m)%2==0;break;case 1:x=m%2==0;break;case 2:x=y%3==0;break;case 3:x=(y+m)%3==0;break;case 4:x=(Math.floor(y/3)+Math.floor(m/2))%2==0;break;case 5:x=y*m%2+y*m%3==0;break;case 6:x=(y*m%2+y*m%3)%2==0;break;case 7:x=((y+m)%2+y*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][y]&&x&&(this.modules[m][y]=!this.modules[m][y])}}getPenaltyScore(){let p=0;for(let b=0;b<this.size;b++){let N=!1,A=0,R=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[b][_]==N?(A++,A==5?p+=Ae.PENALTY_N1:A>5&&p++):(this.finderPenaltyAddHistory(A,R),N||(p+=this.finderPenaltyCountPatterns(R)*Ae.PENALTY_N3),N=this.modules[b][_],A=1);p+=this.finderPenaltyTerminateAndCount(N,A,R)*Ae.PENALTY_N3}for(let b=0;b<this.size;b++){let N=!1,A=0,R=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][b]==N?(A++,A==5?p+=Ae.PENALTY_N1:A>5&&p++):(this.finderPenaltyAddHistory(A,R),N||(p+=this.finderPenaltyCountPatterns(R)*Ae.PENALTY_N3),N=this.modules[_][b],A=1);p+=this.finderPenaltyTerminateAndCount(N,A,R)*Ae.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let N=0;N<this.size-1;N++){const A=this.modules[b][N];A==this.modules[b][N+1]&&A==this.modules[b+1][N]&&A==this.modules[b+1][N+1]&&(p+=Ae.PENALTY_N2)}let m=0;for(const b of this.modules)m=b.reduce((N,A)=>N+(A?1:0),m);const y=this.size*this.size,x=Math.ceil(Math.abs(m*20-y*10)/y)-1;return d(0<=x&&x<=9),p+=x*Ae.PENALTY_N4,d(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let x=this.size-7;y.length<p;x-=m)y.splice(1,0,x);return y}}static getNumRawDataModules(p){if(p<Ae.MIN_VERSION||p>Ae.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;m-=(25*y-10)*y-55,p>=7&&(m-=36)}return d(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(Ae.getNumRawDataModules(p)/8)-Ae.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*Ae.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let x=0;x<p-1;x++)m.push(0);m.push(1);let y=1;for(let x=0;x<p;x++){for(let b=0;b<m.length;b++)m[b]=Ae.reedSolomonMultiply(m[b],y),b+1<m.length&&(m[b]^=m[b+1]);y=Ae.reedSolomonMultiply(y,2)}return m}static reedSolomonComputeRemainder(p,m){let y=m.map(x=>0);for(const x of p){const b=x^y.shift();y.push(0),m.forEach((N,A)=>y[A]^=Ae.reedSolomonMultiply(N,b))}return y}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let y=0;for(let x=7;x>=0;x--)y=y<<1^(y>>>7)*285,y^=(m>>>x&1)*p;return d(y>>>8==0),y}finderPenaltyCountPatterns(p){const m=p[1];d(m<=this.size*3);const y=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(y&&p[0]>=m*4&&p[6]>=m?1:0)+(y&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,y){return p&&(this.finderPenaltyAddHistory(m,y),m=0),m+=this.size,this.finderPenaltyAddHistory(m,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=l;function c(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)m.push(g>>>y&1)}function u(g,p){return(g>>>p&1)!=0}function d(g){if(!g)throw new Error("Assertion error")}const h=class $e{constructor(p,m,y){if(this.mode=p,this.numChars=m,this.bitData=y,m<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let m=[];for(const y of p)c(y,8,m);return new $e($e.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!$e.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let y=0;y<p.length;){const x=Math.min(p.length-y,3);c(parseInt(p.substring(y,y+x),10),x*3+1,m),y+=x}return new $e($e.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!$e.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],y;for(y=0;y+2<=p.length;y+=2){let x=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;x+=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),c(x,11,m)}return y<p.length&&c($e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,m),new $e($e.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:$e.isNumeric(p)?[$e.makeNumeric(p)]:$e.isAlphanumeric(p)?[$e.makeAlphanumeric(p)]:[$e.makeBytes($e.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)c(p,8,m);else if(p<16384)c(2,2,m),c(p,14,m);else if(p<1e6)c(6,3,m),c(p,21,m);else throw new RangeError("ECI assignment value out of range");return new $e($e.Mode.ECI,0,m)}static isNumeric(p){return $e.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return $e.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let y=0;for(const x of p){const b=x.mode.numCharCountBits(m);if(x.numChars>=1<<b)return 1/0;y+=4+b+x.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?m.push(p.charCodeAt(y)):(m.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return m}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let w=h;a.QrSegment=h})(Ha||(Ha={}));(a=>{(l=>{const c=class{constructor(d,h){this.ordinal=d,this.formatBits=h}};c.LOW=new c(0,1),c.MEDIUM=new c(1,0),c.QUARTILE=new c(2,3),c.HIGH=new c(3,2),l.Ecc=c})(a.QrCode||(a.QrCode={}))})(Ha||(Ha={}));(a=>{(l=>{const c=class{constructor(d,h){this.modeBits=d,this.numBitsCharCount=h}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};c.NUMERIC=new c(1,[10,12,14]),c.ALPHANUMERIC=new c(2,[9,11,13]),c.BYTE=new c(4,[8,16,16]),c.KANJI=new c(8,[8,10,12]),c.ECI=new c(7,[0,0,0]),l.Mode=c})(a.QrSegment||(a.QrSegment={}))})(Ha||(Ha={}));var Ii=Ha;var Q2={L:Ii.QrCode.Ecc.LOW,M:Ii.QrCode.Ecc.MEDIUM,Q:Ii.QrCode.Ecc.QUARTILE,H:Ii.QrCode.Ecc.HIGH},Vh=128,Yh="L",Ph="#FFFFFF",Kh="#000000",Fh=!1,Gh=1,V2=4,Y2=0,P2=.1;function Zh(a,l=0){const c=[];return a.forEach(function(u,d){let h=null;u.forEach(function(w,g){if(!w&&h!==null){c.push(`M${h+l} ${d+l}h${g-h}v1H${h+l}z`),h=null;return}if(g===u.length-1){if(!w)return;h===null?c.push(`M${g+l},${d+l} h1v1H${g+l}z`):c.push(`M${h+l},${d+l} h${g+1-h}v1H${h+l}z`);return}w&&h===null&&(h=g)})}),c.join("")}function Xh(a,l){return a.slice().map((c,u)=>u<l.y||u>=l.y+l.h?c:c.map((d,h)=>h<l.x||h>=l.x+l.w?d:!1))}function K2(a,l,c,u){if(u==null)return null;const d=a.length+c*2,h=Math.floor(l*P2),w=d/l,g=(u.width||h)*w,p=(u.height||h)*w,m=u.x==null?a.length/2-g/2:u.x*w,y=u.y==null?a.length/2-p/2:u.y*w,x=u.opacity==null?1:u.opacity;let b=null;if(u.excavate){let A=Math.floor(m),R=Math.floor(y),_=Math.ceil(g+m-A),U=Math.ceil(p+y-R);b={x:A,y:R,w:_,h:U}}const N=u.crossOrigin;return{x:m,y,h:p,w:g,excavation:b,opacity:x,crossOrigin:N}}function F2(a,l){return l!=null?Math.max(Math.floor(l),0):a?V2:Y2}function Jh({value:a,level:l,minVersion:c,includeMargin:u,marginSize:d,imageSettings:h,size:w,boostLevel:g}){let p=Ve.useMemo(()=>{const A=(Array.isArray(a)?a:[a]).reduce((R,_)=>(R.push(...Ii.QrSegment.makeSegments(_)),R),[]);return Ii.QrCode.encodeSegments(A,Q2[l],c,void 0,void 0,g)},[a,l,c,g]);const{cells:m,margin:y,numCells:x,calculatedImageSettings:b}=Ve.useMemo(()=>{let N=p.getModules();const A=F2(u,d),R=N.length+A*2,_=K2(N,w,A,h);return{cells:N,margin:A,numCells:R,calculatedImageSettings:_}},[p,w,h,u,d]);return{qrcode:p,margin:y,cells:m,numCells:x,calculatedImageSettings:b}}var G2=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Z2=Ve.forwardRef(function(l,c){const u=l,{value:d,size:h=Vh,level:w=Yh,bgColor:g=Ph,fgColor:p=Kh,includeMargin:m=Fh,minVersion:y=Gh,boostLevel:x,marginSize:b,imageSettings:N}=u,R=nu(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:_}=R,U=nu(R,["style"]),L=N?.src,M=Ve.useRef(null),k=Ve.useRef(null),K=Ve.useCallback(ye=>{M.current=ye,typeof c=="function"?c(ye):c&&(c.current=ye)},[c]),[$,F]=Ve.useState(!1),{margin:X,cells:ue,numCells:he,calculatedImageSettings:ne}=Jh({value:d,level:w,minVersion:y,boostLevel:x,includeMargin:m,marginSize:b,imageSettings:N,size:h});Ve.useEffect(()=>{if(M.current!=null){const ye=M.current,ge=ye.getContext("2d");if(!ge)return;let q=ue;const Y=k.current,ae=ne!=null&&Y!==null&&Y.complete&&Y.naturalHeight!==0&&Y.naturalWidth!==0;ae&&ne.excavation!=null&&(q=Xh(ue,ne.excavation));const xe=window.devicePixelRatio||1;ye.height=ye.width=h*xe;const G=h/he*xe;ge.scale(G,G),ge.fillStyle=g,ge.fillRect(0,0,he,he),ge.fillStyle=p,G2?ge.fill(new Path2D(Zh(q,X))):ue.forEach(function(be,Z){be.forEach(function(V,W){V&&ge.fillRect(W+X,Z+X,1,1)})}),ne&&(ge.globalAlpha=ne.opacity),ae&&ge.drawImage(Y,ne.x+X,ne.y+X,ne.w,ne.h)}}),Ve.useEffect(()=>{F(!1)},[L]);const ve=tu({height:h,width:h},_);let le=null;return L!=null&&(le=Ve.createElement("img",{src:L,key:L,style:{display:"none"},onLoad:()=>{F(!0)},ref:k,crossOrigin:ne?.crossOrigin})),Ve.createElement(Ve.Fragment,null,Ve.createElement("canvas",tu({style:ve,height:h,width:h,ref:K,role:"img"},U)),le)});Z2.displayName="QRCodeCanvas";var $h=Ve.forwardRef(function(l,c){const u=l,{value:d,size:h=Vh,level:w=Yh,bgColor:g=Ph,fgColor:p=Kh,includeMargin:m=Fh,minVersion:y=Gh,boostLevel:x,title:b,marginSize:N,imageSettings:A}=u,R=nu(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:_,cells:U,numCells:L,calculatedImageSettings:M}=Jh({value:d,level:w,minVersion:y,boostLevel:x,includeMargin:m,marginSize:N,imageSettings:A,size:h});let k=U,K=null;A!=null&&M!=null&&(M.excavation!=null&&(k=Xh(U,M.excavation)),K=Ve.createElement("image",{href:A.src,height:M.h,width:M.w,x:M.x+_,y:M.y+_,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const $=Zh(k,_);return Ve.createElement("svg",tu({height:h,width:h,viewBox:`0 0 ${L} ${L}`,ref:c,role:"img"},R),!!b&&Ve.createElement("title",null,b),Ve.createElement("path",{fill:g,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),Ve.createElement("path",{fill:p,d:$,shapeRendering:"crispEdges"}),K)});$h.displayName="QRCodeSVG";const X2=2e3,Yo=typeof window<"u"&&"__TAURI_INTERNALS__"in window;function J2(){const[a,l]=O.useState(null),[c,u]=O.useState(null),[d,h]=O.useState(!1),[w,g]=O.useState(null),p=O.useRef(null),{refreshTrustedPeers:m}=Gt(),y=O.useCallback(async()=>{if(!Yo){g("Pairing is only available in the desktop app");return}h(!0),g(null),u(null);try{const{invoke:M}=await Ce(async()=>{const{invoke:K}=await import("./core-BEOw45JP.js");return{invoke:K}},[]),k=await M("start_pairing_session");l(k),N(k.pairingId)}catch(M){const k=M instanceof Error?M.message:String(M);g(k),l(null)}finally{h(!1)}},[]),x=O.useCallback(async()=>{if(A(),a&&Yo)try{const{invoke:M}=await Ce(async()=>{const{invoke:k}=await import("./core-BEOw45JP.js");return{invoke:k}},[]);await M("cancel_pairing_session",{pairingId:a.pairingId})}catch(M){console.error("Failed to cancel pairing session:",M)}l(null),u(null),g(null)},[a]),b=O.useCallback(async()=>{await x(),await y()},[x,y]),N=O.useCallback(M=>{A();const k=async()=>{if(Yo)try{const{invoke:K}=await Ce(async()=>{const{invoke:F}=await import("./core-BEOw45JP.js");return{invoke:F}},[]),$=await K("get_pairing_status",{pairingId:M});u($),$.status!=="pending"&&(A(),$.status==="verified"&&await m())}catch(K){console.error("Status poll failed:",K),A(),u($=>$?{...$,status:"expired"}:null)}};k(),p.current=window.setInterval(k,X2)},[m]),A=O.useCallback(()=>{p.current!==null&&(clearInterval(p.current),p.current=null)},[]);O.useEffect(()=>()=>{A()},[A]);const R=c?.status==="expired",_=c?.status==="verified",U=c?.status==="failed",L=c?.status==="pending"||!c&&a!==null;return{session:a,status:c,isLoading:d,error:w,isExpired:R,isVerified:_,isFailed:U,isPending:L,startSession:y,cancelSession:x,regenerateSession:b}}function $2(a){return a.length!==6?a:`${a.slice(0,3)} ${a.slice(3)}`}function W2(a){const[l,c]=O.useState(0);return O.useEffect(()=>{if(!a){c(0);return}const u=()=>{const h=new Date(a).getTime(),w=Date.now(),g=Math.max(0,Math.floor((h-w)/1e3));c(g)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)},[a]),l}function ew(a){const l=Math.floor(a/60),c=a%60;return`${l}:${c.toString().padStart(2,"0")}`}function tw(){const a=Gt(M=>M.isPairingModalOpen),l=Gt(M=>M.closePairingModal),c=Gt(M=>M.serverRunning),{session:u,status:d,isLoading:h,error:w,isExpired:g,isVerified:p,isFailed:m,startSession:y,cancelSession:x,regenerateSession:b}=J2(),N=W2(u?.expiresAt),[A,R]=O.useState(null);O.useEffect(()=>{a&&!u&&!h&&c&&y()},[a,u,h,c,y]),O.useEffect(()=>{if(A){const M=setTimeout(()=>R(null),2e3);return()=>clearTimeout(M)}},[A]);const _=()=>{x(),l()},U=async()=>{if(u?.code)try{await navigator.clipboard.writeText(u.code),R("code")}catch(M){console.error("Failed to copy code:",M)}},L=async()=>{if(!u)return;const k=`${u.hostCandidates[0]}:${u.port}`;try{await navigator.clipboard.writeText(k),R("host")}catch(K){console.error("Failed to copy address:",K)}};return a?s.jsx("div",{className:"modal-overlay",onClick:_,children:s.jsxs("div",{className:"pairing-modal",onClick:M=>M.stopPropagation(),children:[s.jsxs("div",{className:"pairing-modal__header",children:[s.jsx("h2",{className:"pairing-modal__title",children:"Pair Mobile Device"}),s.jsx("button",{className:"pairing-modal__close",onClick:_,children:""})]}),s.jsx("div",{className:"pairing-modal__body",children:c?h?s.jsxs("div",{className:"pairing-modal__loading",children:[s.jsx("div",{className:"pairing-modal__spinner"}),s.jsx("p",{children:"Starting pairing session..."})]}):w?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:w}),s.jsx(Ut,{onClick:y,variant:"secondary",children:"Try Again"})]}):p?s.jsxs("div",{className:"pairing-success",children:[s.jsx("span",{className:"pairing-success__icon",children:""}),s.jsx("h3",{className:"pairing-success__title",children:"Device Paired!"}),s.jsx("p",{className:"pairing-success__message",children:"Your mobile device has been successfully paired."})]}):m?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"Too many failed attempts. Please try again."}),s.jsx(Ut,{onClick:b,variant:"secondary",children:"Start New Session"})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pairing-modal__qr-section",children:[s.jsxs("div",{className:"pairing-modal__qr-container",children:[s.jsx($h,{value:u.qrPayload,size:180,level:"M",includeMargin:!0,className:g?"pairing-modal__qr--expired":""}),g&&s.jsx("div",{className:"pairing-modal__qr-overlay",children:s.jsx("span",{children:"Expired"})})]}),s.jsx("p",{className:"pairing-modal__qr-hint",children:"Scan with your phone's camera"})]}),s.jsx("div",{className:"pairing-modal__divider",children:s.jsx("span",{children:"or enter code manually"})}),s.jsxs("div",{className:"pairing-modal__code-section",children:[s.jsx("button",{className:"pairing-modal__code",onClick:U,disabled:g,title:"Click to copy",children:s.jsx("span",{className:g?"pairing-modal__code--expired":"",children:$2(u.code)})}),A==="code"&&s.jsx("span",{className:"pairing-modal__copied",children:"Copied!"})]}),s.jsxs("div",{className:"pairing-modal__countdown",children:[g?s.jsx("span",{className:"pairing-modal__countdown--expired",children:"Session expired"}):s.jsxs("span",{children:["Expires in ",ew(N)]}),d?.attemptsRemaining!==void 0&&d.attemptsRemaining<5&&s.jsxs("span",{className:"pairing-modal__attempts",children:[d.attemptsRemaining," attempts remaining"]})]}),!g&&s.jsx("div",{className:"pairing-modal__progress",children:s.jsx("div",{className:"pairing-modal__progress-bar",style:{width:`${N/120*100}%`}})}),s.jsxs("div",{className:"pairing-modal__connection-info",children:[s.jsxs("div",{className:"pairing-modal__host",children:[s.jsx("span",{className:"pairing-modal__host-label",children:"Server address:"}),s.jsxs("code",{className:"pairing-modal__host-value",children:[u.hostCandidates[0],":",u.port]}),s.jsx("button",{className:"pairing-modal__copy-btn",onClick:L,title:"Copy address",children:A==="host"?"":""})]}),u.hostCandidates.length>1&&s.jsxs("details",{className:"pairing-modal__alt-hosts",children:[s.jsxs("summary",{children:["Alternative addresses (",u.hostCandidates.length-1,")"]}),s.jsx("ul",{children:u.hostCandidates.slice(1).map((M,k)=>s.jsxs("li",{children:[M,":",u.port]},k))})]})]})]}):null:s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"The sync server is not running."}),s.jsx("p",{children:"Please start the Wi-Fi server in Settings before pairing."})]})}),s.jsxs("div",{className:"pairing-modal__footer",children:[s.jsx(Ut,{onClick:_,variant:"secondary",children:p?"Done":"Cancel"}),u&&!p&&s.jsx(Ut,{onClick:b,variant:"ghost",children:"Regenerate"})]})]})}):null}let Yp=!1;async function nw(){if(Yp)return;const a=await ih();y1(a.id),await Gt.getState().initialize(),Yp=!0,console.log("[Sync] Initialized with device:",a.name)}function aw({children:a}){const{transactionDrawer:l,clientDrawer:c,projectDrawer:u,businessProfileDrawer:d,documentDrawer:h,expenseDrawer:w,retainerDrawer:g,retainerMatchingDrawer:p}=yt();return O.useEffect(()=>{nw().catch(m=>{console.error("Failed to initialize sync:",m)})},[]),s.jsxs("div",{className:"app-shell",children:[s.jsx(vx,{}),s.jsxs("main",{className:"main-content",children:[s.jsx(A2,{}),a]}),l.isOpen&&s.jsx(Lx,{}),c.isOpen&&s.jsx(qx,{}),u.isOpen&&s.jsx(Hx,{}),d.isOpen&&s.jsx(Yx,{}),h.isOpen&&s.jsx(Wx,{}),w.isOpen&&s.jsx(Ob,{}),g.isOpen&&s.jsx(Fb,{}),p.isOpen&&s.jsx($b,{}),s.jsx(y2,{}),s.jsx(s2,{}),s.jsx(B2,{}),s.jsx(k2,{}),s.jsx(tw,{}),s.jsx(n2,{})]})}function iw({title:a,breadcrumbs:l,filterSlot:c,rightSlot:u,hideAddMenu:d}){const w=t1()==="rtl"?" \\ ":" / ";return s.jsxs("header",{className:"topbar",children:[s.jsxs("div",{className:"topbar-left",children:[s.jsxs("div",{children:[l&&l.length>0&&s.jsx("div",{className:"breadcrumbs",children:l.map((g,p)=>s.jsxs("span",{children:[g.href?s.jsx(Ul,{to:g.href,className:"breadcrumb-link",children:g.label}):s.jsx("span",{className:"breadcrumb-current",children:g.label}),p<l.length-1&&s.jsx("span",{className:"breadcrumb-separator",children:w})]},p))}),s.jsx("h1",{className:"topbar-title",children:a})]}),c]}),s.jsxs("div",{className:"topbar-right",children:[u,!d&&s.jsx(lw,{})]})]})}function lw(){const[a,l]=O.useState(!1),c=O.useRef(null),{openTransactionDrawer:u,openClientDrawer:d,openProjectDrawer:h}=yt(),w=au(),g=Fe();return O.useEffect(()=>{function p(m){c.current&&!c.current.contains(m.target)&&l(!1)}return a&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[a]),O.useEffect(()=>{function p(m){m.key==="Escape"&&l(!1)}return a&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[a]),s.jsxs("div",{className:"add-menu-container",ref:c,children:[s.jsxs("button",{className:"btn btn-primary",onClick:()=>l(!a),children:[s.jsx(sw,{}),g("common.add")]}),a&&s.jsxs("div",{className:"add-menu",children:[s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"income"}),l(!1)},children:[s.jsx(rw,{className:"nav-icon"}),g("addMenu.income")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"expense"}),l(!1)},children:[s.jsx(cw,{className:"nav-icon"}),g("addMenu.expense")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{h({mode:"create"}),l(!1)},children:[s.jsx(ow,{className:"nav-icon"}),g("addMenu.project")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{d({mode:"create"}),l(!1)},children:[s.jsx(uw,{className:"nav-icon"}),g("addMenu.client")]}),s.jsx("div",{className:"add-menu-divider"}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{w({to:"/documents/new"}),l(!1)},children:[s.jsx(dw,{className:"nav-icon"}),g("addMenu.document")]})]})]})}function sw(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function rw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function cw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function ow({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function uw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})})}function dw({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function fw({size:a=16,className:l}){return s.jsx("svg",{width:a,height:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:l,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function mw({kind:a,status:l,className:c}){const u=Fe(),d=a==="income"&&l==="unpaid";return s.jsx("span",{className:se("type-badge",a==="expense"&&"expense",a==="income"&&l==="paid"&&"income",d&&"receivable",c),children:u(d?"transactions.type.receivable":a==="income"?"transactions.type.income":"transactions.type.expense")})}function dr({usdAmountMinor:a,ilsAmountMinor:l,unifiedCurrency:c="ILS",variant:u="default",type:d="neutral",showSource:h=!0,className:w}){const{rate:g,source:p}=Rh("USD","ILS"),{language:m}=Yn(),y=Bl(m),x=Fe(),b=O.useMemo(()=>o2(a,l,c,g),[a,l,c,g]),A=d==="income"?"amount-positive":d==="expense"?"amount-negative":d==="net"?b!==null?b>=0?"amount-positive":"amount-negative":a+l>=0?"amount-positive":"amount-negative":"";if(u==="compact")return s.jsx("span",{className:se("unified-amount-compact",A,w),children:b!==null?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"unified-total",children:Pe(b,c,y)}),h&&p!=="live"&&s.jsx("span",{className:se("fx-indicator",`source-${p}`),title:x(`fx.${p}`),children:"*"})]}):s.jsxs("span",{className:"unified-fallback",children:[Pe(a,"USD",y)," + ",Pe(l,"ILS",y)]})});if(u==="table"){const R=`USD: ${Pe(a,"USD",y)} + ILS: ${Pe(l,"ILS",y)}`;return b!==null?s.jsx("span",{className:se(A,w),title:R,style:{cursor:"help"},children:Pe(b,c,y)}):s.jsxs("span",{className:se(A,w),title:R,children:[Pe(a,"USD",y)," + ",Pe(l,"ILS",y)]})}return u==="kpi"?s.jsxs("div",{className:se("unified-amount-kpi",w),children:[b!==null?s.jsxs("div",{className:se("unified-total",A),children:[Pe(b,c,y),h&&s.jsx("span",{className:se("fx-source-badge",`source-${p}`),children:x(`fx.${p}`)})]}):s.jsx("div",{className:se("unified-total",A),children:""}),s.jsxs("div",{className:"unified-breakdown",children:[s.jsxs("span",{className:"breakdown-item",children:[s.jsx("span",{className:"breakdown-currency",children:"USD:"})," ",Pe(a,"USD",y)]}),s.jsx("span",{className:"breakdown-separator",children:"+"}),s.jsxs("span",{className:"breakdown-item",children:[s.jsx("span",{className:"breakdown-currency",children:"ILS:"})," ",Pe(l,"ILS",y)]})]})]}):s.jsxs("div",{className:se("unified-amount",w),children:[b!==null&&s.jsxs("div",{className:se("unified-total",A),children:[Pe(b,c,y),h&&s.jsx("span",{className:se("fx-source-badge",`source-${p}`),children:x(`fx.${p}`)})]}),s.jsxs("div",{className:"unified-breakdown",children:[s.jsx("span",{className:"breakdown-item",children:Pe(a,"USD",y)}),s.jsx("span",{className:"breakdown-separator",children:"+"}),s.jsx("span",{className:"breakdown-item",children:Pe(l,"ILS",y)})]})]})}function pw(){const{openTransactionDrawer:a}=yt(),l=Q1(),c=Fe(),{language:u}=Yn(),d=Bl(u),[h,w]=O.useState(()=>Ko("all")),[g,p]=O.useState(void 0),{data:m,isLoading:y}=U1(h.dateFrom,h.dateTo,g),{data:x,isLoading:b}=q1(h.dateFrom,h.dateTo),N=g?y:b,{data:A=[]}=B1(g),{data:R=[]}=oh({dateFrom:h.dateFrom,dateTo:h.dateTo,currency:g,limit:10,sort:{by:"occurredAt",dir:"desc"}}),_=O.useMemo(()=>{if(g){if(!m)return null;const M=m.paidIncomeMinor-m.expensesMinor;return{mode:"single",currency:g,paidIncome:Pe(m.paidIncomeMinor,g,d),unpaid:Pe(m.unpaidIncomeMinor,g,d),expenses:Pe(m.expensesMinor,g,d),net:Pe(M,g,d),netValue:M}}else return x?{mode:"unified",usd:x.USD,ils:x.ILS}:null},[m,x,g,d]),U=M=>{a({mode:"edit",transactionId:M})},L=async(M,k)=>{M.stopPropagation(),await l.mutateAsync(k)};return s.jsxs(s.Fragment,{children:[s.jsx(iw,{title:c("overview.title"),filterSlot:s.jsxs("div",{className:"filters-row",style:{marginBottom:0,marginInlineStart:24,flexWrap:"nowrap"},children:[s.jsx(Jb,{dateFrom:h.dateFrom,dateTo:h.dateTo,onChange:(M,k)=>w({dateFrom:M,dateTo:k})}),s.jsx(Xb,{value:g,onChange:p})]})}),s.jsxs("div",{className:"page-content",children:[N?s.jsx("div",{className:"kpi-row",children:[1,2,3,4].map(M=>s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("common.loading")}),s.jsx("div",{className:"kpi-value",children:"-"})]},M))}):_?.mode==="single"?s.jsxs("div",{className:"kpi-row",children:[s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.paidIncome")}),s.jsx("div",{className:"kpi-value positive",children:_.paidIncome})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.unpaidReceivables")}),s.jsx("div",{className:"kpi-value warning",children:_.unpaid})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.expenses")}),s.jsx("div",{className:"kpi-value",children:_.expenses})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.net")}),s.jsx("div",{className:se("kpi-value",_.netValue>=0?"positive":"negative"),children:_.net})]})]}):_?.mode==="unified"?s.jsxs("div",{className:"kpi-row",children:[s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.paidIncome")}),s.jsx(dr,{usdAmountMinor:_.usd.paidIncomeMinor,ilsAmountMinor:_.ils.paidIncomeMinor,variant:"kpi",type:"income"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.unpaidReceivables")}),s.jsx(dr,{usdAmountMinor:_.usd.unpaidIncomeMinor,ilsAmountMinor:_.ils.unpaidIncomeMinor,variant:"kpi",type:"neutral"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.expenses")}),s.jsx(dr,{usdAmountMinor:_.usd.expensesMinor,ilsAmountMinor:_.ils.expensesMinor,variant:"kpi",type:"expense"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.net")}),s.jsx(dr,{usdAmountMinor:_.usd.paidIncomeMinor-_.usd.expensesMinor,ilsAmountMinor:_.ils.paidIncomeMinor-_.ils.expensesMinor,variant:"kpi",type:"net"})]})]}):null,s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[s.jsxs("div",{className:"attention-list",children:[s.jsx("div",{className:"attention-header",children:s.jsx("h3",{className:"attention-title",children:c("overview.needsAttention")})}),A.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noAttention")}):A.slice(0,5).map(M=>{const k=M.dueDate?Qv(M.dueDate):0,K=k<0;return s.jsxs("div",{className:"attention-item",style:{cursor:"pointer"},onClick:()=>U(M.id),children:[s.jsxs("div",{className:"attention-info",children:[s.jsx("span",{className:"attention-client",children:M.clientName||c("common.noClient")}),s.jsxs("span",{className:"attention-meta",children:[M.projectName||c("common.noProject")," "," ",K?s.jsx("span",{className:"text-danger",children:c("time.daysOverdue",{days:Math.abs(k)})}):k===0?s.jsx("span",{className:"text-warning",children:c("transactions.status.dueToday")}):s.jsx("span",{className:"text-warning",children:c("time.dueInDays",{days:k})})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("span",{className:se("attention-amount",K?"text-danger":"text-warning"),children:Pe(M.amountMinor,M.currency,d)}),s.jsx("button",{className:"btn btn-sm btn-ghost",onClick:$=>L($,M.id),title:c("common.markPaid"),children:s.jsx(fw,{})})]})]},M.id)})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:c("overview.recentActivity")})}),R.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noRecent")}):s.jsx("div",{className:"data-table",style:{border:"none"},children:s.jsx("table",{children:s.jsx("tbody",{children:R.map(M=>s.jsxs("tr",{className:"clickable",onClick:()=>U(M.id),children:[s.jsx("td",{style:{width:80},children:Zp(M.occurredAt,d)}),s.jsx("td",{children:s.jsx(mw,{kind:M.kind,status:M.status})}),s.jsx("td",{className:"text-secondary",style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:M.clientName||M.title||"-"}),s.jsxs("td",{className:se("amount-cell",M.kind==="income"&&"amount-positive",M.kind==="expense"&&"amount-negative"),children:[M.kind==="expense"?"-":"",Pe(M.amountMinor,M.currency,d)]})]},M.id))})})})]})]})]})]})}const hw=()=>s.jsx("div",{style:{padding:"2rem",opacity:.5},children:"Loading..."});function We(a,l){const c=Ve.lazy(()=>a().then(u=>({default:u[l]})));return()=>s.jsx(O.Suspense,{fallback:s.jsx(hw,{}),children:s.jsx(c,{})})}const Ge=wv({component:()=>s.jsx(aw,{children:s.jsx(Sv,{})})}),yw=Ze({getParentRoute:()=>Ge,path:"/",component:pw}),gw=Ze({getParentRoute:()=>Ge,path:"/transactions",component:We(()=>Ce(()=>import("./TransactionsPage-C8q65070.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13])),"TransactionsPage"),validateSearch:a=>({dateFrom:typeof a.dateFrom=="string"?a.dateFrom:void 0,dateTo:typeof a.dateTo=="string"?a.dateTo:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,kind:a.kind==="income"||a.kind==="expense"?a.kind:void 0,status:a.status==="paid"||a.status==="unpaid"||a.status==="overdue"?a.status:void 0})}),vw=Ze({getParentRoute:()=>Ge,path:"/projects",component:We(()=>Ce(()=>import("./ProjectsPage-CUlnQdrR.js"),__vite__mapDeps([14,3,4,10,11,12])),"ProjectsPage")}),xw=Ze({getParentRoute:()=>Ge,path:"/projects/$projectId",component:We(()=>Ce(()=>import("./ProjectDetailPage-wWDIUkvF.js"),__vite__mapDeps([15,3,4,5,7,8,9,10,11,12,13])),"ProjectDetailPage")}),bw=Ze({getParentRoute:()=>Ge,path:"/clients",component:We(()=>Ce(()=>import("./ClientsPage-DszUFZff.js"),__vite__mapDeps([16,3,4,10,11,12])),"ClientsPage")}),ww=Ze({getParentRoute:()=>Ge,path:"/clients/$clientId",component:We(()=>Ce(()=>import("./ClientDetailPage-B7_5fY9O.js"),__vite__mapDeps([17,3,4,5,7,8,9,10,11,12,13])),"ClientDetailPage")}),jw=Ze({getParentRoute:()=>Ge,path:"/reports",component:We(()=>Ce(()=>import("./ReportsPage-BaT9fk96.js"),__vite__mapDeps([18,3,4,10,11,12])),"ReportsPage")}),Sw=Ze({getParentRoute:()=>Ge,path:"/documents",component:We(()=>Ce(()=>import("./index-DZThrbQR.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13])),"DocumentsPage")}),Aw=Ze({getParentRoute:()=>Ge,path:"/documents/new",component:We(()=>Ce(()=>import("./index-DZThrbQR.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13])),"DocumentFormPage")}),Dw=Ze({getParentRoute:()=>Ge,path:"/documents/$documentId",component:We(()=>Ce(()=>import("./index-DZThrbQR.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13])),"DocumentDetailPage")}),Nw=Ze({getParentRoute:()=>Ge,path:"/documents/$documentId/edit",component:We(()=>Ce(()=>import("./index-DZThrbQR.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13])),"DocumentFormPage")}),Mw=Ze({getParentRoute:()=>Ge,path:"/settings",component:We(()=>Ce(()=>import("./SettingsPage-DvxPFEa4.js"),__vite__mapDeps([22,3,4,10,11,12])),"SettingsPage")}),Cw=Ze({getParentRoute:()=>Ge,path:"/settings/profiles/$profileId",component:We(()=>Ce(()=>import("./ProfileDetailPage-DrRBwZv6.js"),__vite__mapDeps([23,3,4,12,10,11])),"ProfileDetailPage")}),Ew=Ze({getParentRoute:()=>Ge,path:"/download",component:We(()=>Ce(()=>import("./DownloadPage-CR-cZ_M2.js"),__vite__mapDeps([24,3,4,10,11,12,25])),"DownloadPage")}),Tw=Ze({getParentRoute:()=>Ge,path:"/theme-demo",component:We(()=>Ce(()=>import("./ThemeDemo-IDyPqZ9D.js"),__vite__mapDeps([26,3,4,10,11,12,27,13])),"ThemeDemo")}),Rw=Ze({getParentRoute:()=>Ge,path:"/expenses",component:We(()=>Ce(()=>import("./ExpensesPage-BSenopGd.js"),__vite__mapDeps([28,3,4,10,11,12,29])),"ExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),_w=Ze({getParentRoute:()=>Ge,path:"/expenses/profile/$profileId",component:We(()=>Ce(()=>import("./ProfileExpensesPage-PkZhj92c.js"),__vite__mapDeps([30,3,4,7,8,9,10,11,12,31,13])),"ProfileExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,categoryId:typeof a.categoryId=="string"?a.categoryId:void 0})}),Iw=Ze({getParentRoute:()=>Ge,path:"/expenses/profile/$profileId/receipts",component:We(()=>Ce(()=>import("./ReceiptsPage-PH5Fn4lJ.js"),__vite__mapDeps([32,3,4,33,20,10,11,12,34])),"ReceiptsPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0})}),Ow=Ze({getParentRoute:()=>Ge,path:"/expenses/overview",component:We(()=>Ce(()=>import("./ExpensesOverviewPage-DlR07Lp9.js"),__vite__mapDeps([35,3,4,10,11,12,36])),"ExpensesOverviewPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),zw=Ze({getParentRoute:()=>Ge,path:"/expenses/forecast",component:We(()=>Ce(()=>import("./ExpensesForecastPage-CPChHGDO.js"),__vite__mapDeps([37,3,4,10,11,12,38])),"ExpensesForecastPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Lw=Ze({getParentRoute:()=>Ge,path:"/retainers",component:We(()=>Ce(()=>import("./RetainersPage-BaSCSf5s.js"),__vite__mapDeps([39,3,4,6,40,10,11,12,41,13,8])),"RetainersPage"),validateSearch:a=>({status:a.status==="draft"||a.status==="active"||a.status==="paused"||a.status==="ended"?a.status:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,clientId:typeof a.clientId=="string"?a.clientId:void 0})}),Uw=Ze({getParentRoute:()=>Ge,path:"/money-answers",component:We(()=>Ce(()=>import("./index-BRmKDNgK.js"),__vite__mapDeps([42,3,4,10,40,11,12,43])),"MoneyAnswersPage"),validateSearch:a=>({mode:a.mode==="month"||a.mode==="year"?a.mode:void 0,month:typeof a.month=="string"?a.month:void 0,year:typeof a.year=="number"?a.year:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,includeReceivables:typeof a.includeReceivables=="boolean"?a.includeReceivables:void 0,includeProjections:typeof a.includeProjections=="boolean"?a.includeProjections:void 0})}),qw=Ze({getParentRoute:()=>Ge,path:"/expenses/close/profile/$profileId",component:We(()=>Ce(()=>import("./MonthCloseChecklistPage-DRFzdFPz.js"),__vite__mapDeps([44,3,4,33,20,10,11,12,45])),"MonthCloseChecklistPage"),validateSearch:a=>({month:typeof a.month=="string"?a.month:void 0})}),Bw=Ge.addChildren([yw,gw,vw,xw,bw,ww,Sw,Aw,Dw,Nw,Rw,_w,Iw,Ow,zw,qw,Lw,Uw,jw,Mw,Cw,Ew,Tw]),kw=jv({routeTree:Bw,basepath:"/app"});function Hw(){const{toasts:a,removeToast:l}=gh(),c=O.useRef(new Map);return O.useEffect(()=>{a.forEach(u=>{if(!c.current.has(u.id)&&u.duration>0){const d=setTimeout(()=>{l(u.id),c.current.delete(u.id)},u.duration);c.current.set(u.id,d)}}),c.current.forEach((u,d)=>{a.find(h=>h.id===d)||(clearTimeout(u),c.current.delete(d))})},[a,l]),O.useEffect(()=>()=>{c.current.forEach(u=>clearTimeout(u)),c.current.clear()},[]),a.length===0?null:s.jsx("div",{className:"toast-container",children:a.map(u=>s.jsxs("div",{className:"toast",role:"status","aria-live":"polite",children:[s.jsx("span",{className:"toast-message",children:u.message}),u.action&&s.jsx("button",{type:"button",className:"toast-action",onClick:()=>{u.action?.onClick(),l(u.id)},children:u.action.label})]},u.id))})}const Pp=O.lazy(()=>Ce(()=>import("./LandingPage-BT2tz2cr.js"),__vite__mapDeps([46,3,4,10,11,12,47])).then(a=>({default:a.LandingPage}))),Kp=O.lazy(()=>Ce(()=>import("./DownloadPage-CR-cZ_M2.js"),__vite__mapDeps([24,3,4,10,11,12,25])).then(a=>({default:a.DownloadPage}))),Qw=new Mv({defaultOptions:{queries:{staleTime:1e3*60,gcTime:1e3*60*5}}}),Fp=()=>s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--color-bg-base, #070C16)",color:"var(--color-text-muted, #888)"},children:"Loading..."});function Vw(){{const a=window.location.pathname;if(a==="/"&&Pp)return s.jsx(Vo,{children:s.jsx(Bo,{children:s.jsx(O.Suspense,{fallback:s.jsx(Fp,{}),children:s.jsx(Pp,{})})})});if(a==="/download"&&Kp)return s.jsx(Vo,{children:s.jsx(Bo,{children:s.jsx(O.Suspense,{fallback:s.jsx(Fp,{}),children:s.jsx(Kp,{})})})})}return s.jsx(Vo,{children:s.jsx(Bo,{children:s.jsxs(Cv,{client:Qw,children:[s.jsx(Av,{router:kw}),s.jsx(Hw,{})]})})})}h1().catch(console.error);kv.createRoot(document.getElementById("root")).render(s.jsx(O.StrictMode,{children:s.jsx(Vw,{})}));export{aj as $,sj as A,$1 as B,b2 as C,Jb as D,Ox as E,ex as F,jp as G,ax as H,xr as I,Hl as J,dh as K,W1 as L,nx as M,Qn as N,Ya as O,Kx as P,j as Q,Jw as R,Eh as S,iw as T,dr as U,$w as V,kj as W,Hj as X,Gt as Y,Ut as Z,Ce as _,Yn as a,ij as a0,d2 as a1,d1 as a2,lx as a3,sx as a4,ix as a5,rj as a6,cj as a7,j2 as a8,yr as a9,_j as aA,qj as aB,zj as aC,Lj as aD,Uj as aE,Oj as aF,Rh as aG,o2 as aH,Nj as aI,Mj as aJ,Cj as aK,Ej as aL,Tj as aM,yn as aN,_1 as aO,q2 as aa,dj as ab,uj as ac,Eb as ad,fj as ae,Sb as af,pj as ag,hj as ah,Mb as ai,oj as aj,jj as ak,Cb as al,Dj as am,Aj as an,At as ao,gj as ap,yj as aq,Sj as ar,vj as as,xj as at,bj as au,wj as av,mj as aw,Bj as ax,Rj as ay,Ij as az,Xw as b,se as c,yt as d,Q1 as e,Ko as f,Qv as g,oh as h,Xb as i,Zw as j,Zp as k,mw as l,Pe as m,fw as n,Bl as o,tj as p,Hv as q,G1 as r,nj as s,Ww as t,Fe as u,Y1 as v,ej as w,uh as x,lj as y,tx as z};
