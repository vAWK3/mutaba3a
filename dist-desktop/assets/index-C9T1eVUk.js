const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./event-DXqYWlmG.js","./core-BEOw45JP.js","./TransactionsPage-D61rnQwN.js","./vendor-router-D4Yqsbqz.js","./vendor-react-BdxwsYZ-.js","./StatusSegment-DfLSV7Ua.js","./EmptyState-r3axvhwz.js","./RowActionsMenu-L_ZpjB9G.js","./RowActionsMenu-Bun0gHPS.css","./CopyIcon-VW8NgKZB.js","./vendor-query-CI0tl4qS.js","./vendor-db-BMy7eggi.js","./vendor-forms-CPtPuEGg.js","./Badge-qzDJyl-k.css","./ProjectsPage-BpmY7TZw.js","./ProjectDetailPage-zakcODeT.js","./ClientsPage-NGSzOaKI.js","./ClientDetailPage-BTf3kxER.js","./ReportsPage-Xi5KPZ0s.js","./index-D2pQwVWV.js","./_commonjs-dynamic-modules-TDtrdbi3.js","./index-D_McaMIz.css","./SettingsPage-UPrFm91F.js","./ProfileDetailPage-cclv5kKA.js","./DownloadPage-Bi2j9KdP.js","./DownloadPage-CFbLEbM2.css","./ThemeDemo-DrjQyfao.js","./ThemeDemo-Bhg6x5uI.css","./ExpensesPage-Bng9C3qL.js","./ExpensesPage-7T9WuaQu.css","./ProfileExpensesPage-BDCNXo5f.js","./ProfileExpensesPage-Do4RQ_Se.css","./ReceiptsPage-DM_hj-Ic.js","./monthDetection-zAORlV5y.js","./ReceiptsPage-CM_FS-8y.css","./ExpensesOverviewPage-DWYnnL3k.js","./ExpensesOverviewPage-hL7sKboG.css","./ExpensesForecastPage-DYXABofk.js","./ExpensesForecastPage-CuC7jCa8.css","./RetainersPage-CjBQEQPW.js","./CurrencySummaryPopup-CGGE0F85.js","./RetainersPage-BcVQb_m3.css","./index-CjPrZYqC.js","./index-BniSt1ZC.css","./MonthCloseChecklistPage-u5CEViZ1.js","./MonthCloseChecklistPage-BdLD6WfS.css"])))=>i.map(i=>d[i]);
import{r as O,j as s,R as Ve,L as Li,u as hv,a as tu,c as yv,b as Ze,d as gv,O as vv,e as xv}from"./vendor-router-D4Yqsbqz.js";import{a as bv,b as jv}from"./vendor-react-BdxwsYZ-.js";import{u as ce,a as oe,b as fe,Q as wv,c as Sv}from"./vendor-query-CI0tl4qS.js";import{D as Av}from"./vendor-db-BMy7eggi.js";import{g as Vo,s as zo,p as Dv,a as Nv,$ as Mv,b as Vp,o as Vn,c as te,_ as St,u as Qa,C as Ie,l as Cv,d as nu,n as Ol,e as op,f as up,Z as _i}from"./vendor-forms-CPtPuEGg.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&u(b)}).observe(document,{childList:!0,subtree:!0});function c(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(d){if(d.ep)return;d.ep=!0;const h=c(d);fetch(d.href,h)}})();var Uo={exports:{}},Ii={},Lo={exports:{}},Bo={};var dp;function Ev(){return dp||(dp=1,(function(a){function i(B,Y){var ae=B.length;B.push(Y);e:for(;0<ae;){var xe=ae-1>>>1,G=B[xe];if(0<d(G,Y))B[xe]=Y,B[ae]=G,ae=xe;else break e}}function c(B){return B.length===0?null:B[0]}function u(B){if(B.length===0)return null;var Y=B[0],ae=B.pop();if(ae!==Y){B[0]=ae;e:for(var xe=0,G=B.length,be=G>>>1;xe<be;){var Z=2*(xe+1)-1,V=B[Z],W=Z+1,gt=B[W];if(0>d(V,ae))W<G&&0>d(gt,V)?(B[xe]=gt,B[W]=ae,xe=W):(B[xe]=V,B[Z]=ae,xe=Z);else if(W<G&&0>d(gt,ae))B[xe]=gt,B[W]=ae,xe=W;else break e}}return Y}function d(B,Y){var ae=B.sortIndex-Y.sortIndex;return ae!==0?ae:B.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var b=Date,g=b.now();a.unstable_now=function(){return b.now()-g}}var p=[],m=[],y=1,v=null,j=3,D=!1,A=!1,E=!1,_=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var Y=c(m);Y!==null;){if(Y.callback===null)u(m);else if(Y.startTime<=B)u(m),Y.sortIndex=Y.expirationTime,i(p,Y);else break;Y=c(m)}}function K(B){if(E=!1,k(B),!A)if(c(p)!==null)A=!0,$||($=!0,ve());else{var Y=c(m);Y!==null&&ge(K,Y.startTime-B)}}var $=!1,F=-1,X=5,ue=-1;function he(){return _?!0:!(a.unstable_now()-ue<X)}function ne(){if(_=!1,$){var B=a.unstable_now();ue=B;var Y=!0;try{e:{A=!1,E&&(E=!1,U(F),F=-1),D=!0;var ae=j;try{t:{for(k(B),v=c(p);v!==null&&!(v.expirationTime>B&&he());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,j=v.priorityLevel;var G=xe(v.expirationTime<=B);if(B=a.unstable_now(),typeof G=="function"){v.callback=G,k(B),Y=!0;break t}v===c(p)&&u(p),k(B)}else u(p);v=c(p)}if(v!==null)Y=!0;else{var be=c(m);be!==null&&ge(K,be.startTime-B),Y=!1}}break e}finally{v=null,j=ae,D=!1}Y=void 0}}finally{Y?ve():$=!1}}}var ve;if(typeof M=="function")ve=function(){M(ne)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ye=ie.port2;ie.port1.onmessage=ne,ve=function(){ye.postMessage(null)}}else ve=function(){L(ne,0)};function ge(B,Y){F=L(function(){B(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return j},a.unstable_next=function(B){switch(j){case 1:case 2:case 3:var Y=3;break;default:Y=j}var ae=j;j=Y;try{return B()}finally{j=ae}},a.unstable_requestPaint=function(){_=!0},a.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=j;j=B;try{return Y()}finally{j=ae}},a.unstable_scheduleCallback=function(B,Y,ae){var xe=a.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?xe+ae:xe):ae=xe,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,B={id:y++,callback:Y,priorityLevel:B,startTime:ae,expirationTime:G,sortIndex:-1},ae>xe?(B.sortIndex=ae,i(m,B),c(p)===null&&B===c(m)&&(E?(U(F),F=-1):E=!0,ge(K,ae-xe))):(B.sortIndex=G,i(p,B),A||D||(A=!0,$||($=!0,ve()))),B},a.unstable_shouldYield=he,a.unstable_wrapCallback=function(B){var Y=j;return function(){var ae=j;j=Y;try{return B.apply(this,arguments)}finally{j=ae}}}})(Bo)),Bo}var fp;function Tv(){return fp||(fp=1,Lo.exports=Ev()),Lo.exports}var mp;function Rv(){if(mp)return Ii;mp=1;var a=Tv(),i=bv(),c=jv();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(u(188))}function m(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,l=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(l=r.return,l!==null){n=l;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return p(r),e;if(o===l)return p(r),t;o=o.sibling}throw Error(u(188))}if(n.return!==l.return)n=r,l=o;else{for(var f=!1,x=r.child;x;){if(x===n){f=!0,n=r,l=o;break}if(x===l){f=!0,l=r,n=o;break}x=x.sibling}if(!f){for(x=o.child;x;){if(x===n){f=!0,n=o,l=r;break}if(x===l){f=!0,l=o,n=r;break}x=x.sibling}if(!f)throw Error(u(189))}}if(n.alternate!==l)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,j=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function ve(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case L:return"Profiler";case _:return"StrictMode";case K:return"Suspense";case $:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case M:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var ge=Array.isArray,B=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},xe=[],G=-1;function be(e){return{current:e}}function Z(e){0>G||(e.current=xe[G],xe[G]=null,G--)}function V(e,t){G++,xe[G]=e.current,e.current=t}var W=be(null),gt=be(null),Mt=be(null),cn=be(null);function Kn(e,t){switch(V(Mt,t),V(gt,e),V(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_m(t),e=Im(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(W),V(W,e)}function Ct(){Z(W),Z(gt),Z(Mt)}function Fn(e){e.memoizedState!==null&&V(cn,e);var t=W.current,n=Im(t,e.type);t!==n&&(V(gt,e),V(W,n))}function vn(e){gt.current===e&&(Z(W),Z(gt)),cn.current===e&&(Z(cn),Ci._currentValue=ae)}var Sn,Fa;function on(e){if(Sn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sn=t&&t[1]||"",Fa=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sn+e+Fa}var je=!1;function P(e,t){if(!e||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(z){var I=z}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(z){I=z}e.call(Q.prototype)}}else{try{throw Error()}catch(z){I=z}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(z){if(z&&I&&typeof z.stack=="string")return[z.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),f=o[0],x=o[1];if(f&&x){var S=f.split(`
`),R=x.split(`
`);for(r=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;r<R.length&&!R[r].includes("DetermineComponentFrameRoot");)r++;if(l===S.length||r===R.length)for(l=S.length-1,r=R.length-1;1<=l&&0<=r&&S[l]!==R[r];)r--;for(;1<=l&&0<=r;l--,r--)if(S[l]!==R[r]){if(l!==1||r!==1)do if(l--,r--,0>r||S[l]!==R[r]){var q=`
`+S[l].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=l&&0<=r);break}}}finally{je=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?on(n):""}function de(e,t){switch(e.tag){case 26:case 27:case 5:return on(e.type);case 16:return on("Lazy");case 13:return e.child!==t&&t!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return P(e.type,!1);case 11:return P(e.type.render,!1);case 1:return P(e.type,!0);case 31:return on("Activity");default:return""}}function et(e){try{var t="",n=null;do t+=de(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var it=Object.prototype.hasOwnProperty,un=a.unstable_scheduleCallback,Ue=a.unstable_cancelCallback,Pi=a.unstable_shouldYield,Gh=a.unstable_requestPaint,Bt=a.unstable_now,Zh=a.unstable_getCurrentPriorityLevel,ou=a.unstable_ImmediatePriority,uu=a.unstable_UserBlockingPriority,Ki=a.unstable_NormalPriority,Xh=a.unstable_LowPriority,du=a.unstable_IdlePriority,Jh=a.log,$h=a.unstable_setDisableYieldValue,kl=null,qt=null;function Gn(e){if(typeof Jh=="function"&&$h(e),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(kl,e)}catch{}}var kt=Math.clz32?Math.clz32:ty,Wh=Math.log,ey=Math.LN2;function ty(e){return e>>>=0,e===0?32:31-(Wh(e)/ey|0)|0}var Fi=256,Gi=262144,Zi=4194304;function ba(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xi(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var r=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var x=l&134217727;return x!==0?(l=x&~o,l!==0?r=ba(l):(f&=x,f!==0?r=ba(f):n||(n=x&~e,n!==0&&(r=ba(n))))):(x=l&~o,x!==0?r=ba(x):f!==0?r=ba(f):n||(n=l&~e,n!==0&&(r=ba(n)))),r===0?0:t!==0&&t!==r&&(t&o)===0&&(o=r&-r,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:r}function Hl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ny(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(){var e=Zi;return Zi<<=1,(Zi&62914560)===0&&(Zi=4194304),e}function wr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ql(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ay(e,t,n,l,r,o){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var x=e.entanglements,S=e.expirationTimes,R=e.hiddenUpdates;for(n=f&~n;0<n;){var q=31-kt(n),Q=1<<q;x[q]=0,S[q]=-1;var I=R[q];if(I!==null)for(R[q]=null,q=0;q<I.length;q++){var z=I[q];z!==null&&(z.lane&=-536870913)}n&=~Q}l!==0&&mu(e,l,0),o!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function mu(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-kt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function pu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-kt(n),r=1<<l;r&t|e[l]&t&&(e[l]|=t),n&=~r}}function hu(e,t){var n=t&-t;return n=(n&42)!==0?1:Sr(n),(n&(e.suspendedLanes|t))!==0?0:n}function Sr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ar(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yu(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:np(e.type))}function gu(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var Zn=Math.random().toString(36).slice(2),vt="__reactFiber$"+Zn,Et="__reactProps$"+Zn,Ga="__reactContainer$"+Zn,Dr="__reactEvents$"+Zn,ly="__reactListeners$"+Zn,iy="__reactHandles$"+Zn,vu="__reactResources$"+Zn,Vl="__reactMarker$"+Zn;function Nr(e){delete e[vt],delete e[Et],delete e[Dr],delete e[ly],delete e[iy]}function Za(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ga]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=km(e);e!==null;){if(n=e[vt])return n;e=km(e)}return t}e=n,n=e.parentNode}return null}function Xa(e){if(e=e[vt]||e[Ga]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Yl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Ja(e){var t=e[vu];return t||(t=e[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mt(e){e[Vl]=!0}var xu=new Set,bu={};function ja(e,t){$a(e,t),$a(e+"Capture",t)}function $a(e,t){for(bu[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var sy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ju={},wu={};function ry(e){return it.call(wu,e)?!0:it.call(ju,e)?!1:sy.test(e)?wu[e]=!0:(ju[e]=!0,!1)}function Ji(e,t,n){if(ry(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function $i(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Su(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cy(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,o=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(f){n=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mr(e){if(!e._valueTracker){var t=Su(e)?"checked":"value";e._valueTracker=cy(e,t,""+e[t])}}function Au(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Su(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oy=/[\n"\\]/g;function Xt(e){return e.replace(oy,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cr(e,t,n,l,r,o,f,x){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Zt(t)):e.value!==""+Zt(t)&&(e.value=""+Zt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Er(e,f,Zt(t)):n!=null?Er(e,f,Zt(n)):l!=null&&e.removeAttribute("value"),r==null&&o!=null&&(e.defaultChecked=!!o),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Zt(x):e.removeAttribute("name")}function Du(e,t,n,l,r,o,f,x){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Mr(e);return}n=n!=null?""+Zt(n):"",t=t!=null?""+Zt(t):n,x||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=x?e.checked:!!l,e.defaultChecked=!!l,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Mr(e)}function Er(e,t,n){t==="number"&&Wi(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Wa(e,t,n,l){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Zt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Nu(e,t,n){if(t!=null&&(t=""+Zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Zt(n):""}function Mu(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(u(92));if(ge(l)){if(1<l.length)throw Error(u(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Zt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Mr(e)}function el(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||uy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Eu(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&n[r]!==l&&Cu(e,r,l)}else for(var o in t)t.hasOwnProperty(o)&&Cu(e,o,t[o])}function Tr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function es(e){return fy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dn(){}var Rr=null;function _r(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,nl=null;function Tu(e){var t=Xa(e);if(t&&(e=t.stateNode)){var n=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(Cr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var r=l[Et]||null;if(!r)throw Error(u(90));Cr(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Au(l)}break e;case"textarea":Nu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Wa(e,!!n.multiple,t,!1)}}}var Ir=!1;function Ru(e,t,n){if(Ir)return e(t,n);Ir=!0;try{var l=e(t);return l}finally{if(Ir=!1,(tl!==null||nl!==null)&&(Hs(),tl&&(t=tl,e=nl,nl=tl=null,Tu(t),e)))for(t=0;t<e.length;t++)Tu(e[t])}}function Pl(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Et]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(Nn)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Or=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Or=!1}var Xn=null,zr=null,ts=null;function _u(){if(ts)return ts;var e,t=zr,n=t.length,l,r="value"in Xn?Xn.value:Xn.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var f=n-e;for(l=1;l<=f&&t[n-l]===r[o-l];l++);return ts=r.slice(e,1<l?1-l:void 0)}function ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function as(){return!0}function Iu(){return!1}function Tt(e){function t(n,l,r,o,f){this._reactName=n,this._targetInst=r,this.type=l,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(o):o[x]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?as:Iu,this.isPropagationStopped=Iu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),t}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=Tt(wa),Fl=v({},wa,{view:0,detail:0}),my=Tt(Fl),Ur,Lr,Gl,is=v({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(Ur=e.screenX-Gl.screenX,Lr=e.screenY-Gl.screenY):Lr=Ur=0,Gl=e),Ur)},movementY:function(e){return"movementY"in e?e.movementY:Lr}}),Ou=Tt(is),py=v({},is,{dataTransfer:0}),hy=Tt(py),yy=v({},Fl,{relatedTarget:0}),Br=Tt(yy),gy=v({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=Tt(gy),xy=v({},wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),by=Tt(xy),jy=v({},wa,{data:0}),zu=Tt(jy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ay[e])?!!t[e]:!1}function qr(){return Dy}var Ny=v({},Fl,{key:function(e){if(e.key){var t=wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(e){return e.type==="keypress"?ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),My=Tt(Ny),Cy=v({},is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=Tt(Cy),Ey=v({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),Ty=Tt(Ey),Ry=v({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_y=Tt(Ry),Iy=v({},is,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oy=Tt(Iy),zy=v({},wa,{newState:0,oldState:0}),Uy=Tt(zy),Ly=[9,13,27,32],kr=Nn&&"CompositionEvent"in window,Zl=null;Nn&&"documentMode"in document&&(Zl=document.documentMode);var By=Nn&&"TextEvent"in window&&!Zl,Lu=Nn&&(!kr||Zl&&8<Zl&&11>=Zl),Bu=" ",qu=!1;function ku(e,t){switch(e){case"keyup":return Ly.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var al=!1;function qy(e,t){switch(e){case"compositionend":return Hu(t);case"keypress":return t.which!==32?null:(qu=!0,Bu);case"textInput":return e=t.data,e===Bu&&qu?null:e;default:return null}}function ky(e,t){if(al)return e==="compositionend"||!kr&&ku(e,t)?(e=_u(),ts=zr=Xn=null,al=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lu&&t.locale!=="ko"?null:t.data;default:return null}}var Hy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hy[e.type]:t==="textarea"}function Vu(e,t,n,l){tl?nl?nl.push(l):nl=[l]:tl=l,t=Gs(t,"onChange"),0<t.length&&(n=new ls("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Xl=null,Jl=null;function Qy(e){Nm(e,0)}function ss(e){var t=Yl(e);if(Au(t))return e}function Yu(e,t){if(e==="change")return t}var Pu=!1;if(Nn){var Hr;if(Nn){var Qr="oninput"in document;if(!Qr){var Ku=document.createElement("div");Ku.setAttribute("oninput","return;"),Qr=typeof Ku.oninput=="function"}Hr=Qr}else Hr=!1;Pu=Hr&&(!document.documentMode||9<document.documentMode)}function Fu(){Xl&&(Xl.detachEvent("onpropertychange",Gu),Jl=Xl=null)}function Gu(e){if(e.propertyName==="value"&&ss(Jl)){var t=[];Vu(t,Jl,e,_r(e)),Ru(Qy,t)}}function Vy(e,t,n){e==="focusin"?(Fu(),Xl=t,Jl=n,Xl.attachEvent("onpropertychange",Gu)):e==="focusout"&&Fu()}function Yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ss(Jl)}function Py(e,t){if(e==="click")return ss(t)}function Ky(e,t){if(e==="input"||e==="change")return ss(t)}function Fy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Fy;function $l(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var r=n[l];if(!it.call(t,r)||!Ht(e[r],t[r]))return!1}return!0}function Zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xu(e,t){var n=Zu(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zu(n)}}function Ju(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ju(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $u(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wi(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wi(e.document)}return t}function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Gy=Nn&&"documentMode"in document&&11>=document.documentMode,ll=null,Yr=null,Wl=null,Pr=!1;function Wu(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pr||ll==null||ll!==Wi(l)||(l=ll,"selectionStart"in l&&Vr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wl&&$l(Wl,l)||(Wl=l,l=Gs(Yr,"onSelect"),0<l.length&&(t=new ls("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ll)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var il={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Kr={},ed={};Nn&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Aa(e){if(Kr[e])return Kr[e];if(!il[e])return e;var t=il[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ed)return Kr[e]=t[n];return e}var td=Aa("animationend"),nd=Aa("animationiteration"),ad=Aa("animationstart"),Zy=Aa("transitionrun"),Xy=Aa("transitionstart"),Jy=Aa("transitioncancel"),ld=Aa("transitionend"),id=new Map,Fr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fr.push("scrollEnd");function dn(e,t){id.set(e,t),ja(t,[e])}var rs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],sl=0,Gr=0;function cs(){for(var e=sl,t=Gr=sl=0;t<e;){var n=Jt[t];Jt[t++]=null;var l=Jt[t];Jt[t++]=null;var r=Jt[t];Jt[t++]=null;var o=Jt[t];if(Jt[t++]=null,l!==null&&r!==null){var f=l.pending;f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r}o!==0&&sd(n,r,o)}}function os(e,t,n,l){Jt[sl++]=e,Jt[sl++]=t,Jt[sl++]=n,Jt[sl++]=l,Gr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Zr(e,t,n,l){return os(e,t,n,l),us(e)}function Da(e,t){return os(e,null,null,t),us(e)}function sd(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var r=!1,o=e.return;o!==null;)o.childLanes|=n,l=o.alternate,l!==null&&(l.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(r=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,r&&t!==null&&(r=31-kt(n),e=o.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=n|536870912),o):null}function us(e){if(50<ji)throw ji=0,lo=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rl={};function $y(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,l){return new $y(e,t,n,l)}function Xr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function rd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ds(e,t,n,l,r,o){var f=0;if(l=e,typeof e=="function")Xr(e)&&(f=1);else if(typeof e=="string")f=av(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Qt(31,n,t,r),e.elementType=ue,e.lanes=o,e;case E:return Na(n.children,r,o,t);case _:f=8,r|=24;break;case L:return e=Qt(12,n,t,r|2),e.elementType=L,e.lanes=o,e;case K:return e=Qt(13,n,t,r),e.elementType=K,e.lanes=o,e;case $:return e=Qt(19,n,t,r),e.elementType=$,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:f=10;break e;case U:f=9;break e;case k:f=11;break e;case F:f=14;break e;case X:f=16,l=null;break e}f=29,n=Error(u(130,e===null?"null":typeof e,"")),l=null}return t=Qt(f,n,t,r),t.elementType=e,t.type=l,t.lanes=o,t}function Na(e,t,n,l){return e=Qt(7,e,l,t),e.lanes=n,e}function Jr(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function cd(e){var t=Qt(18,null,null,0);return t.stateNode=e,t}function $r(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var od=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var n=od.get(e);return n!==void 0?n:(t={value:e,source:t,stack:et(t)},od.set(e,t),t)}return{value:e,source:t,stack:et(t)}}var cl=[],ol=0,fs=null,ei=0,Wt=[],en=0,Jn=null,xn=1,bn="";function Cn(e,t){cl[ol++]=ei,cl[ol++]=fs,fs=e,ei=t}function ud(e,t,n){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,Jn=e;var l=xn;e=bn;var r=32-kt(l)-1;l&=~(1<<r),n+=1;var o=32-kt(t)+r;if(30<o){var f=r-r%5;o=(l&(1<<f)-1).toString(32),l>>=f,r-=f,xn=1<<32-kt(t)+r|n<<r|l,bn=o+e}else xn=1<<o|n<<r|l,bn=e}function Wr(e){e.return!==null&&(Cn(e,1),ud(e,1,0))}function ec(e){for(;e===fs;)fs=cl[--ol],cl[ol]=null,ei=cl[--ol],cl[ol]=null;for(;e===Jn;)Jn=Wt[--en],Wt[en]=null,bn=Wt[--en],Wt[en]=null,xn=Wt[--en],Wt[en]=null}function dd(e,t){Wt[en++]=xn,Wt[en++]=bn,Wt[en++]=Jn,xn=t.id,bn=t.overflow,Jn=e}var xt=null,He=null,Me=!1,$n=null,tn=!1,tc=Error(u(519));function Wn(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ti($t(t,e)),tc}function fd(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[vt]=e,t[Et]=l,n){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(n=0;n<Si.length;n++)Se(Si[n],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),Du(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),Mu(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Tm(t.textContent,n)?(l.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),l.onScroll!=null&&Se("scroll",t),l.onScrollEnd!=null&&Se("scrollend",t),l.onClick!=null&&(t.onclick=Dn),t=!0):t=!1,t||Wn(e,!0)}function md(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:xt=xt.return}}function ul(e){if(e!==xt)return!1;if(!Me)return md(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||bo(e.type,e.memoizedProps)),n=!n),n&&He&&Wn(e),md(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=qm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=qm(e)}else t===27?(t=He,ma(e.type)?(e=Do,Do=null,He=e):He=t):He=xt?an(e.stateNode.nextSibling):null;return!0}function Ma(){He=xt=null,Me=!1}function nc(){var e=$n;return e!==null&&(Ot===null?Ot=e:Ot.push.apply(Ot,e),$n=null),e}function ti(e){$n===null?$n=[e]:$n.push(e)}var ac=be(null),Ca=null,En=null;function ea(e,t,n){V(ac,t._currentValue),t._currentValue=n}function Tn(e){e._currentValue=ac.current,Z(ac)}function lc(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function ic(e,t,n,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){var f=r.child;o=o.firstContext;e:for(;o!==null;){var x=o;o=r;for(var S=0;S<t.length;S++)if(x.context===t[S]){o.lanes|=n,x=o.alternate,x!==null&&(x.lanes|=n),lc(o.return,n,e),l||(f=null);break e}o=x.next}}else if(r.tag===18){if(f=r.return,f===null)throw Error(u(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),lc(f,n,e),f=null}else f=r.child;if(f!==null)f.return=r;else for(f=r;f!==null;){if(f===e){f=null;break}if(r=f.sibling,r!==null){r.return=f.return,f=r;break}f=f.return}r=f}}function dl(e,t,n,l){e=null;for(var r=t,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var f=r.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var x=r.type;Ht(r.pendingProps.value,f.value)||(e!==null?e.push(x):e=[x])}}else if(r===cn.current){if(f=r.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ci):e=[Ci])}r=r.return}e!==null&&ic(t,e,n,l),t.flags|=262144}function ms(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){Ca=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return pd(Ca,e)}function ps(e,t){return Ca===null&&Ea(e),pd(e,t)}function pd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},En===null){if(e===null)throw Error(u(308));En=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else En=En.next=t;return n}var Wy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},eg=a.unstable_scheduleCallback,tg=a.unstable_NormalPriority,st={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sc(){return{controller:new Wy,data:new Map,refCount:0}}function ni(e){e.refCount--,e.refCount===0&&eg(tg,function(){e.controller.abort()})}var ai=null,rc=0,fl=0,ml=null;function ng(e,t){if(ai===null){var n=ai=[];rc=0,fl=uo(),ml={status:"pending",value:void 0,then:function(l){n.push(l)}}}return rc++,t.then(hd,hd),t}function hd(){if(--rc===0&&ai!==null){ml!==null&&(ml.status="fulfilled");var e=ai;ai=null,fl=0,ml=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ag(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),l}var yd=B.S;B.S=function(e,t){em=Bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ng(e,t),yd!==null&&yd(e,t)};var Ta=be(null);function cc(){var e=Ta.current;return e!==null?e:ke.pooledCache}function hs(e,t){t===null?V(Ta,Ta.current):V(Ta,t.pool)}function gd(){var e=cc();return e===null?null:{parent:st._currentValue,pool:e}}var pl=Error(u(460)),oc=Error(u(474)),ys=Error(u(542)),gs={then:function(){}};function vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function xd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Dn,Dn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e;default:if(typeof t.status=="string")t.then(Dn,Dn);else{if(e=ke,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e}throw _a=t,pl}}function Ra(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(_a=n,pl):n}}var _a=null;function bd(){if(_a===null)throw Error(u(459));var e=_a;return _a=null,e}function jd(e){if(e===pl||e===ys)throw Error(u(483))}var hl=null,li=0;function vs(e){var t=li;return li+=1,hl===null&&(hl=[]),xd(hl,e,t)}function ii(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xs(e,t){throw t.$$typeof===j?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wd(e){function t(C,N){if(e){var T=C.deletions;T===null?(C.deletions=[N],C.flags|=16):T.push(N)}}function n(C,N){if(!e)return null;for(;N!==null;)t(C,N),N=N.sibling;return null}function l(C){for(var N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function r(C,N){return C=Mn(C,N),C.index=0,C.sibling=null,C}function o(C,N,T){return C.index=T,e?(T=C.alternate,T!==null?(T=T.index,T<N?(C.flags|=67108866,N):T):(C.flags|=67108866,N)):(C.flags|=1048576,N)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function x(C,N,T,H){return N===null||N.tag!==6?(N=Jr(T,C.mode,H),N.return=C,N):(N=r(N,T),N.return=C,N)}function S(C,N,T,H){var le=T.type;return le===E?q(C,N,T.props.children,H,T.key):N!==null&&(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Ra(le)===N.type)?(N=r(N,T.props),ii(N,T),N.return=C,N):(N=ds(T.type,T.key,T.props,null,C.mode,H),ii(N,T),N.return=C,N)}function R(C,N,T,H){return N===null||N.tag!==4||N.stateNode.containerInfo!==T.containerInfo||N.stateNode.implementation!==T.implementation?(N=$r(T,C.mode,H),N.return=C,N):(N=r(N,T.children||[]),N.return=C,N)}function q(C,N,T,H,le){return N===null||N.tag!==7?(N=Na(T,C.mode,H,le),N.return=C,N):(N=r(N,T),N.return=C,N)}function Q(C,N,T){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Jr(""+N,C.mode,T),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case D:return T=ds(N.type,N.key,N.props,null,C.mode,T),ii(T,N),T.return=C,T;case A:return N=$r(N,C.mode,T),N.return=C,N;case X:return N=Ra(N),Q(C,N,T)}if(ge(N)||ve(N))return N=Na(N,C.mode,T,null),N.return=C,N;if(typeof N.then=="function")return Q(C,vs(N),T);if(N.$$typeof===M)return Q(C,ps(C,N),T);xs(C,N)}return null}function I(C,N,T,H){var le=N!==null?N.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return le!==null?null:x(C,N,""+T,H);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case D:return T.key===le?S(C,N,T,H):null;case A:return T.key===le?R(C,N,T,H):null;case X:return T=Ra(T),I(C,N,T,H)}if(ge(T)||ve(T))return le!==null?null:q(C,N,T,H,null);if(typeof T.then=="function")return I(C,N,vs(T),H);if(T.$$typeof===M)return I(C,N,ps(C,T),H);xs(C,T)}return null}function z(C,N,T,H,le){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return C=C.get(T)||null,x(N,C,""+H,le);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case D:return C=C.get(H.key===null?T:H.key)||null,S(N,C,H,le);case A:return C=C.get(H.key===null?T:H.key)||null,R(N,C,H,le);case X:return H=Ra(H),z(C,N,T,H,le)}if(ge(H)||ve(H))return C=C.get(T)||null,q(N,C,H,le,null);if(typeof H.then=="function")return z(C,N,T,vs(H),le);if(H.$$typeof===M)return z(C,N,T,ps(N,H),le);xs(N,H)}return null}function J(C,N,T,H){for(var le=null,Ce=null,ee=N,pe=N=0,Ne=null;ee!==null&&pe<T.length;pe++){ee.index>pe?(Ne=ee,ee=null):Ne=ee.sibling;var Ee=I(C,ee,T[pe],H);if(Ee===null){ee===null&&(ee=Ne);break}e&&ee&&Ee.alternate===null&&t(C,ee),N=o(Ee,N,pe),Ce===null?le=Ee:Ce.sibling=Ee,Ce=Ee,ee=Ne}if(pe===T.length)return n(C,ee),Me&&Cn(C,pe),le;if(ee===null){for(;pe<T.length;pe++)ee=Q(C,T[pe],H),ee!==null&&(N=o(ee,N,pe),Ce===null?le=ee:Ce.sibling=ee,Ce=ee);return Me&&Cn(C,pe),le}for(ee=l(ee);pe<T.length;pe++)Ne=z(ee,C,pe,T[pe],H),Ne!==null&&(e&&Ne.alternate!==null&&ee.delete(Ne.key===null?pe:Ne.key),N=o(Ne,N,pe),Ce===null?le=Ne:Ce.sibling=Ne,Ce=Ne);return e&&ee.forEach(function(va){return t(C,va)}),Me&&Cn(C,pe),le}function re(C,N,T,H){if(T==null)throw Error(u(151));for(var le=null,Ce=null,ee=N,pe=N=0,Ne=null,Ee=T.next();ee!==null&&!Ee.done;pe++,Ee=T.next()){ee.index>pe?(Ne=ee,ee=null):Ne=ee.sibling;var va=I(C,ee,Ee.value,H);if(va===null){ee===null&&(ee=Ne);break}e&&ee&&va.alternate===null&&t(C,ee),N=o(va,N,pe),Ce===null?le=va:Ce.sibling=va,Ce=va,ee=Ne}if(Ee.done)return n(C,ee),Me&&Cn(C,pe),le;if(ee===null){for(;!Ee.done;pe++,Ee=T.next())Ee=Q(C,Ee.value,H),Ee!==null&&(N=o(Ee,N,pe),Ce===null?le=Ee:Ce.sibling=Ee,Ce=Ee);return Me&&Cn(C,pe),le}for(ee=l(ee);!Ee.done;pe++,Ee=T.next())Ee=z(ee,C,pe,Ee.value,H),Ee!==null&&(e&&Ee.alternate!==null&&ee.delete(Ee.key===null?pe:Ee.key),N=o(Ee,N,pe),Ce===null?le=Ee:Ce.sibling=Ee,Ce=Ee);return e&&ee.forEach(function(pv){return t(C,pv)}),Me&&Cn(C,pe),le}function qe(C,N,T,H){if(typeof T=="object"&&T!==null&&T.type===E&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case D:e:{for(var le=T.key;N!==null;){if(N.key===le){if(le=T.type,le===E){if(N.tag===7){n(C,N.sibling),H=r(N,T.props.children),H.return=C,C=H;break e}}else if(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Ra(le)===N.type){n(C,N.sibling),H=r(N,T.props),ii(H,T),H.return=C,C=H;break e}n(C,N);break}else t(C,N);N=N.sibling}T.type===E?(H=Na(T.props.children,C.mode,H,T.key),H.return=C,C=H):(H=ds(T.type,T.key,T.props,null,C.mode,H),ii(H,T),H.return=C,C=H)}return f(C);case A:e:{for(le=T.key;N!==null;){if(N.key===le)if(N.tag===4&&N.stateNode.containerInfo===T.containerInfo&&N.stateNode.implementation===T.implementation){n(C,N.sibling),H=r(N,T.children||[]),H.return=C,C=H;break e}else{n(C,N);break}else t(C,N);N=N.sibling}H=$r(T,C.mode,H),H.return=C,C=H}return f(C);case X:return T=Ra(T),qe(C,N,T,H)}if(ge(T))return J(C,N,T,H);if(ve(T)){if(le=ve(T),typeof le!="function")throw Error(u(150));return T=le.call(T),re(C,N,T,H)}if(typeof T.then=="function")return qe(C,N,vs(T),H);if(T.$$typeof===M)return qe(C,N,ps(C,T),H);xs(C,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,N!==null&&N.tag===6?(n(C,N.sibling),H=r(N,T),H.return=C,C=H):(n(C,N),H=Jr(T,C.mode,H),H.return=C,C=H),f(C)):n(C,N)}return function(C,N,T,H){try{li=0;var le=qe(C,N,T,H);return hl=null,le}catch(ee){if(ee===pl||ee===ys)throw ee;var Ce=Qt(29,ee,null,C.mode);return Ce.lanes=H,Ce.return=C,Ce}}}var Ia=wd(!0),Sd=wd(!1),ta=!1;function uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Te&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=us(e),sd(e,null,n),t}return os(e,l,t,n),us(e)}function si(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,pu(e,n)}}function fc(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?r=o=f:o=o.next=f,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var mc=!1;function ri(){if(mc){var e=ml;if(e!==null)throw e}}function ci(e,t,n,l){mc=!1;var r=e.updateQueue;ta=!1;var o=r.firstBaseUpdate,f=r.lastBaseUpdate,x=r.shared.pending;if(x!==null){r.shared.pending=null;var S=x,R=S.next;S.next=null,f===null?o=R:f.next=R,f=S;var q=e.alternate;q!==null&&(q=q.updateQueue,x=q.lastBaseUpdate,x!==f&&(x===null?q.firstBaseUpdate=R:x.next=R,q.lastBaseUpdate=S))}if(o!==null){var Q=r.baseState;f=0,q=R=S=null,x=o;do{var I=x.lane&-536870913,z=I!==x.lane;if(z?(De&I)===I:(l&I)===I){I!==0&&I===fl&&(mc=!0),q!==null&&(q=q.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var J=e,re=x;I=t;var qe=n;switch(re.tag){case 1:if(J=re.payload,typeof J=="function"){Q=J.call(qe,Q,I);break e}Q=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=re.payload,I=typeof J=="function"?J.call(qe,Q,I):J,I==null)break e;Q=v({},Q,I);break e;case 2:ta=!0}}I=x.callback,I!==null&&(e.flags|=64,z&&(e.flags|=8192),z=r.callbacks,z===null?r.callbacks=[I]:z.push(I))}else z={lane:I,tag:x.tag,payload:x.payload,callback:x.callback,next:null},q===null?(R=q=z,S=Q):q=q.next=z,f|=I;if(x=x.next,x===null){if(x=r.shared.pending,x===null)break;z=x,x=z.next,z.next=null,r.lastBaseUpdate=z,r.shared.pending=null}}while(!0);q===null&&(S=Q),r.baseState=S,r.firstBaseUpdate=R,r.lastBaseUpdate=q,o===null&&(r.shared.lanes=0),ca|=f,e.lanes=f,e.memoizedState=Q}}function Ad(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Dd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ad(n[e],t)}var yl=be(null),bs=be(0);function Nd(e,t){e=qn,V(bs,e),V(yl,t),qn=e|t.baseLanes}function pc(){V(bs,qn),V(yl,yl.current)}function hc(){qn=bs.current,Z(yl),Z(bs)}var Vt=be(null),nn=null;function la(e){var t=e.alternate;V(tt,tt.current&1),V(Vt,e),nn===null&&(t===null||yl.current!==null||t.memoizedState!==null)&&(nn=e)}function yc(e){V(tt,tt.current),V(Vt,e),nn===null&&(nn=e)}function Md(e){e.tag===22?(V(tt,tt.current),V(Vt,e),nn===null&&(nn=e)):ia()}function ia(){V(tt,tt.current),V(Vt,Vt.current)}function Yt(e){Z(Vt),nn===e&&(nn=null),Z(tt)}var tt=be(0);function js(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||So(n)||Ao(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rn=0,me=null,Le=null,rt=null,ws=!1,gl=!1,Oa=!1,Ss=0,oi=0,vl=null,lg=0;function Xe(){throw Error(u(321))}function gc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function vc(e,t,n,l,r,o){return Rn=o,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?df:Ic,Oa=!1,o=n(l,r),Oa=!1,gl&&(o=Ed(t,n,l,r)),Cd(e),o}function Cd(e){B.H=fi;var t=Le!==null&&Le.next!==null;if(Rn=0,rt=Le=me=null,ws=!1,oi=0,vl=null,t)throw Error(u(300));e===null||ct||(e=e.dependencies,e!==null&&ms(e)&&(ct=!0))}function Ed(e,t,n,l){me=e;var r=0;do{if(gl&&(vl=null),oi=0,gl=!1,25<=r)throw Error(u(301));if(r+=1,rt=Le=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}B.H=ff,o=t(n,l)}while(gl);return o}function ig(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?ui(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(me.flags|=1024),t}function xc(){var e=Ss!==0;return Ss=0,e}function bc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function jc(e){if(ws){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ws=!1}Rn=0,rt=Le=me=null,gl=!1,oi=Ss=0,vl=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?me.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if(Le===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=rt===null?me.memoizedState:rt.next;if(t!==null)rt=t,Le=e;else{if(e===null)throw me.alternate===null?Error(u(467)):Error(u(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},rt===null?me.memoizedState=rt=e:rt=rt.next=e}return rt}function As(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ui(e){var t=oi;return oi+=1,vl===null&&(vl=[]),e=xd(vl,e,t),t=me,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?df:Ic),e}function Ds(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ui(e);if(e.$$typeof===M)return bt(e)}throw Error(u(438,String(e)))}function wc(e){var t=null,n=me.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=As(),me.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=he;return t.index++,n}function _n(e,t){return typeof t=="function"?t(e):t}function Ns(e){var t=nt();return Sc(t,Le,e)}function Sc(e,t,n){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=n;var r=e.baseQueue,o=l.pending;if(o!==null){if(r!==null){var f=r.next;r.next=o.next,o.next=f}t.baseQueue=r=o,l.pending=null}if(o=e.baseState,r===null)e.memoizedState=o;else{t=r.next;var x=f=null,S=null,R=t,q=!1;do{var Q=R.lane&-536870913;if(Q!==R.lane?(De&Q)===Q:(Rn&Q)===Q){var I=R.revertLane;if(I===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),Q===fl&&(q=!0);else if((Rn&I)===I){R=R.next,I===fl&&(q=!0);continue}else Q={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(x=S=Q,f=o):S=S.next=Q,me.lanes|=I,ca|=I;Q=R.action,Oa&&n(o,Q),o=R.hasEagerState?R.eagerState:n(o,Q)}else I={lane:Q,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(x=S=I,f=o):S=S.next=I,me.lanes|=Q,ca|=Q;R=R.next}while(R!==null&&R!==t);if(S===null?f=o:S.next=x,!Ht(o,e.memoizedState)&&(ct=!0,q&&(n=ml,n!==null)))throw n;e.memoizedState=o,e.baseState=f,e.baseQueue=S,l.lastRenderedState=o}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ac(e){var t=nt(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var l=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var f=r=r.next;do o=e(o,f.action),f=f.next;while(f!==r);Ht(o,t.memoizedState)||(ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,l]}function Td(e,t,n){var l=me,r=nt(),o=Me;if(o){if(n===void 0)throw Error(u(407));n=n()}else n=t();var f=!Ht((Le||r).memoizedState,n);if(f&&(r.memoizedState=n,ct=!0),r=r.queue,Mc(Id.bind(null,l,r,e),[e]),r.getSnapshot!==t||f||rt!==null&&rt.memoizedState.tag&1){if(l.flags|=2048,xl(9,{destroy:void 0},_d.bind(null,l,r,n,t),null),ke===null)throw Error(u(349));o||(Rn&127)!==0||Rd(l,t,n)}return n}function Rd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t=As(),me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _d(e,t,n,l){t.value=n,t.getSnapshot=l,Od(t)&&zd(e)}function Id(e,t,n){return n(function(){Od(t)&&zd(e)})}function Od(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function zd(e){var t=Da(e,2);t!==null&&zt(t,e,2)}function Dc(e){var t=Dt();if(typeof e=="function"){var n=e;if(e=n(),Oa){Gn(!0);try{n()}finally{Gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:e},t}function Ud(e,t,n,l){return e.baseState=n,Sc(e,Le,typeof l=="function"?l:_n)}function sg(e,t,n,l,r){if(Es(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};B.T!==null?n(!0):o.isTransition=!1,l(o),n=t.pending,n===null?(o.next=t.pending=o,Ld(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Ld(e,t){var n=t.action,l=t.payload,r=e.state;if(t.isTransition){var o=B.T,f={};B.T=f;try{var x=n(r,l),S=B.S;S!==null&&S(f,x),Bd(e,t,x)}catch(R){Nc(e,t,R)}finally{o!==null&&f.types!==null&&(o.types=f.types),B.T=o}}else try{o=n(r,l),Bd(e,t,o)}catch(R){Nc(e,t,R)}}function Bd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){qd(e,t,l)},function(l){return Nc(e,t,l)}):qd(e,t,n)}function qd(e,t,n){t.status="fulfilled",t.value=n,kd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ld(e,n)))}function Nc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,kd(t),t=t.next;while(t!==l)}e.action=null}function kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hd(e,t){return t}function Qd(e,t){if(Me){var n=ke.formState;if(n!==null){e:{var l=me;if(Me){if(He){t:{for(var r=He,o=tn;r.nodeType!==8;){if(!o){r=null;break t}if(r=an(r.nextSibling),r===null){r=null;break t}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){He=an(r.nextSibling),l=r.data==="F!";break e}}Wn(l)}l=!1}l&&(t=n[0])}}return n=Dt(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:t},n.queue=l,n=cf.bind(null,me,l),l.dispatch=n,l=Dc(!1),o=_c.bind(null,me,!1,l.queue),l=Dt(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,n=sg.bind(null,me,r,o,n),r.dispatch=n,l.memoizedState=e,[t,n,!1]}function Vd(e){var t=nt();return Yd(t,Le,e)}function Yd(e,t,n){if(t=Sc(e,t,Hd)[0],e=Ns(_n)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ui(t)}catch(f){throw f===pl?ys:f}else l=t;t=nt();var r=t.queue,o=r.dispatch;return n!==t.memoizedState&&(me.flags|=2048,xl(9,{destroy:void 0},rg.bind(null,r,n),null)),[l,o,e]}function rg(e,t){e.action=t}function Pd(e){var t=nt(),n=Le;if(n!==null)return Yd(t,n,e);nt(),t=t.memoizedState,n=nt();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function xl(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=me.updateQueue,t===null&&(t=As(),me.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Kd(){return nt().memoizedState}function Ms(e,t,n,l){var r=Dt();me.flags|=e,r.memoizedState=xl(1|t,{destroy:void 0},n,l===void 0?null:l)}function Cs(e,t,n,l){var r=nt();l=l===void 0?null:l;var o=r.memoizedState.inst;Le!==null&&l!==null&&gc(l,Le.memoizedState.deps)?r.memoizedState=xl(t,o,n,l):(me.flags|=e,r.memoizedState=xl(1|t,o,n,l))}function Fd(e,t){Ms(8390656,8,e,t)}function Mc(e,t){Cs(2048,8,e,t)}function cg(e){me.flags|=4;var t=me.updateQueue;if(t===null)t=As(),me.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Gd(e){var t=nt().memoizedState;return cg({ref:t,nextImpl:e}),function(){if((Te&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Zd(e,t){return Cs(4,2,e,t)}function Xd(e,t){return Cs(4,4,e,t)}function Jd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $d(e,t,n){n=n!=null?n.concat([e]):null,Cs(4,4,Jd.bind(null,t,e),n)}function Cc(){}function Wd(e,t){var n=nt();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&gc(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function ef(e,t){var n=nt();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&gc(t,l[1]))return l[0];if(l=e(),Oa){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[l,t],l}function Ec(e,t,n){return n===void 0||(Rn&1073741824)!==0&&(De&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=nm(),me.lanes|=e,ca|=e,n)}function tf(e,t,n,l){return Ht(n,t)?n:yl.current!==null?(e=Ec(e,n,l),Ht(e,t)||(ct=!0),e):(Rn&42)===0||(Rn&1073741824)!==0&&(De&261930)===0?(ct=!0,e.memoizedState=n):(e=nm(),me.lanes|=e,ca|=e,t)}function nf(e,t,n,l,r){var o=Y.p;Y.p=o!==0&&8>o?o:8;var f=B.T,x={};B.T=x,_c(e,!1,t,n);try{var S=r(),R=B.S;if(R!==null&&R(x,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var q=ag(S,l);di(e,t,q,Ft(e))}else di(e,t,l,Ft(e))}catch(Q){di(e,t,{then:function(){},status:"rejected",reason:Q},Ft())}finally{Y.p=o,f!==null&&x.types!==null&&(f.types=x.types),B.T=f}}function og(){}function Tc(e,t,n,l){if(e.tag!==5)throw Error(u(476));var r=af(e).queue;nf(e,r,t,ae,n===null?og:function(){return lf(e),n(l)})}function af(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:ae},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lf(e){var t=af(e);t.next===null&&(t=e.alternate.memoizedState),di(e,t.next.queue,{},Ft())}function Rc(){return bt(Ci)}function sf(){return nt().memoizedState}function rf(){return nt().memoizedState}function ug(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ft();e=na(n);var l=aa(t,e,n);l!==null&&(zt(l,t,n),si(l,t,n)),t={cache:sc()},e.payload=t;return}t=t.return}}function dg(e,t,n){var l=Ft();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Es(e)?of(t,n):(n=Zr(e,t,n,l),n!==null&&(zt(n,e,l),uf(n,t,l)))}function cf(e,t,n){var l=Ft();di(e,t,n,l)}function di(e,t,n,l){var r={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Es(e))of(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,x=o(f,n);if(r.hasEagerState=!0,r.eagerState=x,Ht(x,f))return os(e,t,r,0),ke===null&&cs(),!1}catch{}if(n=Zr(e,t,r,l),n!==null)return zt(n,e,l),uf(n,t,l),!0}return!1}function _c(e,t,n,l){if(l={lane:2,revertLane:uo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Es(e)){if(t)throw Error(u(479))}else t=Zr(e,n,l,2),t!==null&&zt(t,e,2)}function Es(e){var t=e.alternate;return e===me||t!==null&&t===me}function of(e,t){gl=ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,pu(e,n)}}var fi={readContext:bt,use:Ds,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};fi.useEffectEvent=Xe;var df={readContext:bt,use:Ds,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Fd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ms(4194308,4,Jd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){Ms(4,2,e,t)},useMemo:function(e,t){var n=Dt();t=t===void 0?null:t;var l=e();if(Oa){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Dt();if(n!==void 0){var r=n(t);if(Oa){Gn(!0);try{n(t)}finally{Gn(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=dg.bind(null,me,e),[l.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Dc(e);var t=e.queue,n=cf.bind(null,me,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Cc,useDeferredValue:function(e,t){var n=Dt();return Ec(n,e,t)},useTransition:function(){var e=Dc(!1);return e=nf.bind(null,me,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=me,r=Dt();if(Me){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),ke===null)throw Error(u(349));(De&127)!==0||Rd(l,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Fd(Id.bind(null,l,o,e),[e]),l.flags|=2048,xl(9,{destroy:void 0},_d.bind(null,l,o,n,t),null),n},useId:function(){var e=Dt(),t=ke.identifierPrefix;if(Me){var n=bn,l=xn;n=(l&~(1<<32-kt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ss++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=lg++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Rc,useFormState:Qd,useActionState:Qd,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_c.bind(null,me,!0,n),n.dispatch=t,[e,t]},useMemoCache:wc,useCacheRefresh:function(){return Dt().memoizedState=ug.bind(null,me)},useEffectEvent:function(e){var t=Dt(),n={impl:e};return t.memoizedState=n,function(){if((Te&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},Ic={readContext:bt,use:Ds,useCallback:Wd,useContext:bt,useEffect:Mc,useImperativeHandle:$d,useInsertionEffect:Zd,useLayoutEffect:Xd,useMemo:ef,useReducer:Ns,useRef:Kd,useState:function(){return Ns(_n)},useDebugValue:Cc,useDeferredValue:function(e,t){var n=nt();return tf(n,Le.memoizedState,e,t)},useTransition:function(){var e=Ns(_n)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:ui(e),t]},useSyncExternalStore:Td,useId:sf,useHostTransitionStatus:Rc,useFormState:Vd,useActionState:Vd,useOptimistic:function(e,t){var n=nt();return Ud(n,Le,e,t)},useMemoCache:wc,useCacheRefresh:rf};Ic.useEffectEvent=Gd;var ff={readContext:bt,use:Ds,useCallback:Wd,useContext:bt,useEffect:Mc,useImperativeHandle:$d,useInsertionEffect:Zd,useLayoutEffect:Xd,useMemo:ef,useReducer:Ac,useRef:Kd,useState:function(){return Ac(_n)},useDebugValue:Cc,useDeferredValue:function(e,t){var n=nt();return Le===null?Ec(n,e,t):tf(n,Le.memoizedState,e,t)},useTransition:function(){var e=Ac(_n)[0],t=nt().memoizedState;return[typeof e=="boolean"?e:ui(e),t]},useSyncExternalStore:Td,useId:sf,useHostTransitionStatus:Rc,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var n=nt();return Le!==null?Ud(n,Le,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:wc,useCacheRefresh:rf};ff.useEffectEvent=Gd;function Oc(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:v({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Ft(),r=na(l);r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,l),t!==null&&(zt(t,e,l),si(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Ft(),r=na(l);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=aa(e,r,l),t!==null&&(zt(t,e,l),si(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),l=na(n);l.tag=2,t!=null&&(l.callback=t),t=aa(e,l,n),t!==null&&(zt(t,e,n),si(t,e,n))}};function mf(e,t,n,l,r,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,f):t.prototype&&t.prototype.isPureReactComponent?!$l(n,l)||!$l(r,o):!0}function pf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function za(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=v({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function hf(e){rs(e)}function yf(e){console.error(e)}function gf(e){rs(e)}function Ts(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function vf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Uc(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){Ts(e,t)},n}function xf(e){return e=na(e),e.tag=3,e}function bf(e,t,n,l){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=l.value;e.payload=function(){return r(o)},e.callback=function(){vf(t,n,l)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){vf(t,n,l),typeof r!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function fg(e,t,n,l,r){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&dl(t,n,r,!0),n=Vt.current,n!==null){switch(n.tag){case 31:case 13:return nn===null?Qs():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=r,l===gs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),ro(e,l,r)),!1;case 22:return n.flags|=65536,l===gs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),ro(e,l,r)),!1}throw Error(u(435,n.tag))}return ro(e,l,r),Qs(),!1}if(Me)return t=Vt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==tc&&(e=Error(u(422),{cause:l}),ti($t(e,n)))):(l!==tc&&(t=Error(u(423),{cause:l}),ti($t(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=$t(l,n),r=Uc(e.stateNode,l,r),fc(e,r),Je!==4&&(Je=2)),!1;var o=Error(u(520),{cause:l});if(o=$t(o,n),bi===null?bi=[o]:bi.push(o),Je!==4&&(Je=2),t===null)return!0;l=$t(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Uc(n.stateNode,l,e),fc(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(oa===null||!oa.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,r=xf(r),bf(r,e,n,l),fc(n,r),!1}n=n.return}while(n!==null);return!1}var Lc=Error(u(461)),ct=!1;function jt(e,t,n,l){t.child=e===null?Sd(t,null,n,l):Ia(t,e.child,n,l)}function jf(e,t,n,l,r){n=n.render;var o=t.ref;if("ref"in l){var f={};for(var x in l)x!=="ref"&&(f[x]=l[x])}else f=l;return Ea(t),l=vc(e,t,n,f,o,r),x=xc(),e!==null&&!ct?(bc(e,t,r),In(e,t,r)):(Me&&x&&Wr(t),t.flags|=1,jt(e,t,l,r),t.child)}function wf(e,t,n,l,r){if(e===null){var o=n.type;return typeof o=="function"&&!Xr(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Sf(e,t,o,l,r)):(e=ds(n.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Pc(e,r)){var f=o.memoizedProps;if(n=n.compare,n=n!==null?n:$l,n(f,l)&&e.ref===t.ref)return In(e,t,r)}return t.flags|=1,e=Mn(o,l),e.ref=t.ref,e.return=t,t.child=e}function Sf(e,t,n,l,r){if(e!==null){var o=e.memoizedProps;if($l(o,l)&&e.ref===t.ref)if(ct=!1,t.pendingProps=l=o,Pc(e,r))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,In(e,t,r)}return Bc(e,t,n,l,r)}function Af(e,t,n,l){var r=l.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~o}else l=0,t.child=null;return Df(e,t,o,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hs(t,o!==null?o.cachePool:null),o!==null?Nd(t,o):pc(),Md(t);else return l=t.lanes=536870912,Df(e,t,o!==null?o.baseLanes|n:n,n,l)}else o!==null?(hs(t,o.cachePool),Nd(t,o),ia(),t.memoizedState=null):(e!==null&&hs(t,null),pc(),ia());return jt(e,t,r,n),t.child}function mi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Df(e,t,n,l,r){var o=cc();return o=o===null?null:{parent:st._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&hs(t,null),pc(),Md(t),e!==null&&dl(e,t,l,!0),t.childLanes=r,null}function Rs(e,t){return t=Is({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Nf(e,t,n){return Ia(t,e.child,null,n),e=Rs(t,t.pendingProps),e.flags|=2,Yt(t),t.memoizedState=null,e}function mg(e,t,n){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(l.mode==="hidden")return e=Rs(t,l),t.lanes=536870912,mi(null,e);if(yc(t),(e=He)?(e=Bm(e,tn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=cd(e),n.return=t,t.child=n,xt=t,He=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return Rs(t,l)}var o=e.memoizedState;if(o!==null){var f=o.dehydrated;if(yc(t),r)if(t.flags&256)t.flags&=-257,t=Nf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(ct||dl(e,t,n,!1),r=(n&e.childLanes)!==0,ct||r){if(l=ke,l!==null&&(f=hu(l,n),f!==0&&f!==o.retryLane))throw o.retryLane=f,Da(e,f),zt(l,e,f),Lc;Qs(),t=Nf(e,t,n)}else e=o.treeContext,He=an(f.nextSibling),xt=t,Me=!0,$n=null,tn=!1,e!==null&&dd(t,e),t=Rs(t,l),t.flags|=4096;return t}return e=Mn(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _s(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Bc(e,t,n,l,r){return Ea(t),n=vc(e,t,n,l,void 0,r),l=xc(),e!==null&&!ct?(bc(e,t,r),In(e,t,r)):(Me&&l&&Wr(t),t.flags|=1,jt(e,t,n,r),t.child)}function Mf(e,t,n,l,r,o){return Ea(t),t.updateQueue=null,n=Ed(t,l,n,r),Cd(e),l=xc(),e!==null&&!ct?(bc(e,t,o),In(e,t,o)):(Me&&l&&Wr(t),t.flags|=1,jt(e,t,n,o),t.child)}function Cf(e,t,n,l,r){if(Ea(t),t.stateNode===null){var o=rl,f=n.contextType;typeof f=="object"&&f!==null&&(o=bt(f)),o=new n(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=zc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},uc(t),f=n.contextType,o.context=typeof f=="object"&&f!==null?bt(f):rl,o.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Oc(t,n,f,l),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&zc.enqueueReplaceState(o,o.state,null),ci(t,l,o,r),ri(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){o=t.stateNode;var x=t.memoizedProps,S=za(n,x);o.props=S;var R=o.context,q=n.contextType;f=rl,typeof q=="object"&&q!==null&&(f=bt(q));var Q=n.getDerivedStateFromProps;q=typeof Q=="function"||typeof o.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,q||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(x||R!==f)&&pf(t,o,l,f),ta=!1;var I=t.memoizedState;o.state=I,ci(t,l,o,r),ri(),R=t.memoizedState,x||I!==R||ta?(typeof Q=="function"&&(Oc(t,n,Q,l),R=t.memoizedState),(S=ta||mf(t,n,S,l,I,R,f))?(q||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=R),o.props=l,o.state=R,o.context=f,l=S):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,dc(e,t),f=t.memoizedProps,q=za(n,f),o.props=q,Q=t.pendingProps,I=o.context,R=n.contextType,S=rl,typeof R=="object"&&R!==null&&(S=bt(R)),x=n.getDerivedStateFromProps,(R=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==Q||I!==S)&&pf(t,o,l,S),ta=!1,I=t.memoizedState,o.state=I,ci(t,l,o,r),ri();var z=t.memoizedState;f!==Q||I!==z||ta||e!==null&&e.dependencies!==null&&ms(e.dependencies)?(typeof x=="function"&&(Oc(t,n,x,l),z=t.memoizedState),(q=ta||mf(t,n,q,l,I,z,S)||e!==null&&e.dependencies!==null&&ms(e.dependencies))?(R||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,z,S),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,z,S)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=z),o.props=l,o.state=z,o.context=S,l=q):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),l=!1)}return o=l,_s(e,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&l?(t.child=Ia(t,e.child,null,r),t.child=Ia(t,null,n,r)):jt(e,t,n,r),t.memoizedState=o.state,e=t.child):e=In(e,t,r),e}function Ef(e,t,n,l){return Ma(),t.flags|=256,jt(e,t,n,l),t.child}var qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:gd()}}function Hc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Kt),e}function Tf(e,t,n){var l=t.pendingProps,r=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),f&&(r=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(r?la(t):ia(),(e=He)?(e=Bm(e,tn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:xn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},n=cd(e),n.return=t,t.child=n,xt=t,He=null)):e=null,e===null)throw Wn(t);return Ao(e)?t.lanes=32:t.lanes=536870912,null}var x=l.children;return l=l.fallback,r?(ia(),r=t.mode,x=Is({mode:"hidden",children:x},r),l=Na(l,r,n,null),x.return=t,l.return=t,x.sibling=l,t.child=x,l=t.child,l.memoizedState=kc(n),l.childLanes=Hc(e,f,n),t.memoizedState=qc,mi(null,l)):(la(t),Qc(t,x))}var S=e.memoizedState;if(S!==null&&(x=S.dehydrated,x!==null)){if(o)t.flags&256?(la(t),t.flags&=-257,t=Vc(e,t,n)):t.memoizedState!==null?(ia(),t.child=e.child,t.flags|=128,t=null):(ia(),x=l.fallback,r=t.mode,l=Is({mode:"visible",children:l.children},r),x=Na(x,r,n,null),x.flags|=2,l.return=t,x.return=t,l.sibling=x,t.child=l,Ia(t,e.child,null,n),l=t.child,l.memoizedState=kc(n),l.childLanes=Hc(e,f,n),t.memoizedState=qc,t=mi(null,l));else if(la(t),Ao(x)){if(f=x.nextSibling&&x.nextSibling.dataset,f)var R=f.dgst;f=R,l=Error(u(419)),l.stack="",l.digest=f,ti({value:l,source:null,stack:null}),t=Vc(e,t,n)}else if(ct||dl(e,t,n,!1),f=(n&e.childLanes)!==0,ct||f){if(f=ke,f!==null&&(l=hu(f,n),l!==0&&l!==S.retryLane))throw S.retryLane=l,Da(e,l),zt(f,e,l),Lc;So(x)||Qs(),t=Vc(e,t,n)}else So(x)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,He=an(x.nextSibling),xt=t,Me=!0,$n=null,tn=!1,e!==null&&dd(t,e),t=Qc(t,l.children),t.flags|=4096);return t}return r?(ia(),x=l.fallback,r=t.mode,S=e.child,R=S.sibling,l=Mn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,R!==null?x=Mn(R,x):(x=Na(x,r,n,null),x.flags|=2),x.return=t,l.return=t,l.sibling=x,t.child=l,mi(null,l),l=t.child,x=e.child.memoizedState,x===null?x=kc(n):(r=x.cachePool,r!==null?(S=st._currentValue,r=r.parent!==S?{parent:S,pool:S}:r):r=gd(),x={baseLanes:x.baseLanes|n,cachePool:r}),l.memoizedState=x,l.childLanes=Hc(e,f,n),t.memoizedState=qc,mi(e.child,l)):(la(t),n=e.child,e=n.sibling,n=Mn(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function Qc(e,t){return t=Is({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Is(e,t){return e=Qt(22,e,null,t),e.lanes=0,e}function Vc(e,t,n){return Ia(t,e.child,null,n),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),lc(e.return,t,n)}function Yc(e,t,n,l,r,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:r,treeForkCount:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=n,f.tailMode=r,f.treeForkCount=o)}function _f(e,t,n){var l=t.pendingProps,r=l.revealOrder,o=l.tail;l=l.children;var f=tt.current,x=(f&2)!==0;if(x?(f=f&1|2,t.flags|=128):f&=1,V(tt,f),jt(e,t,l,n),l=Me?ei:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,n,t);else if(e.tag===19)Rf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&js(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Yc(t,!1,r,n,o,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&js(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Yc(t,!0,n,null,o,l);break;case"together":Yc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ca|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(dl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ms(e)))}function pg(e,t,n){switch(t.tag){case 3:Kn(t,t.stateNode.containerInfo),ea(t,st,e.memoizedState.cache),Ma();break;case 27:case 5:Fn(t);break;case 4:Kn(t,t.stateNode.containerInfo);break;case 10:ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(la(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Tf(e,t,n):(la(t),e=In(e,t,n),e!==null?e.sibling:null);la(t);break;case 19:var r=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(dl(e,t,n,!1),l=(n&t.childLanes)!==0),r){if(l)return _f(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),V(tt,tt.current),l)break;return null;case 22:return t.lanes=0,Af(e,t,n,t.pendingProps);case 24:ea(t,st,e.memoizedState.cache)}return In(e,t,n)}function If(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!Pc(e,n)&&(t.flags&128)===0)return ct=!1,pg(e,t,n);ct=(e.flags&131072)!==0}else ct=!1,Me&&(t.flags&1048576)!==0&&ud(t,ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Ra(t.elementType),t.type=e,typeof e=="function")Xr(e)?(l=za(e,l),t.tag=1,t=Cf(null,t,e,l,n)):(t.tag=0,t=Bc(null,t,e,l,n));else{if(e!=null){var r=e.$$typeof;if(r===k){t.tag=11,t=jf(null,t,e,l,n);break e}else if(r===F){t.tag=14,t=wf(null,t,e,l,n);break e}}throw t=ye(e)||e,Error(u(306,t,""))}}return t;case 0:return Bc(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,r=za(l,t.pendingProps),Cf(e,t,l,r,n);case 3:e:{if(Kn(t,t.stateNode.containerInfo),e===null)throw Error(u(387));l=t.pendingProps;var o=t.memoizedState;r=o.element,dc(e,t),ci(t,l,null,n);var f=t.memoizedState;if(l=f.cache,ea(t,st,l),l!==o.cache&&ic(t,[st],n,!0),ri(),l=f.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Ef(e,t,l,n);break e}else if(l!==r){r=$t(Error(u(424)),t),ti(r),t=Ef(e,t,l,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,He=an(e.firstChild),xt=t,Me=!0,$n=null,tn=!0,n=Sd(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),l===r){t=In(e,t,n);break e}jt(e,t,l,n)}t=t.child}return t;case 26:return _s(e,t),e===null?(n=Ym(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,l=Zs(Mt.current).createElement(n),l[vt]=t,l[Et]=e,wt(l,n,e),mt(l),t.stateNode=l):t.memoizedState=Ym(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fn(t),e===null&&Me&&(l=t.stateNode=Hm(t.type,t.pendingProps,Mt.current),xt=t,tn=!0,r=He,ma(t.type)?(Do=r,He=an(l.firstChild)):He=r),jt(e,t,t.pendingProps.children,n),_s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((r=l=He)&&(l=Yg(l,t.type,t.pendingProps,tn),l!==null?(t.stateNode=l,xt=t,He=an(l.firstChild),tn=!1,r=!0):r=!1),r||Wn(t)),Fn(t),r=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,l=o.children,bo(r,o)?l=null:f!==null&&bo(r,f)&&(t.flags|=32),t.memoizedState!==null&&(r=vc(e,t,ig,null,null,n),Ci._currentValue=r),_s(e,t),jt(e,t,l,n),t.child;case 6:return e===null&&Me&&((e=n=He)&&(n=Pg(n,t.pendingProps,tn),n!==null?(t.stateNode=n,xt=t,He=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Tf(e,t,n);case 4:return Kn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ia(t,null,l,n):jt(e,t,l,n),t.child;case 11:return jf(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,ea(t,t.type,l.value),jt(e,t,l.children,n),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,Ea(t),r=bt(r),l=l(r),t.flags|=1,jt(e,t,l,n),t.child;case 14:return wf(e,t,t.type,t.pendingProps,n);case 15:return Sf(e,t,t.type,t.pendingProps,n);case 19:return _f(e,t,n);case 31:return mg(e,t,n);case 22:return Af(e,t,n,t.pendingProps);case 24:return Ea(t),l=bt(st),e===null?(r=cc(),r===null&&(r=ke,o=sc(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:l,cache:r},uc(t),ea(t,st,r)):((e.lanes&n)!==0&&(dc(e,t),ci(t,null,null,n),ri()),r=e.memoizedState,o=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ea(t,st,l)):(l=o.cache,ea(t,st,l),l!==r.cache&&ic(t,[st],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function On(e){e.flags|=4}function Kc(e,t,n,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(sm())e.flags|=8192;else throw _a=gs,oc}else e.flags&=-16777217}function Of(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zm(t))if(sm())e.flags|=8192;else throw _a=gs,oc}function Os(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?fu():536870912,e.lanes|=t,Sl|=t)}function pi(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function hg(e,t,n){var l=t.pendingProps;switch(ec(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Tn(st),Ct(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ul(t)?On(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),Qe(t),null;case 26:var r=t.type,o=t.memoizedState;return e===null?(On(t),o!==null?(Qe(t),Of(t,o)):(Qe(t),Kc(t,r,null,l,n))):o?o!==e.memoizedState?(On(t),Qe(t),Of(t,o)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&On(t),Qe(t),Kc(t,r,e,l,n)),null;case 27:if(vn(t),n=Mt.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&On(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}e=W.current,ul(t)?fd(t):(e=Hm(r,l,n),t.stateNode=e,On(t))}return Qe(t),null;case 5:if(vn(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&On(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return Qe(t),null}if(o=W.current,ul(t))fd(t);else{var f=Zs(Mt.current);switch(o){case 1:o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":o=f.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?f.createElement(r,{is:l.is}):f.createElement(r)}}o[vt]=t,o[Et]=l;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=o;e:switch(wt(o,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&On(t)}}return Qe(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&On(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(u(166));if(e=Mt.current,ul(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,r=xt,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Tm(e.nodeValue,n)),e||Wn(t,!0)}else e=Zs(e).createTextNode(l),e[vt]=t,t.stateNode=e}return Qe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=ul(t),n!==null){if(e===null){if(!l)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[vt]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else n=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Yt(t),t):(Yt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Qe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ul(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(u(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));r[vt]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),r=!1}else r=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Yt(t),t):(Yt(t),null)}return Yt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==r&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Os(t,t.updateQueue),Qe(t),null);case 4:return Ct(),e===null&&ho(t.stateNode.containerInfo),Qe(t),null;case 10:return Tn(t.type),Qe(t),null;case 19:if(Z(tt),l=t.memoizedState,l===null)return Qe(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)pi(l,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=js(e),o!==null){for(t.flags|=128,pi(l,!1),e=o.updateQueue,t.updateQueue=e,Os(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)rd(n,e),n=n.sibling;return V(tt,tt.current&1|2),Me&&Cn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Bt()>qs&&(t.flags|=128,r=!0,pi(l,!1),t.lanes=4194304)}else{if(!r)if(e=js(o),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Os(t,e),pi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Me)return Qe(t),null}else 2*Bt()-l.renderingStartTime>qs&&n!==536870912&&(t.flags|=128,r=!0,pi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Bt(),e.sibling=null,n=tt.current,V(tt,r?n&1|2:n&1),Me&&Cn(t,l.treeForkCount),e):(Qe(t),null);case 22:case 23:return Yt(t),hc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),n=t.updateQueue,n!==null&&Os(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&Z(Ta),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(st),Qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function yg(e,t){switch(ec(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tn(st),Ct(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vn(t),null;case 31:if(t.memoizedState!==null){if(Yt(t),t.alternate===null)throw Error(u(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Yt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(tt),null;case 4:return Ct(),null;case 10:return Tn(t.type),null;case 22:case 23:return Yt(t),hc(),e!==null&&Z(Ta),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tn(st),null;case 25:return null;default:return null}}function zf(e,t){switch(ec(t),t.tag){case 3:Tn(st),Ct();break;case 26:case 27:case 5:vn(t);break;case 4:Ct();break;case 31:t.memoizedState!==null&&Yt(t);break;case 13:Yt(t);break;case 19:Z(tt);break;case 10:Tn(t.type);break;case 22:case 23:Yt(t),hc(),e!==null&&Z(Ta);break;case 24:Tn(st)}}function hi(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var r=l.next;n=r;do{if((n.tag&e)===e){l=void 0;var o=n.create,f=n.inst;l=o(),f.destroy=l}n=n.next}while(n!==r)}}catch(x){ze(t,t.return,x)}}function sa(e,t,n){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var o=r.next;l=o;do{if((l.tag&e)===e){var f=l.inst,x=f.destroy;if(x!==void 0){f.destroy=void 0,r=t;var S=n,R=x;try{R()}catch(q){ze(r,S,q)}}}l=l.next}while(l!==o)}}catch(q){ze(t,t.return,q)}}function Uf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Dd(t,n)}catch(l){ze(e,e.return,l)}}}function Lf(e,t,n){n.props=za(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){ze(e,t,l)}}function yi(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(r){ze(e,t,r)}}function jn(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(r){ze(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function Bf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(r){ze(e,e.return,r)}}function Fc(e,t,n){try{var l=e.stateNode;Bg(l,e.type,n,t),l[Et]=t}catch(r){ze(e,e.return,r)}}function qf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Dn));else if(l!==4&&(l===27&&ma(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function zs(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ma(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(zs(e,t,n),e=e.sibling;e!==null;)zs(e,t,n),e=e.sibling}function kf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wt(t,l,n),t[vt]=e,t[Et]=n}catch(o){ze(e,e.return,o)}}var zn=!1,ot=!1,Xc=!1,Hf=typeof WeakSet=="function"?WeakSet:Set,pt=null;function gg(e,t){if(e=e.containerInfo,vo=nr,e=$u(e),Vr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var r=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var f=0,x=-1,S=-1,R=0,q=0,Q=e,I=null;t:for(;;){for(var z;Q!==n||r!==0&&Q.nodeType!==3||(x=f+r),Q!==o||l!==0&&Q.nodeType!==3||(S=f+l),Q.nodeType===3&&(f+=Q.nodeValue.length),(z=Q.firstChild)!==null;)I=Q,Q=z;for(;;){if(Q===e)break t;if(I===n&&++R===r&&(x=f),I===o&&++q===l&&(S=f),(z=Q.nextSibling)!==null)break;Q=I,I=Q.parentNode}Q=z}n=x===-1||S===-1?null:{start:x,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(xo={focusedElem:e,selectionRange:n},nr=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){switch(t=pt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,l=n.stateNode;try{var J=za(n.type,r);e=l.getSnapshotBeforeUpdate(J,o),l.__reactInternalSnapshotBeforeUpdate=e}catch(re){ze(n,n.return,re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)wo(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}}function Qf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ln(e,n),l&4&&hi(5,n);break;case 1:if(Ln(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){ze(n,n.return,f)}else{var r=za(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ze(n,n.return,f)}}l&64&&Uf(n),l&512&&yi(n,n.return);break;case 3:if(Ln(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Dd(e,t)}catch(f){ze(n,n.return,f)}}break;case 27:t===null&&l&4&&kf(n);case 26:case 5:Ln(e,n),t===null&&l&4&&Bf(n),l&512&&yi(n,n.return);break;case 12:Ln(e,n);break;case 31:Ln(e,n),l&4&&Pf(e,n);break;case 13:Ln(e,n),l&4&&Kf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Ng.bind(null,n),Kg(e,n))));break;case 22:if(l=n.memoizedState!==null||zn,!l){t=t!==null&&t.memoizedState!==null||ot,r=zn;var o=ot;zn=l,(ot=t)&&!o?Bn(e,n,(n.subtreeFlags&8772)!==0):Ln(e,n),zn=r,ot=o}break;case 30:break;default:Ln(e,n)}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,Rt=!1;function Un(e,t,n){for(n=n.child;n!==null;)Yf(e,t,n),n=n.sibling}function Yf(e,t,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 26:ot||jn(n,t),Un(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||jn(n,t);var l=Ye,r=Rt;ma(n.type)&&(Ye=n.stateNode,Rt=!1),Un(e,t,n),Di(n.stateNode),Ye=l,Rt=r;break;case 5:ot||jn(n,t);case 6:if(l=Ye,r=Rt,Ye=null,Un(e,t,n),Ye=l,Rt=r,Ye!==null)if(Rt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(o){ze(n,t,o)}else try{Ye.removeChild(n.stateNode)}catch(o){ze(n,t,o)}break;case 18:Ye!==null&&(Rt?(e=Ye,Um(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Rl(e)):Um(Ye,n.stateNode));break;case 4:l=Ye,r=Rt,Ye=n.stateNode.containerInfo,Rt=!0,Un(e,t,n),Ye=l,Rt=r;break;case 0:case 11:case 14:case 15:sa(2,n,t),ot||sa(4,n,t),Un(e,t,n);break;case 1:ot||(jn(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Lf(n,t,l)),Un(e,t,n);break;case 21:Un(e,t,n);break;case 22:ot=(l=ot)||n.memoizedState!==null,Un(e,t,n),ot=l;break;default:Un(e,t,n)}}function Pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Rl(e)}catch(n){ze(t,t.return,n)}}}function Kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Rl(e)}catch(n){ze(t,t.return,n)}}function vg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hf),t;default:throw Error(u(435,e.tag))}}function Us(e,t){var n=vg(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var r=Mg.bind(null,e,l);l.then(r,r)}})}function _t(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var r=n[l],o=e,f=t,x=f;e:for(;x!==null;){switch(x.tag){case 27:if(ma(x.type)){Ye=x.stateNode,Rt=!1;break e}break;case 5:Ye=x.stateNode,Rt=!1;break e;case 3:case 4:Ye=x.stateNode.containerInfo,Rt=!0;break e}x=x.return}if(Ye===null)throw Error(u(160));Yf(o,f,r),Ye=null,Rt=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ff(t,e),t=t.sibling}var fn=null;function Ff(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),It(e),l&4&&(sa(3,e,e.return),hi(3,e),sa(5,e,e.return));break;case 1:_t(t,e),It(e),l&512&&(ot||n===null||jn(n,n.return)),l&64&&zn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var r=fn;if(_t(t,e),It(e),l&512&&(ot||n===null||jn(n,n.return)),l&4){var o=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":o=r.getElementsByTagName("title")[0],(!o||o[Vl]||o[vt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(l),r.head.insertBefore(o,r.querySelector("head > title"))),wt(o,l,n),o[vt]=e,mt(o),l=o;break e;case"link":var f=Fm("link","href",r).get(l+(n.href||""));if(f){for(var x=0;x<f.length;x++)if(o=f[x],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(x,1);break t}}o=r.createElement(l),wt(o,l,n),r.head.appendChild(o);break;case"meta":if(f=Fm("meta","content",r).get(l+(n.content||""))){for(x=0;x<f.length;x++)if(o=f[x],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(x,1);break t}}o=r.createElement(l),wt(o,l,n),r.head.appendChild(o);break;default:throw Error(u(468,l))}o[vt]=e,mt(o),l=o}e.stateNode=l}else Gm(r,e.type,e.stateNode);else e.stateNode=Km(r,l,e.memoizedProps);else o!==l?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,l===null?Gm(r,e.type,e.stateNode):Km(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Fc(e,e.memoizedProps,n.memoizedProps)}break;case 27:_t(t,e),It(e),l&512&&(ot||n===null||jn(n,n.return)),n!==null&&l&4&&Fc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_t(t,e),It(e),l&512&&(ot||n===null||jn(n,n.return)),e.flags&32){r=e.stateNode;try{el(r,"")}catch(J){ze(e,e.return,J)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,Fc(e,r,n!==null?n.memoizedProps:r)),l&1024&&(Xc=!0);break;case 6:if(_t(t,e),It(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(J){ze(e,e.return,J)}}break;case 3:if($s=null,r=fn,fn=Xs(t.containerInfo),_t(t,e),fn=r,It(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(t.containerInfo)}catch(J){ze(e,e.return,J)}Xc&&(Xc=!1,Gf(e));break;case 4:l=fn,fn=Xs(e.stateNode.containerInfo),_t(t,e),It(e),fn=l;break;case 12:_t(t,e),It(e);break;case 31:_t(t,e),It(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Us(e,l)));break;case 13:_t(t,e),It(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bs=Bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Us(e,l)));break;case 22:r=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,R=zn,q=ot;if(zn=R||r,ot=q||S,_t(t,e),ot=q,zn=R,It(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||S||zn||ot||Ua(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(o=S.stateNode,r)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{x=S.stateNode;var Q=S.memoizedProps.style,I=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;x.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(J){ze(S,S.return,J)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=r?"":S.memoizedProps}catch(J){ze(S,S.return,J)}}}else if(t.tag===18){if(n===null){S=t;try{var z=S.stateNode;r?Lm(z,!0):Lm(S.stateNode,!1)}catch(J){ze(S,S.return,J)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Us(e,n))));break;case 19:_t(t,e),It(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Us(e,l)));break;case 30:break;case 21:break;default:_t(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(qf(l)){n=l;break}l=l.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var r=n.stateNode,o=Gc(e);zs(e,o,r);break;case 5:var f=n.stateNode;n.flags&32&&(el(f,""),n.flags&=-33);var x=Gc(e);zs(e,x,f);break;case 3:case 4:var S=n.stateNode.containerInfo,R=Gc(e);Zc(e,R,S);break;default:throw Error(u(161))}}catch(q){ze(e,e.return,q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ln(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qf(e,t.alternate,t),t=t.sibling}function Ua(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),Ua(t);break;case 1:jn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Lf(t,t.return,n),Ua(t);break;case 27:Di(t.stateNode);case 26:case 5:jn(t,t.return),Ua(t);break;case 22:t.memoizedState===null&&Ua(t);break;case 30:Ua(t);break;default:Ua(t)}e=e.sibling}}function Bn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:Bn(r,o,n),hi(4,o);break;case 1:if(Bn(r,o,n),l=o,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(R){ze(l,l.return,R)}if(l=o,r=l.updateQueue,r!==null){var x=l.stateNode;try{var S=r.shared.hiddenCallbacks;if(S!==null)for(r.shared.hiddenCallbacks=null,r=0;r<S.length;r++)Ad(S[r],x)}catch(R){ze(l,l.return,R)}}n&&f&64&&Uf(o),yi(o,o.return);break;case 27:kf(o);case 26:case 5:Bn(r,o,n),n&&l===null&&f&4&&Bf(o),yi(o,o.return);break;case 12:Bn(r,o,n);break;case 31:Bn(r,o,n),n&&f&4&&Pf(r,o);break;case 13:Bn(r,o,n),n&&f&4&&Kf(r,o);break;case 22:o.memoizedState===null&&Bn(r,o,n),yi(o,o.return);break;case 30:break;default:Bn(r,o,n)}t=t.sibling}}function Jc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ni(n))}function $c(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ni(e))}function mn(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zf(e,t,n,l),t=t.sibling}function Zf(e,t,n,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:mn(e,t,n,l),r&2048&&hi(9,t);break;case 1:mn(e,t,n,l);break;case 3:mn(e,t,n,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ni(e)));break;case 12:if(r&2048){mn(e,t,n,l),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,x=o.onPostCommit;typeof x=="function"&&x(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ze(t,t.return,S)}}else mn(e,t,n,l);break;case 31:mn(e,t,n,l);break;case 13:mn(e,t,n,l);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?mn(e,t,n,l):gi(e,t):o._visibility&2?mn(e,t,n,l):(o._visibility|=2,bl(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Jc(f,t);break;case 24:mn(e,t,n,l),r&2048&&$c(t.alternate,t);break;default:mn(e,t,n,l)}}function bl(e,t,n,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,f=t,x=n,S=l,R=f.flags;switch(f.tag){case 0:case 11:case 15:bl(o,f,x,S,r),hi(8,f);break;case 23:break;case 22:var q=f.stateNode;f.memoizedState!==null?q._visibility&2?bl(o,f,x,S,r):gi(o,f):(q._visibility|=2,bl(o,f,x,S,r)),r&&R&2048&&Jc(f.alternate,f);break;case 24:bl(o,f,x,S,r),r&&R&2048&&$c(f.alternate,f);break;default:bl(o,f,x,S,r)}t=t.sibling}}function gi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,r=l.flags;switch(l.tag){case 22:gi(n,l),r&2048&&Jc(l.alternate,l);break;case 24:gi(n,l),r&2048&&$c(l.alternate,l);break;default:gi(n,l)}t=t.sibling}}var vi=8192;function jl(e,t,n){if(e.subtreeFlags&vi)for(e=e.child;e!==null;)Xf(e,t,n),e=e.sibling}function Xf(e,t,n){switch(e.tag){case 26:jl(e,t,n),e.flags&vi&&e.memoizedState!==null&&lv(n,fn,e.memoizedState,e.memoizedProps);break;case 5:jl(e,t,n);break;case 3:case 4:var l=fn;fn=Xs(e.stateNode.containerInfo),jl(e,t,n),fn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=vi,vi=16777216,jl(e,t,n),vi=l):jl(e,t,n));break;default:jl(e,t,n)}}function Jf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function xi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];pt=l,Wf(l,e)}Jf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$f(e),e=e.sibling}function $f(e){switch(e.tag){case 0:case 11:case 15:xi(e),e.flags&2048&&sa(9,e,e.return);break;case 3:xi(e);break;case 12:xi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ls(e)):xi(e);break;default:xi(e)}}function Ls(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];pt=l,Wf(l,e)}Jf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),Ls(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ls(t));break;default:Ls(t)}e=e.sibling}}function Wf(e,t){for(;pt!==null;){var n=pt;switch(n.tag){case 0:case 11:case 15:sa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ni(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,pt=l;else e:for(n=e;pt!==null;){l=pt;var r=l.sibling,o=l.return;if(Vf(l),l===n){pt=null;break e}if(r!==null){r.return=o,pt=r;break e}pt=o}}}var xg={getCacheForType:function(e){var t=bt(st),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return bt(st).controller.signal}},bg=typeof WeakMap=="function"?WeakMap:Map,Te=0,ke=null,we=null,De=0,Oe=0,Pt=null,ra=!1,wl=!1,Wc=!1,qn=0,Je=0,ca=0,La=0,eo=0,Kt=0,Sl=0,bi=null,Ot=null,to=!1,Bs=0,em=0,qs=1/0,ks=null,oa=null,ft=0,ua=null,Al=null,kn=0,no=0,ao=null,tm=null,ji=0,lo=null;function Ft(){return(Te&2)!==0&&De!==0?De&-De:B.T!==null?uo():yu()}function nm(){if(Kt===0)if((De&536870912)===0||Me){var e=Gi;Gi<<=1,(Gi&3932160)===0&&(Gi=262144),Kt=e}else Kt=536870912;return e=Vt.current,e!==null&&(e.flags|=32),Kt}function zt(e,t,n){(e===ke&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Dl(e,0),da(e,De,Kt,!1)),Ql(e,n),((Te&2)===0||e!==ke)&&(e===ke&&((Te&2)===0&&(La|=n),Je===4&&da(e,De,Kt,!1)),wn(e))}function am(e,t,n){if((Te&6)!==0)throw Error(u(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Hl(e,t),r=l?Sg(e,t):so(e,t,!0),o=l;do{if(r===0){wl&&!l&&da(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!jg(n)){r=so(e,t,!1),o=!1;continue}if(r===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var x=e;r=bi;var S=x.current.memoizedState.isDehydrated;if(S&&(Dl(x,f).flags|=256),f=so(x,f,!1),f!==2){if(Wc&&!S){x.errorRecoveryDisabledLanes|=o,La|=o,r=4;break e}o=Ot,Ot=r,o!==null&&(Ot===null?Ot=o:Ot.push.apply(Ot,o))}r=f}if(o=!1,r!==2)continue}}if(r===1){Dl(e,0),da(e,t,0,!0);break}e:{switch(l=e,o=r,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:da(l,t,Kt,!ra);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(r=Bs+300-Bt(),10<r)){if(da(l,t,Kt,!ra),Xi(l,0,!0)!==0)break e;kn=t,l.timeoutHandle=Om(lm.bind(null,l,n,Ot,ks,to,t,Kt,La,Sl,ra,o,"Throttled",-0,0),r);break e}lm(l,n,Ot,ks,to,t,Kt,La,Sl,ra,o,null,-0,0)}}break}while(!0);wn(e)}function lm(e,t,n,l,r,o,f,x,S,R,q,Q,I,z){if(e.timeoutHandle=-1,Q=t.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},Xf(t,o,Q);var J=(o&62914560)===o?Bs-Bt():(o&4194048)===o?em-Bt():0;if(J=iv(Q,J),J!==null){kn=o,e.cancelPendingCommit=J(fm.bind(null,e,t,o,n,l,r,f,x,S,q,Q,null,I,z)),da(e,o,f,!R);return}}fm(e,t,o,n,l,r,f,x,S)}function jg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var r=n[l],o=r.getSnapshot;r=r.value;try{if(!Ht(o(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t,n,l){t&=~eo,t&=~La,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var o=31-kt(r),f=1<<o;l[o]=-1,r&=~f}n!==0&&mu(e,n,t)}function Hs(){return(Te&6)===0?(wi(0),!1):!0}function io(){if(we!==null){if(Oe===0)var e=we.return;else e=we,En=Ca=null,jc(e),hl=null,li=0,e=we;for(;e!==null;)zf(e.alternate,e),e=e.return;we=null}}function Dl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Hg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),kn=0,io(),ke=e,we=n=Mn(e.current,null),De=t,Oe=0,Pt=null,ra=!1,wl=Hl(e,t),Wc=!1,Sl=Kt=eo=La=ca=Je=0,Ot=bi=null,to=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-kt(l),o=1<<r;t|=e[r],l&=~o}return qn=t,cs(),n}function im(e,t){me=null,B.H=fi,t===pl||t===ys?(t=bd(),Oe=3):t===oc?(t=bd(),Oe=4):Oe=t===Lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,we===null&&(Je=1,Ts(e,$t(t,e.current)))}function sm(){var e=Vt.current;return e===null?!0:(De&4194048)===De?nn===null:(De&62914560)===De||(De&536870912)!==0?e===nn:!1}function rm(){var e=B.H;return B.H=fi,e===null?fi:e}function cm(){var e=B.A;return B.A=xg,e}function Qs(){Je=4,ra||(De&4194048)!==De&&Vt.current!==null||(wl=!0),(ca&134217727)===0&&(La&134217727)===0||ke===null||da(ke,De,Kt,!1)}function so(e,t,n){var l=Te;Te|=2;var r=rm(),o=cm();(ke!==e||De!==t)&&(ks=null,Dl(e,t)),t=!1;var f=Je;e:do try{if(Oe!==0&&we!==null){var x=we,S=Pt;switch(Oe){case 8:io(),f=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(t=!0);var R=Oe;if(Oe=0,Pt=null,Nl(e,x,S,R),n&&wl){f=0;break e}break;default:R=Oe,Oe=0,Pt=null,Nl(e,x,S,R)}}wg(),f=Je;break}catch(q){im(e,q)}while(!0);return t&&e.shellSuspendCounter++,En=Ca=null,Te=l,B.H=r,B.A=o,we===null&&(ke=null,De=0,cs()),f}function wg(){for(;we!==null;)om(we)}function Sg(e,t){var n=Te;Te|=2;var l=rm(),r=cm();ke!==e||De!==t?(ks=null,qs=Bt()+500,Dl(e,t)):wl=Hl(e,t);e:do try{if(Oe!==0&&we!==null){t=we;var o=Pt;t:switch(Oe){case 1:Oe=0,Pt=null,Nl(e,t,o,1);break;case 2:case 9:if(vd(o)){Oe=0,Pt=null,um(t);break}t=function(){Oe!==2&&Oe!==9||ke!==e||(Oe=7),wn(e)},o.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:vd(o)?(Oe=0,Pt=null,um(t)):(Oe=0,Pt=null,Nl(e,t,o,7));break;case 5:var f=null;switch(we.tag){case 26:f=we.memoizedState;case 5:case 27:var x=we;if(f?Zm(f):x.stateNode.complete){Oe=0,Pt=null;var S=x.sibling;if(S!==null)we=S;else{var R=x.return;R!==null?(we=R,Vs(R)):we=null}break t}}Oe=0,Pt=null,Nl(e,t,o,5);break;case 6:Oe=0,Pt=null,Nl(e,t,o,6);break;case 8:io(),Je=6;break e;default:throw Error(u(462))}}Ag();break}catch(q){im(e,q)}while(!0);return En=Ca=null,B.H=l,B.A=r,Te=n,we!==null?0:(ke=null,De=0,cs(),Je)}function Ag(){for(;we!==null&&!Pi();)om(we)}function om(e){var t=If(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?Vs(e):we=t}function um(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Mf(n,t,t.pendingProps,t.type,void 0,De);break;case 11:t=Mf(n,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:jc(t);default:zf(n,t),t=we=rd(t,qn),t=If(n,t,qn)}e.memoizedProps=e.pendingProps,t===null?Vs(e):we=t}function Nl(e,t,n,l){En=Ca=null,jc(t),hl=null,li=0;var r=t.return;try{if(fg(e,r,t,n,De)){Je=1,Ts(e,$t(n,e.current)),we=null;return}}catch(o){if(r!==null)throw we=r,o;Je=1,Ts(e,$t(n,e.current)),we=null;return}t.flags&32768?(Me||l===1?e=!0:wl||(De&536870912)!==0?e=!1:(ra=e=!0,(l===2||l===9||l===3||l===6)&&(l=Vt.current,l!==null&&l.tag===13&&(l.flags|=16384))),dm(t,e)):Vs(t)}function Vs(e){var t=e;do{if((t.flags&32768)!==0){dm(t,ra);return}e=t.return;var n=hg(t.alternate,t,qn);if(n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Je===0&&(Je=5)}function dm(e,t){do{var n=yg(e.alternate,e);if(n!==null){n.flags&=32767,we=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){we=e;return}we=e=n}while(e!==null);Je=6,we=null}function fm(e,t,n,l,r,o,f,x,S){e.cancelPendingCommit=null;do Ys();while(ft!==0);if((Te&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Gr,ay(e,n,o,f,x,S),e===ke&&(we=ke=null,De=0),Al=t,ua=e,kn=n,no=o,ao=r,tm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cg(Ki,function(){return gm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,r=Y.p,Y.p=2,f=Te,Te|=4;try{gg(e,t,n)}finally{Te=f,Y.p=r,B.T=l}}ft=1,mm(),pm(),hm()}}function mm(){if(ft===1){ft=0;var e=ua,t=Al,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=B.T,B.T=null;var l=Y.p;Y.p=2;var r=Te;Te|=4;try{Ff(t,e);var o=xo,f=$u(e.containerInfo),x=o.focusedElem,S=o.selectionRange;if(f!==x&&x&&x.ownerDocument&&Ju(x.ownerDocument.documentElement,x)){if(S!==null&&Vr(x)){var R=S.start,q=S.end;if(q===void 0&&(q=R),"selectionStart"in x)x.selectionStart=R,x.selectionEnd=Math.min(q,x.value.length);else{var Q=x.ownerDocument||document,I=Q&&Q.defaultView||window;if(I.getSelection){var z=I.getSelection(),J=x.textContent.length,re=Math.min(S.start,J),qe=S.end===void 0?re:Math.min(S.end,J);!z.extend&&re>qe&&(f=qe,qe=re,re=f);var C=Xu(x,re),N=Xu(x,qe);if(C&&N&&(z.rangeCount!==1||z.anchorNode!==C.node||z.anchorOffset!==C.offset||z.focusNode!==N.node||z.focusOffset!==N.offset)){var T=Q.createRange();T.setStart(C.node,C.offset),z.removeAllRanges(),re>qe?(z.addRange(T),z.extend(N.node,N.offset)):(T.setEnd(N.node,N.offset),z.addRange(T))}}}}for(Q=[],z=x;z=z.parentNode;)z.nodeType===1&&Q.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Q.length;x++){var H=Q[x];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}nr=!!vo,xo=vo=null}finally{Te=r,Y.p=l,B.T=n}}e.current=t,ft=2}}function pm(){if(ft===2){ft=0;var e=ua,t=Al,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=B.T,B.T=null;var l=Y.p;Y.p=2;var r=Te;Te|=4;try{Qf(e,t.alternate,t)}finally{Te=r,Y.p=l,B.T=n}}ft=3}}function hm(){if(ft===4||ft===3){ft=0,Gh();var e=ua,t=Al,n=kn,l=tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,Al=ua=null,ym(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(oa=null),Ar(n),t=t.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(kl,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=B.T,r=Y.p,Y.p=2,B.T=null;try{for(var o=e.onRecoverableError,f=0;f<l.length;f++){var x=l[f];o(x.value,{componentStack:x.stack})}}finally{B.T=t,Y.p=r}}(kn&3)!==0&&Ys(),wn(e),r=e.pendingLanes,(n&261930)!==0&&(r&42)!==0?e===lo?ji++:(ji=0,lo=e):ji=0,wi(0)}}function ym(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ni(t)))}function Ys(){return mm(),pm(),hm(),gm()}function gm(){if(ft!==5)return!1;var e=ua,t=no;no=0;var n=Ar(kn),l=B.T,r=Y.p;try{Y.p=32>n?32:n,B.T=null,n=ao,ao=null;var o=ua,f=kn;if(ft=0,Al=ua=null,kn=0,(Te&6)!==0)throw Error(u(331));var x=Te;if(Te|=4,$f(o.current),Zf(o,o.current,f,n),Te=x,wi(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(kl,o)}catch{}return!0}finally{Y.p=r,B.T=l,ym(e,t)}}function vm(e,t,n){t=$t(n,t),t=Uc(e.stateNode,t,2),e=aa(e,t,2),e!==null&&(Ql(e,2),wn(e))}function ze(e,t,n){if(e.tag===3)vm(e,e,n);else for(;t!==null;){if(t.tag===3){vm(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(oa===null||!oa.has(l))){e=$t(n,e),n=xf(2),l=aa(t,n,2),l!==null&&(bf(n,l,t,e),Ql(l,2),wn(l));break}}t=t.return}}function ro(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new bg;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(n)||(Wc=!0,r.add(n),e=Dg.bind(null,e,t,n),t.then(e,e))}function Dg(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ke===e&&(De&n)===n&&(Je===4||Je===3&&(De&62914560)===De&&300>Bt()-Bs?(Te&2)===0&&Dl(e,0):eo|=n,Sl===De&&(Sl=0)),wn(e)}function xm(e,t){t===0&&(t=fu()),e=Da(e,t),e!==null&&(Ql(e,t),wn(e))}function Ng(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xm(e,n)}function Mg(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(t),xm(e,n)}function Cg(e,t){return un(e,t)}var Ps=null,Ml=null,co=!1,Ks=!1,oo=!1,fa=0;function wn(e){e!==Ml&&e.next===null&&(Ml===null?Ps=Ml=e:Ml=Ml.next=e),Ks=!0,co||(co=!0,Tg())}function wi(e,t){if(!oo&&Ks){oo=!0;do for(var n=!1,l=Ps;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var o=0;else{var f=l.suspendedLanes,x=l.pingedLanes;o=(1<<31-kt(42|e)+1)-1,o&=r&~(f&~x),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Sm(l,o))}else o=De,o=Xi(l,l===ke?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||Hl(l,o)||(n=!0,Sm(l,o));l=l.next}while(n);oo=!1}}function Eg(){bm()}function bm(){Ks=co=!1;var e=0;fa!==0&&kg()&&(e=fa);for(var t=Bt(),n=null,l=Ps;l!==null;){var r=l.next,o=jm(l,t);o===0?(l.next=null,n===null?Ps=r:n.next=r,r===null&&(Ml=n)):(n=l,(e!==0||(o&3)!==0)&&(Ks=!0)),l=r}ft!==0&&ft!==5||wi(e),fa!==0&&(fa=0)}function jm(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-kt(o),x=1<<f,S=r[f];S===-1?((x&n)===0||(x&l)!==0)&&(r[f]=ny(x,t)):S<=t&&(e.expiredLanes|=x),o&=~x}if(t=ke,n=De,n=Xi(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ue(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Hl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Ue(l),Ar(n)){case 2:case 8:n=uu;break;case 32:n=Ki;break;case 268435456:n=du;break;default:n=Ki}return l=wm.bind(null,e),n=un(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Ue(l),e.callbackPriority=2,e.callbackNode=null,2}function wm(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ys()&&e.callbackNode!==n)return null;var l=De;return l=Xi(e,e===ke?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(am(e,l,t),jm(e,Bt()),e.callbackNode!=null&&e.callbackNode===n?wm.bind(null,e):null)}function Sm(e,t){if(Ys())return null;am(e,t,!0)}function Tg(){Qg(function(){(Te&6)!==0?un(ou,Eg):bm()})}function uo(){if(fa===0){var e=fl;e===0&&(e=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),fa=e}return fa}function Am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:es(""+e)}function Dm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Rg(e,t,n,l,r){if(t==="submit"&&n&&n.stateNode===r){var o=Am((r[Et]||null).action),f=l.submitter;f&&(t=(t=f[Et]||null)?Am(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var x=new ls("action","action",null,l,r);e.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(fa!==0){var S=f?Dm(r,f):new FormData(r);Tc(n,{pending:!0,data:S,method:r.method,action:o},null,S)}}else typeof o=="function"&&(x.preventDefault(),S=f?Dm(r,f):new FormData(r),Tc(n,{pending:!0,data:S,method:r.method,action:o},o,S))},currentTarget:r}]})}}for(var fo=0;fo<Fr.length;fo++){var mo=Fr[fo],_g=mo.toLowerCase(),Ig=mo[0].toUpperCase()+mo.slice(1);dn(_g,"on"+Ig)}dn(td,"onAnimationEnd"),dn(nd,"onAnimationIteration"),dn(ad,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Zy,"onTransitionRun"),dn(Xy,"onTransitionStart"),dn(Jy,"onTransitionCancel"),dn(ld,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Og=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Si));function Nm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],r=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var f=l.length-1;0<=f;f--){var x=l[f],S=x.instance,R=x.currentTarget;if(x=x.listener,S!==o&&r.isPropagationStopped())break e;o=x,r.currentTarget=R;try{o(r)}catch(q){rs(q)}r.currentTarget=null,o=S}else for(f=0;f<l.length;f++){if(x=l[f],S=x.instance,R=x.currentTarget,x=x.listener,S!==o&&r.isPropagationStopped())break e;o=x,r.currentTarget=R;try{o(r)}catch(q){rs(q)}r.currentTarget=null,o=S}}}}function Se(e,t){var n=t[Dr];n===void 0&&(n=t[Dr]=new Set);var l=e+"__bubble";n.has(l)||(Mm(t,e,2,!1),n.add(l))}function po(e,t,n){var l=0;t&&(l|=4),Mm(n,e,l,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function ho(e){if(!e[Fs]){e[Fs]=!0,xu.forEach(function(n){n!=="selectionchange"&&(Og.has(n)||po(n,!1,e),po(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,po("selectionchange",!1,t))}}function Mm(e,t,n,l){switch(np(t)){case 2:var r=cv;break;case 8:r=ov;break;default:r=To}n=r.bind(null,t,n,e),r=void 0,!Or||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function yo(e,t,n,l,r){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var x=l.stateNode.containerInfo;if(x===r)break;if(f===4)for(f=l.return;f!==null;){var S=f.tag;if((S===3||S===4)&&f.stateNode.containerInfo===r)return;f=f.return}for(;x!==null;){if(f=Za(x),f===null)return;if(S=f.tag,S===5||S===6||S===26||S===27){l=o=f;continue e}x=x.parentNode}}l=l.return}Ru(function(){var R=o,q=_r(n),Q=[];e:{var I=id.get(e);if(I!==void 0){var z=ls,J=e;switch(e){case"keypress":if(ns(n)===0)break e;case"keydown":case"keyup":z=My;break;case"focusin":J="focus",z=Br;break;case"focusout":J="blur",z=Br;break;case"beforeblur":case"afterblur":z=Br;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Ty;break;case td:case nd:case ad:z=vy;break;case ld:z=_y;break;case"scroll":case"scrollend":z=my;break;case"wheel":z=Oy;break;case"copy":case"cut":case"paste":z=by;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Uu;break;case"toggle":case"beforetoggle":z=Uy}var re=(t&4)!==0,qe=!re&&(e==="scroll"||e==="scrollend"),C=re?I!==null?I+"Capture":null:I;re=[];for(var N=R,T;N!==null;){var H=N;if(T=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||T===null||C===null||(H=Pl(N,C),H!=null&&re.push(Ai(N,H,T))),qe)break;N=N.return}0<re.length&&(I=new z(I,J,null,n,q),Q.push({event:I,listeners:re}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",I&&n!==Rr&&(J=n.relatedTarget||n.fromElement)&&(Za(J)||J[Ga]))break e;if((z||I)&&(I=q.window===q?q:(I=q.ownerDocument)?I.defaultView||I.parentWindow:window,z?(J=n.relatedTarget||n.toElement,z=R,J=J?Za(J):null,J!==null&&(qe=h(J),re=J.tag,J!==qe||re!==5&&re!==27&&re!==6)&&(J=null)):(z=null,J=R),z!==J)){if(re=Ou,H="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(re=Uu,H="onPointerLeave",C="onPointerEnter",N="pointer"),qe=z==null?I:Yl(z),T=J==null?I:Yl(J),I=new re(H,N+"leave",z,n,q),I.target=qe,I.relatedTarget=T,H=null,Za(q)===R&&(re=new re(C,N+"enter",J,n,q),re.target=T,re.relatedTarget=qe,H=re),qe=H,z&&J)t:{for(re=zg,C=z,N=J,T=0,H=C;H;H=re(H))T++;H=0;for(var le=N;le;le=re(le))H++;for(;0<T-H;)C=re(C),T--;for(;0<H-T;)N=re(N),H--;for(;T--;){if(C===N||N!==null&&C===N.alternate){re=C;break t}C=re(C),N=re(N)}re=null}else re=null;z!==null&&Cm(Q,I,z,re,!1),J!==null&&qe!==null&&Cm(Q,qe,J,re,!0)}}e:{if(I=R?Yl(R):window,z=I.nodeName&&I.nodeName.toLowerCase(),z==="select"||z==="input"&&I.type==="file")var Ce=Yu;else if(Qu(I))if(Pu)Ce=Ky;else{Ce=Yy;var ee=Vy}else z=I.nodeName,!z||z.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?R&&Tr(R.elementType)&&(Ce=Yu):Ce=Py;if(Ce&&(Ce=Ce(e,R))){Vu(Q,Ce,n,q);break e}ee&&ee(e,I,R),e==="focusout"&&R&&I.type==="number"&&R.memoizedProps.value!=null&&Er(I,"number",I.value)}switch(ee=R?Yl(R):window,e){case"focusin":(Qu(ee)||ee.contentEditable==="true")&&(ll=ee,Yr=R,Wl=null);break;case"focusout":Wl=Yr=ll=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,Wu(Q,n,q);break;case"selectionchange":if(Gy)break;case"keydown":case"keyup":Wu(Q,n,q)}var pe;if(kr)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else al?ku(e,n)&&(Ne="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ne="onCompositionStart");Ne&&(Lu&&n.locale!=="ko"&&(al||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&al&&(pe=_u()):(Xn=q,zr="value"in Xn?Xn.value:Xn.textContent,al=!0)),ee=Gs(R,Ne),0<ee.length&&(Ne=new zu(Ne,e,null,n,q),Q.push({event:Ne,listeners:ee}),pe?Ne.data=pe:(pe=Hu(n),pe!==null&&(Ne.data=pe)))),(pe=By?qy(e,n):ky(e,n))&&(Ne=Gs(R,"onBeforeInput"),0<Ne.length&&(ee=new zu("onBeforeInput","beforeinput",null,n,q),Q.push({event:ee,listeners:Ne}),ee.data=pe)),Rg(Q,e,R,n,q)}Nm(Q,t)})}function Ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gs(e,t){for(var n=t+"Capture",l=[];e!==null;){var r=e,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=Pl(e,n),r!=null&&l.unshift(Ai(e,r,o)),r=Pl(e,t),r!=null&&l.push(Ai(e,r,o))),e.tag===3)return l;e=e.return}return[]}function zg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Cm(e,t,n,l,r){for(var o=t._reactName,f=[];n!==null&&n!==l;){var x=n,S=x.alternate,R=x.stateNode;if(x=x.tag,S!==null&&S===l)break;x!==5&&x!==26&&x!==27||R===null||(S=R,r?(R=Pl(n,o),R!=null&&f.unshift(Ai(n,R,S))):r||(R=Pl(n,o),R!=null&&f.push(Ai(n,R,S)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Ug=/\r\n?/g,Lg=/\u0000|\uFFFD/g;function Em(e){return(typeof e=="string"?e:""+e).replace(Ug,`
`).replace(Lg,"")}function Tm(e,t){return t=Em(t),Em(e)===t}function Be(e,t,n,l,r,o){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||el(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&el(e,""+l);break;case"className":$i(e,"class",l);break;case"tabIndex":$i(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$i(e,n,l);break;case"style":Eu(e,l,o);break;case"data":if(t!=="object"){$i(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=es(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Be(e,t,"name",r.name,r,null),Be(e,t,"formEncType",r.formEncType,r,null),Be(e,t,"formMethod",r.formMethod,r,null),Be(e,t,"formTarget",r.formTarget,r,null)):(Be(e,t,"encType",r.encType,r,null),Be(e,t,"method",r.method,r,null),Be(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=es(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Dn);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=es(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Ji(e,"popover",l);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ji(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=dy.get(n)||n,Ji(e,n,l))}}function go(e,t,n,l,r,o){switch(n){case"style":Eu(e,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof l=="string"?el(e,l):(typeof l=="number"||typeof l=="bigint")&&el(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bu.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),o=e[Et]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,r),typeof l=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,r);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Ji(e,n,l)}}}function wt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,r=!1,o;for(o in n)if(n.hasOwnProperty(o)){var f=n[o];if(f!=null)switch(o){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Be(e,t,o,f,n,null)}}r&&Be(e,t,"srcSet",n.srcSet,n,null),l&&Be(e,t,"src",n.src,n,null);return;case"input":Se("invalid",e);var x=o=f=r=null,S=null,R=null;for(l in n)if(n.hasOwnProperty(l)){var q=n[l];if(q!=null)switch(l){case"name":r=q;break;case"type":f=q;break;case"checked":S=q;break;case"defaultChecked":R=q;break;case"value":o=q;break;case"defaultValue":x=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(u(137,t));break;default:Be(e,t,l,q,n,null)}}Du(e,o,x,S,R,f,r,!1);return;case"select":Se("invalid",e),l=f=o=null;for(r in n)if(n.hasOwnProperty(r)&&(x=n[r],x!=null))switch(r){case"value":o=x;break;case"defaultValue":f=x;break;case"multiple":l=x;default:Be(e,t,r,x,n,null)}t=o,n=f,e.multiple=!!l,t!=null?Wa(e,!!l,t,!1):n!=null&&Wa(e,!!l,n,!0);return;case"textarea":Se("invalid",e),o=r=l=null;for(f in n)if(n.hasOwnProperty(f)&&(x=n[f],x!=null))switch(f){case"value":l=x;break;case"defaultValue":r=x;break;case"children":o=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(u(91));break;default:Be(e,t,f,x,n,null)}Mu(e,l,r,o);return;case"option":for(S in n)n.hasOwnProperty(S)&&(l=n[S],l!=null)&&(S==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Be(e,t,S,l,n,null));return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<Si.length;l++)Se(Si[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in n)if(n.hasOwnProperty(R)&&(l=n[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Be(e,t,R,l,n,null)}return;default:if(Tr(t)){for(q in n)n.hasOwnProperty(q)&&(l=n[q],l!==void 0&&go(e,t,q,l,n,void 0));return}}for(x in n)n.hasOwnProperty(x)&&(l=n[x],l!=null&&Be(e,t,x,l,n,null))}function Bg(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,f=null,x=null,S=null,R=null,q=null;for(z in n){var Q=n[z];if(n.hasOwnProperty(z)&&Q!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":S=Q;default:l.hasOwnProperty(z)||Be(e,t,z,null,l,Q)}}for(var I in l){var z=l[I];if(Q=n[I],l.hasOwnProperty(I)&&(z!=null||Q!=null))switch(I){case"type":o=z;break;case"name":r=z;break;case"checked":R=z;break;case"defaultChecked":q=z;break;case"value":f=z;break;case"defaultValue":x=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(u(137,t));break;default:z!==Q&&Be(e,t,I,z,l,Q)}}Cr(e,f,x,S,R,q,o,r);return;case"select":z=f=x=I=null;for(o in n)if(S=n[o],n.hasOwnProperty(o)&&S!=null)switch(o){case"value":break;case"multiple":z=S;default:l.hasOwnProperty(o)||Be(e,t,o,null,l,S)}for(r in l)if(o=l[r],S=n[r],l.hasOwnProperty(r)&&(o!=null||S!=null))switch(r){case"value":I=o;break;case"defaultValue":x=o;break;case"multiple":f=o;default:o!==S&&Be(e,t,r,o,l,S)}t=x,n=f,l=z,I!=null?Wa(e,!!n,I,!1):!!l!=!!n&&(t!=null?Wa(e,!!n,t,!0):Wa(e,!!n,n?[]:"",!1));return;case"textarea":z=I=null;for(x in n)if(r=n[x],n.hasOwnProperty(x)&&r!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Be(e,t,x,null,l,r)}for(f in l)if(r=l[f],o=n[f],l.hasOwnProperty(f)&&(r!=null||o!=null))switch(f){case"value":I=r;break;case"defaultValue":z=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(u(91));break;default:r!==o&&Be(e,t,f,r,l,o)}Nu(e,I,z);return;case"option":for(var J in n)I=n[J],n.hasOwnProperty(J)&&I!=null&&!l.hasOwnProperty(J)&&(J==="selected"?e.selected=!1:Be(e,t,J,null,l,I));for(S in l)I=l[S],z=n[S],l.hasOwnProperty(S)&&I!==z&&(I!=null||z!=null)&&(S==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":Be(e,t,S,I,l,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in n)I=n[re],n.hasOwnProperty(re)&&I!=null&&!l.hasOwnProperty(re)&&Be(e,t,re,null,l,I);for(R in l)if(I=l[R],z=n[R],l.hasOwnProperty(R)&&I!==z&&(I!=null||z!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(u(137,t));break;default:Be(e,t,R,I,l,z)}return;default:if(Tr(t)){for(var qe in n)I=n[qe],n.hasOwnProperty(qe)&&I!==void 0&&!l.hasOwnProperty(qe)&&go(e,t,qe,void 0,l,I);for(q in l)I=l[q],z=n[q],!l.hasOwnProperty(q)||I===z||I===void 0&&z===void 0||go(e,t,q,I,l,z);return}}for(var C in n)I=n[C],n.hasOwnProperty(C)&&I!=null&&!l.hasOwnProperty(C)&&Be(e,t,C,null,l,I);for(Q in l)I=l[Q],z=n[Q],!l.hasOwnProperty(Q)||I===z||I==null&&z==null||Be(e,t,Q,I,l,z)}function Rm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var r=n[l],o=r.transferSize,f=r.initiatorType,x=r.duration;if(o&&x&&Rm(f)){for(f=0,x=r.responseEnd,l+=1;l<n.length;l++){var S=n[l],R=S.startTime;if(R>x)break;var q=S.transferSize,Q=S.initiatorType;q&&Rm(Q)&&(S=S.responseEnd,f+=q*(S<x?1:(x-R)/(S-R)))}if(--l,t+=8*(o+f)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vo=null,xo=null;function Zs(e){return e.nodeType===9?e:e.ownerDocument}function _m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Im(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jo=null;function kg(){var e=window.event;return e&&e.type==="popstate"?e===jo?!1:(jo=e,!0):(jo=null,!1)}var Om=typeof setTimeout=="function"?setTimeout:void 0,Hg=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,Qg=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(e){return zm.resolve(null).then(e).catch(Vg)}:Om;function Vg(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function Um(e,t){var n=t,l=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(r),Rl(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Di(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Di(n);for(var o=n.firstChild;o;){var f=o.nextSibling,x=o.nodeName;o[Vl]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=f}}else n==="body"&&Di(e.ownerDocument.body);n=r}while(n);Rl(t)}function Lm(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function wo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":wo(n),Nr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Yg(e,t,n,l){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Vl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function Pg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=an(e.nextSibling),e===null))return null;return e}function Bm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=an(e.nextSibling),e===null))return null;return e}function So(e){return e.data==="$?"||e.data==="$~"}function Ao(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Kg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Do=null;function qm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return an(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Hm(e,t,n){switch(t=Zs(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Di(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Nr(e)}var ln=new Map,Qm=new Set;function Xs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hn=Y.d;Y.d={f:Fg,r:Gg,D:Zg,C:Xg,L:Jg,m:$g,X:ev,S:Wg,M:tv};function Fg(){var e=Hn.f(),t=Hs();return e||t}function Gg(e){var t=Xa(e);t!==null&&t.tag===5&&t.type==="form"?lf(t):Hn.r(e)}var Cl=typeof document>"u"?null:document;function Vm(e,t,n){var l=Cl;if(l&&typeof t=="string"&&t){var r=Xt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Qm.has(r)||(Qm.add(r),e={rel:e,crossOrigin:n,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),wt(t,"link",e),mt(t),l.head.appendChild(t)))}}function Zg(e){Hn.D(e),Vm("dns-prefetch",e,null)}function Xg(e,t){Hn.C(e,t),Vm("preconnect",e,t)}function Jg(e,t,n){Hn.L(e,t,n);var l=Cl;if(l&&e&&t){var r='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Xt(n.imageSizes)+'"]')):r+='[href="'+Xt(e)+'"]';var o=r;switch(t){case"style":o=El(e);break;case"script":o=Tl(e)}ln.has(o)||(e=v({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ln.set(o,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(Ni(o))||t==="script"&&l.querySelector(Mi(o))||(t=l.createElement("link"),wt(t,"link",e),mt(t),l.head.appendChild(t)))}}function $g(e,t){Hn.m(e,t);var n=Cl;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Xt(l)+'"][href="'+Xt(e)+'"]',o=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Tl(e)}if(!ln.has(o)&&(e=v({rel:"modulepreload",href:e},t),ln.set(o,e),n.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mi(o)))return}l=n.createElement("link"),wt(l,"link",e),mt(l),n.head.appendChild(l)}}}function Wg(e,t,n){Hn.S(e,t,n);var l=Cl;if(l&&e){var r=Ja(l).hoistableStyles,o=El(e);t=t||"default";var f=r.get(o);if(!f){var x={loading:0,preload:null};if(f=l.querySelector(Ni(o)))x.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ln.get(o))&&No(e,n);var S=f=l.createElement("link");mt(S),wt(S,"link",e),S._p=new Promise(function(R,q){S.onload=R,S.onerror=q}),S.addEventListener("load",function(){x.loading|=1}),S.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Js(f,t,l)}f={type:"stylesheet",instance:f,count:1,state:x},r.set(o,f)}}}function ev(e,t){Hn.X(e,t);var n=Cl;if(n&&e){var l=Ja(n).hoistableScripts,r=Tl(e),o=l.get(r);o||(o=n.querySelector(Mi(r)),o||(e=v({src:e,async:!0},t),(t=ln.get(r))&&Mo(e,t),o=n.createElement("script"),mt(o),wt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(r,o))}}function tv(e,t){Hn.M(e,t);var n=Cl;if(n&&e){var l=Ja(n).hoistableScripts,r=Tl(e),o=l.get(r);o||(o=n.querySelector(Mi(r)),o||(e=v({src:e,async:!0,type:"module"},t),(t=ln.get(r))&&Mo(e,t),o=n.createElement("script"),mt(o),wt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(r,o))}}function Ym(e,t,n,l){var r=(r=Mt.current)?Xs(r):null;if(!r)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=El(n.href),n=Ja(r).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=El(n.href);var o=Ja(r).hoistableStyles,f=o.get(e);if(f||(r=r.ownerDocument||r,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=r.querySelector(Ni(e)))&&!o._p&&(f.instance=o,f.state.loading=5),ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ln.set(e,n),o||nv(r,e,n,f.state))),t&&l===null)throw Error(u(528,""));return f}if(t&&l!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Tl(n),n=Ja(r).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function El(e){return'href="'+Xt(e)+'"'}function Ni(e){return'link[rel="stylesheet"]['+e+"]"}function Pm(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function nv(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),wt(t,"link",n),mt(t),e.head.appendChild(t))}function Tl(e){return'[src="'+Xt(e)+'"]'}function Mi(e){return"script[async]"+e}function Km(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(l)return t.instance=l,mt(l),l;var r=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),mt(l),wt(l,"style",r),Js(l,n.precedence,e),t.instance=l;case"stylesheet":r=El(n.href);var o=e.querySelector(Ni(r));if(o)return t.state.loading|=4,t.instance=o,mt(o),o;l=Pm(n),(r=ln.get(r))&&No(l,r),o=(e.ownerDocument||e).createElement("link"),mt(o);var f=o;return f._p=new Promise(function(x,S){f.onload=x,f.onerror=S}),wt(o,"link",l),t.state.loading|=4,Js(o,n.precedence,e),t.instance=o;case"script":return o=Tl(n.src),(r=e.querySelector(Mi(o)))?(t.instance=r,mt(r),r):(l=n,(r=ln.get(o))&&(l=v({},n),Mo(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),mt(r),wt(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Js(l,n.precedence,e));return t.instance}function Js(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,o=r,f=0;f<l.length;f++){var x=l[f];if(x.dataset.precedence===t)o=x;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function No(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $s=null;function Fm(e,t,n){if($s===null){var l=new Map,r=$s=new Map;r.set(n,l)}else r=$s,l=r.get(n),l||(l=new Map,r.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[Vl]||o[vt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var x=l.get(f);x?x.push(o):l.set(f,[o])}}return l}function Gm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function av(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function lv(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=El(l.href),o=t.querySelector(Ni(r));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ws.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,mt(o);return}o=t.ownerDocument||t,l=Pm(l),(r=ln.get(r))&&No(l,r),o=o.createElement("link"),mt(o);var f=o;f._p=new Promise(function(x,S){f.onload=x,f.onerror=S}),wt(o,"link",l),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ws.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Co=0;function iv(e,t){return e.stylesheets&&e.count===0&&tr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Co===0&&(Co=62500*qg());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tr(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Co?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Ws(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var er=null;function tr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,er=new Map,t.forEach(sv,e),er=null,Ws.call(e))}function sv(e,t){if(!(t.state.loading&4)){var n=er.get(e);if(n)var l=n.get(null);else{n=new Map,er.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var f=r[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),l=f)}l&&n.set(null,l)}r=t.instance,f=r.getAttribute("data-precedence"),o=n.get(f)||l,o===l&&n.set(null,r),n.set(f,r),this.count++,l=Ws.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),o?o.parentNode.insertBefore(r,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ci={$$typeof:M,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function rv(e,t,n,l,r,o,f,x,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Xm(e,t,n,l,r,o,f,x,S,R,q,Q){return e=new rv(e,t,n,f,S,R,q,Q,x),t=1,o===!0&&(t|=24),o=Qt(3,null,null,t),e.current=o,o.stateNode=e,t=sc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:n,cache:t},uc(o),e}function Jm(e){return e?(e=rl,e):rl}function $m(e,t,n,l,r,o){r=Jm(r),l.context===null?l.context=r:l.pendingContext=r,l=na(t),l.payload={element:n},o=o===void 0?null:o,o!==null&&(l.callback=o),n=aa(e,l,t),n!==null&&(zt(n,e,t),si(n,e,t))}function Wm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eo(e,t){Wm(e,t),(e=e.alternate)&&Wm(e,t)}function ep(e){if(e.tag===13||e.tag===31){var t=Da(e,67108864);t!==null&&zt(t,e,67108864),Eo(e,67108864)}}function tp(e){if(e.tag===13||e.tag===31){var t=Ft();t=Sr(t);var n=Da(e,t);n!==null&&zt(n,e,t),Eo(e,t)}}var nr=!0;function cv(e,t,n,l){var r=B.T;B.T=null;var o=Y.p;try{Y.p=2,To(e,t,n,l)}finally{Y.p=o,B.T=r}}function ov(e,t,n,l){var r=B.T;B.T=null;var o=Y.p;try{Y.p=8,To(e,t,n,l)}finally{Y.p=o,B.T=r}}function To(e,t,n,l){if(nr){var r=Ro(l);if(r===null)yo(e,t,l,ar,n),ap(e,l);else if(dv(r,e,t,n,l))l.stopPropagation();else if(ap(e,l),t&4&&-1<uv.indexOf(e)){for(;r!==null;){var o=Xa(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=ba(o.pendingLanes);if(f!==0){var x=o;for(x.pendingLanes|=2,x.entangledLanes|=2;f;){var S=1<<31-kt(f);x.entanglements[1]|=S,f&=~S}wn(o),(Te&6)===0&&(qs=Bt()+500,wi(0))}}break;case 31:case 13:x=Da(o,2),x!==null&&zt(x,o,2),Hs(),Eo(o,2)}if(o=Ro(l),o===null&&yo(e,t,l,ar,n),o===r)break;r=o}r!==null&&l.stopPropagation()}else yo(e,t,l,null,n)}}function Ro(e){return e=_r(e),_o(e)}var ar=null;function _o(e){if(ar=null,e=Za(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=b(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ar=e,null}function np(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zh()){case ou:return 2;case uu:return 8;case Ki:case Xh:return 32;case du:return 268435456;default:return 32}default:return 32}}var Io=!1,pa=null,ha=null,ya=null,Ei=new Map,Ti=new Map,ga=[],uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ap(e,t){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(t.pointerId)}}function Ri(e,t,n,l,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Xa(t),t!==null&&ep(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function dv(e,t,n,l,r){switch(t){case"focusin":return pa=Ri(pa,e,t,n,l,r),!0;case"dragenter":return ha=Ri(ha,e,t,n,l,r),!0;case"mouseover":return ya=Ri(ya,e,t,n,l,r),!0;case"pointerover":var o=r.pointerId;return Ei.set(o,Ri(Ei.get(o)||null,e,t,n,l,r)),!0;case"gotpointercapture":return o=r.pointerId,Ti.set(o,Ri(Ti.get(o)||null,e,t,n,l,r)),!0}return!1}function lp(e){var t=Za(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=b(n),t!==null){e.blockedOn=t,gu(e.priority,function(){tp(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,gu(e.priority,function(){tp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ro(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Rr=l,n.target.dispatchEvent(l),Rr=null}else return t=Xa(n),t!==null&&ep(t),e.blockedOn=n,!1;t.shift()}return!0}function ip(e,t,n){lr(e)&&n.delete(t)}function fv(){Io=!1,pa!==null&&lr(pa)&&(pa=null),ha!==null&&lr(ha)&&(ha=null),ya!==null&&lr(ya)&&(ya=null),Ei.forEach(ip),Ti.forEach(ip)}function ir(e,t){e.blockedOn===t&&(e.blockedOn=null,Io||(Io=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,fv)))}var sr=null;function sp(e){sr!==e&&(sr=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){sr===e&&(sr=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(_o(l||n)===null)continue;break}var o=Xa(n);o!==null&&(e.splice(t,3),t-=3,Tc(o,{pending:!0,data:r,method:n.method,action:l},l,r))}}))}function Rl(e){function t(S){return ir(S,e)}pa!==null&&ir(pa,e),ha!==null&&ir(ha,e),ya!==null&&ir(ya,e),Ei.forEach(t),Ti.forEach(t);for(var n=0;n<ga.length;n++){var l=ga[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)lp(n),n.blockedOn===null&&ga.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var r=n[l],o=n[l+1],f=r[Et]||null;if(typeof o=="function")f||sp(n);else if(f){var x=null;if(o&&o.hasAttribute("formAction")){if(r=o,f=o[Et]||null)x=f.formAction;else if(_o(r)!==null)continue}else x=f.action;typeof x=="function"?n[l+1]=x:(n.splice(l,3),l-=3),sp(n)}}}function rp(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(f){return r=f})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Oo(e){this._internalRoot=e}rr.prototype.render=Oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,l=Ft();$m(n,l,e,t,null,null)},rr.prototype.unmount=Oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$m(e.current,2,null,e,null,null),Hs(),t[Ga]=null}};function rr(e){this._internalRoot=e}rr.prototype.unstable_scheduleHydration=function(e){if(e){var t=yu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ga.length&&t!==0&&t<ga[n].priority;n++);ga.splice(n,0,e),n===0&&lp(e)}};var cp=i.version;if(cp!=="19.2.3")throw Error(u(527,cp,"19.2.3"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var mv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cr.isDisabled&&cr.supportsFiber)try{kl=cr.inject(mv),qt=cr}catch{}}return Ii.createRoot=function(e,t){if(!d(e))throw Error(u(299));var n=!1,l="",r=hf,o=yf,f=gf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Xm(e,1,!1,null,null,n,l,null,r,o,f,rp),e[Ga]=t.current,ho(e),new Oo(t)},Ii.hydrateRoot=function(e,t,n){if(!d(e))throw Error(u(299));var l=!1,r="",o=hf,f=yf,x=gf,S=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),t=Xm(e,1,!0,t,n??null,l,r,S,o,f,x,rp),t.context=Jm(null),n=t.current,l=Ft(),l=Sr(l),r=na(l),r.callback=null,aa(n,r,l),n=l,t.current.lanes=n,Ql(t,n),wn(t),e[Ga]=t.current,ho(e),new rr(t)},Ii.version="19.2.3",Ii}var pp;function _v(){if(pp)return Uo.exports;pp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(i){console.error(i)}}return a(),Uo.exports=Rv(),Uo.exports}var Iv=_v();const Ov="modulepreload",zv=function(a,i){return new URL(a,i).href},hp={},_e=function(i,c,u){let d=Promise.resolve();if(c&&c.length>0){let m=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};const b=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");d=m(c.map(y=>{if(y=zv(y,u),y in hp)return;hp[y]=!0;const v=y.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(u)for(let A=b.length-1;A>=0;A--){const E=b[A];if(E.href===y&&(!v||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${j}`))return;const D=document.createElement("link");if(D.rel=v?"stylesheet":Ov,v||(D.as="script"),D.crossOrigin="",D.href=y,p&&D.setAttribute("nonce",p),document.head.appendChild(D),v)return new Promise((A,E)=>{D.addEventListener("load",A),D.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function h(b){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=b,window.dispatchEvent(g),!g.defaultPrevented)throw b}return d.then(b=>{for(const g of b||[])g.status==="rejected"&&h(g.reason);return i().catch(h)})};function Pe(a,i,c="en-US"){const u=a/100;return new Intl.NumberFormat(c,{style:"currency",currency:i,minimumFractionDigits:0,maximumFractionDigits:2}).format(u)}function zl(a){const i=parseFloat(a.replace(/[^0-9.-]/g,""));return isNaN(i)?0:Math.round(i*100)}function Yp(a,i="en-US"){return new Date(a).toLocaleDateString(i,{month:"short",day:"numeric",year:"numeric"})}function Yj(a){const i=new Date(a),c=String(i.getDate()).padStart(2,"0"),u=String(i.getMonth()+1).padStart(2,"0"),d=i.getFullYear();return`${c}/${u}/${d}`}function Uv(a,i){const c=new Date(a),d=new Date().getTime()-c.getTime(),h=Math.floor(d/(1e3*60*60*24));return i?h===0?i("time.today"):h===1?i("time.yesterday"):h<7?i("time.daysAgo",{days:h}):h<30?i("time.weeksAgo",{weeks:Math.floor(h/7)}):h<365?i("time.monthsAgo",{months:Math.floor(h/30)}):i("time.yearsAgo",{years:Math.floor(h/365)}):h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:h<30?`${Math.floor(h/7)} weeks ago`:h<365?`${Math.floor(h/30)} months ago`:`${Math.floor(h/365)} years ago`}function Lv(a){const i=new Date(a),c=new Date;c.setHours(0,0,0,0),i.setHours(0,0,0,0);const u=i.getTime()-c.getTime();return Math.ceil(u/(1e3*60*60*24))}function Yo(a){const i=new Date;switch(a){case"this-month":{const c=new Date(i.getFullYear(),i.getMonth(),1),u=new Date(i.getFullYear(),i.getMonth()+1,0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"last-month":{const c=new Date(i.getFullYear(),i.getMonth()-1,1),u=new Date(i.getFullYear(),i.getMonth(),0);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}case"this-year":{const c=new Date(i.getFullYear(),0,1),u=new Date(i.getFullYear(),11,31);return{dateFrom:c.toISOString().split("T")[0],dateTo:u.toISOString().split("T")[0]}}default:return{dateFrom:"2000-01-01",dateTo:"2100-12-31"}}}function se(...a){return a.filter(Boolean).join(" ")}function Qn(){return new Date().toISOString().split("T")[0]}const Bv={save:"Save",saving:"Saving...",cancel:"Cancel",delete:"Delete",archive:"Archive",add:"Add",edit:"Edit",loading:"Loading...",search:"Search...",close:"Close",confirm:"Confirm",noClient:"No client",noProject:"No project",all:"All",markPaid:"Mark Paid",duplicate:"Duplicate",undo:"Undo",previous:"Previous",next:"Next",uncategorized:"Uncategorized",noResults:"No results found"},qv={transactionDuplicated:"Transaction created",transactionUndone:"Transaction undone"},kv={overview:"Overview",projects:"Projects",clients:"Clients",transactions:"Transactions",documents:"Documents",retainers:"Retainers",moneyAnswers:"Answers",expenses:"Expenses",reports:"Reports",settings:"Settings",download:"Download",new:"New",collapse:"Collapse sidebar",expand:"Expand sidebar",sections:{work:"Work",money:"Money",system:"System"},newMenu:{document:"New Document",transaction:"New Transaction",client:"New Client",expense:"New Expense"}},Hv={income:"Income",expense:"Expense",project:"Project",client:"Client",document:"Document"},Qv={title:"Transactions",empty:"No transactions found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first transaction to get started",addTransaction:"Add Transaction",searchPlaceholder:"Search transactions...",confirmDelete:"Are you sure you want to delete this transaction?",type:{income:"Income",expense:"Expense",receivable:"Receivable"},status:{paid:"Paid",unpaid:"Unpaid",overdue:"{days}d overdue",dueIn:"Due in {days}d",dueToday:"Due today"},columns:{date:"Date",type:"Type",client:"Client",project:"Project",category:"Category",amount:"Amount",status:"Status"},hasDocument:"Has linked document"},Vv={title:"Overview",kpi:{paidIncome:"Paid Income",unpaidReceivables:"Unpaid Receivables",expenses:"Expenses",net:"Net (Paid - Expenses)"},needsAttention:"Needs Attention",noAttention:"No overdue or upcoming receivables",recentActivity:"Recent Activity",noRecent:"No recent transactions"},Yv={title:"Projects",empty:"No projects found",emptySearch:"Try adjusting your search",emptyHint:"Create your first project to get started",addProject:"Add Project",searchPlaceholder:"Search projects...",allFields:"All fields",notFound:"Project not found",notFoundHint:"This project may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this project?",columns:{project:"Project",client:"Client",field:"Field",paid:"Paid",unpaid:"Unpaid",expenses:"Expenses",net:"Net",lastActivity:"Last Activity"},tabs:{summary:"Summary",transactions:"Transactions"},detail:{projectDetails:"Project Details",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this project."},fields:{design:"Design",development:"Development",consulting:"Consulting",marketing:"Marketing",legal:"Legal",maintenance:"Maintenance",other:"Other"}},Pv={title:"Clients",empty:"No clients found",emptySearch:"Try adjusting your search",emptyHint:"Add your first client to get started",addClient:"Add Client",searchPlaceholder:"Search clients...",notFound:"Client not found",notFoundHint:"This client may have been deleted or doesn't exist.",confirmArchive:"Are you sure you want to archive this client?",columns:{client:"Client",activeProjects:"Active Projects",paidIncome:"Paid Income",unpaid:"Unpaid",lastPayment:"Last Payment",lastActivity:"Last Activity"},tabs:{summary:"Summary",projects:"Projects",receivables:"Receivables",transactions:"Transactions"},detail:{clientDetails:"Client Details",email:"Email",phone:"Phone",noProjects:"No projects",noProjectsHint:"Add your first project for this client.",noReceivables:"No receivables",noReceivablesHint:"All payments have been received.",noTransactions:"No transactions",noTransactionsHint:"Add your first transaction for this client."},receivables:{dueDate:"Due Date",daysOverdue:"Days Overdue",action:"Action"}},Kv={title:"Reports",exportCsv:"Export CSV",presets:{summary:"Summary",thisMonth:"This Month",thisYear:"This Year",byProject:"By Project",byClient:"By Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Aging"},period:{month:"Month",quarter:"Quarter",year:"Year",custom:"Custom"},currencyMode:{usd:"USD",ils:"ILS",both:"Both"},drillDown:{paidIncome:"View paid income transactions",unpaidIncome:"View unpaid receivables",expenses:"View expenses"},search:{project:"Search projects...",client:"Search clients..."},selectCurrencyForAmounts:"Select a specific currency to see amounts",sections:{financialSummary:"Financial Summary",incomeByProject:"Income by Project",incomeByClient:"Income by Client",expensesByProject:"Expenses by Project",unpaidAging:"Unpaid Receivables Aging"},aging:{current:"Current (not due)",days1to30:"1-30 days overdue",days31to60:"31-60 days overdue",days60plus:"60+ days overdue"},noExpenses:"No expenses in this period"},Fv={title:"Download",recommendedForYou:"Recommended for you",loading:"Loading...",comingSoon:"Coming Soon",version:"Version",size:"Size",requires:"Requires",sha256:"SHA-256",copy:"Copy",checksumCopied:"Checksum copied",howToInstall:"How to install",releaseNotes:"Release notes",allVersions:"All versions",mac:{title:"macOS",downloadDmg:"Download DMG",step1:"Download the DMG",step2:'Drag "" to Applications',step3:"Open and approve if prompted"},windows:{title:"Windows",downloadMsi:"Download MSI",step1:"Download the MSI installer",step2:"Run the installer",step3:"Follow the installation wizard",altExe:"Alternative: Download EXE installer"}},Gv={title:"Settings",language:{title:"Language",description:"Choose your preferred language"},theme:{title:"Theme",description:"Choose your preferred appearance",light:"Light",dark:"Dark",system:"System"},currency:{title:"Currency",enabled:"Enabled Currencies",enabledDesc:"Select which currencies to track",default:"Default Currency",defaultDesc:"Default selection in filters"},data:{title:"Data Management",export:"Export Data",exportDesc:"Download a backup of all your data",exportBtn:"Export JSON",exporting:"Exporting...",exported:"Exported successfully!",exportFailed:"Export failed",import:"Import Data",importDesc:"Restore from a backup file (replaces all data)",importBtn:"Import JSON",importing:"Importing...",imported:"Imported successfully! Refreshing...",importFailed:"Import failed: {error}",invalidFile:"Invalid backup file format",deleteAll:"Delete All Data",deleteAllDesc:"Permanently delete all local data",deleteAllBtn:"Delete All Data",reset:"Reset Data",resetDesc:"Reset to sample data for testing",resetBtn:"Reset Data",resetConfirm:"Are you sure you want to reset all data? This will replace your data with sample data.",deleteModal:{title:"Delete All Data",warning:"This will permanently delete all your local data including clients, projects, and transactions. This action cannot be undone.",stepA:{title:"Step 1: Export Backup",desc:"You must export a backup of your data before deletion.",btn:"Export Backup (CSV)",exporting:"Exporting...",done:"Backup exported!",error:"Export failed"},stepB:{title:"Step 2: Confirm Deletion",checkbox:"I have saved my backup files",btn:"Delete Permanently",deleting:"Deleting...",error:"Deletion failed"},success:"All data deleted successfully"}},about:{title:"About",name:"Mutaba3a - Mini CRM",description:"A local-first financial tracking tool for freelancers and small businesses. Your data is stored locally in your browser using IndexedDB."},updates:{title:"Updates",checking:"Checking for updates...",upToDate:"You're up to date",currentVersion:"Current version",latestVersion:"Latest version",updateAvailable:"A new version is available",updateNow:"Update Now",checkFailed:"Unable to check for updates"},desktopApp:{title:"Desktop App",download:"Download Desktop App",downloadDesc:"Get the native app for better performance",downloadBtn:"Download",downloadMac:"Download for macOS",downloadWindows:"Download for Windows"}},Zv={message:"Get the native Mac app for a better experience",cta:"Download",dismiss:"Dismiss"},Xv={available:"Version {{version}} is available",downloading:"Downloading update... {{progress}}%",ready:"Update ready",restart:"Restart to Update",download:"Download",dismiss:"Later",error:"Update failed"},Jv={title:"Expenses",profileExpenses:"{name} Expenses",addExpense:"Add Expense",addRecurring:"Add Recurring",empty:"No expenses found",emptyHint:"Add your first expense to get started",emptyProfiles:"No business profiles",emptyProfilesHint:"Create a business profile to track expenses",emptyExpenses:"No expenses",emptyExpensesSearch:"Try adjusting your search or filters",emptyExpensesHint:"Add your first expense to get started",searchPlaceholder:"Search expenses...",confirmDelete:"Are you sure you want to delete this expense?",confirmDeleteRule:"Are you sure you want to delete this recurring rule?",year:"Year",month:"Month",allMonths:"All Months",allCategories:"All Categories",totalExpenses:"Total Expenses",totalUSD:"Total (USD)",totalILS:"Total (ILS)",viewReceipts:"View Receipts",manageReceipts:"Manage Receipts",allProfilesOverview:"All Profiles Overview",recurringRules:"Recurring Rules",fromRecurring:"From recurring rule",monthly:"monthly",yearly:"yearly",pause:"Pause",resume:"Resume",paused:"Paused",profileNotFound:"Profile not found",profileNotFoundHint:"This profile may have been deleted or doesn't exist",untitled:"Untitled",unknownProfile:"Unknown Profile",overview:{title:"Expenses Overview",allProfiles:"All Profiles",profileBreakdown:"Expense by Profile",totalExpenses:"Total Expenses",monthlyBreakdown:"Monthly Breakdown",byProfile:"By Profile",noProfiles:"No business profiles found",profile:"Profile",total:"Total",percentage:"Share"},forecast:{title:"Expense Forecast",minimumNeeded:"Minimum Needed",untilEndOfYear:"Until end of {year}",monthsRemaining:"Months Remaining",yearTotal:"Year Total",activeRules:"Active Rules",monthlyForecast:"Monthly Forecast",month:"Month",projected:"Projected",actual:"Actual",delta:"Delta",current:"Current",total:"Total",byProfile:"By Profile",empty:"No forecast data",emptyHint:"Add recurring expenses to see forecast",activeRecurringRules:"Active Recurring Rules"},receipts:{title:"Receipts",upload:"Upload Receipt",uploading:"Uploading...",total:"Total",linked:"Linked",unlinked:"Unlinked",allTab:"All",inboxTab:"Inbox",suggestionsTab:"Suggestions",linkToExpense:"Link to Expense",link:"Link",unlink:"Unlink",unlinkFromExpense:"Unlink",exportZip:"Export ZIP",exporting:"Exporting...",download:"Download",empty:"No receipts",emptyHint:"Upload your first receipt",noReceipts:"No receipts",noReceiptsHint:"Upload your first receipt",fileTooLarge:"File too large (max {maxSize})",invalidFileType:"Invalid file type. Please upload an image or PDF",uploadFailed:"Failed to upload receipt",selectExpense:"Select Expense to Link",noExpensesToLink:"No expenses to link. Create an expense first.",confirmUnlink:"Are you sure you want to unlink this receipt?",confirmDelete:"Are you sure you want to delete this receipt?"},recurring:{title:"Recurring Expenses",addRule:"Add Recurring",frequency:"Frequency",monthly:"Monthly",yearly:"Yearly",startDate:"Start Date",endMode:"End Mode",endOfYear:"End of Year",untilDate:"Until Date",noEnd:"No End",endDate:"End Date",pause:"Pause",resume:"Resume",paused:"Paused",active:"Active"},columns:{date:"Date",title:"Title",vendor:"Vendor",category:"Category",amount:"Amount",receipts:"Receipts"},categories:{title:"Categories",addCategory:"Add Category",name:"Name",color:"Color",setup:"Set Up Categories",setupTitle:"Set Up Expense Categories",selectPreset:"Choose a category preset that best matches your business type:",seedCategories:"Create Categories",presets:{general:"General Business",startup:"Tech Startup",lawFirm:"Law Firm",freelancer:"Freelancer"},presetDescriptions:{general:"Office rent, utilities, software, marketing, travel, and more",startup:"Cloud infrastructure, SaaS, AI services, development tools, coworking",lawFirm:"Legal research, bar fees, court filing, expert witnesses, case management",freelancer:"Software tools, cloud storage, marketing, professional development"}}},$v={transaction:{new:"New Transaction",edit:"Edit Transaction",typeIncome:"Income",typeIncomeDesc:"Paid",typeReceivable:"Receivable",typeReceivableDesc:"Unpaid",typeExpense:"Expense",typeExpenseDesc:"Cost",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",dueDate:"Due Date",client:"Client",clientPlaceholder:"Select client...",project:"Project",projectPlaceholder:"Select project...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes..."},client:{new:"New Client",edit:"Edit Client",name:"Name",namePlaceholder:"Client name...",email:"Email",emailPlaceholder:"client@example.com",phone:"Phone",phonePlaceholder:"+1-555-0100",notes:"Notes",notesPlaceholder:"Additional notes about this client..."},project:{new:"New Project",edit:"Edit Project",name:"Name",namePlaceholder:"Project name...",client:"Client",clientPlaceholder:"Select client...",field:"Field",fieldPlaceholder:"Select field...",notes:"Notes",notesPlaceholder:"Additional notes about this project..."},expense:{new:"New Expense",edit:"Edit Expense",newRecurring:"New Recurring Expense",editRecurring:"Edit Recurring Expense",typeOneTime:"One-time",typeOneTimeDesc:"Single expense",typeRecurring:"Recurring",typeRecurringDesc:"Repeats monthly/yearly",profile:"Profile",profilePlaceholder:"Select profile...",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",date:"Date",vendor:"Vendor",vendorPlaceholder:"Business or vendor name...",category:"Category",categoryPlaceholder:"Select category...",title:"Title",titlePlaceholder:"Brief description...",notes:"Notes",notesPlaceholder:"Additional notes...",frequency:"Frequency",startDate:"Start Date",endMode:"End Mode",endDate:"End Date",receipts:"Receipts",addReceipt:"Add Receipt",linkReceipt:"Link from Inbox"},retainer:{new:"New Retainer",edit:"Edit Retainer",client:"Client",clientPlaceholder:"Select client...",title:"Title",titlePlaceholder:"e.g. Monthly retainer",amount:"Amount",amountPlaceholder:"0.00",currency:"Currency",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date (optional)",project:"Project (optional)",projectPlaceholder:"Select project...",status:"Status",notes:"Notes",notesPlaceholder:"Additional notes...",schedulePreview:"Schedule Preview",enterDetailsForPreview:"Enter amount and start date to see schedule",andMore:"and more..."}},Wv={thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",allTime:"All Time",custom:"Custom",all:"All",type:{all:"All",income:"Income",receivable:"Receivable",expense:"Expense"},status:{all:"All",paid:"Paid",unpaid:"Unpaid",overdue:"Overdue"}},e0={required:"This field is required",amountRequired:"Amount is required",dateRequired:"Date is required",nameRequired:"Name is required"},t0={today:"Today",yesterday:"Yesterday",daysAgo:"{days} days ago",weeksAgo:"{weeks} weeks ago",monthsAgo:"{months} months ago",yearsAgo:"{years} years ago",daysOverdue:"{days} days overdue",dueInDays:"Due in {days} days"},n0={live:"Live",cached:"Cached",none:"Unavailable",bannerTitle:"Exchange Rate",showBanner:"Show exchange rate",refresh:"Refresh rate",minimize:"Minimize",drag:"Drag to move"},a0={title:"Welcome to Mutaba3a",subtitle:"Let's set up your business profile",infoTitle:"What is a Business Profile?",bullet1:"Your company name, logo, and branding",bullet2:"Contact information for invoices",bullet3:"Tax ID and registration details",multipleProfiles:"You can create multiple profiles if you manage different businesses.",setUpNow:"Set Up Now",skipForNow:"Skip for now",skipNote:"Skip creates a default profile you can customize later in Settings."},l0={noProfile:"No Profile",setUpBusiness:"Set up business",addProfile:"Add Business Profile",manageProfiles:"Manage Profiles",switchTo:"Switch to {name}",current:"Current"},i0={title:"Business Profile Required",description:"To create invoices and documents, you need to set up a business profile first.",createProfile:"Create Business Profile"},s0={createNew:"Create new"},r0={suggestions:{title:"Match suggestions",link:"Link",noMatches:"No matching expenses found",createAndLink:"Create Expense & Link",highConfidence:"High confidence matches",mediumConfidence:"Likely matches",lowConfidence:"Possible matches",allLinked:"All receipts linked",allLinkedHint:"Great job! All your receipts have been linked to expenses."}},c0={title:"Bulk Upload Receipts",button:"Bulk Upload",dropzoneTitle:"Drop files here or click to browse",dropzoneHint:"Up to {maxFiles} files, max {maxSize} each",autoDetectMonth:"Auto-detect month from file date",batchMonth:"Batch month override",selectMonth:"Select month...",total:"Total",success:"Uploaded",duplicates:"Skipped (duplicates)",errors:"Failed",upload:"Upload",uploading:"Uploading",retryFailed:"Retry failed",statusPending:"Pending",duplicate:"Duplicate file"},o0={title:"Monthly Close",checklist:"Close Checklist",monthClosed:"Month Closed",closedAt:"Closed on {date}",readyToClose:"Ready to Close",notReady:"Not Ready to Close",allTasksComplete:"All required tasks have been completed.",completeTasks:"Complete the checklist items below before closing.",receiptsLinked:"All receipts linked to expenses",allLinked:"All receipts linked",unlinkedCount:"{count} unlinked receipts",viewReceipts:"View Receipts",allCategorized:"All expenses categorized",allCategorizedStatus:"All expenses have categories",uncategorizedCount:"{count} uncategorized expenses",viewExpenses:"View Expenses",recurringConfirmed:"Recurring expenses confirmed",recurringConfirmedHint:"Verify all recurring expenses are correct for this month",zipExported:"Receipts exported (optional)",zipExportedHint:"Export a ZIP backup of all receipts",exportZip:"Export ZIP",closeMonth:"Close Month",notesLabel:"Notes (optional)",notesPlaceholder:"Add any notes about this month's close...",closeMonthButton:"Close Month",completeChecklistFirst:"Complete all required checklist items before closing the month.",confirmClose:"Are you sure you want to close this month? This will mark it as finalized.",confirmReopen:"Are you sure you want to reopen this month? This will allow editing again.",reopen:"Reopen Month",warning:{title:"Closed Month",text:"{month} has been closed. Editing expenses in closed months is not recommended.",reopenButton:"Reopen to Edit"}},u0={title:"Retainers",new:"New Retainer",addRetainer:"Add Retainer",matchPayment:"Match Payment",empty:"No retainers found",emptySearch:"Try adjusting your search or filters",emptyHint:"Create your first retainer to track recurring income",searchPlaceholder:"Search retainers...",selectToInspect:"Select a retainer to view details",confirmArchive:"Are you sure you want to archive this retainer?",confirmPause:"Are you sure you want to pause this retainer? Future payments will be canceled.",confirmEnd:"Are you sure you want to end this retainer? This cannot be undone.",activate:"Activate",pause:"Pause",resume:"Resume",end:"End",summary:"Summary",activeCount:"Active Retainers",monthlyExpected:"Monthly Expected",totalDue:"Total Due",totalOverdue:"Total Overdue",filters:{view:"View",all:"All",due:"Due Now",active:"Active",ending:"Ending Soon",status:"Status",currency:"Currency",client:"Client"},status:{draft:"Draft",active:"Active",paused:"Paused",ended:"Ended"},cadence:{monthly:"Monthly",quarterly:"Quarterly"},state:{upcoming:"Upcoming",due:"Due",received:"Received",partial:"Partial",missed:"Missed",canceled:"Canceled"},columns:{status:"Status",title:"Title",client:"Client",amount:"Amount",cadence:"Cadence",nextDue:"Next Due",dueNow:"Due Now"},inspector:{overview:"Overview",schedule:"Schedule",transactions:"Transactions",notes:"Notes",client:"Client",project:"Project",amount:"Amount",cadence:"Cadence",paymentDay:"Payment Day",startDate:"Start Date",endDate:"End Date",status:"Status"}},d0={selectTransaction:"Select Transaction",selectProjectedIncome:"Select Payment Period",selectTransactionDesc:"Choose an income transaction to match with a retainer payment",selectProjectedDesc:"Choose the payment period to link this transaction to",searchTransactions:"Search transactions...",searchProjected:"Search periods...",createNewTransaction:"Create New Transaction",noMatchingTransactions:"No matching transactions found",noUnlinkedTransactions:"No unlinked income transactions",noMatchingProjected:"No matching periods found",noDueItems:"No due payment periods",untitled:"Untitled transaction",untitledRetainer:"Untitled retainer",suggestions:"Suggestions",otherDueItems:"Other Due Periods",confidence:{high:"High",medium:"Medium",low:"Low"}},f0={title:"Answers",includeReceivables:"Include receivables",includeProjections:"Include projections",cashFlowTimeline:"Cash Flow Timeline",guidanceTitle:"Action Items",noData:"No data for this period",mode:{month:"Month",year:"Year"},yearMode:{totalInflow:"Total Inflow",totalOutflow:"Total Outflow",netIncome:"Net Income",avgAwaiting:"Avg. Awaiting",retainerStability:"Retainer Stability",monthlyTrend:"Monthly Trend",insights:"Year Insights",bestMonth:"Best Month",worstMonth:"Worst Month",retainerHealth:"Retainer Health",paymentsReceived:"{{received}} of {{total}} payments received",noDataForYear:"No data for this year",yearTrend:"Year Trend",trendUp:"Improving",trendDown:"Declining",vsFirstHalf:"vs. first half",onTimePayments:"on-time payments"},kpi:{willMakeIt:"End of Month Forecast",endOfMonthForecast:"Cash + expected income - expected costs",cashOnHand:"Cash on Hand",currentBalance:"Actual balance to date",comingVsLeaking:"Coming vs Leaking",netForecast:"Net forecast"},legend:{inflow:"Inflow",outflow:"Outflow",runningBalance:"Running balance"},unifiedNote:"All amounts shown in ILS (unified)",dayDetail:{inflow:"Inflow",outflow:"Outflow",net:"Net",noEvents:"No events on this day",inflows:"Inflows",outflows:"Outflows"},source:{actualIncome:"Paid income",actualCost:"Expense",receivable:"Receivable",profileExpense:"Expense",projectedExpense:"Projected expense",retainer:"Retainer"},state:{paid:"Paid",unpaid:"Unpaid",overdue:"Overdue",upcoming:"Upcoming",missed:"Missed",cancelled:"Cancelled"},guidance:{allGood:"Looking good! No action items right now.",impact:"Impact",category:{collect:"Collect",reduce:"Reduce",delay:"Delay",hygiene:"Hygiene"}}},m0={common:Bv,toast:qv,nav:kv,addMenu:Hv,transactions:Qv,overview:Vv,projects:Yv,clients:Pv,reports:Kv,download:Fv,settings:Gv,downloadBanner:Zv,updateBanner:Xv,expenses:Jv,drawer:$v,filters:Wv,validation:e0,time:t0,fx:n0,welcome:a0,profileSwitcher:l0,documentGuard:i0,vendor:s0,receipts:r0,bulkUpload:c0,monthClose:o0,retainers:u0,retainerMatching:d0,moneyAnswers:f0},p0={save:"",saving:" ...",cancel:"",delete:"",archive:"",add:"",edit:"",loading:" ...",search:"...",close:"",confirm:"",noClient:" ",noProject:" ",all:"",markPaid:" ",duplicate:"",undo:"",previous:"",next:"",uncategorized:" ",noResults:"  "},h0={transactionDuplicated:"  ",transactionUndone:"   "},y0={overview:" ",projects:"",clients:"",transactions:"",documents:"",retainers:" ",moneyAnswers:"",expenses:"",reports:"",settings:"",download:"",new:"",collapse:"  ",expand:"  ",sections:{work:"",money:"",system:""},newMenu:{document:" ",transaction:" ",client:" ",expense:" "}},g0={income:"",expense:"",project:"",client:"",document:""},v0={title:"",empty:"  ",emptySearch:"    ",emptyHint:"   ",addTransaction:" ",searchPlaceholder:"  ...",confirmDelete:"      ",type:{income:"",expense:"",receivable:""},status:{paid:"",unpaid:" ",overdue:" {days} ",dueIn:"  {days} ",dueToday:" "},columns:{date:"",type:"",client:"",project:"",category:"",amount:"",status:""},hasDocument:" "},x0={title:" ",kpi:{paidIncome:" ",unpaidReceivables:"  ",expenses:"",net:" ( - )"},needsAttention:" ",noAttention:"     ",recentActivity:" ",noRecent:"   "},b0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addProject:" ",searchPlaceholder:"  ...",allFields:" ",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{project:"",client:"",field:"",paid:"",unpaid:" ",expenses:"",net:"",lastActivity:" "},tabs:{summary:"",transactions:""},detail:{projectDetails:" ",noTransactions:"  ",noTransactionsHint:"    ."},fields:{design:"",development:"",consulting:"",marketing:"",legal:"",maintenance:"",other:""}},j0={title:"",empty:"  ",emptySearch:"  ",emptyHint:"   ",addClient:" ",searchPlaceholder:"  ...",notFound:"  ",notFoundHint:"       .",confirmArchive:"      ",columns:{client:"",activeProjects:" ",paidIncome:" ",unpaid:" ",lastPayment:" ",lastActivity:" "},tabs:{summary:"",projects:"",receivables:"",transactions:""},detail:{clientDetails:" ",email:" ",phone:"",noProjects:"  ",noProjectsHint:"    .",noReceivables:"  ",noReceivablesHint:"   .",noTransactions:"  ",noTransactionsHint:"    ."},receivables:{dueDate:" ",daysOverdue:" ",action:""}},w0={title:"",exportCsv:" CSV",presets:{summary:"",thisMonth:" ",thisYear:" ",byProject:" ",byClient:" ",expensesByProject:"  ",unpaidAging:" "},period:{month:"",quarter:" ",year:"",custom:""},currencyMode:{usd:"",ils:"",both:""},drillDown:{paidIncome:"  ",unpaidIncome:"   ",expenses:" "},search:{project:"  ...",client:"  ..."},selectCurrencyForAmounts:"    ",sections:{financialSummary:" ",incomeByProject:"  ",incomeByClient:"  ",expensesByProject:"  ",unpaidAging:"   "},aging:{current:" ( )",days1to30:" 1-30 ",days31to60:" 31-60 ",days60plus:"   60 "},noExpenses:"     "},S0={title:"",recommendedForYou:"  ",loading:" ...",comingSoon:"",version:"",size:"",requires:"",sha256:"SHA-256",copy:"",checksumCopied:"   ",howToInstall:" ",releaseNotes:" ",allVersions:" ",mac:{title:"macOS",downloadDmg:" DMG",step1:"  DMG",step2:' ""  ',step3:"     "},windows:{title:"Windows",downloadMsi:" MSI",step1:"  MSI",step2:"  ",step3:"  ",altExe:":   EXE"}},A0={title:"",language:{title:"",description:"  "},theme:{title:"",description:"  ",light:"",dark:"",system:""},currency:{title:"",enabled:" ",enabledDesc:"    ",default:" ",defaultDesc:"   "},data:{title:" ",export:" ",exportDesc:"     ",exportBtn:" JSON",exporting:" ...",exported:"  !",exportFailed:" ",import:" ",importDesc:"     (  )",importBtn:" JSON",importing:" ...",imported:"  !  ...",importFailed:" : {error}",invalidFile:"     ",deleteAll:"  ",deleteAllDesc:"    ",deleteAllBtn:"  ",reset:"  ",resetDesc:"     ",resetBtn:" ",resetConfirm:"            .",deleteModal:{title:"  ",warning:"             .      .",stepA:{title:" 1:   ",desc:"       .",btn:"   (CSV)",exporting:" ...",done:"   !",error:" "},stepB:{title:" 2:  ",checkbox:"    ",btn:" ",deleting:" ...",error:" "},success:"    "}},about:{title:" ",name:" -   ",description:"       .       IndexedDB."},updates:{title:"",checking:"   ...",upToDate:"  ",currentVersion:" ",latestVersion:" ",updateAvailable:"  ",updateNow:" ",checkFailed:"   "},desktopApp:{title:"  ",download:"   ",downloadDesc:"     ",downloadBtn:"",downloadMac:"  macOS",downloadWindows:"  Windows"}},D0={message:"   Mac   ",cta:"",dismiss:""},N0={available:" {{version}} ",downloading:" ... {{progress}}%",ready:" ",restart:"  ",download:"",dismiss:"",error:" "},M0={title:"",profileExpenses:" {name}",addExpense:" ",addRecurring:" ",empty:"  ",emptyHint:"   ",emptyProfiles:"   ",emptyProfilesHint:"    ",emptyExpenses:"  ",emptyExpensesSearch:"    ",emptyExpensesHint:"   ",searchPlaceholder:"  ...",confirmDelete:"      ",confirmDeleteRule:"       ",year:"",month:"",allMonths:" ",allCategories:" ",totalExpenses:" ",totalUSD:" ()",totalILS:" ()",viewReceipts:" ",manageReceipts:" ",allProfilesOverview:"    ",recurringRules:" ",fromRecurring:"  ",monthly:"",yearly:"",pause:"",resume:"",paused:"",profileNotFound:"  ",profileNotFoundHint:"       ",untitled:" ",unknownProfile:"  ",overview:{title:"   ",allProfiles:" ",profileBreakdown:"  ",totalExpenses:" ",monthlyBreakdown:" ",byProfile:" ",noProfiles:"   ",profile:"",total:"",percentage:""},forecast:{title:" ",minimumNeeded:"  ",untilEndOfYear:"  {year}",monthsRemaining:" ",yearTotal:" ",activeRules:" ",monthlyForecast:" ",month:"",projected:"",actual:"",delta:"",current:"",total:"",byProfile:" ",empty:"   ",emptyHint:"    ",activeRecurringRules:"  "},receipts:{title:"",upload:" ",uploading:" ...",total:"",linked:"",unlinked:" ",allTab:"",inboxTab:"",suggestionsTab:"",linkToExpense:" ",link:"",unlink:" ",unlinkFromExpense:" ",exportZip:" ZIP",exporting:" ...",download:"",empty:"  ",emptyHint:"  ",noReceipts:"  ",noReceiptsHint:"  ",fileTooLarge:"   (  {maxSize})",invalidFileType:"   .     PDF",uploadFailed:"  ",selectExpense:"  ",noExpensesToLink:"   .   .",confirmUnlink:"       ",confirmDelete:"      "},recurring:{title:" ",addRule:" ",frequency:"",monthly:"",yearly:"",startDate:" ",endMode:" ",endOfYear:" ",untilDate:" ",noEnd:" ",endDate:" ",pause:"",resume:"",paused:"",active:""},columns:{date:"",title:"",vendor:"",category:"",amount:"",receipts:""},categories:{title:"",addCategory:" ",name:"",color:"",setup:" ",setupTitle:"  ",selectPreset:"      :",seedCategories:" ",presets:{general:"  ",startup:"  ",lawFirm:" ",freelancer:" "},presetDescriptions:{general:"      ",startup:"   SaaS        ",lawFirm:"         ",freelancer:"      "}}},C0={title:" ",addRetainer:" ",matchPayment:" ",empty:"   ",emptyHint:"     ",searchPlaceholder:"  ...",confirmArchive:"      ",view:{all:"",dueNow:" ",active:"",endingSoon:" "},status:{title:"",draft:"",active:"",paused:"",ended:""},cadence:{monthly:"",quarterly:" "},columns:{status:"",title:"",client:"",amount:"",cadence:"",nextDue:" ",dueNow:""},inspector:{placeholder:"    ",overview:" ",schedule:" ",linkedTransactions:" ",noLinkedTransactions:"    ",client:"",project:"",amount:"",cadence:"",paymentDay:" ",startDate:" ",endDate:" ",noEndDate:"",notes:"",dueAmount:" ",actions:"",edit:"",pause:"",resume:"",end:"",match:" ",confirmPause:"      ",confirmEnd:"      "},summary:{active:"",dueNow:" ",mtd:"  ()"},scheduleState:{upcoming:"",due:"",received:"",partial:"",missed:"",canceled:""},filters:{status:"",currency:"",client:"",allStatuses:" ",allCurrencies:" ",allClients:" "}},E0={selectTransaction:" ",selectProjectedIncome:"  ",selectTransactionDesc:"       .",selectProjectedDesc:"       .",searchTransactions:"  ...",searchProjected:"   ...",createNewTransaction:"  ",noMatchingTransactions:"   ",noUnlinkedTransactions:"   ",noMatchingProjected:"    ",noDueItems:"   ",untitled:" ",untitledRetainer:"  ",suggestions:"",otherDueItems:"  ",confidence:{high:" ",medium:" ",low:" "}},T0={transaction:{new:" ",edit:" ",typeIncome:"",typeIncomeDesc:"",typeReceivable:"",typeReceivableDesc:" ",typeExpense:"",typeExpenseDesc:"",amount:"",amountPlaceholder:"0.00",currency:"",date:"",dueDate:" ",client:"",clientPlaceholder:" ...",project:"",projectPlaceholder:" ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ..."},client:{new:" ",edit:" ",name:"",namePlaceholder:" ...",email:" ",emailPlaceholder:"client@example.com",phone:"",phonePlaceholder:"+966-5X-XXX-XXXX",notes:"",notesPlaceholder:"    ..."},project:{new:" ",edit:" ",name:"",namePlaceholder:" ...",client:"",clientPlaceholder:" ...",field:"",fieldPlaceholder:" ...",notes:"",notesPlaceholder:"    ..."},expense:{new:" ",edit:" ",newRecurring:"  ",editRecurring:"  ",typeOneTime:" ",typeOneTimeDesc:" ",typeRecurring:"",typeRecurringDesc:" /",profile:"",profilePlaceholder:" ...",amount:"",amountPlaceholder:"0.00",currency:"",date:"",vendor:"",vendorPlaceholder:"   ...",category:"",categoryPlaceholder:" ...",title:"",titlePlaceholder:" ...",notes:"",notesPlaceholder:" ...",frequency:"",startDate:" ",endMode:" ",endDate:" ",receipts:"",addReceipt:" ",linkReceipt:"  "},retainer:{new:"  ",edit:"  ",client:"",clientPlaceholder:" ...",title:"",titlePlaceholder:":   ...",amount:"",amountPlaceholder:"0.00",currency:"",cadence:"",paymentDay:" ",startDate:" ",endDate:"  ()",project:" ()",projectPlaceholder:" ...",status:"",notes:"",notesPlaceholder:"    ...",schedulePreview:" ",enterDetailsForPreview:"    ",andMore:"..."}},R0={thisMonth:" ",lastMonth:" ",thisYear:" ",allTime:" ",custom:"",all:"",type:{all:"",income:"",receivable:"",expense:""},status:{all:"",paid:"",unpaid:" ",overdue:""}},_0={required:"  ",amountRequired:" ",dateRequired:" ",nameRequired:" "},I0={today:"",yesterday:"",daysAgo:" {days} ",weeksAgo:" {weeks} ",monthsAgo:" {months} ",yearsAgo:" {years} ",daysOverdue:" {days} ",dueInDays:"  {days} "},O0={live:"",cached:"",none:" ",bannerTitle:" ",showBanner:"  ",refresh:" ",minimize:"",drag:" "},z0={title:"   ",subtitle:"    ",infoTitle:"    ",bullet1:"   ",bullet2:"  ",bullet3:"   ",multipleProfiles:"         .",setUpNow:" ",skipForNow:" ",skipNote:"        ."},U0={noProfile:"  ",setUpBusiness:"  ",addProfile:"  ",manageProfiles:" ",switchTo:"  {name}",current:""},L0={title:"   ",description:"        .",createProfile:"  "},B0={createNew:" "},q0={suggestions:{title:" ",link:"",noMatches:"     ",createAndLink:"  ",highConfidence:"  ",mediumConfidence:" ",lowConfidence:" ",allLinked:"  ",allLinkedHint:"!     ."}},k0={title:"  ",button:" ",dropzoneTitle:"     ",dropzoneHint:" {maxFiles}    {maxSize}  ",autoDetectMonth:"     ",batchMonth:"  ",selectMonth:" ...",total:"",success:" ",duplicates:"  ()",errors:"",upload:"",uploading:" ",retryFailed:" ",statusPending:" ",duplicate:" "},H0={title:" ",checklist:" ",monthClosed:"  ",closedAt:"   {date}",readyToClose:" ",notReady:"  ",allTasksComplete:"    .",completeTasks:"     .",receiptsLinked:"   ",allLinked:"  ",unlinkedCount:"{count}   ",viewReceipts:" ",allCategorized:"  ",allCategorizedStatus:"   ",uncategorizedCount:"{count}   ",viewExpenses:" ",recurringConfirmed:"  ",recurringConfirmedHint:"       ",zipExported:"  ()",zipExportedHint:"     ",exportZip:" ZIP",closeMonth:" ",notesLabel:" ()",notesPlaceholder:"      ...",closeMonthButton:" ",completeChecklistFirst:"       .",confirmClose:"         .",confirmReopen:"           .",reopen:"  ",warning:{title:" ",text:"  {month}.       .",reopenButton:"  "}},Q0={title:"",includeReceivables:" ",includeProjections:" ",cashFlowTimeline:"  ",guidanceTitle:" ",noData:"    ",mode:{month:"",year:""},yearMode:{totalInflow:" ",totalOutflow:" ",netIncome:" ",avgAwaiting:" ",retainerStability:" ",monthlyTrend:" ",insights:" ",bestMonth:" ",worstMonth:" ",retainerHealth:" ",paymentsReceived:"  {{received}}  {{total}} ",noDataForYear:"    ",yearTrend:" ",trendUp:" ",trendDown:" ",vsFirstHalf:"  ",onTimePayments:"  "},kpi:{willMakeIt:"  ",endOfMonthForecast:" +   -  ",cashOnHand:" ",currentBalance:"   ",comingVsLeaking:"  ",netForecast:" "},legend:{inflow:"",outflow:"",runningBalance:" "},unifiedNote:"   ()",dayDetail:{inflow:"",outflow:"",net:"",noEvents:"     ",inflows:"",outflows:""},source:{actualIncome:" ",actualCost:"",receivable:"",profileExpense:"",projectedExpense:" ",retainer:" "},state:{paid:"",unpaid:" ",overdue:"",upcoming:"",missed:"",cancelled:""},guidance:{allGood:"    !     .",impact:"",category:{collect:"",reduce:"",delay:"",hygiene:""}}},V0={common:p0,toast:h0,nav:y0,addMenu:g0,transactions:v0,overview:x0,projects:b0,clients:j0,reports:w0,download:S0,settings:A0,downloadBanner:D0,updateBanner:N0,expenses:M0,retainers:C0,retainerMatching:E0,drawer:T0,filters:R0,validation:_0,time:I0,fx:O0,welcome:z0,profileSwitcher:U0,documentGuard:L0,vendor:B0,receipts:q0,bulkUpload:k0,monthClose:H0,moneyAnswers:Q0},Y0={en:m0,ar:V0},Pp="mutaba3a-language";function P0(){return navigator.language.split("-")[0].toLowerCase()==="ar"?"ar":"en"}function K0(){if(typeof window>"u")return"en";const a=localStorage.getItem(Pp);return a==="en"||a==="ar"?a:P0()}function F0(a){return a==="ar"?"rtl":"ltr"}function qi(a){return a==="ar"?"ar":"en-US"}const Kp=O.createContext(null);function G0({children:a}){const[i,c]=O.useState(K0),u=F0(i);O.useEffect(()=>{document.documentElement.lang=i,document.documentElement.dir=u,localStorage.setItem(Pp,i)},[i,u]);const d=O.useCallback(g=>{c(g)},[]),h=O.useCallback((g,p)=>{const m=g.split(".");let y=Y0[i];for(const v of m)if(y&&typeof y=="object"&&v in y)y=y[v];else return console.warn(`Translation missing: ${g} (${i})`),g;return typeof y!="string"?(console.warn(`Translation not a string: ${g} (${i})`),g):p?Object.entries(p).reduce((v,[j,D])=>v.replace(new RegExp(`\\{${j}\\}`,"g"),String(D)),y):y},[i]),b={language:i,direction:u,setLanguage:d,t:h};return s.jsx(Kp.Provider,{value:b,children:a})}function Yn(){const a=O.useContext(Kp);if(!a)throw new Error("useLanguage must be used within a LanguageProvider");return a}function Fe(){return Yn().t}function Z0(){return Yn().direction}const X0="https://api.github.com/repos/vAWK3/mutaba3a/releases/latest",Po="latest-release-info",J0=3600*1e3;function $0(){try{const a=sessionStorage.getItem(Po);if(!a)return null;const i=JSON.parse(a);return Date.now()-i.timestamp>J0?(sessionStorage.removeItem(Po),null):i}catch{return null}}function W0(a){const i={...a,timestamp:Date.now()};sessionStorage.setItem(Po,JSON.stringify(i))}async function Fp(){const a=await fetch(X0,{headers:{Accept:"application/vnd.github.v3+json"}});if(!a.ok)throw new Error(`GitHub API returned ${a.status}`);const i=await a.json(),c=i.tag_name,u=i.html_url,d=i.assets||[],h=c.startsWith("v")?c.slice(1):c,b=d.some(p=>p.name.includes("macos")||p.name.endsWith(".dmg")),g=d.some(p=>p.name.includes("windows")||p.name.endsWith(".msi")||p.name.endsWith(".exe"));return{version:h,releaseNotesUrl:u,hasMacBuild:b,hasWindowsBuild:g}}function Pj(){const[a,i]=O.useState({release:null,isLoading:!0,error:null});return O.useEffect(()=>{(async()=>{const u=$0();if(u){i({release:{version:u.version,releaseNotesUrl:u.releaseNotesUrl,hasMacBuild:u.hasMacBuild,hasWindowsBuild:u.hasWindowsBuild},isLoading:!1,error:null});return}try{const d=await Fp();W0(d),i({release:d,isLoading:!1,error:null})}catch(d){i({release:null,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}const Ko="update-check-result",e1=3600*1e3;function t1(a,i){const c=m=>m.split(".").map(y=>parseInt(y,10)||0),[u=0,d=0,h=0]=c(a),[b=0,g=0,p=0]=c(i);return b!==u?b-u:g!==d?g-d:p-h}function n1(){try{const a=sessionStorage.getItem(Ko);if(!a)return null;const i=JSON.parse(a);return Date.now()-i.timestamp>e1?(sessionStorage.removeItem(Ko),null):i}catch{return null}}function a1(a,i){const c={latestVersion:a,hasUpdate:i,timestamp:Date.now()};sessionStorage.setItem(Ko,JSON.stringify(c))}function l1(){try{if(window.__TAURI_INTERNALS__)return"0.0.17"}catch{}return"0.0.17"}function i1(){const[a,i]=O.useState({latestVersion:null,hasUpdate:!1,isLoading:!0,error:null});return O.useEffect(()=>{(async()=>{const u=n1();if(u){i({latestVersion:u.latestVersion,hasUpdate:u.hasUpdate,isLoading:!1,error:null});return}try{const h=(await Fp()).version,b=l1(),g=t1(b,h)>0;a1(h,g),i({latestVersion:h,hasUpdate:g,isLoading:!1,error:null})}catch(d){i({latestVersion:null,hasUpdate:!1,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"})}})()},[]),a}class s1 extends Av{clients;projects;categories;transactions;fxRates;settings;businessProfiles;documents;documentSequences;expenses;recurringRules;receipts;expenseCategories;vendors;monthCloseStatuses;retainerAgreements;projectedIncome;localDevice;trustedPeers;opLog;peerCursors;entityFieldMeta;moneyEventVersions;conflictQueue;syncHistory;constructor(){super("mutaba3a"),this.version(1).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id"}),this.version(2).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt"}),this.version(3).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]"}),this.version(4).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, monthKey, createdAt",expenseCategories:"id, profileId, name"}),this.version(5).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed"}),this.version(6).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"}),this.version(7).stores({clients:"id, name, createdAt, updatedAt, archivedAt",projects:"id, name, clientId, field, createdAt, updatedAt, archivedAt",categories:"id, kind, name",transactions:"id, kind, status, clientId, projectId, categoryId, currency, occurredAt, dueDate, paidAt, createdAt, updatedAt, deletedAt, linkedDocumentId, linkedProjectedIncomeId",fxRates:"id, baseCurrency, quoteCurrency, effectiveDate, createdAt",settings:"id",localDevice:"id",trustedPeers:"id, pairingCode, status, pairedAt",opLog:"id, hlc, [entityType+entityId], createdBy, appliedAt",peerCursors:"peerId",entityFieldMeta:"[entityType+entityId+field], hlc",moneyEventVersions:"id, transactionId, hlc, isActive, createdBy",conflictQueue:"id, entityType, entityId, status, detectedAt",syncHistory:"id, peerId, method, status, completedAt",businessProfiles:"id, name, isDefault, createdAt, archivedAt",documents:"id, number, type, status, businessProfileId, clientId, issueDate, dueDate, createdAt, updatedAt, deletedAt",documentSequences:"id, [businessProfileId+documentType]",expenses:"id, profileId, categoryId, vendorId, currency, occurredAt, recurringRuleId, createdAt, deletedAt",recurringRules:"id, profileId, categoryId, frequency, startDate, isPaused, createdAt",receipts:"id, profileId, expenseId, vendorId, monthKey, createdAt",expenseCategories:"id, profileId, name",vendors:"id, profileId, canonicalName, createdAt",monthCloseStatuses:"id, profileId, monthKey, isClosed",retainerAgreements:"id, profileId, clientId, projectId, status, currency, startDate, createdAt, archivedAt",projectedIncome:"id, profileId, sourceId, clientId, expectedDate, state, currency, [sourceId+periodStart+periodEnd]"})}}const w=new s1;function r1(a){let i=0,c=0,u=0;for(const d of a)d.kind==="income"?d.status==="paid"?i+=d.amountMinor:c+=d.amountMinor:u+=d.amountMinor;return{paidIncomeMinor:i,unpaidIncomeMinor:c,expensesMinor:u}}function fr(a){const i={USD:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0},ILS:{paidIncomeMinor:0,unpaidIncomeMinor:0,expensesMinor:0}};for(const c of a){const u=i[c.currency];u&&(c.kind==="income"?c.status==="paid"?u.paidIncomeMinor+=c.amountMinor:u.unpaidIncomeMinor+=c.amountMinor:u.expensesMinor+=c.amountMinor)}return i}function mr(a,i={}){let c=0,u=0,d=0,h,b;for(const g of a)g.kind==="income"?g.status==="paid"?(c+=g.amountMinor,i.trackPayments&&(!b||g.paidAt&&g.paidAt>b)&&(b=g.paidAt)):u+=g.amountMinor:d+=g.amountMinor,(!h||g.occurredAt>h)&&(h=g.occurredAt);return{paidIncomeMinor:c,unpaidIncomeMinor:u,expensesMinor:d,lastActivityAt:h,lastPaymentAt:b}}function yp(a,i){return a.filter(c=>!(c.deletedAt||i.dateFrom&&c.occurredAt<i.dateFrom||i.dateTo&&c.occurredAt>i.dateTo+"T23:59:59"||i.currency&&c.currency!==i.currency))}function pr(a,i,c,u){return a.filter(d=>!(d.deletedAt||i==="project"&&d.projectId!==c||i==="client"&&d.clientId!==c||u&&d.currency!==u))}function Fo(a,i,c,u){return a.filter(d=>!(d.deletedAt||i==="project"&&d.projectId!==c||i==="client"&&d.clientId!==c||u.currency&&d.currency!==u.currency||u.dateFrom&&d.occurredAt<u.dateFrom||u.dateTo&&d.occurredAt>u.dateTo+"T23:59:59"))}function c1(a){return new Map(a.map(i=>[i.id,i.name]))}function Gp(a){return a.sort((i,c)=>!i.lastActivityAt&&!c.lastActivityAt?0:i.lastActivityAt?c.lastActivityAt?c.lastActivityAt.localeCompare(i.lastActivityAt):-1:1)}function Va(){return crypto.randomUUID()}function Re(){return new Date().toISOString()}function gp(){return new Date().toISOString().split("T")[0]}const sn={async list(a=!1){let i=w.clients.toCollection();return a||(i=w.clients.filter(c=>!c.archivedAt)),i.sortBy("name")},async get(a){return w.clients.get(a)},async create(a){const i=Re(),c={...a,id:Va(),createdAt:i,updatedAt:i};return await w.clients.add(c),c},async update(a,i){await w.clients.update(a,{...i,updatedAt:Re()})},async archive(a){await w.clients.update(a,{archivedAt:Re(),updatedAt:Re()})},async delete(a){await w.clients.delete(a)}},pn={async list(a){return(await w.projects.toCollection().toArray()).filter(u=>!(!a?.includeArchived&&u.archivedAt||a?.clientId&&u.clientId!==a.clientId)).sort((u,d)=>u.name.localeCompare(d.name))},async get(a){return w.projects.get(a)},async create(a){const i=Re(),c={...a,id:Va(),createdAt:i,updatedAt:i};return await w.projects.add(c),c},async update(a,i){await w.projects.update(a,{...i,updatedAt:Re()})},async archive(a){await w.projects.update(a,{archivedAt:Re(),updatedAt:Re()})},async delete(a){await w.projects.delete(a)}},or={async list(a){return a?w.categories.where("kind").equals(a).sortBy("name"):w.categories.orderBy("name").toArray()},async get(a){return w.categories.get(a)},async create(a){const i={...a,id:Va()};return await w.categories.add(i),i},async update(a,i){await w.categories.update(a,i)},async delete(a){await w.categories.delete(a)}},lt={async list(a={}){const i=await w.transactions.toArray(),c=await w.clients.toArray(),u=await w.projects.toArray(),d=await w.categories.toArray(),h=new Map(c.map(j=>[j.id,j.name])),b=new Map(u.map(j=>[j.id,j.name])),g=new Map(d.map(j=>[j.id,j.name])),p=gp();let m=i.filter(j=>{if(j.deletedAt||a.dateFrom&&j.occurredAt<a.dateFrom||a.dateTo&&j.occurredAt>a.dateTo+"T23:59:59"||a.currency&&j.currency!==a.currency||a.kind&&j.kind!==a.kind||a.clientId&&j.clientId!==a.clientId||a.projectId&&j.projectId!==a.projectId)return!1;if(a.status){if(a.status==="overdue"){if(!(j.kind==="income"&&j.status==="unpaid"&&j.dueDate&&j.dueDate<p))return!1}else if(j.status!==a.status)return!1}if(a.search){const D=a.search.toLowerCase(),A=j.clientId?h.get(j.clientId):"",E=j.projectId?b.get(j.projectId):"";if(!(j.title?.toLowerCase().includes(D)||j.notes?.toLowerCase().includes(D)||A?.toLowerCase().includes(D)||E?.toLowerCase().includes(D)))return!1}return!0});const y=a.sort?.by||"occurredAt",v=a.sort?.dir||"desc";return m.sort((j,D)=>{const A=j[y],E=D[y];return typeof A=="string"&&typeof E=="string"?v==="asc"?A.localeCompare(E):E.localeCompare(A):typeof A=="number"&&typeof E=="number"?v==="asc"?A-E:E-A:0}),a.offset&&(m=m.slice(a.offset)),a.limit&&(m=m.slice(0,a.limit)),m.map(j=>({...j,clientName:j.clientId?h.get(j.clientId):void 0,projectName:j.projectId?b.get(j.projectId):void 0,categoryName:j.categoryId?g.get(j.categoryId):void 0}))},async get(a){return w.transactions.get(a)},async create(a){const i=Re(),c={...a,id:Va(),createdAt:i,updatedAt:i};return await w.transactions.add(c),c},async update(a,i){await w.transactions.update(a,{...i,updatedAt:Re()})},async markPaid(a){const i=Re();await w.transactions.update(a,{status:"paid",paidAt:i,updatedAt:i})},async softDelete(a){await w.transactions.update(a,{deletedAt:Re(),updatedAt:Re()})},async getOverviewTotals(a){const i=await w.transactions.toArray(),c=yp(i,a);return r1(c)},async getOverviewTotalsByCurrency(a){const i=await w.transactions.toArray(),c=yp(i,{dateFrom:a.dateFrom,dateTo:a.dateTo});return fr(c)},async getAttentionReceivables(a){const i=gp(),c=new Date;c.setDate(c.getDate()+7);const u=c.toISOString().split("T")[0];return(await this.list({kind:"income",currency:a.currency})).filter(h=>h.status!=="unpaid"||!h.dueDate?!1:h.dueDate<i||h.dueDate<=u).sort((h,b)=>(h.dueDate||"").localeCompare(b.dueDate||""))}},Zp={async list(a){const i=await pn.list(),c=await w.clients.toArray(),u=await w.transactions.toArray(),d=c1(c),h=i.filter(b=>{if(a?.search){const g=a.search.toLowerCase(),p=b.clientId?d.get(b.clientId):"";if(!b.name.toLowerCase().includes(g)&&!p?.toLowerCase().includes(g))return!1}return!(a?.field&&b.field!==a.field)}).map(b=>{const g=pr(u,"project",b.id,a?.currency),p=mr(g);let m={};if(!a?.currency){const y=pr(u,"project",b.id),v=fr(y);m={paidIncomeMinorUSD:v.USD.paidIncomeMinor,paidIncomeMinorILS:v.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:v.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:v.ILS.unpaidIncomeMinor,expensesMinorUSD:v.USD.expensesMinor,expensesMinorILS:v.ILS.expensesMinor}}return{id:b.id,name:b.name,clientId:b.clientId,clientName:b.clientId?d.get(b.clientId):void 0,field:b.field,...p,netMinor:p.paidIncomeMinor-p.expensesMinor,...m}});return Gp(h)},async get(a,i){const c=await pn.get(a);if(!c)return;const u=c.clientId?await sn.get(c.clientId):void 0,d=await w.transactions.toArray(),h=Fo(d,"project",a,i||{}),b=mr(h);let g={};if(!i?.currency){const p=Fo(d,"project",a,{dateFrom:i?.dateFrom,dateTo:i?.dateTo}),m=fr(p);g={paidIncomeMinorUSD:m.USD.paidIncomeMinor,paidIncomeMinorILS:m.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:m.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:m.ILS.unpaidIncomeMinor,expensesMinorUSD:m.USD.expensesMinor,expensesMinorILS:m.ILS.expensesMinor}}return{id:c.id,name:c.name,clientId:c.clientId,clientName:u?.name,field:c.field,...b,netMinor:b.paidIncomeMinor-b.expensesMinor,...g}}},Xp={async list(a){const i=await sn.list(),c=await w.projects.toArray(),u=await w.transactions.toArray(),d=i.filter(h=>{if(a?.search){const b=a.search.toLowerCase();if(!h.name.toLowerCase().includes(b))return!1}return!0}).map(h=>{const b=c.filter(y=>y.clientId===h.id&&!y.archivedAt),g=pr(u,"client",h.id,a?.currency),p=mr(g,{trackPayments:!0});let m={};if(!a?.currency){const y=pr(u,"client",h.id),v=fr(y);m={paidIncomeMinorUSD:v.USD.paidIncomeMinor,paidIncomeMinorILS:v.ILS.paidIncomeMinor,unpaidIncomeMinorUSD:v.USD.unpaidIncomeMinor,unpaidIncomeMinorILS:v.ILS.unpaidIncomeMinor}}return{id:h.id,name:h.name,activeProjectCount:b.length,paidIncomeMinor:p.paidIncomeMinor,unpaidIncomeMinor:p.unpaidIncomeMinor,lastPaymentAt:p.lastPaymentAt,lastActivityAt:p.lastActivityAt,...m}});return Gp(d)},async get(a,i){const c=await sn.get(a);if(!c)return;const u=await w.projects.toArray(),d=await w.transactions.toArray(),h=u.filter(p=>p.clientId===a&&!p.archivedAt),b=Fo(d,"client",a,i||{}),g=mr(b,{trackPayments:!0});return{id:c.id,name:c.name,activeProjectCount:h.length,paidIncomeMinor:g.paidIncomeMinor,unpaidIncomeMinor:g.unpaidIncomeMinor,lastPaymentAt:g.lastPaymentAt,lastActivityAt:g.lastActivityAt}}},ur={async list(){return w.fxRates.orderBy("effectiveDate").reverse().toArray()},async getLatest(a,i){const c=await w.fxRates.where("[baseCurrency+quoteCurrency]").equals([a,i]).sortBy("effectiveDate");return c[c.length-1]},async create(a){const i={...a,id:Va(),createdAt:Re()};return await w.fxRates.add(i),i},async delete(a){await w.fxRates.delete(a)}},Jp={async get(){const a=await w.settings.get("default");return a||{id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}},async update(a){const i=await this.get();await w.settings.put({...i,...a,id:"default"})}},at={async list(a=!1){let i=w.businessProfiles.toCollection();return a||(i=w.businessProfiles.filter(c=>!c.archivedAt)),i.sortBy("name")},async get(a){return w.businessProfiles.get(a)},async getDefault(){return(await w.businessProfiles.filter(i=>i.isDefault&&!i.archivedAt).toArray())[0]},async create(a){const i=Re();a.isDefault&&await w.businessProfiles.toCollection().modify({isDefault:!1});const c={...a,id:Va(),createdAt:i,updatedAt:i};return await w.businessProfiles.add(c),c},async update(a,i){i.isDefault&&await w.businessProfiles.toCollection().modify({isDefault:!1}),await w.businessProfiles.update(a,{...i,updatedAt:Re()})},async setDefault(a){await w.businessProfiles.toCollection().modify({isDefault:!1}),await w.businessProfiles.update(a,{isDefault:!0,updatedAt:Re()})},async archive(a){if((await this.get(a))?.isDefault){const c=await w.businessProfiles.filter(u=>u.id!==a&&!u.archivedAt).toArray();c.length>0&&await w.businessProfiles.update(c[0].id,{isDefault:!0})}await w.businessProfiles.update(a,{archivedAt:Re(),updatedAt:Re(),isDefault:!1})},async delete(a){await w.businessProfiles.delete(a)}},qo={invoice:"INV",receipt:"REC",invoice_receipt:"IR",credit_note:"CN",price_offer:"PO",proforma_invoice:"PI",donation_receipt:"DR"},au={async getNextNumber(a,i){const c=`${a}:${i}`;let u=await w.documentSequences.get(c);u||(u={id:c,businessProfileId:a,documentType:i,lastNumber:0,prefix:qo[i],prefixEnabled:!0,updatedAt:Re()});const d=await w.documents.where("type").equals(i).filter(p=>!p.deletedAt).toArray();let h=u.lastNumber;for(const p of d){const m=p.number.match(/(\d+)$/);m&&(h=Math.max(h,parseInt(m[1],10)))}const b=h+1;u.lastNumber=b,u.updatedAt=Re(),await w.documentSequences.put(u);const g=String(b).padStart(4,"0");return u.prefixEnabled?`${u.prefix}-${g}`:g},async get(a,i){return w.documentSequences.get(`${a}:${i}`)},async listByBusinessProfile(a){return w.documentSequences.where("businessProfileId").equals(a).toArray()},async update(a,i,c){const u=`${a}:${i}`;let d=await w.documentSequences.get(u);d||(d={id:u,businessProfileId:a,documentType:i,lastNumber:0,prefix:qo[i],prefixEnabled:!0,updatedAt:Re()}),await w.documentSequences.put({...d,...c,updatedAt:Re()})},async getOrCreate(a,i){const c=`${a}:${i}`;let u=await w.documentSequences.get(c);return u||(u={id:c,businessProfileId:a,documentType:i,lastNumber:0,prefix:qo[i],prefixEnabled:!0,updatedAt:Re()},await w.documentSequences.put(u)),u}},Ut={async list(a={}){const i=await w.documents.toArray(),c=await w.clients.toArray(),u=await w.businessProfiles.toArray(),d=new Map(c.map(m=>[m.id,m.name])),h=new Map(u.map(m=>[m.id,m.name]));let b=i.filter(m=>{if(m.deletedAt||a.dateFrom&&m.issueDate<a.dateFrom||a.dateTo&&m.issueDate>a.dateTo+"T23:59:59"||a.currency&&m.currency!==a.currency||a.type&&m.type!==a.type||a.status&&m.status!==a.status||a.businessProfileId&&m.businessProfileId!==a.businessProfileId||a.clientId&&m.clientId!==a.clientId)return!1;if(a.search){const y=a.search.toLowerCase(),v=m.clientId?d.get(m.clientId):"";if(!(m.number?.toLowerCase().includes(y)||m.subject?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||v?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"issueDate",p=a.sort?.dir||"desc";return b.sort((m,y)=>{const v=m[g],j=y[g];return typeof v=="string"&&typeof j=="string"?p==="asc"?v.localeCompare(j):j.localeCompare(v):typeof v=="number"&&typeof j=="number"?p==="asc"?v-j:j-v:0}),a.offset&&(b=b.slice(a.offset)),a.limit&&(b=b.slice(0,a.limit)),b.map(m=>({...m,clientName:m.clientId?d.get(m.clientId):void 0,businessProfileName:h.get(m.businessProfileId)}))},async get(a){return w.documents.get(a)},async getByNumber(a){return(await w.documents.where("number").equals(a).toArray())[0]},async isNumberTaken(a,i){return!!await w.documents.where("number").equals(a).filter(u=>!u.deletedAt&&u.id!==i).first()},async create(a){const i=Re(),c=await au.getNextNumber(a.businessProfileId,a.type),u={...a,id:Va(),number:c,createdAt:i,updatedAt:i};return await w.documents.add(u),u},async update(a,i){await w.documents.update(a,{...i,updatedAt:Re()})},async markPaid(a){const i=Re();await w.documents.update(a,{status:"paid",paidAt:i,updatedAt:i})},async markVoided(a){await w.documents.update(a,{status:"voided",updatedAt:Re()})},async markIssued(a){await w.documents.update(a,{status:"issued",updatedAt:Re()})},async softDelete(a){await w.documents.update(a,{deletedAt:Re(),updatedAt:Re()})},async linkTransactions(a,i){const c=await this.get(a);if(!c)return;const u=new Set(c.linkedTransactionIds||[]);i.forEach(d=>u.add(d)),await this.update(a,{linkedTransactionIds:Array.from(u)});for(const d of i)await lt.update(d,{linkedDocumentId:a})},async unlinkTransaction(a,i){const c=await this.get(a);c&&(await this.update(a,{linkedTransactionIds:(c.linkedTransactionIds||[]).filter(u=>u!==i)}),await lt.update(i,{linkedDocumentId:void 0}))}};async function o1(){await w.settings.get("default")||(await w.settings.put({id:"default",enabledCurrencies:["USD","ILS"],defaultCurrency:"USD",defaultBaseCurrency:"ILS"}),console.log("Database initialized with default settings"))}async function Kj(){await w.transaction("rw",[w.transactions,w.projects,w.clients,w.categories,w.fxRates],async()=>{await w.transactions.clear(),await w.projects.clear(),await w.clients.clear(),await w.categories.clear(),await w.fxRates.clear()}),console.log("All data deleted (settings preserved)")}async function Fj(){await w.transactions.clear(),await w.projects.clear(),await w.clients.clear(),await w.categories.clear(),await w.fxRates.clear(),await w.settings.clear(),console.log("Database cleared")}class ut{ts;counter;nodeId;constructor(i,c,u){this.nodeId=i,this.ts=c??Date.now(),this.counter=u??0}tick(){const i=Date.now();return i>this.ts?(this.ts=i,this.counter=0):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}receive(i){const c=Date.now();return c>this.ts&&c>i.ts?(this.ts=c,this.counter=0):this.ts===i.ts?this.counter=Math.max(this.counter,i.counter)+1:i.ts>this.ts?(this.ts=i.ts,this.counter=i.counter+1):this.counter++,{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}now(){return{ts:this.ts,counter:this.counter,nodeId:this.nodeId}}static compare(i,c){return i.ts!==c.ts?i.ts-c.ts:i.counter!==c.counter?i.counter-c.counter:i.nodeId.localeCompare(c.nodeId)}static lt(i,c){return ut.compare(i,c)<0}static lte(i,c){return ut.compare(i,c)<=0}static gt(i,c){return ut.compare(i,c)>0}static gte(i,c){return ut.compare(i,c)>=0}static eq(i,c){return i.ts===c.ts&&i.counter===c.counter&&i.nodeId===c.nodeId}static max(i,c){return ut.compare(i,c)>=0?i:c}static min(i,c){return ut.compare(i,c)<=0?i:c}static serialize(i){const c=i.ts.toString(36).padStart(11,"0"),u=i.counter.toString(36).padStart(5,"0"),d=i.nodeId.slice(0,8).padEnd(8,"0");return`${c}-${u}-${d}`}static parse(i){const c=i.split("-");if(c.length<3)throw new Error(`Invalid HLC string: ${i}`);return{ts:parseInt(c[0],36),counter:parseInt(c[1],36),nodeId:c.slice(2).join("-")}}static zero(){return{ts:0,counter:0,nodeId:""}}static zeroString(){return ut.serialize(ut.zero())}static isZero(i){return i.ts===0&&i.counter===0&&i.nodeId===""}static toDate(i){return new Date(i.ts)}static fromDate(i,c){return{ts:i.getTime(),counter:0,nodeId:c}}}let Go=null;function u1(a){Go=new ut(a)}function $p(){if(!Go)throw new Error("HLC not initialized. Call initializeClock() first.");return Go}function d1(){return $p().tick()}function f1(a){return $p().receive(a)}let qa=null;async function Wp(){if(qa)return qa;const a=await w.localDevice.toArray();if(a.length>0)return qa=a[0],qa;const i={id:crypto.randomUUID(),name:await m1(),type:eh(),publicKey:"",privateKey:"",createdAt:new Date().toISOString()};return await w.localDevice.add(i),qa=i,i}function xa(){if(!qa)throw new Error("Local device not initialized. Call getOrCreateLocalDevice() first.");return qa}function eh(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window?"desktop":"web"}async function m1(){const a=eh(),i=navigator.platform||"Unknown";if(a==="desktop")try{const{invoke:c}=await _e(async()=>{const{invoke:d}=await import("./core-BEOw45JP.js");return{invoke:d}},[],import.meta.url);return await c("get_hostname")||`Desktop (${i})`}catch{return`Desktop (${i})`}return`Web Browser (${i})`}async function ki(a){const i=xa(),c=d1(),u={id:crypto.randomUUID(),hlc:ut.serialize(c),entityType:a.entityType,entityId:a.entityId,opType:a.opType,field:a.field,value:a.value,previousValue:a.previousValue,createdBy:i.id,createdAt:new Date().toISOString(),appliedAt:new Date().toISOString()};if(await w.opLog.add(u),a.field&&a.opType==="update"&&await Zo(a.entityType,a.entityId,a.field,c,a.value,i.id),typeof window<"u"&&"__TAURI_INTERNALS__"in window)try{const{invoke:d}=await _e(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[],import.meta.url);await d("store_local_sync_op",{op:u}),console.log("[OpsEngine] Stored op for mobile sync:",u.id)}catch(d){console.error("[OpsEngine] Failed to store op in Rust:",d)}return u}async function lu(a){if(await w.opLog.get(a.id))return{applied:!1,skipped:!0,reason:"already_applied"};const c=ut.parse(a.hlc);f1(c);let u;return a.entityType==="transaction"&&a.opType==="update"?u=await h1(a):a.opType==="update"&&a.field?u=await p1(a):u=await th(a),await w.opLog.add({...a,appliedAt:new Date().toISOString()}),u}async function p1(a){const i=ut.parse(a.hlc),c=await w.entityFieldMeta.where("[entityType+entityId+field]").equals([a.entityType,a.entityId,a.field]).first();if(c){const u=ut.parse(c.hlc);if(ut.lte(i,u))return{applied:!1,reason:"lww_local_wins"};const d=xa();if(c.updatedBy===d.id&&c.updatedBy!==a.createdBy){const h=await S1(a,c);return await hr(a),await Zo(a.entityType,a.entityId,a.field,i,a.value,a.createdBy),{applied:!0,conflict:h}}}return await hr(a),await Zo(a.entityType,a.entityId,a.field,i,a.value,a.createdBy),{applied:!0}}async function h1(a){const i=await w.transactions.get(a.entityId);if(!i)return th(a);const c=xa(),u=ut.parse(a.hlc);if((await w.moneyEventVersions.where("transactionId").equals(a.entityId).toArray()).some(b=>b.createdBy===c.id)){const b=await A1(a,i);return await vp(a.entityId,i,u,a.createdBy,!1),await hr(a),{applied:!0,conflict:b}}return await vp(a.entityId,i,u,a.createdBy,!1),await hr(a),{applied:!0}}async function th(a){switch(a.opType){case"create":await y1(a);break;case"delete":await g1(a);break;case"archive":await v1(a);break;case"unarchive":await x1(a);break;case"mark_paid":await b1(a);break;case"resolve_conflict":await j1(a);break;case"set_active_version":await w1(a);break;default:console.warn(`Unknown op type: ${a.opType}`)}return{applied:!0}}async function y1(a){const i=a.value;switch(a.entityType){case"client":await w.clients.put(i);break;case"project":await w.projects.put(i);break;case"transaction":await w.transactions.put(i);break;case"category":await w.categories.put(i);break;case"fxRate":await w.fxRates.put(i);break;case"document":await w.documents.put(i);break;case"businessProfile":await w.businessProfiles.put(i);break}}async function hr(a){if(!a.field)return;const i=vr(a.entityType);await i.get(a.entityId)&&await i.update(a.entityId,{[a.field]:a.value,updatedAt:new Date().toISOString()})}async function g1(a){const i=vr(a.entityType);a.entityType==="transaction"||a.entityType==="document"?await i.update(a.entityId,{deletedAt:new Date().toISOString()}):await i.delete(a.entityId)}async function v1(a){await vr(a.entityType).update(a.entityId,{archivedAt:a.value,updatedAt:new Date().toISOString()})}async function x1(a){await vr(a.entityType).update(a.entityId,{archivedAt:void 0,updatedAt:new Date().toISOString()})}async function b1(a){a.entityType==="transaction"?await w.transactions.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()}):a.entityType==="document"&&await w.documents.update(a.entityId,{status:"paid",paidAt:a.value,updatedAt:new Date().toISOString()})}async function j1(a){const i=a.value;await w.conflictQueue.update(i.conflictId,{status:"resolved",resolution:i.resolution,resolvedAt:new Date().toISOString(),resolutionOpId:a.id})}async function w1(a){const{transactionId:i,versionId:c}=a.value;await w.moneyEventVersions.where("transactionId").equals(i).modify({isActive:!1}),await w.moneyEventVersions.update(c,{isActive:!0});const u=await w.moneyEventVersions.get(c);u&&await w.transactions.put(u.data)}function vr(a){switch(a){case"client":return w.clients;case"project":return w.projects;case"transaction":return w.transactions;case"category":return w.categories;case"fxRate":return w.fxRates;case"document":return w.documents;case"businessProfile":return w.businessProfiles;default:throw new Error(`Unknown entity type: ${a}`)}}async function Zo(a,i,c,u,d,h){const b={entityType:a,entityId:i,field:c,hlc:ut.serialize(u),value:d,updatedBy:h};await w.entityFieldMeta.put(b)}async function S1(a,i){const c=xa(),u=await w.opLog.where("[entityType+entityId]").equals([a.entityType,a.entityId]).filter(b=>b.field===a.field&&b.createdBy===c.id).last(),d=await nh(a.createdBy),h={id:crypto.randomUUID(),entityType:a.entityType,entityId:a.entityId,conflictType:"profile_field",field:a.field,localOp:u,remoteOp:a,localValue:i.value,remoteValue:a.value,localDeviceName:c.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await w.conflictQueue.add(h),h}async function A1(a,i,c){const u=xa(),d=await nh(a.createdBy),h=await w.opLog.where("[entityType+entityId]").equals(["transaction",a.entityId]).filter(g=>g.createdBy===u.id).last(),b={id:crypto.randomUUID(),entityType:"transaction",entityId:a.entityId,conflictType:"money_event_version",localOp:h,remoteOp:a,localValue:i,remoteValue:a.value,localDeviceName:u.name,remoteDeviceName:d,detectedAt:new Date().toISOString(),status:"open"};return await w.conflictQueue.add(b),b}async function vp(a,i,c,u,d){const h=await w.moneyEventVersions.where("transactionId").equals(a).count(),b={id:crypto.randomUUID(),transactionId:a,version:h+1,hlc:ut.serialize(c),data:i,isActive:d,createdBy:u,createdAt:new Date().toISOString()};return await w.moneyEventVersions.add(b),b}async function nh(a){return(await w.trustedPeers.get(a))?.name||"Unknown Device"}async function D1(a){const i=[...a].sort((h,b)=>h.hlc.localeCompare(b.hlc));let c=0,u=0;const d=[];for(const h of i){const b=await lu(h);b.applied?c++:b.skipped&&u++,b.conflict&&d.push(b.conflict)}return{applied:c,skipped:u,conflicts:d}}async function ah(a){const i=xa();return w.opLog.where("hlc").above(a).filter(c=>c.createdBy===i.id).sortBy("hlc")}const N1=Object.freeze(Object.defineProperty({__proto__:null,applyOp:lu,applyOps:D1,captureOp:ki,getLocalDevice:xa,getLocalOpsSince:ah,getOrCreateLocalDevice:Wp},Symbol.toStringTag,{value:"Module"}));async function M1(a,i){await ki({entityType:a,entityId:i.id,opType:"create",value:i})}async function ko(a,i,c,u){for(const[d,h]of Object.entries(c))d==="id"||d==="createdAt"||await ki({entityType:a,entityId:i,opType:"update",field:d,value:h,previousValue:u?u[d]:void 0})}async function C1(a,i){await ki({entityType:a,entityId:i,opType:"delete"})}async function E1(a,i){await ki({entityType:a,entityId:i,opType:"archive",value:new Date().toISOString()})}sn.list.bind(sn),sn.get.bind(sn);pn.list.bind(pn),pn.get.bind(pn);lt.list.bind(lt),lt.get.bind(lt),lt.getOverviewTotals.bind(lt),lt.getOverviewTotalsByCurrency.bind(lt),lt.getAttentionReceivables.bind(lt);or.list.bind(or),or.get.bind(or);ur.list.bind(ur),ur.getLatest.bind(ur);const T1={list:at.list.bind(at),get:at.get.bind(at),getDefault:at.getDefault.bind(at),async create(a){const i=await at.create(a);return await M1("businessProfile",i),i},async update(a,i){const c=await at.get(a);await at.update(a,i),await ko("businessProfile",a,i,c)},async setDefault(a){const c=(await at.list()).find(d=>d.isDefault);await at.setDefault(a),c&&c.id!==a&&await ko("businessProfile",c.id,{isDefault:!1},c);const u=await at.get(a);u&&await ko("businessProfile",a,{isDefault:!0},{...u,isDefault:!1})},async archive(a){await at.archive(a),await E1("businessProfile",a)},async delete(a){await at.delete(a),await C1("businessProfile",a)}};Ut.list.bind(Ut),Ut.get.bind(Ut),Ut.getByNumber.bind(Ut);function Ll(a){a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]}),a.invalidateQueries({queryKey:["overviewTotals"]}),a.invalidateQueries({queryKey:["overviewTotalsByCurrency"]}),a.invalidateQueries({queryKey:["attentionReceivables"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}const dt={transactions:a=>["transactions",a],transaction:a=>["transaction",a],overviewTotals:(a,i,c)=>["overviewTotals",{dateFrom:a,dateTo:i,currency:c}],overviewTotalsByCurrency:(a,i)=>["overviewTotalsByCurrency",{dateFrom:a,dateTo:i}],attentionReceivables:a=>["attentionReceivables",{currency:a}],clients:()=>["clients"],client:a=>["client",a],clientSummaries:(a,i)=>["clientSummaries",{currency:a,search:i}],clientSummary:(a,i,c,u)=>["clientSummary",a,{dateFrom:i,dateTo:c,currency:u}],projects:a=>["projects",{clientId:a}],project:a=>["project",a],projectSummaries:(a,i,c)=>["projectSummaries",{currency:a,search:i,field:c}],projectSummary:(a,i,c,u)=>["projectSummary",a,{dateFrom:i,dateTo:c,currency:u}],categories:a=>["categories",{kind:a}],settings:()=>["settings"],fxRate:(a,i)=>["fxRate",a,i],documents:a=>["documents",a],document:a=>["document",a],documentSequences:a=>["documentSequences",a],businessProfiles:()=>["businessProfiles"],businessProfile:a=>["businessProfile",a],defaultBusinessProfile:()=>["defaultBusinessProfile"]};function lh(a){return fe({queryKey:dt.transactions(a),queryFn:()=>lt.list(a)})}function xp(a){return fe({queryKey:dt.transaction(a),queryFn:()=>lt.get(a),enabled:!!a})}function R1(a,i,c){return fe({queryKey:dt.overviewTotals(a,i,c),queryFn:()=>lt.getOverviewTotals({dateFrom:a,dateTo:i,currency:c})})}function _1(a,i){return fe({queryKey:dt.overviewTotalsByCurrency(a,i),queryFn:()=>lt.getOverviewTotalsByCurrency({dateFrom:a,dateTo:i})})}function I1(a){return fe({queryKey:dt.attentionReceivables(a),queryFn:()=>lt.getAttentionReceivables({currency:a})})}function O1(){const a=ce();return oe({mutationFn:i=>lt.create(i),onSuccess:()=>Ll(a)})}function z1(){const a=ce();return oe({mutationFn:({id:i,data:c})=>lt.update(i,c),onSuccess:()=>Ll(a)})}function U1(){const a=ce();return oe({mutationFn:i=>lt.markPaid(i),onSuccess:()=>Ll(a)})}function L1(){const a=ce();return oe({mutationFn:i=>lt.softDelete(i),onSuccess:()=>Ll(a)})}function xr(){return fe({queryKey:dt.clients(),queryFn:()=>sn.list()})}function B1(a){return fe({queryKey:dt.client(a),queryFn:()=>sn.get(a),enabled:!!a})}function Gj(a,i){return fe({queryKey:dt.clientSummaries(a,i),queryFn:()=>Xp.list({currency:a,search:i})})}function Zj(a,i){return fe({queryKey:dt.clientSummary(a,i?.dateFrom,i?.dateTo,i?.currency),queryFn:()=>Xp.get(a,i),enabled:!!a})}function q1(){const a=ce();return oe({mutationFn:i=>sn.create(i),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function k1(){const a=ce();return oe({mutationFn:({id:i,data:c})=>sn.update(i,c),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["client"]}),a.invalidateQueries({queryKey:["clientSummaries"]}),a.invalidateQueries({queryKey:["clientSummary"]})}})}function H1(){const a=ce();return oe({mutationFn:i=>sn.archive(i),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function ih(a){return fe({queryKey:dt.projects(a),queryFn:()=>pn.list({clientId:a})})}function Q1(a){return fe({queryKey:dt.project(a),queryFn:()=>pn.get(a),enabled:!!a})}function Xj(a,i,c){return fe({queryKey:dt.projectSummaries(a,i,c),queryFn:()=>Zp.list({currency:a,search:i,field:c})})}function Jj(a,i){return fe({queryKey:dt.projectSummary(a,i?.dateFrom,i?.dateTo,i?.currency),queryFn:()=>Zp.get(a,i),enabled:!!a})}function V1(){const a=ce();return oe({mutationFn:i=>pn.create(i),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function Y1(){const a=ce();return oe({mutationFn:({id:i,data:c})=>pn.update(i,c),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["project"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["projectSummary"]})}})}function P1(){const a=ce();return oe({mutationFn:i=>pn.archive(i),onSuccess:()=>{a.invalidateQueries({queryKey:["projects"]}),a.invalidateQueries({queryKey:["projectSummaries"]}),a.invalidateQueries({queryKey:["clientSummaries"]})}})}function $j(){return fe({queryKey:dt.settings(),queryFn:()=>Jp.get()})}function Wj(){const a=ce();return oe({mutationFn:Jp.update,onSuccess:()=>{a.invalidateQueries({queryKey:["settings"]})}})}function Bl(a){a.invalidateQueries({queryKey:["documents"]}),a.invalidateQueries({queryKey:["document"]})}function K1(a){return fe({queryKey:dt.documents(a),queryFn:()=>Ut.list(a)})}function bp(a){return fe({queryKey:dt.document(a),queryFn:()=>Ut.get(a),enabled:!!a})}function F1(){const a=ce();return oe({mutationFn:i=>Ut.create(i),onSuccess:()=>{Bl(a),Ll(a)}})}function G1(){const a=ce();return oe({mutationFn:({id:i,data:c})=>Ut.update(i,c),onSuccess:()=>Bl(a)})}function ew(){const a=ce();return oe({mutationFn:i=>Ut.markPaid(i),onSuccess:()=>{Bl(a),Ll(a)}})}function Z1(){const a=ce();return oe({mutationFn:i=>Ut.markVoided(i),onSuccess:()=>Bl(a)})}function tw(){const a=ce();return oe({mutationFn:i=>Ut.markIssued(i),onSuccess:()=>Bl(a)})}function X1(){const a=ce();return oe({mutationFn:i=>Ut.softDelete(i),onSuccess:()=>Bl(a)})}function br(a){a.invalidateQueries({queryKey:["businessProfiles"]}),a.invalidateQueries({queryKey:["businessProfile"]}),a.invalidateQueries({queryKey:["defaultBusinessProfile"]})}function Hi(){return fe({queryKey:dt.businessProfiles(),queryFn:()=>at.list()})}function J1(a){return fe({queryKey:dt.businessProfile(a),queryFn:()=>at.get(a),enabled:!!a})}function sh(){return fe({queryKey:dt.defaultBusinessProfile(),queryFn:()=>at.getDefault()})}function rh(){const a=ce();return oe({mutationFn:i=>at.create(i),onSuccess:()=>br(a)})}function $1(){const a=ce();return oe({mutationFn:({id:i,data:c})=>at.update(i,c),onSuccess:()=>br(a)})}function W1(){const a=ce();return oe({mutationFn:i=>at.setDefault(i),onSuccess:()=>br(a)})}function ex(){const a=ce();return oe({mutationFn:i=>T1.archive(i),onSuccess:()=>br(a)})}function nw(a){return fe({queryKey:dt.documentSequences(a),queryFn:()=>au.listByBusinessProfile(a),enabled:!!a})}function aw(){const a=ce();return oe({mutationFn:({businessProfileId:i,documentType:c,updates:u})=>au.update(i,c,u),onSuccess:()=>{a.invalidateQueries({queryKey:["documentSequences"]})}})}const jp=a=>{let i;const c=new Set,u=(m,y)=>{const v=typeof m=="function"?m(i):m;if(!Object.is(v,i)){const j=i;i=y??(typeof v!="object"||v===null)?v:Object.assign({},i,v),c.forEach(D=>D(i,j))}},d=()=>i,g={setState:u,getState:d,getInitialState:()=>p,subscribe:m=>(c.add(m),()=>c.delete(m))},p=i=a(u,d,g);return g},tx=(a=>a?jp(a):jp),nx=a=>a;function ax(a,i=nx){const c=Ve.useSyncExternalStore(a.subscribe,Ve.useCallback(()=>i(a.getState()),[a,i]),Ve.useCallback(()=>i(a.getInitialState()),[a,i]));return Ve.useDebugValue(c),c}const wp=a=>{const i=tx(a),c=u=>ax(i,u);return Object.assign(c,i),c},jr=(a=>a?wp(a):wp),yt=jr(a=>({transactionDrawer:{isOpen:!1,mode:"create"},openTransactionDrawer:i=>a({transactionDrawer:{isOpen:!0,mode:i?.mode||"create",transactionId:i?.transactionId,defaultKind:i?.defaultKind,defaultClientId:i?.defaultClientId,defaultProjectId:i?.defaultProjectId,duplicateFromId:i?.duplicateFromId}}),closeTransactionDrawer:()=>a({transactionDrawer:{isOpen:!1,mode:"create"}}),clientDrawer:{isOpen:!1,mode:"create"},openClientDrawer:i=>a({clientDrawer:{isOpen:!0,mode:i?.mode||"create",clientId:i?.clientId}}),closeClientDrawer:()=>a({clientDrawer:{isOpen:!1,mode:"create"}}),projectDrawer:{isOpen:!1,mode:"create"},openProjectDrawer:i=>a({projectDrawer:{isOpen:!0,mode:i?.mode||"create",projectId:i?.projectId,defaultClientId:i?.defaultClientId}}),closeProjectDrawer:()=>a({projectDrawer:{isOpen:!1,mode:"create"}}),documentDrawer:{isOpen:!1,mode:"create"},openDocumentDrawer:i=>a({documentDrawer:{isOpen:!0,mode:i?.mode||"create",documentId:i?.documentId,defaultType:i?.defaultType,defaultClientId:i?.defaultClientId,defaultBusinessProfileId:i?.defaultBusinessProfileId,refDocumentId:i?.refDocumentId}}),closeDocumentDrawer:()=>a({documentDrawer:{isOpen:!1,mode:"create"}}),businessProfileDrawer:{isOpen:!1,mode:"create"},openBusinessProfileDrawer:i=>a({businessProfileDrawer:{isOpen:!0,mode:i?.mode||"create",profileId:i?.profileId}}),closeBusinessProfileDrawer:()=>a({businessProfileDrawer:{isOpen:!1,mode:"create"}}),expenseDrawer:{isOpen:!1,mode:"create"},openExpenseDrawer:i=>a({expenseDrawer:{isOpen:!0,mode:i?.mode||"create",expenseId:i?.expenseId,recurringRuleId:i?.recurringRuleId,defaultProfileId:i?.defaultProfileId,isRecurring:i?.isRecurring,prefillData:i?.prefillData,linkReceiptId:i?.linkReceiptId}}),closeExpenseDrawer:()=>a({expenseDrawer:{isOpen:!1,mode:"create"}}),retainerDrawer:{isOpen:!1,mode:"create"},openRetainerDrawer:i=>a({retainerDrawer:{isOpen:!0,mode:i?.mode||"create",retainerId:i?.retainerId,defaultProfileId:i?.defaultProfileId,defaultClientId:i?.defaultClientId,defaultProjectId:i?.defaultProjectId}}),closeRetainerDrawer:()=>a({retainerDrawer:{isOpen:!1,mode:"create"}}),retainerMatchingDrawer:{isOpen:!1,step:"select-transaction"},openRetainerMatchingDrawer:i=>a({retainerMatchingDrawer:{isOpen:!0,step:i?.step||"select-transaction",transactionId:i?.transactionId,projectedIncomeId:i?.projectedIncomeId}}),closeRetainerMatchingDrawer:()=>a({retainerMatchingDrawer:{isOpen:!1,step:"select-transaction",transactionId:void 0,projectedIncomeId:void 0}}),setRetainerMatchingStep:i=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,step:i}})),setRetainerMatchingTransaction:i=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,transactionId:i,step:"select-projected"}})),setRetainerMatchingProjectedIncome:i=>a(c=>({retainerMatchingDrawer:{...c.retainerMatchingDrawer,projectedIncomeId:i}})),selectedRetainerId:void 0,selectRetainer:i=>a({selectedRetainerId:i}),dayDetailDrawer:{isOpen:!1},openDayDetailDrawer:i=>a({dayDetailDrawer:{isOpen:!0,date:i.date}}),closeDayDetailDrawer:()=>a({dayDetailDrawer:{isOpen:!1,date:void 0}})}));jr(a=>({currency:void 0,setCurrency:i=>a({currency:i})}));function lx({collapsed:a=!1}){const i=Fe(),[c,u]=O.useState(!1),d=O.useRef(null),{data:h=[],isLoading:b}=Hi(),{data:g,isLoading:p}=sh(),m=W1(),{openBusinessProfileDrawer:y}=yt(),v=b||p;O.useEffect(()=>{function E(_){d.current&&!d.current.contains(_.target)&&u(!1)}return c&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[c]),O.useEffect(()=>{function E(_){_.key==="Escape"&&u(!1)}return c&&document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[c]);const j=E=>{m.mutate(E),u(!1)},D=()=>{y({mode:"create"}),u(!1)};if(v)return s.jsx("div",{className:"profile-switcher profile-switcher-loading",children:s.jsx("div",{className:"profile-switcher-skeleton"})});if(h.length===0)return s.jsxs("button",{className:`profile-switcher profile-switcher-empty ${a?"collapsed":""}`,onClick:D,title:a?i("profileSwitcher.setUpBusiness"):void 0,children:[s.jsx("div",{className:"profile-switcher-avatar profile-switcher-avatar-empty",children:s.jsx(Ap,{})}),!a&&s.jsx("span",{className:"profile-switcher-name",children:i("profileSwitcher.setUpBusiness")})]});const A=g||h[0];return s.jsxs("div",{className:`profile-switcher-container ${a?"collapsed":""}`,ref:d,children:[s.jsxs("button",{className:`profile-switcher ${a?"collapsed":""}`,onClick:()=>u(!c),"aria-expanded":c,"aria-haspopup":"listbox",title:a?A.name:void 0,children:[s.jsx(Sp,{profile:A}),!a&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"profile-switcher-name",children:A.name}),s.jsx(ix,{className:c?"rotated":""})]})]}),c&&s.jsxs("div",{className:`profile-switcher-dropdown ${a?"collapsed-dropdown":""}`,role:"listbox",children:[s.jsx("div",{className:"profile-switcher-list",children:h.map(E=>s.jsxs("button",{className:`profile-switcher-option ${E.id===A.id?"active":""}`,onClick:()=>j(E.id),role:"option","aria-selected":E.id===A.id,children:[s.jsx(Sp,{profile:E,size:"small"}),s.jsxs("span",{className:"profile-switcher-option-name",children:[E.name,E.nameEn&&s.jsx("span",{className:"profile-switcher-option-name-en",children:E.nameEn})]}),E.id===A.id&&s.jsx(sx,{className:"profile-switcher-check"})]},E.id))}),s.jsx("div",{className:"profile-switcher-divider"}),s.jsxs("button",{className:"profile-switcher-action",onClick:D,children:[s.jsx(Ap,{}),i("profileSwitcher.addProfile")]}),s.jsxs(Li,{to:"/settings",className:"profile-switcher-action",onClick:()=>u(!1),children:[s.jsx(rx,{}),i("profileSwitcher.manageProfiles")]})]})]})}function Sp({profile:a,size:i="medium"}){const c=i==="small"?"profile-switcher-avatar-sm":"";if(a.logoDataUrl)return s.jsx("img",{src:a.logoDataUrl,alt:"",className:`profile-switcher-avatar ${c}`});const u=a.name.split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase();return s.jsx("div",{className:`profile-switcher-avatar profile-switcher-avatar-initials ${c}`,style:{backgroundColor:a.primaryColor||"var(--color-accent)"},children:u})}function ix({className:a}){return s.jsx("svg",{className:`profile-switcher-chevron ${a||""}`,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})}function sx({className:a}){return s.jsx("svg",{className:a,width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function Ap(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function rx(){return s.jsxs("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}const Dp="sidebarCollapsed";function cx(){const[a,i]=O.useState(()=>{try{return localStorage.getItem(Dp)==="1"}catch{return!1}}),c=O.useCallback(()=>{i(u=>{const d=!u;try{localStorage.setItem(Dp,d?"1":"0")}catch{}return d})},[]);return[a,c]}const ox=[{key:"work",labelKey:"nav.sections.work",items:[{path:"/",labelKey:"nav.overview",icon:mx,exact:!0},{path:"/projects",labelKey:"nav.projects",icon:px},{path:"/clients",labelKey:"nav.clients",icon:ch}]},{key:"money",labelKey:"nav.sections.money",items:[{path:"/transactions",labelKey:"nav.transactions",icon:oh},{path:"/documents",labelKey:"nav.documents",icon:uh},{path:"/retainers",labelKey:"nav.retainers",icon:gx},{path:"/money-answers",labelKey:"nav.moneyAnswers",icon:jx},{path:"/expenses",labelKey:"nav.expenses",icon:dh},{path:"/reports",labelKey:"nav.reports",icon:hx}]}],ux=[{path:"/download",labelKey:"nav.download",icon:yx},{path:"/settings",labelKey:"nav.settings",icon:vx,badge:"hasUpdate"}],dx=[{key:"document",labelKey:"nav.newMenu.document",icon:uh},{key:"transaction",labelKey:"nav.newMenu.transaction",icon:oh},{key:"client",labelKey:"nav.newMenu.client",icon:ch},{key:"expense",labelKey:"nav.newMenu.expense",icon:dh}];function fx(){const a=hv(),i=tu(),c=Fe(),{hasUpdate:u}=i1(),[d,h]=cx(),[b,g]=O.useState(!1),p=O.useRef(null),m=O.useRef(null),y=yt(U=>U.openDocumentDrawer),v=yt(U=>U.openTransactionDrawer),j=yt(U=>U.openClientDrawer),D=yt(U=>U.openExpenseDrawer);O.useEffect(()=>{if(!b)return;function U(k){p.current&&!p.current.contains(k.target)&&m.current&&!m.current.contains(k.target)&&g(!1)}function M(k){k.key==="Escape"&&(g(!1),m.current?.focus())}return document.addEventListener("mousedown",U),document.addEventListener("keydown",M),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",M)}},[b]);const A=U=>U.exact?a.pathname===U.path:a.pathname===U.path||a.pathname.startsWith(U.path+"/"),E=U=>{switch(g(!1),U){case"document":y({mode:"create"}),i({to:"/documents"});break;case"transaction":v({mode:"create",defaultKind:"income"});break;case"client":j({mode:"create"});break;case"expense":D({mode:"create"}),i({to:"/expenses"});break}},_=(U,M=!1)=>{const k=U.icon,K=A(U),$=M&&U.badge==="hasUpdate"&&u;return s.jsxs(Li,{to:U.path,className:se("nav-item",K&&"active"),"aria-current":K?"page":void 0,title:d?c(U.labelKey):void 0,children:[K&&s.jsx("span",{className:"nav-item-rail","aria-hidden":"true"}),s.jsxs("span",{className:"nav-item-icon-wrapper",children:[s.jsx(k,{className:"nav-icon"}),d&&$&&s.jsx("span",{className:"nav-item-dot","aria-label":c("settings.updates.updateAvailable")})]}),!d&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"nav-item-label",children:c(U.labelKey)}),$&&s.jsx("span",{className:"update-indicator"})]})]},U.path)},L=U=>s.jsxs("div",{className:"nav-section",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c(U.labelKey)}),s.jsx("div",{className:"nav-section-items",children:U.items.map(M=>_(M))})]},U.key);return s.jsxs("aside",{className:se("sidebar",d&&"collapsed"),children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsxs(Li,{to:"/",className:"brand","aria-label":"",children:[s.jsx("img",{className:"brand-mark",src:"/icons/icon-512.png",srcSet:"/icons/icon-512.png 1x, /icons/icon-1024.png 2x",alt:"",width:28,height:28,loading:"eager",decoding:"async"}),!d&&s.jsx("span",{className:"brand-name",lang:"ar",dir:"rtl",children:""})]}),s.jsx("button",{type:"button",className:"sidebar-collapse-toggle",onClick:h,"aria-label":c(d?"nav.expand":"nav.collapse"),title:c(d?"nav.expand":"nav.collapse"),children:s.jsx(xx,{className:se("nav-icon",d&&"rotated")})})]}),s.jsx("div",{className:"sidebar-profile",children:s.jsx(lx,{collapsed:d})}),s.jsxs("div",{className:"new-action-section",children:[s.jsxs("button",{ref:m,type:"button",className:se("new-action-btn",b&&"active"),onClick:()=>g(!b),title:d?c("nav.new"):void 0,"aria-expanded":b,"aria-haspopup":"menu",children:[s.jsx(bx,{className:"nav-icon"}),!d&&s.jsx("span",{className:"new-action-label",children:c("nav.new")})]}),b&&s.jsx("div",{ref:p,className:se("new-action-menu",d&&"collapsed-menu"),role:"menu",children:dx.map(U=>{const M=U.icon;return s.jsxs("button",{type:"button",className:"new-action-menu-item",role:"menuitem",onClick:()=>E(U.key),children:[s.jsx(M,{className:"nav-icon"}),s.jsx("span",{children:c(U.labelKey)})]},U.key)})})]}),s.jsx("nav",{className:"sidebar-nav",children:ox.map(L)}),s.jsxs("div",{className:"sidebar-footer",children:[!d&&s.jsx("div",{className:"nav-section-header",children:c("nav.sections.system")}),ux.map(U=>_(U,!0))]}),d&&s.jsx("button",{type:"button",className:"sidebar-expand-toggle",onClick:h,"aria-label":c("nav.expand"),title:c("nav.expand"),children:s.jsx(wx,{className:"nav-icon"})})]})}function mx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}function px({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function ch({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})})}function oh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}function hx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})})}function uh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function dh({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})})}function yx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}function gx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})}function vx({className:a}){return s.jsxs("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}function xx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}function bx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function jx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})})}function wx({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})})}const Np=(a,i,c)=>{if(a&&"reportValidity"in a){const u=Vo(c,i);a.setCustomValidity(u&&u.message||""),a.reportValidity()}},Xo=(a,i)=>{for(const c in i.fields){const u=i.fields[c];u&&u.ref&&"reportValidity"in u.ref?Np(u.ref,c,a):u&&u.refs&&u.refs.forEach(d=>Np(d,c,a))}},Mp=(a,i)=>{i.shouldUseNativeValidation&&Xo(a,i);const c={};for(const u in a){const d=Vo(i.fields,u),h=Object.assign(a[u]||{},{ref:d&&d.ref});if(Sx(i.names||Object.keys(a),u)){const b=Object.assign({},Vo(c,u));zo(b,"root",h),zo(c,u,b)}else zo(c,u,h)}return c},Sx=(a,i)=>{const c=Cp(i);return a.some(u=>Cp(u).match(`^${c}\\.\\d+`))};function Cp(a){return a.replace(/\]|\[/g,"")}function Ep(a,i){try{var c=a()}catch(u){return i(u)}return c&&c.then?c.then(void 0,i):c}function Ax(a,i){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,b=u.path.join(".");if(!c[b])if("unionErrors"in u){var g=u.unionErrors[0].errors[0];c[b]={message:g.message,type:g.code}}else c[b]={message:h,type:d};if("unionErrors"in u&&u.unionErrors.forEach(function(y){return y.errors.forEach(function(v){return a.push(v)})}),i){var p=c[b].types,m=p&&p[u.code];c[b]=Vp(b,i,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Dx(a,i){for(var c={};a.length;){var u=a[0],d=u.code,h=u.message,b=u.path.join(".");if(!c[b])if(u.code==="invalid_union"&&u.errors.length>0){var g=u.errors[0][0];c[b]={message:g.message,type:g.code}}else c[b]={message:h,type:d};if(u.code==="invalid_union"&&u.errors.forEach(function(y){return y.forEach(function(v){return a.push(v)})}),i){var p=c[b].types,m=p&&p[u.code];c[b]=Vp(b,i,c,d,m?[].concat(m,u.message):u.message)}a.shift()}return c}function Ya(a,i,c){if(c===void 0&&(c={}),(function(u){return"_def"in u&&typeof u._def=="object"&&"typeName"in u._def})(a))return function(u,d,h){try{return Promise.resolve(Ep(function(){return Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](u,i)).then(function(b){return h.shouldUseNativeValidation&&Xo({},h),{errors:{},values:c.raw?Object.assign({},u):b}})},function(b){if((function(g){return Array.isArray(g?.issues)})(b))return{values:{},errors:Mp(Ax(b.errors,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw b}))}catch(b){return Promise.reject(b)}};if((function(u){return"_zod"in u&&typeof u._zod=="object"})(a))return function(u,d,h){try{return Promise.resolve(Ep(function(){return Promise.resolve((c.mode==="sync"?Dv:Nv)(a,u,i)).then(function(b){return h.shouldUseNativeValidation&&Xo({},h),{errors:{},values:c.raw?Object.assign({},u):b}})},function(b){if((function(g){return g instanceof Mv})(b))return{values:{},errors:Mp(Dx(b.issues,!h.shouldUseNativeValidation&&h.criteriaMode==="all"),h)};throw b}))}catch(b){return Promise.reject(b)}};throw new Error("Invalid input: not a Zod schema")}function At({title:a,onClose:i,children:c,footer:u}){return O.useEffect(()=>{function d(h){h.key==="Escape"&&i()}return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-overlay",onClick:i}),s.jsxs("div",{className:"drawer",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"drawer-header",children:[s.jsx("h2",{className:"drawer-title",children:a}),s.jsx("button",{className:"drawer-close",onClick:i,"aria-label":"Close",children:s.jsx(Nx,{})})]}),s.jsx("div",{className:"drawer-body",children:c}),u&&s.jsx("div",{className:"drawer-footer",children:u})]})]})}function Nx(){return s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}let Mx=0;const fh=jr(a=>({toasts:[],addToast:i=>{const c=`toast-${++Mx}`;return a(u=>({toasts:[...u.toasts,{...i,id:c}]})),c},removeToast:i=>{a(c=>({toasts:c.toasts.filter(u=>u.id!==i)}))}}));function Cx(){const{addToast:a,removeToast:i}=fh();return{showToast:(u,d)=>{const h=d?.duration??(d?.action?5e3:3e3);return a({message:u,action:d?.action,duration:h})},removeToast:i}}const Ex=Vn({type:St(["income","receivable","expense"]),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),occurredAt:te().min(1,"Date is required"),clientId:te().optional(),projectId:te().optional(),dueDate:te().optional(),title:te().optional(),notes:te().optional()});function Tx(){const{transactionDrawer:a,closeTransactionDrawer:i}=yt(),{mode:c,transactionId:u,defaultKind:d,defaultClientId:h,defaultProjectId:b,duplicateFromId:g}=a,p=Fe(),{showToast:m}=Cx(),{data:y,isLoading:v}=xp(u||""),{data:j}=xp(g||""),{data:D=[]}=xr(),{data:A=[]}=ih(),E=O1(),_=z1(),L=L1(),U=()=>y?y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income":d==="expense"?"expense":"income",M=Qa({resolver:Ya(Ex),defaultValues:{type:U(),amount:"",currency:"USD",occurredAt:Qn(),clientId:h||"",projectId:b||"",dueDate:"",title:"",notes:""}}),{watch:k,setValue:K,reset:$}=M,F=k("type"),X=k("clientId");O.useEffect(()=>{if(y){const ie=y.kind==="expense"?"expense":y.status==="unpaid"?"receivable":"income";$({type:ie,amount:(y.amountMinor/100).toString(),currency:y.currency,occurredAt:y.occurredAt.split("T")[0],clientId:y.clientId||"",projectId:y.projectId||"",dueDate:y.dueDate||"",title:y.title||"",notes:y.notes||""})}},[y,$]),O.useEffect(()=>{if(g&&j&&c==="create"){const ie=j.kind==="expense"?"expense":"receivable";$({type:ie,amount:(j.amountMinor/100).toString(),currency:j.currency,occurredAt:Qn(),clientId:j.clientId||"",projectId:j.projectId||"",dueDate:"",title:j.title||"",notes:j.notes||""})}},[g,j,c,$]);const ue=X?A.filter(ie=>ie.clientId===X):A,he=async ie=>{const ye=ie.type==="expense"?"expense":"income",ge=ie.type==="receivable"?"unpaid":"paid",B={kind:ye,status:ge,title:ie.title||void 0,clientId:ie.clientId||void 0,projectId:ie.projectId||void 0,amountMinor:zl(ie.amount),currency:ie.currency,occurredAt:new Date(ie.occurredAt).toISOString(),dueDate:ie.type==="receivable"&&ie.dueDate?ie.dueDate:void 0,paidAt:ge==="paid"?new Date().toISOString():void 0,notes:ie.notes||void 0};try{if(c==="edit"&&u)await _.mutateAsync({id:u,data:B});else{const Y=await E.mutateAsync(B);g&&Y&&m(p("toast.transactionDuplicated"),{action:{label:p("common.undo"),onClick:()=>{L.mutate(Y.id)}},duration:5e3})}i()}catch(Y){console.error("Failed to save transaction:",Y)}},ne=async()=>{if(u&&confirm(p("transactions.confirmDelete")))try{await L.mutateAsync(u),i()}catch(ie){console.error("Failed to delete transaction:",ie)}},ve=E.isPending||_.isPending;return c==="edit"&&v?s.jsx(At,{title:p("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:p(c==="edit"?"drawer.transaction.edit":"drawer.transaction.new"),onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:ne,disabled:L.isPending,children:p("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:p("common.cancel")}),s.jsx("button",{type:"submit",form:"transaction-form",className:"btn btn-primary",disabled:ve,children:p(ve?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"transaction-form",onSubmit:M.handleSubmit(he),children:[s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="income"&&"active"),onClick:()=>K("type","income"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeIncome")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeIncomeDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="receivable"&&"active"),onClick:()=>K("type","receivable"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeReceivable")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeReceivableDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",F==="expense"&&"active"),onClick:()=>K("type","expense"),children:[s.jsx("span",{className:"type-selector-label",children:p("drawer.transaction.typeExpense")}),s.jsx("span",{className:"type-selector-hint",children:p("drawer.transaction.typeExpenseDesc")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",M.formState.errors.amount&&"input-error"),placeholder:p("drawer.transaction.amountPlaceholder"),...M.register("amount")}),M.formState.errors.amount&&s.jsx("p",{className:"form-error",children:p("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.currency")," *"]}),s.jsx(Ie,{name:"currency",control:M.control,render:({field:ie})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ie,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[p("drawer.transaction.date")," *"]}),s.jsx("input",{type:"date",className:se("input",M.formState.errors.occurredAt&&"input-error"),...M.register("occurredAt")})]}),F==="receivable"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.dueDate")}),s.jsx("input",{type:"date",className:"input",...M.register("dueDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.client")}),s.jsx(Ie,{name:"clientId",control:M.control,render:({field:ie})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ie,children:[s.jsx("option",{value:"",children:p("drawer.transaction.clientPlaceholder")}),D.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.project")}),s.jsx(Ie,{name:"projectId",control:M.control,render:({field:ie})=>s.jsxs("select",{className:"select",style:{width:"100%"},...ie,children:[s.jsx("option",{value:"",children:p("drawer.transaction.projectPlaceholder")}),ue.map(ye=>s.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.title")}),s.jsx("input",{type:"text",className:"input",placeholder:p("drawer.transaction.titlePlaceholder"),...M.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:p("drawer.transaction.notes")}),s.jsx("textarea",{className:"textarea",placeholder:p("drawer.transaction.notesPlaceholder"),...M.register("notes")})]})]})})}const Rx=Vn({name:te().min(1,"Name is required"),email:te().email("Invalid email").optional().or(Cv("")),phone:te().optional(),notes:te().optional()});function _x(){const{clientDrawer:a,closeClientDrawer:i}=yt(),{mode:c,clientId:u}=a,d=Fe(),{data:h,isLoading:b}=B1(u||""),g=q1(),p=k1(),m=H1(),y=Qa({resolver:Ya(Rx),defaultValues:{name:"",email:"",phone:"",notes:""}});O.useEffect(()=>{h&&y.reset({name:h.name,email:h.email||"",phone:h.phone||"",notes:h.notes||""})},[h,y]);const v=async A=>{const E={name:A.name,email:A.email||void 0,phone:A.phone||void 0,notes:A.notes||void 0};try{c==="edit"&&u?await p.mutateAsync({id:u,data:E}):await g.mutateAsync(E),i()}catch(_){console.error("Failed to save client:",_)}},j=async()=>{if(u&&confirm(d("clients.confirmArchive")))try{await m.mutateAsync(u),i()}catch(A){console.error("Failed to archive client:",A)}},D=g.isPending||p.isPending;return c==="edit"&&b?s.jsx(At,{title:d("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:d(c==="edit"?"drawer.client.edit":"drawer.client.new"),onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:j,disabled:m.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"client-form",className:"btn btn-primary",disabled:D,children:d(D?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"client-form",onSubmit:y.handleSubmit(v),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[d("drawer.client.name")," *"]}),s.jsx("input",{type:"text",className:se("input",y.formState.errors.name&&"input-error"),placeholder:d("drawer.client.namePlaceholder"),...y.register("name")}),y.formState.errors.name&&s.jsx("p",{className:"form-error",children:d("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.email")}),s.jsx("input",{type:"email",className:se("input",y.formState.errors.email&&"input-error"),placeholder:d("drawer.client.emailPlaceholder"),...y.register("email")}),y.formState.errors.email&&s.jsx("p",{className:"form-error",children:y.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.phone")}),s.jsx("input",{type:"tel",className:"input",placeholder:d("drawer.client.phonePlaceholder"),...y.register("phone")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:d("drawer.client.notes")}),s.jsx("textarea",{className:"textarea",placeholder:d("drawer.client.notesPlaceholder"),...y.register("notes")})]})]})})}const Ix=["design","development","consulting","marketing","legal","maintenance","other"],Ox=Vn({name:te().min(1,"Name is required"),clientId:te().optional(),field:te().optional(),notes:te().optional()});function zx(){const{projectDrawer:a,closeProjectDrawer:i}=yt(),{mode:c,projectId:u,defaultClientId:d}=a,h=Fe(),{data:b,isLoading:g}=Q1(u||""),{data:p=[]}=xr(),m=V1(),y=Y1(),v=P1(),j=Qa({resolver:Ya(Ox),defaultValues:{name:"",clientId:d||"",field:"",notes:""}});O.useEffect(()=>{b&&j.reset({name:b.name,clientId:b.clientId||"",field:b.field||"",notes:b.notes||""})},[b,j]);const D=async _=>{const L={name:_.name,clientId:_.clientId||void 0,field:_.field||void 0,notes:_.notes||void 0};try{c==="edit"&&u?await y.mutateAsync({id:u,data:L}):await m.mutateAsync(L),i()}catch(U){console.error("Failed to save project:",U)}},A=async()=>{if(u&&confirm(h("projects.confirmArchive")))try{await v.mutateAsync(u),i()}catch(_){console.error("Failed to archive project:",_)}},E=m.isPending||y.isPending;return c==="edit"&&g?s.jsx(At,{title:h("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:h(c==="edit"?"drawer.project.edit":"drawer.project.new"),onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:A,disabled:v.isPending,children:h("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:h("common.cancel")}),s.jsx("button",{type:"submit",form:"project-form",className:"btn btn-primary",disabled:E,children:h(E?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"project-form",onSubmit:j.handleSubmit(D),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[h("drawer.project.name")," *"]}),s.jsx("input",{type:"text",className:se("input",j.formState.errors.name&&"input-error"),placeholder:h("drawer.project.namePlaceholder"),...j.register("name")}),j.formState.errors.name&&s.jsx("p",{className:"form-error",children:h("validation.nameRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.client")}),s.jsx(Ie,{name:"clientId",control:j.control,render:({field:_})=>s.jsxs("select",{className:"select",style:{width:"100%"},..._,children:[s.jsx("option",{value:"",children:h("drawer.project.clientPlaceholder")}),p.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.field")}),s.jsx(Ie,{name:"field",control:j.control,render:({field:_})=>s.jsxs("select",{className:"select",style:{width:"100%"},..._,children:[s.jsx("option",{value:"",children:h("drawer.project.fieldPlaceholder")}),Ix.map(L=>{const U=L.charAt(0).toUpperCase()+L.slice(1);return s.jsx("option",{value:U,children:h(`projects.fields.${L}`)},L)})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:h("drawer.project.notes")}),s.jsx("textarea",{className:"textarea",placeholder:h("drawer.project.notesPlaceholder"),...j.register("notes")})]})]})})}const Ux=Vn({name:te().min(1,"Business name is required"),nameEn:te().optional(),email:te().email("Invalid email"),phone:te().optional(),taxId:te().optional(),businessType:St(["exempt","authorized","company","lawyer","none"]),address1:te().optional(),address1En:te().optional(),city:te().optional(),cityEn:te().optional(),country:te().optional(),countryEn:te().optional(),postalCode:te().optional(),primaryColor:te().optional(),defaultCurrency:St(["USD","ILS"]),defaultLanguage:St(["ar","en"]),isDefault:nu()}),Lx=[{value:"none",label:"Individual / Freelancer"},{value:"exempt",label:"Exempt Dealer"},{value:"authorized",label:"Authorized Dealer"},{value:"company",label:"Company / Corporation"},{value:"lawyer",label:"Lawyer / Law Firm"}];function Bx(){const{businessProfileDrawer:a,closeBusinessProfileDrawer:i}=yt(),{mode:c,profileId:u}=a,d=Fe(),h=O.useRef(null),[b,g]=O.useState(null),{data:p,isLoading:m}=J1(u||""),y=rh(),v=$1(),j=ex(),D=Qa({resolver:Ya(Ux),defaultValues:{name:"",nameEn:"",email:"",phone:"",taxId:"",businessType:"none",address1:"",address1En:"",city:"",cityEn:"",country:"",countryEn:"",postalCode:"",primaryColor:"#3b82f6",defaultCurrency:"USD",defaultLanguage:"en",isDefault:!1}});O.useEffect(()=>{p&&(D.reset({name:p.name,nameEn:p.nameEn||"",email:p.email,phone:p.phone||"",taxId:p.taxId||"",businessType:p.businessType,address1:p.address1||"",address1En:p.address1En||"",city:p.city||"",cityEn:p.cityEn||"",country:p.country||"",countryEn:p.countryEn||"",postalCode:p.postalCode||"",primaryColor:p.primaryColor||"#3b82f6",defaultCurrency:p.defaultCurrency,defaultLanguage:p.defaultLanguage,isDefault:p.isDefault}),p.logoDataUrl&&g(p.logoDataUrl))},[p,D]);const A=U=>{const M=U.target.files?.[0];if(!M)return;const k=new FileReader;k.onloadend=()=>{const K=k.result;g(K)},k.readAsDataURL(M)},E=async U=>{const M={name:U.name,nameEn:U.nameEn||void 0,email:U.email,phone:U.phone||void 0,taxId:U.taxId||void 0,businessType:U.businessType,address1:U.address1||void 0,address1En:U.address1En||void 0,city:U.city||void 0,cityEn:U.cityEn||void 0,country:U.country||void 0,countryEn:U.countryEn||void 0,postalCode:U.postalCode||void 0,logoDataUrl:b||void 0,primaryColor:U.primaryColor||void 0,defaultCurrency:U.defaultCurrency,defaultLanguage:U.defaultLanguage,isDefault:U.isDefault};try{c==="edit"&&u?await v.mutateAsync({id:u,data:M}):await y.mutateAsync(M),i()}catch(k){console.error("Failed to save business profile:",k)}},_=async()=>{if(u&&confirm("Are you sure you want to archive this business profile?"))try{await j.mutateAsync(u),i()}catch(U){console.error("Failed to archive profile:",U)}},L=y.isPending||v.isPending;return c==="edit"&&m?s.jsx(At,{title:d("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})}):s.jsx(At,{title:c==="edit"?"Edit Business Profile":"New Business Profile",onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&!p?.isDefault&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:_,disabled:j.isPending,children:d("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:d("common.cancel")}),s.jsx("button",{type:"submit",form:"business-profile-form",className:"btn btn-primary",disabled:L,children:d(L?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"business-profile-form",onSubmit:D.handleSubmit(E),children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Logo"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[b?s.jsx("img",{src:b,alt:"Logo preview",style:{width:64,height:64,objectFit:"contain",borderRadius:4}}):s.jsx("div",{style:{width:64,height:64,backgroundColor:"var(--color-bg-secondary)",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-tertiary)",fontSize:12},children:"No logo"}),s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h.current?.click(),children:b?"Change":"Upload"}),b&&s.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>g(null),children:"Remove"})]}),s.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:A,style:{display:"none"}})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (Arabic) *"}),s.jsx("input",{type:"text",className:se("input",D.formState.errors.name&&"input-error"),placeholder:" ",dir:"rtl",...D.register("name")}),D.formState.errors.name&&s.jsx("p",{className:"form-error",children:D.formState.errors.name.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Name (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"Company Name",...D.register("nameEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Email *"}),s.jsx("input",{type:"email",className:se("input",D.formState.errors.email&&"input-error"),placeholder:"email@example.com",...D.register("email")}),D.formState.errors.email&&s.jsx("p",{className:"form-error",children:D.formState.errors.email.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Phone"}),s.jsx("input",{type:"tel",className:"input",placeholder:"+972 50 000 0000",...D.register("phone")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Type"}),s.jsx("select",{className:"select",...D.register("businessType"),children:Lx.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Tax ID"}),s.jsx("input",{type:"text",className:"input",placeholder:"Tax/VAT Number",...D.register("taxId")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...D.register("address1")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Address (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"123 Main St",...D.register("address1En")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (Arabic)"}),s.jsx("input",{type:"text",className:"input",placeholder:"",dir:"rtl",...D.register("city")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"City (English)"}),s.jsx("input",{type:"text",className:"input",placeholder:"City",...D.register("cityEn")})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Currency"}),s.jsxs("select",{className:"select",...D.register("defaultCurrency"),children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Default Language"}),s.jsxs("select",{className:"select",...D.register("defaultLanguage"),children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brand Color"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("input",{type:"color",style:{width:40,height:32,padding:0,border:"none",cursor:"pointer"},...D.register("primaryColor")}),s.jsx("input",{type:"text",className:"input",style:{width:120},placeholder:"#3b82f6",...D.register("primaryColor")})]})]}),s.jsx("div",{className:"form-group",children:s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",...D.register("isDefault")}),s.jsx("span",{children:"Set as default profile"})]})})]})})}const qx="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let kx=(a=21)=>{let i="",c=crypto.getRandomValues(new Uint8Array(a|=0));for(;a--;)i+=qx[c[a]&63];return i};const Hx=[{value:"invoice",label:"Invoice",labelAr:""},{value:"receipt",label:"Receipt",labelAr:""},{value:"invoice_receipt",label:"Invoice Receipt",labelAr:" "},{value:"credit_note",label:"Credit Note",labelAr:" "},{value:"price_offer",label:"Price Offer",labelAr:" "},{value:"proforma_invoice",label:"Proforma Invoice",labelAr:" "},{value:"donation_receipt",label:"Donation Receipt",labelAr:" "}],Qx=[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cheque",label:"Cheque"},{value:"credit_card",label:"Credit Card"},{value:"other",label:"Other"}],Vx=[{value:"template1",label:"Classic"},{value:"template2",label:"Modern"},{value:"template3",label:"Minimal"}],Yx=Vn({name:te().min(1,"Item name is required"),quantity:Ol().min(.01,"Quantity must be positive"),rateMinor:Ol().min(0,"Rate must be non-negative"),discountMinor:Ol().min(0).default(0),taxExempt:nu().default(!1)}),Px=Vn({id:te(),amountMinor:Ol().min(0),currency:St(["USD","ILS"]),method:St(["cash","bank_transfer","cheque","credit_card","other"]),notes:te().optional(),paidAt:te()}),Kx=Vn({type:St(["invoice","receipt","invoice_receipt","credit_note","price_offer","proforma_invoice","donation_receipt"]),number:te().optional(),businessProfileId:te().min(1,"Business profile is required"),clientId:te().optional(),subject:te().optional(),brief:te().optional(),notes:te().optional(),currency:St(["USD","ILS"]),language:St(["ar","en"]),templateId:te(),issueDate:te().min(1,"Issue date is required"),dueDate:te().optional(),taxRate:Ol().min(0).max(1),vatEnabled:nu().default(!0),items:op(Yx).min(1,"At least one item is required"),payments:op(Px).optional(),refDocumentId:te().optional()});function Ho(a){return a.quantity*a.rateMinor-a.discountMinor}function _l(a,i){return(a/100).toLocaleString("en-US",{style:"currency",currency:i,minimumFractionDigits:2})}function Fx(){const{documentDrawer:a,closeDocumentDrawer:i}=yt(),{mode:c,documentId:u,defaultType:d,defaultClientId:h,defaultBusinessProfileId:b,refDocumentId:g}=a,p=Fe(),{data:m,isLoading:y}=bp(u||""),{data:v=[]}=xr(),{data:j=[]}=Hi(),{data:D}=sh(),{data:A}=bp(g||""),{data:E=[]}=K1({}),_=F1(),L=G1(),U=X1(),M=Z1(),k=()=>m?m.businessProfileId:b||(D?D.id:j.length>0?j[0].id:""),K=Qa({resolver:Ya(Kx),defaultValues:{type:d||"invoice",number:"",businessProfileId:k(),clientId:h||"",subject:"",brief:"",notes:"",currency:"USD",language:"en",templateId:"template1",issueDate:Qn(),dueDate:"",taxRate:.18,vatEnabled:!0,items:[{name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1}],payments:[],refDocumentId:g||""}}),{watch:$,setValue:F,reset:X,control:ue}=K,he=$("type"),ne=$("currency"),ve=$("taxRate"),ie=$("vatEnabled"),ye=$("items"),ge=$("payments")||[],{fields:B,append:Y,remove:ae}=up({control:ue,name:"items"}),{fields:xe,append:G,remove:be}=up({control:ue,name:"payments"}),Z=JSON.stringify(ye),V=O.useMemo(()=>{const P=ye||[],de=P.reduce((un,Ue)=>un+Ho(Ue),0);let et=0;if(ie){const un=P.reduce((Ue,Pi)=>Pi.taxExempt?Ue:Ue+Ho(Pi),0);et=Math.round(un*ve)}const it=de+et;return{subtotal:de,tax:et,total:it}},[Z,ve,ie]),W=O.useMemo(()=>ge.reduce((P,de)=>P+(de.amountMinor||0),0),[ge]);O.useEffect(()=>{m&&X({type:m.type,number:m.number,businessProfileId:m.businessProfileId,clientId:m.clientId||"",subject:m.subject||"",brief:m.brief||"",notes:m.notes||"",currency:m.currency,language:m.language,templateId:m.templateId,issueDate:m.issueDate.split("T")[0],dueDate:m.dueDate||"",taxRate:m.taxRate,vatEnabled:m.vatEnabled??!0,items:m.items.map(P=>({name:P.name,quantity:P.quantity,rateMinor:P.rateMinor,discountMinor:P.discountMinor,taxExempt:P.taxExempt})),payments:m.payments.map(P=>({id:P.id,amountMinor:P.amountMinor,currency:P.currency,method:P.method,notes:P.notes||"",paidAt:P.paidAt.split("T")[0]})),refDocumentId:m.refDocumentId||""})},[m,X]),O.useEffect(()=>{const P=K.getValues("businessProfileId"),de=j.find(et=>et.id===P);de&&c==="create"&&!m&&(F("currency",de.defaultCurrency),F("language",de.defaultLanguage))},[K.watch("businessProfileId"),j,c,m,F]),O.useEffect(()=>{A&&c==="create"&&he==="credit_note"&&(F("businessProfileId",A.businessProfileId),F("clientId",A.clientId||""),F("currency",A.currency),F("language",A.language),F("templateId",A.templateId),F("taxRate",A.taxRate),F("items",A.items.map(P=>({name:P.name,quantity:P.quantity,rateMinor:P.rateMinor,discountMinor:P.discountMinor,taxExempt:P.taxExempt}))))},[A,c,he,F]);const gt=async P=>{const de=P.items.map(Ue=>({name:Ue.name,quantity:Ue.quantity,rateMinor:Ue.rateMinor,rateVatMinor:Ue.taxExempt?Ue.rateMinor:Math.round(Ue.rateMinor*(1+P.taxRate)),discountMinor:Ue.discountMinor,taxExempt:Ue.taxExempt})),et=(P.payments||[]).map(Ue=>({id:Ue.id,amountMinor:Ue.amountMinor,currency:Ue.currency,method:Ue.method,notes:Ue.notes,paidAt:new Date(Ue.paidAt).toISOString()}));let it="draft";he==="receipt"||he==="invoice_receipt"||he==="donation_receipt"?it="paid":(he==="price_offer"||he==="proforma_invoice")&&(it="issued");const un={type:P.type,status:it,businessProfileId:P.businessProfileId,clientId:P.clientId||void 0,subject:P.subject||void 0,brief:P.brief||void 0,notes:P.notes||void 0,items:de,payments:et,subtotalMinor:V.subtotal,discountMinor:0,taxMinor:V.tax,totalMinor:V.total,taxRate:P.taxRate,vatEnabled:P.vatEnabled,currency:P.currency,language:P.language,issueDate:new Date(P.issueDate).toISOString(),dueDate:P.dueDate?P.dueDate:void 0,paidAt:it==="paid"?new Date().toISOString():void 0,refDocumentId:P.refDocumentId||void 0,linkedTransactionIds:m?.linkedTransactionIds||[],templateId:P.templateId};try{if(c==="edit"&&u){const Ue=m?.status==="draft"&&P.number&&P.number!==m.number?{...un,number:P.number}:un;await L.mutateAsync({id:u,data:Ue})}else await _.mutateAsync(un);i()}catch(Ue){console.error("Failed to save document:",Ue)}},Mt=async()=>{if(u&&confirm("Are you sure you want to delete this document?"))try{await U.mutateAsync(u),i()}catch(P){console.error("Failed to delete document:",P)}},cn=async()=>{if(u&&confirm("Are you sure you want to void this document? This action cannot be undone."))try{await M.mutateAsync(u),i()}catch(P){console.error("Failed to void document:",P)}},Kn=()=>{Y({name:"",quantity:1,rateMinor:0,discountMinor:0,taxExempt:!1})},Ct=()=>{G({id:kx(),amountMinor:V.total-W,currency:ne,method:"cash",notes:"",paidAt:Qn()})},Fn=_.isPending||L.isPending,vn=he==="receipt"||he==="invoice_receipt"||he==="donation_receipt",Sn=he==="invoice"||he==="proforma_invoice",Fa=he==="credit_note",on=E.filter(P=>P.status!=="voided"&&(P.type==="invoice"||P.type==="invoice_receipt"));if(c==="edit"&&y)return s.jsx(At,{title:p("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});if(j.length===0)return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:i,children:s.jsxs("div",{className:"document-guard",children:[s.jsx("div",{className:"document-guard-icon",children:s.jsx(Gx,{})}),s.jsx("h3",{className:"document-guard-title",children:p("documentGuard.title")}),s.jsx("p",{className:"document-guard-description",children:p("documentGuard.description")}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{i();const{openBusinessProfileDrawer:P}=yt.getState();P({mode:"create"})},children:p("documentGuard.createProfile")})]})});const je=c==="edit"&&m&&m.status!=="draft";return s.jsx(At,{title:c==="edit"?"Edit Document":"New Document",onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"drawer-footer-left",children:[c==="edit"&&m?.status==="draft"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:Mt,disabled:U.isPending,children:p("common.delete")}),c==="edit"&&m?.status==="issued"&&s.jsx("button",{type:"button",className:"btn btn-warning",onClick:cn,disabled:M.isPending,children:"Void Document"})]}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:p("common.cancel")}),!je&&s.jsx("button",{type:"submit",form:"document-form",className:"btn btn-primary",disabled:Fn,children:p(Fn?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"document-form",onSubmit:K.handleSubmit(gt),children:[je&&s.jsxs("div",{className:"alert alert-info",style:{marginBottom:16},children:["This document is ",m?.status," and cannot be edited."]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Type *"}),s.jsx("div",{className:"document-type-grid",children:Hx.map(P=>s.jsx("button",{type:"button",className:se("document-type-btn",he===P.value&&"active"),onClick:()=>!je&&F("type",P.value),disabled:je,children:P.label},P.value))})]}),c==="edit"&&m&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Document Number"}),s.jsx("input",{type:"text",className:"input",...K.register("number"),disabled:je,placeholder:"e.g., INV-0001"}),s.jsx("p",{className:"form-hint",children:je?"Document numbers can only be changed for draft documents.":"You can manually change the document number. Must be unique."})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Business Profile *"}),s.jsx(Ie,{name:"businessProfileId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:je,children:[s.jsx("option",{value:"",children:"Select profile..."}),j.map(de=>s.jsxs("option",{value:de.id,children:[de.name," ",de.nameEn?`(${de.nameEn})`:"",de.isDefault?" - Default":""]},de.id))]})}),K.formState.errors.businessProfileId&&s.jsx("p",{className:"form-error",children:K.formState.errors.businessProfileId.message})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Client"}),s.jsx(Ie,{name:"clientId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:je,children:[s.jsx("option",{value:"",children:"No client"}),v.map(de=>s.jsx("option",{value:de.id,children:de.name},de.id))]})})]})]}),Fa&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Reference Document *"}),s.jsx(Ie,{name:"refDocumentId",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:je,children:[s.jsx("option",{value:"",children:"Select original document..."}),on.map(de=>s.jsxs("option",{value:de.id,children:[de.number," - ",_l(de.totalMinor,de.currency)]},de.id))]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Subject"}),s.jsx("input",{type:"text",className:"input",placeholder:"Document subject...",...K.register("subject"),disabled:je})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Brief Description"}),s.jsx("textarea",{className:"textarea",placeholder:"Brief description...",rows:2,...K.register("brief"),disabled:je})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Currency *"}),s.jsx(Ie,{name:"currency",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:je,children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"ILS",children:"ILS ()"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Language *"}),s.jsx(Ie,{name:"language",control:ue,render:({field:P})=>s.jsxs("select",{className:"select",...P,disabled:je,children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"ar",children:"Arabic"})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Template"}),s.jsx(Ie,{name:"templateId",control:ue,render:({field:P})=>s.jsx("select",{className:"select",...P,disabled:je,children:Vx.map(de=>s.jsx("option",{value:de.value,children:de.label},de.value))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Issue Date *"}),s.jsx("input",{type:"date",className:se("input",K.formState.errors.issueDate&&"input-error"),...K.register("issueDate"),disabled:je})]}),Sn&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Due Date"}),s.jsx("input",{type:"date",className:"input",...K.register("dueDate"),disabled:je})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"VAT"}),s.jsxs("div",{className:"vat-toggle-row",children:[s.jsx(Ie,{name:"vatEnabled",control:ue,render:({field:P})=>s.jsxs("label",{className:"toggle-label",children:[s.jsx("input",{type:"checkbox",checked:P.value,onChange:de=>{P.onChange(de.target.checked),de.target.checked&&ve===0&&F("taxRate",.18)},disabled:je}),s.jsx("span",{children:"Enable VAT"})]})}),ie&&s.jsx(Ie,{name:"taxRate",control:ue,render:({field:P})=>s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"input input-sm",style:{width:80},value:P.value*100,onChange:de=>P.onChange(parseFloat(de.target.value)/100||0),disabled:je})}),ie&&s.jsx("span",{className:"text-muted",children:"%"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Line Items"}),!je&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Kn,children:"+ Add Item"})]}),B.map((P,de)=>s.jsxs("div",{className:"line-item-row",children:[s.jsx("div",{className:"line-item-main",children:s.jsx("input",{type:"text",className:"input",placeholder:"Item name",...K.register(`items.${de}.name`),disabled:je})}),s.jsx("div",{className:"line-item-qty",children:s.jsx(Ie,{name:`items.${de}.quantity`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"input",placeholder:"Qty",value:et.value,onChange:it=>et.onChange(parseFloat(it.target.value)||0),disabled:je})})}),s.jsx("div",{className:"line-item-rate",children:s.jsx(Ie,{name:`items.${de}.rateMinor`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Rate",value:et.value/100,onChange:it=>et.onChange(Math.round(parseFloat(it.target.value)*100)||0),disabled:je})})}),s.jsx("div",{className:"line-item-total",children:_l(Ho(ye[de]||{quantity:0,rateMinor:0,discountMinor:0}),ne)}),!je&&B.length>1&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>ae(de),title:"Remove item",children:""})]},P.id)),K.formState.errors.items&&s.jsx("p",{className:"form-error",children:"At least one item is required"})]}),s.jsxs("div",{className:"totals-section",children:[s.jsxs("div",{className:"totals-row",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:_l(V.subtotal,ne)})]}),ie&&s.jsxs("div",{className:"totals-row",children:[s.jsxs("span",{children:["VAT (",(ve*100).toFixed(0),"%)"]}),s.jsx("span",{children:_l(V.tax,ne)})]}),s.jsxs("div",{className:"totals-row totals-total",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:_l(V.total,ne)})]})]}),vn&&s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-section-header",children:[s.jsx("h3",{className:"form-section-title",children:"Payment Details"}),!je&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:Ct,children:"+ Add Payment"})]}),xe.map((P,de)=>s.jsxs("div",{className:"payment-row",children:[s.jsx("div",{className:"payment-method",children:s.jsx(Ie,{name:`payments.${de}.method`,control:ue,render:({field:et})=>s.jsx("select",{className:"select",...et,disabled:je,children:Qx.map(it=>s.jsx("option",{value:it.value,children:it.label},it.value))})})}),s.jsx("div",{className:"payment-amount",children:s.jsx(Ie,{name:`payments.${de}.amountMinor`,control:ue,render:({field:et})=>s.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Amount",value:(et.value??0)/100,onChange:it=>et.onChange(Math.round(parseFloat(it.target.value)*100)||0),disabled:je})})}),s.jsx("div",{className:"payment-date",children:s.jsx("input",{type:"date",className:"input",...K.register(`payments.${de}.paidAt`),disabled:je})}),!je&&s.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>be(de),title:"Remove payment",children:""})]},P.id)),xe.length>0&&s.jsxs("div",{className:"totals-row",style:{marginTop:8},children:[s.jsx("span",{children:"Total Paid"}),s.jsx("span",{children:_l(W,ne)})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Notes"}),s.jsx("textarea",{className:"textarea",placeholder:"Additional notes (will appear on document)...",rows:3,...K.register("notes"),disabled:je})]})]})})}function Gx(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const Zx=["llc","inc","inc.","ltd","ltd.","corp","corp.","corporation","company","co","co.","llp","plc","gmbh","ag","sa","sarl","",'"',""],Xx=["the"];function ka(a){if(!a)return"";let i=a.toLowerCase().trim().replace(/[.,;:!?'"()[\]{}@#$%^&*+=<>\\|`~]/g,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();for(const c of Zx){const u=new RegExp(`\\s+${Tp(c)}$`,"i");i=i.replace(u,"")}for(const c of Xx){const u=new RegExp(`^${Tp(c)}\\s+`,"i");i=i.replace(u,"")}return i.trim()}function Jx(a,i){if(a.length===0)return i.length;if(i.length===0)return a.length;const c=[];for(let u=0;u<=i.length;u++)c[u]=[u];for(let u=0;u<=a.length;u++)c[0][u]=u;for(let u=1;u<=i.length;u++)for(let d=1;d<=a.length;d++)i.charAt(u-1)===a.charAt(d-1)?c[u][d]=c[u-1][d-1]:c[u][d]=Math.min(c[u-1][d-1]+1,c[u][d-1]+1,c[u-1][d]+1);return c[i.length][a.length]}function Bi(a,i){const c=ka(a),u=ka(i);if(c===u)return 1;if(!c||!u)return 0;const d=Jx(c,u),h=Math.max(c.length,u.length);return 1-d/h}function Tp(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $x(a){const i=ka(a);return i?i.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "):""}function ql(){return crypto.randomUUID()}function Ke(){return new Date().toISOString()}const gn={async list(a={}){const i=await w.expenses.toArray(),c=await w.expenseCategories.toArray(),u=await w.receipts.toArray(),d=new Map(c.map(m=>[m.id,m])),h=new Map;u.forEach(m=>{m.expenseId&&h.set(m.expenseId,(h.get(m.expenseId)||0)+1)});let b=i.filter(m=>{if(!a.includeDeleted&&m.deletedAt||a.profileId&&m.profileId!==a.profileId||a.categoryId&&m.categoryId!==a.categoryId||a.currency&&m.currency!==a.currency||a.year&&new Date(m.occurredAt).getFullYear()!==a.year||a.month&&new Date(m.occurredAt).getMonth()+1!==a.month)return!1;if(a.search){const y=a.search.toLowerCase(),v=m.categoryId?d.get(m.categoryId)?.name:"";if(!(m.title?.toLowerCase().includes(y)||m.vendor?.toLowerCase().includes(y)||m.notes?.toLowerCase().includes(y)||v?.toLowerCase().includes(y)))return!1}return!0});const g=a.sort?.by||"occurredAt",p=a.sort?.dir||"desc";return b.sort((m,y)=>{const v=m[g],j=y[g];return typeof v=="string"&&typeof j=="string"?p==="asc"?v.localeCompare(j):j.localeCompare(v):typeof v=="number"&&typeof j=="number"?p==="asc"?v-j:j-v:0}),a.offset&&(b=b.slice(a.offset)),a.limit&&(b=b.slice(0,a.limit)),b.map(m=>{const y=m.categoryId?d.get(m.categoryId):void 0;return{...m,categoryName:y?.name,categoryColor:y?.color,receiptCount:h.get(m.id)||0,isFromRecurring:!!m.recurringRuleId}})},async get(a){return w.expenses.get(a)},async create(a){const i=Ke(),c={...a,id:ql(),createdAt:i,updatedAt:i};return await w.expenses.add(c),c},async update(a,i){await w.expenses.update(a,{...i,updatedAt:Ke()})},async softDelete(a){await w.expenses.update(a,{deletedAt:Ke(),updatedAt:Ke()})},async delete(a){await w.expenses.delete(a)},async getYearlyTotals(a,i){const c=await w.expenses.where("profileId").equals(a).filter(g=>g.deletedAt?!1:new Date(g.occurredAt).getFullYear()===i).toArray();let u=0,d=0;const h=new Map;for(let g=1;g<=12;g++)h.set(g,{USD:0,ILS:0});c.forEach(g=>{const p=new Date(g.occurredAt).getMonth()+1,m=h.get(p);g.currency==="USD"?(u+=g.amountMinor,m.USD+=g.amountMinor):(d+=g.amountMinor,m.ILS+=g.amountMinor)});const b=[];for(let g=1;g<=12;g++){const p=h.get(g);b.push({month:g,totalMinorUSD:p.USD,totalMinorILS:p.ILS})}return{totalMinorUSD:u,totalMinorILS:d,byMonth:b}},async getAllProfilesTotals(a){const i=await w.businessProfiles.filter(u=>!u.archivedAt).toArray(),c=[];for(const u of i){const d=await this.getYearlyTotals(u.id,a);c.push({profileId:u.id,profileName:u.name,year:a,totalMinorUSD:d.totalMinorUSD,totalMinorILS:d.totalMinorILS,monthlyBreakdown:d.byMonth})}return c},async getReceiptCount(a){return w.receipts.where("expenseId").equals(a).count()}},Pn={async list(a){let i=w.recurringRules.toCollection();return a&&(i=w.recurringRules.where("profileId").equals(a)),i.toArray()},async listActive(a){return(await this.list(a)).filter(c=>!c.isPaused)},async get(a){return w.recurringRules.get(a)},async create(a){const i=Ke(),c={...a,id:ql(),createdAt:i,updatedAt:i};return await w.recurringRules.add(c),c},async update(a,i){await w.recurringRules.update(a,{...i,updatedAt:Ke()})},async pause(a){await w.recurringRules.update(a,{isPaused:!0,updatedAt:Ke()})},async resume(a){await w.recurringRules.update(a,{isPaused:!1,updatedAt:Ke()})},async delete(a){await w.recurringRules.delete(a)}},yn={async list(a={}){let i=await w.receipts.toArray();return i=i.filter(c=>!(a.profileId&&c.profileId!==a.profileId||a.expenseId&&c.expenseId!==a.expenseId||a.monthKey&&c.monthKey!==a.monthKey||a.unlinkedOnly&&c.expenseId)),i.sort((c,u)=>u.createdAt.localeCompare(c.createdAt)),a.offset&&(i=i.slice(a.offset)),a.limit&&(i=i.slice(0,a.limit)),i},async get(a){return w.receipts.get(a)},async create(a){const i=Ke(),c={...a,id:ql(),createdAt:i,updatedAt:i};return await w.receipts.add(c),c},async update(a,i){await w.receipts.update(a,{...i,updatedAt:Ke()})},async delete(a){await w.receipts.delete(a)},async linkToExpense(a,i){const c=await gn.get(i),u=c?c.occurredAt.substring(0,7):new Date().toISOString().substring(0,7);await w.receipts.update(a,{expenseId:i,monthKey:u,updatedAt:Ke()})},async unlinkFromExpense(a){await w.receipts.update(a,{expenseId:void 0,updatedAt:Ke()})},async getUnlinkedByProfile(a){return w.receipts.where("profileId").equals(a).filter(i=>!i.expenseId).toArray()},async getByProfileAndMonth(a,i){return w.receipts.where("profileId").equals(a).filter(c=>c.monthKey===i).toArray()},async getLinkedByProfileAndMonth(a,i){return w.receipts.where("profileId").equals(a).filter(c=>c.monthKey===i&&!!c.expenseId).toArray()}},mh={async list(a){return w.expenseCategories.where("profileId").equals(a).sortBy("name")},async get(a){return w.expenseCategories.get(a)},async create(a){const i={...a,id:ql()};return await w.expenseCategories.add(i),i},async update(a,i){await w.expenseCategories.update(a,i)},async delete(a){await w.expenseCategories.delete(a)}},ph={async list(a){return w.vendors.where("profileId").equals(a).sortBy("canonicalName")},async get(a){return w.vendors.get(a)},async create(a){const i=Ke(),c={...a,id:ql(),createdAt:i,updatedAt:i};return await w.vendors.add(c),c},async update(a,i){await w.vendors.update(a,{...i,updatedAt:Ke()})},async delete(a){const i=await w.expenses.where("vendorId").equals(a).toArray();for(const u of i)await w.expenses.update(u.id,{vendorId:void 0,updatedAt:Ke()});const c=await w.receipts.where("vendorId").equals(a).toArray();for(const u of c)await w.receipts.update(u.id,{vendorId:void 0,updatedAt:Ke()});await w.vendors.delete(a)},async findByAlias(a,i){if(!i)return;const c=ka(i);if(!c)return;const u=await this.list(a),d=u.find(h=>ka(h.canonicalName)===c);if(d)return d;for(const h of u)if(h.aliases.map(g=>ka(g)).includes(c))return h;for(const h of u){if(Bi(i,h.canonicalName)>=.85)return h;for(const g of h.aliases)if(Bi(i,g)>=.85)return h}},async findOrCreate(a,i){const c=await this.findByAlias(a,i);return c||this.create({profileId:a,canonicalName:$x(i),aliases:[i]})},async mergeVendors(a,i){const c=await this.get(a),u=await this.get(i);if(!c||!u)return;const d=[...new Set([...c.aliases,...u.aliases,u.canonicalName])];await this.update(a,{aliases:d});const h=await w.expenses.where("vendorId").equals(i).toArray();for(const g of h)await w.expenses.update(g.id,{vendorId:a,updatedAt:Ke()});const b=await w.receipts.where("vendorId").equals(i).toArray();for(const g of b)await w.receipts.update(g.id,{vendorId:a,updatedAt:Ke()});await w.vendors.delete(i)},async addAlias(a,i){const c=await this.get(a);c&&(c.aliases.includes(i)||await this.update(a,{aliases:[...c.aliases,i]}))}},Qi={async get(a){return w.monthCloseStatuses.get(a)},async getByProfileAndMonth(a,i){const c=`${a}:${i}`;return this.get(c)},async getOrCreate(a,i){const c=`${a}:${i}`,u=await this.get(c);if(u)return u;const d=Ke(),h={id:c,profileId:a,monthKey:i,isClosed:!1,checklist:{receiptsLinked:!1,recurringConfirmed:!1,categorized:!1,zipExported:!1},createdAt:d,updatedAt:d};return await w.monthCloseStatuses.add(h),h},async updateChecklist(a,i,c){const u=await this.getOrCreate(a,i);await w.monthCloseStatuses.update(u.id,{checklist:{...u.checklist,...c},updatedAt:Ke()})},async closeMonth(a,i,c){const u=await this.getOrCreate(a,i);await w.monthCloseStatuses.update(u.id,{isClosed:!0,closedAt:Ke(),notes:c,updatedAt:Ke()})},async reopenMonth(a,i){const c=await this.getOrCreate(a,i);await w.monthCloseStatuses.update(c.id,{isClosed:!1,closedAt:void 0,updatedAt:Ke()})},async isMonthClosed(a,i){return(await this.getByProfileAndMonth(a,i))?.isClosed??!1},async getComputedStatus(a,i){const u=(await yn.getByProfileAndMonth(a,i)).filter(p=>!p.expenseId).length,[d,h]=i.split("-").map(Number),g=(await gn.list({profileId:a,year:d,month:h})).filter(p=>!p.categoryId).length;return{monthKey:i,profileId:a,unlinkedReceiptsCount:u,uncategorizedExpensesCount:g,isFullyLinked:u===0,isFullyCategorized:g===0}},async list(a){return w.monthCloseStatuses.where("profileId").equals(a).toArray()}};function Wx(a,i){let c=0,u=0,d=0;if(a.amountMinor&&i.amountMinor){const g=Math.abs(a.amountMinor-i.amountMinor)/i.amountMinor;g<=.01?c=50:g<=.05?c=40:g<=.1?c=30:g<=.2&&(c=20)}if(a.occurredAt&&i.occurredAt){const b=new Date(a.occurredAt),g=new Date(i.occurredAt),p=Math.abs(Math.floor((b.getTime()-g.getTime())/(1e3*60*60*24)));p===0?u=25:p<=3?u=20:p<=7?u=15:p<=30&&(u=10)}else{const b=i.occurredAt.substring(0,7);a.monthKey===b&&(u=10)}if(a.vendorId&&i.vendorId&&a.vendorId===i.vendorId)d=25;else if(a.vendorRaw&&i.vendor){const b=Bi(a.vendorRaw,i.vendor);b>=.8?d=20:b>=.5&&(d=10)}return{score:c+u+d,breakdown:{amountScore:c,dateScore:u,vendorScore:d}}}async function eb(a,i=5){const c=await yn.get(a);if(!c||c.expenseId)return[];const[u,d]=c.monthKey.split("-").map(Number),h=[];for(let m=d-1;m<=d+1;m++){let y=u,v=m;m<1?(y=u-1,v=12):m>12&&(y=u+1,v=1);const j=await gn.list({profileId:c.profileId,year:y,month:v});h.push(...j)}const b=new Set((await yn.list({profileId:c.profileId})).filter(m=>m.expenseId).map(m=>m.expenseId)),g=h.filter(m=>!b.has(m.id)),p=[];for(const m of g){const{score:y,breakdown:v}=Wx(c,m);if(y>=40){let j;y>=80?j="high":y>=60?j="medium":j="low",p.push({receiptId:a,expenseId:m.id,score:y,confidence:j,breakdown:v,expense:m})}}return p.sort((m,y)=>y.score-m.score).slice(0,i)}async function tb(a){const i=await yn.getUnlinkedByProfile(a),c=[];for(const u of i){const d=await eb(u.id);c.push({receipt:u,suggestions:d})}return c}async function nb(a,i,c,u){return(await yn.getByProfileAndMonth(a,u)).some(h=>h.fileName===i&&h.sizeBytes===c)}async function ab(a){const i=Ke(),c=[];for(const u of a){const d={...u,id:ql(),createdAt:i,updatedAt:i};await w.receipts.add(d),c.push(d)}return c}function lb(a,i,c){const u=new Date(a.startDate),d=new Date(i,c-1,1);if(d<u)return!1;if(a.endMode==="endOfYear"){const h=u.getFullYear();if(i>h)return!1}else if(a.endMode==="untilDate"&&a.endDate){const h=new Date(a.endDate);if(d>h)return!1}return a.frequency==="monthly"?!0:a.frequency==="yearly"?c===u.getMonth()+1:!1}function ib(a,i,c,u){return a.filter(d=>d.currency===u&&!d.isPaused).reduce((d,h)=>lb(h,i,c)?d+h.amountMinor:d,0)}function sb(a,i,c,u){return a.filter(d=>{if(d.deletedAt||d.currency!==u)return!1;const h=new Date(d.occurredAt);return h.getFullYear()===i&&h.getMonth()+1===c}).reduce((d,h)=>d+h.amountMinor,0)}function rb(a){const{recurringRules:i,actualExpenses:c,year:u,currency:d,profileId:h,profileName:b}=a,g=new Date,p=g.getFullYear(),m=g.getMonth()+1,y=[];let v=0;for(let D=1;D<=12;D++)if(u<p||u===p&&D<=m){const E=sb(c,u,D,d);y.push({month:D,year:u,projectedMinor:E,actualMinor:E,isPast:!0}),v+=E}else{const E=ib(i,u,D,d);y.push({month:D,year:u,projectedMinor:E,isPast:!1}),v+=E}let j=0;return u===p?j=12-m:u>p&&(j=12),{profileId:h,profileName:b,year:u,monthsRemaining:j,projectedTotalMinor:v,currency:d,breakdown:y}}const hh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Utilities",nameAr:"",color:"#8b5cf6"},{name:"Software & Subscriptions",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud & Hosting",nameAr:" ",color:"#0ea5e9"},{name:"Communication",nameAr:"",color:"#10b981"},{name:"Marketing & Ads",nameAr:" ",color:"#f59e0b"},{name:"Travel & Transport",nameAr:" ",color:"#ef4444"},{name:"Equipment & Hardware",nameAr:" ",color:"#ec4899"},{name:"Professional Services",nameAr:" ",color:"#14b8a6"},{name:"Insurance",nameAr:"",color:"#f97316"},{name:"Bank Fees",nameAr:" ",color:"#64748b"},{name:"Taxes & Licenses",nameAr:" ",color:"#a855f7"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],yh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Coworking Space",nameAr:"  ",color:"#8b5cf6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Infrastructure",nameAr:" ",color:"#0ea5e9"},{name:"SaaS Subscriptions",nameAr:" SaaS",color:"#3b82f6"},{name:"Development Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Marketing & Growth",nameAr:" ",color:"#f59e0b"},{name:"Legal & Compliance",nameAr:" ",color:"#a855f7"},{name:"Accounting Services",nameAr:" ",color:"#ec4899"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Team Perks",nameAr:" ",color:"#22c55e"},{name:"Contractor Payments",nameAr:" ",color:"#f97316"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],gh=[{name:"Office Rent",nameAr:" ",color:"#6366f1"},{name:"Legal Research Tools",nameAr:"  ",color:"#3b82f6"},{name:"Case Management Software",nameAr:"  ",color:"#06b6d4"},{name:"Bar Association Fees",nameAr:"  ",color:"#a855f7"},{name:"Continuing Legal Education",nameAr:"  ",color:"#8b5cf6"},{name:"Court Filing Fees",nameAr:"  ",color:"#f97316"},{name:"Process Service",nameAr:" ",color:"#14b8a6"},{name:"Expert Witnesses",nameAr:" ",color:"#ec4899"},{name:"Professional Liability Insurance",nameAr:"  ",color:"#ef4444"},{name:"Document Management",nameAr:" ",color:"#10b981"},{name:"Client Entertainment",nameAr:" ",color:"#f59e0b"},{name:"Travel Expenses",nameAr:" ",color:"#0ea5e9"},{name:"Office Supplies",nameAr:" ",color:"#22c55e"},{name:"Communication",nameAr:"",color:"#64748b"},{name:"Salaries",nameAr:"",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],vh=[{name:"Software & Tools",nameAr:" ",color:"#3b82f6"},{name:"AI Services",nameAr:"  ",color:"#06b6d4"},{name:"Cloud Storage",nameAr:" ",color:"#0ea5e9"},{name:"Communication Tools",nameAr:" ",color:"#10b981"},{name:"Domain & Hosting",nameAr:" ",color:"#14b8a6"},{name:"Coworking Space",nameAr:"  ",color:"#6366f1"},{name:"Marketing",nameAr:"",color:"#f59e0b"},{name:"Equipment",nameAr:"",color:"#ef4444"},{name:"Professional Development",nameAr:" ",color:"#a855f7"},{name:"Accounting & Tax",nameAr:" ",color:"#ec4899"},{name:"Bank & Payment Fees",nameAr:"  ",color:"#64748b"},{name:"Other",nameAr:"",color:"#78716c"}],Jo=new Map;[...hh,...yh,...gh,...vh].forEach(a=>{Jo.has(a.name)||Jo.set(a.name,a)});const cb=Array.from(Jo.values()),ob={general:hh,startup:yh,lawFirm:gh,freelancer:vh};async function ub(a,i="general",c="en"){const u=ob[i];for(const d of u)await mh.create({profileId:a,name:c==="ar"?d.nameAr:d.name,color:d.color})}const Nt={expenses:a=>["expenses",a],expense:a=>["expense",a],expenseYearlyTotals:(a,i)=>["expenseYearlyTotals",a,i],allProfilesExpenseTotals:a=>["allProfilesExpenseTotals",a],recurringRules:a=>["recurringRules",{profileId:a}],recurringRule:a=>["recurringRule",a],activeRecurringRules:a=>["activeRecurringRules",{profileId:a}],receipts:a=>["receipts",a],receipt:a=>["receipt",a],unlinkedReceipts:a=>["unlinkedReceipts",a],receiptsByMonth:(a,i)=>["receiptsByMonth",a,i],receiptMatchSuggestions:a=>["receiptMatchSuggestions",a],unlinkedReceiptsWithSuggestions:a=>["unlinkedReceiptsWithSuggestions",a],expenseCategories:a=>["expenseCategories",a],expenseCategory:a=>["expenseCategory",a],expenseForecast:(a,i,c)=>["expenseForecast",a,i,c],vendors:a=>["vendors",a],vendor:a=>["vendor",a],monthCloseStatus:(a,i)=>["monthCloseStatus",a,i],monthCloseComputed:(a,i)=>["monthCloseComputed",a,i],monthCloseList:a=>["monthCloseList",a]};function iu(a){a.invalidateQueries({queryKey:["expenses"]}),a.invalidateQueries({queryKey:["expense"]}),a.invalidateQueries({queryKey:["expenseYearlyTotals"]}),a.invalidateQueries({queryKey:["allProfilesExpenseTotals"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Vi(a){a.invalidateQueries({queryKey:["recurringRules"]}),a.invalidateQueries({queryKey:["recurringRule"]}),a.invalidateQueries({queryKey:["activeRecurringRules"]}),a.invalidateQueries({queryKey:["expenseForecast"]})}function Yi(a){a.invalidateQueries({queryKey:["receipts"]}),a.invalidateQueries({queryKey:["receipt"]}),a.invalidateQueries({queryKey:["unlinkedReceipts"]}),a.invalidateQueries({queryKey:["receiptsByMonth"]}),a.invalidateQueries({queryKey:["expenses"]})}function db(a){a.invalidateQueries({queryKey:["expenseCategories"]}),a.invalidateQueries({queryKey:["expenseCategory"]})}function fb(a){a.invalidateQueries({queryKey:["vendors"]}),a.invalidateQueries({queryKey:["vendor"]})}function su(a){a.invalidateQueries({queryKey:["monthCloseStatus"]}),a.invalidateQueries({queryKey:["monthCloseComputed"]}),a.invalidateQueries({queryKey:["monthCloseList"]})}function mb(a){a.invalidateQueries({queryKey:["receiptMatchSuggestions"]}),a.invalidateQueries({queryKey:["unlinkedReceiptsWithSuggestions"]})}function lw(a){return fe({queryKey:Nt.expenses(a),queryFn:()=>gn.list(a)})}function pb(a){return fe({queryKey:Nt.expense(a),queryFn:()=>gn.get(a),enabled:!!a})}function iw(a,i){return fe({queryKey:Nt.expenseYearlyTotals(a,i),queryFn:()=>gn.getYearlyTotals(a,i),enabled:!!a&&!!i})}function sw(a){return fe({queryKey:Nt.allProfilesExpenseTotals(a),queryFn:()=>gn.getAllProfilesTotals(a),enabled:!!a})}function hb(){const a=ce();return oe({mutationFn:i=>gn.create(i),onSuccess:()=>iu(a)})}function yb(){const a=ce();return oe({mutationFn:({id:i,data:c})=>gn.update(i,c),onSuccess:()=>iu(a)})}function gb(){const a=ce();return oe({mutationFn:i=>gn.softDelete(i),onSuccess:()=>iu(a)})}function rw(a){return fe({queryKey:Nt.recurringRules(a),queryFn:()=>Pn.list(a)})}function cw(a){return fe({queryKey:Nt.activeRecurringRules(a),queryFn:()=>Pn.listActive(a)})}function vb(a){return fe({queryKey:Nt.recurringRule(a),queryFn:()=>Pn.get(a),enabled:!!a})}function xb(){const a=ce();return oe({mutationFn:i=>Pn.create(i),onSuccess:()=>Vi(a)})}function bb(){const a=ce();return oe({mutationFn:({id:i,data:c})=>Pn.update(i,c),onSuccess:()=>Vi(a)})}function ow(){const a=ce();return oe({mutationFn:i=>Pn.pause(i),onSuccess:()=>Vi(a)})}function uw(){const a=ce();return oe({mutationFn:i=>Pn.resume(i),onSuccess:()=>Vi(a)})}function jb(){const a=ce();return oe({mutationFn:i=>Pn.delete(i),onSuccess:()=>Vi(a)})}function dw(a){return fe({queryKey:Nt.unlinkedReceipts(a),queryFn:()=>yn.getUnlinkedByProfile(a),enabled:!!a})}function fw(a,i){return fe({queryKey:Nt.receiptsByMonth(a,i),queryFn:()=>yn.getByProfileAndMonth(a,i),enabled:!!a&&!!i})}function mw(){const a=ce();return oe({mutationFn:i=>yn.create(i),onSuccess:()=>Yi(a)})}function pw(){const a=ce();return oe({mutationFn:i=>yn.delete(i),onSuccess:()=>Yi(a)})}function wb(){const a=ce();return oe({mutationFn:({receiptId:i,expenseId:c})=>yn.linkToExpense(i,c),onSuccess:()=>Yi(a)})}function hw(){const a=ce();return oe({mutationFn:i=>yn.unlinkFromExpense(i),onSuccess:()=>Yi(a)})}function Sb(a){return fe({queryKey:Nt.expenseCategories(a),queryFn:()=>mh.list(a),enabled:!!a})}function yw(a,i,c){return fe({queryKey:Nt.expenseForecast(a,i,c),queryFn:async()=>{const u=[];for(const d of i){const[h,b,g]=await Promise.all([at.get(d),Pn.listActive(d),gn.list({profileId:d,year:a})]);if(h){const p=rb({recurringRules:b.filter(m=>m.currency===c),actualExpenses:g.filter(m=>m.currency===c),year:a,currency:c,profileId:d,profileName:h.name});u.push(p)}}return u},enabled:!!a&&i.length>0})}function gw(){const a=ce();return oe({mutationFn:({profileId:i,preset:c,language:u})=>ub(i,c,u),onSuccess:()=>db(a)})}function Ab(a){return fe({queryKey:Nt.vendors(a),queryFn:()=>ph.list(a),enabled:!!a})}function Db(){const a=ce();return oe({mutationFn:({profileId:i,rawVendor:c})=>ph.findOrCreate(i,c),onSuccess:()=>fb(a)})}function vw(a){return fe({queryKey:Nt.unlinkedReceiptsWithSuggestions(a),queryFn:()=>tb(a),enabled:!!a})}function xw(){return oe({mutationFn:({profileId:a,fileName:i,sizeBytes:c,monthKey:u})=>nb(a,i,c,u)})}function bw(){const a=ce();return oe({mutationFn:i=>ab(i),onSuccess:()=>{Yi(a),mb(a)}})}function jw(a,i){return fe({queryKey:Nt.monthCloseStatus(a,i),queryFn:()=>Qi.getOrCreate(a,i),enabled:!!a&&!!i})}function ww(a,i){return fe({queryKey:Nt.monthCloseComputed(a,i),queryFn:()=>Qi.getComputedStatus(a,i),enabled:!!a&&!!i})}function Sw(){const a=ce();return oe({mutationFn:({profileId:i,monthKey:c,updates:u})=>Qi.updateChecklist(i,c,u),onSuccess:()=>su(a)})}function Aw(){const a=ce();return oe({mutationFn:({profileId:i,monthKey:c,notes:u})=>Qi.closeMonth(i,c,u),onSuccess:()=>su(a)})}function Dw(){const a=ce();return oe({mutationFn:({profileId:i,monthKey:c})=>Qi.reopenMonth(i,c),onSuccess:()=>su(a)})}function Nb({profileId:a,value:i,onChange:c,placeholder:u,disabled:d,className:h}){const b=Fe(),g=O.useRef(null),p=O.useRef(null),[m,y]=O.useState(!1),[v,j]=O.useState(i),[D,A]=O.useState(-1),{data:E=[]}=Ab(a),_=Db(),L=(()=>{if(!v.trim())return E.map(ne=>({id:ne.id,name:ne.canonicalName,isNew:!1}));const F=ka(v),X=[];for(const ne of E){let ie=Bi(v,ne.canonicalName);for(const ye of ne.aliases){const ge=Bi(v,ye);ge>ie&&(ie=ge)}(ie>.3||ne.canonicalName.toLowerCase().includes(F))&&X.push({vendor:ne,score:ie})}X.sort((ne,ve)=>ve.score-ne.score);const ue=X.map(({vendor:ne,score:ve})=>({id:ne.id,name:ne.canonicalName,isNew:!1,similarity:ve}));return!X.some(ne=>ne.score>=.95)&&v.trim()&&ue.push({id:"new",name:v.trim(),isNew:!0}),ue})();O.useEffect(()=>{i!==v&&j(i)},[i]),O.useEffect(()=>{const F=X=>{p.current&&!p.current.contains(X.target)&&g.current&&!g.current.contains(X.target)&&y(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const U=F=>{const X=F.target.value;j(X),y(!0),A(-1),c(X,void 0)},M=O.useCallback(async F=>{if(F.isNew)try{const X=await _.mutateAsync({profileId:a,rawVendor:F.name});j(X.canonicalName),c(X.canonicalName,X.id)}catch{j(F.name),c(F.name,void 0)}else j(F.name),c(F.name,F.id);y(!1),A(-1)},[_,c,a]),k=F=>{if(!m){(F.key==="ArrowDown"||F.key==="Enter")&&(y(!0),F.preventDefault());return}switch(F.key){case"ArrowDown":F.preventDefault(),A(X=>X<L.length-1?X+1:X);break;case"ArrowUp":F.preventDefault(),A(X=>X>0?X-1:X);break;case"Enter":F.preventDefault(),D>=0&&D<L.length?M(L[D]):L.length===1&&M(L[0]);break;case"Escape":y(!1),A(-1);break;case"Tab":y(!1);break}},K=()=>{y(!0)},$=()=>{setTimeout(()=>{p.current?.contains(document.activeElement)||y(!1)},150)};return s.jsxs("div",{className:se("vendor-typeahead",h),children:[s.jsx("input",{ref:g,type:"text",className:"input",value:v,onChange:U,onKeyDown:k,onFocus:K,onBlur:$,placeholder:u||b("drawer.expense.vendorPlaceholder"),disabled:d,autoComplete:"off",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-autocomplete":"list"}),m&&L.length>0&&s.jsx("div",{ref:p,className:"vendor-typeahead-dropdown",role:"listbox",children:L.map((F,X)=>s.jsx("button",{type:"button",className:se("vendor-typeahead-option",D===X&&"highlighted",F.isNew&&"is-new"),onClick:()=>M(F),onMouseEnter:()=>A(X),role:"option","aria-selected":D===X,children:F.isNew?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"vendor-typeahead-create-label",children:[b("vendor.createNew"),":"]}),s.jsx("span",{className:"vendor-typeahead-name",children:F.name})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"vendor-typeahead-name",children:F.name}),F.similarity&&F.similarity<1&&s.jsxs("span",{className:"vendor-typeahead-score",children:[Math.round(F.similarity*100),"%"]})]})},F.id))})]})}const Mb=Vn({expenseType:St(["onetime","recurring"]),profileId:te().min(1,"Profile is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),occurredAt:te().min(1,"Date is required"),title:te().optional(),vendor:te().optional(),vendorId:te().optional(),categoryId:te().min(1,"Category is required"),notes:te().optional(),frequency:St(["monthly","yearly"]).optional(),startDate:te().optional(),endMode:St(["endOfYear","untilDate","noEnd"]).optional(),endDate:te().optional()}).superRefine((a,i)=>{a.expenseType==="recurring"&&(a.title||i.addIssue({code:_i.custom,message:"Title is required for recurring expenses",path:["title"]}),a.frequency||i.addIssue({code:_i.custom,message:"Frequency is required",path:["frequency"]}),a.startDate||i.addIssue({code:_i.custom,message:"Start date is required",path:["startDate"]}),a.endMode||i.addIssue({code:_i.custom,message:"End mode is required",path:["endMode"]}),a.endMode==="untilDate"&&!a.endDate&&i.addIssue({code:_i.custom,message:"End date is required",path:["endDate"]}))});function Cb(){const{expenseDrawer:a,closeExpenseDrawer:i}=yt(),{mode:c,expenseId:u,recurringRuleId:d,defaultProfileId:h,isRecurring:b,prefillData:g,linkReceiptId:p}=a,m=Fe(),{language:y}=Yn(),{data:v=[]}=Hi(),{data:j,isLoading:D}=pb(u||""),{data:A,isLoading:E}=vb(d||""),_=wb(),L=Qa({resolver:Ya(Mb),defaultValues:{expenseType:b?"recurring":"onetime",profileId:h||"",amount:g?.amountMinor?(g.amountMinor/100).toString():"",currency:g?.currency||"USD",occurredAt:g?.occurredAt?.split("T")[0]||Qn(),title:g?.title||"",vendor:g?.vendor||"",vendorId:g?.vendorId||"",categoryId:g?.categoryId||"",notes:"",frequency:"monthly",startDate:Qn(),endMode:"endOfYear",endDate:""}}),{watch:U,setValue:M,reset:k}=L,K=U("expenseType"),$=U("profileId"),F=U("endMode"),{data:X=[]}=Sb($),ue=O.useMemo(()=>cb.map(Z=>({id:Z.name,profileId:$,name:y==="ar"?Z.nameAr:Z.name,color:Z.color})),[y,$]),he=X.length>0?X:ue,ne=hb(),ve=yb(),ie=gb(),ye=xb(),ge=bb(),B=jb();O.useEffect(()=>{j&&k({expenseType:"onetime",profileId:j.profileId,amount:(j.amountMinor/100).toString(),currency:j.currency,occurredAt:j.occurredAt.split("T")[0],title:j.title||"",vendor:j.vendor||"",vendorId:j.vendorId||"",categoryId:j.categoryId||"",notes:j.notes||"",frequency:"monthly",startDate:Qn(),endMode:"endOfYear",endDate:""})},[j,k]),O.useEffect(()=>{A&&k({expenseType:"recurring",profileId:A.profileId,amount:(A.amountMinor/100).toString(),currency:A.currency,occurredAt:A.startDate,title:A.title,vendor:A.vendor||"",categoryId:A.categoryId||"",notes:"",frequency:A.frequency,startDate:A.startDate,endMode:A.endMode,endDate:A.endDate||""})},[A,k]),O.useEffect(()=>{v.length===1&&!$&&M("profileId",v[0].id)},[v,$,M]);const Y=async Z=>{try{if(Z.expenseType==="recurring"){const V={profileId:Z.profileId,title:Z.title||"",vendor:Z.vendor||void 0,categoryId:Z.categoryId||void 0,amountMinor:zl(Z.amount),currency:Z.currency,frequency:Z.frequency,startDate:Z.startDate||Qn(),endMode:Z.endMode,endDate:Z.endMode==="untilDate"?Z.endDate:void 0,isPaused:!1};c==="edit"&&d?await ge.mutateAsync({id:d,data:V}):await ye.mutateAsync(V)}else{const V={profileId:Z.profileId,title:Z.title||void 0,vendor:Z.vendor||void 0,vendorId:Z.vendorId||void 0,categoryId:Z.categoryId||void 0,amountMinor:zl(Z.amount),currency:Z.currency,occurredAt:new Date(Z.occurredAt).toISOString(),notes:Z.notes||void 0};if(c==="edit"&&u)await ve.mutateAsync({id:u,data:V});else{const W=await ne.mutateAsync(V);p&&W&&await _.mutateAsync({receiptId:p,expenseId:W.id})}}i()}catch(V){console.error("Failed to save expense:",V)}},ae=async()=>{if(d){if(!confirm(m("expenses.confirmDelete")))return;try{await B.mutateAsync(d),i()}catch(Z){console.error("Failed to delete recurring rule:",Z)}}else if(u){if(!confirm(m("expenses.confirmDelete")))return;try{await ie.mutateAsync(u),i()}catch(Z){console.error("Failed to delete expense:",Z)}}},xe=ne.isPending||ve.isPending||ye.isPending||ge.isPending;if(c==="edit"&&u&&D||c==="edit"&&d&&E)return s.jsx(At,{title:m("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const be=()=>m(c==="edit"?d?"drawer.expense.editRecurring":"drawer.expense.edit":K==="recurring"?"drawer.expense.newRecurring":"drawer.expense.new");return s.jsx(At,{title:be(),onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:ae,disabled:ie.isPending||B.isPending,children:m("common.delete")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:m("common.cancel")}),s.jsx("button",{type:"submit",form:"expense-form",className:"btn btn-primary",disabled:xe,children:m(xe?"common.saving":"common.save")})]})]}),children:s.jsxs("form",{id:"expense-form",onSubmit:L.handleSubmit(Y),children:[c==="create"&&s.jsxs("div",{className:"type-selector",children:[s.jsxs("button",{type:"button",className:se("type-selector-btn",K==="onetime"&&"active"),onClick:()=>M("expenseType","onetime"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeOneTime")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeOneTimeDesc")})]}),s.jsxs("button",{type:"button",className:se("type-selector-btn",K==="recurring"&&"active"),onClick:()=>M("expenseType","recurring"),children:[s.jsx("span",{className:"type-selector-label",children:m("drawer.expense.typeRecurring")}),s.jsx("span",{className:"type-selector-hint",children:m("drawer.expense.typeRecurringDesc")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.profile")," *"]}),s.jsx(Ie,{name:"profileId",control:L.control,render:({field:Z})=>s.jsxs("select",{className:se("select",L.formState.errors.profileId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.profilePlaceholder")}),v.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),L.formState.errors.profileId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",L.formState.errors.amount&&"input-error"),placeholder:m("drawer.expense.amountPlaceholder"),...L.register("amount")}),L.formState.errors.amount&&s.jsx("p",{className:"form-error",children:m("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.currency")," *"]}),s.jsx(Ie,{name:"currency",control:L.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),K==="onetime"?s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.date")," *"]}),s.jsx("input",{type:"date",className:se("input",L.formState.errors.occurredAt&&"input-error"),...L.register("occurredAt")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.frequency")," *"]}),s.jsx(Ie,{name:"frequency",control:L.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"monthly",children:m("expenses.recurring.monthly")}),s.jsx("option",{value:"yearly",children:m("expenses.recurring.yearly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.startDate")," *"]}),s.jsx("input",{type:"date",className:se("input",L.formState.errors.startDate&&"input-error"),...L.register("startDate")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endMode")," *"]}),s.jsx(Ie,{name:"endMode",control:L.control,render:({field:Z})=>s.jsxs("select",{className:"select",style:{width:"100%"},...Z,children:[s.jsx("option",{value:"endOfYear",children:m("expenses.recurring.endOfYear")}),s.jsx("option",{value:"untilDate",children:m("expenses.recurring.untilDate")}),s.jsx("option",{value:"noEnd",children:m("expenses.recurring.noEnd")})]})})]}),F==="untilDate"&&s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.endDate")," *"]}),s.jsx("input",{type:"date",className:se("input",L.formState.errors.endDate&&"input-error"),...L.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.title")," ",K==="recurring"&&"*"]}),s.jsx("input",{type:"text",className:se("input",L.formState.errors.title&&"input-error"),placeholder:m("drawer.expense.titlePlaceholder"),...L.register("title")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.vendor")}),s.jsx(Ie,{name:"vendor",control:L.control,render:({field:Z})=>s.jsx(Nb,{profileId:$,value:Z.value||"",vendorId:U("vendorId"),onChange:(V,W)=>{Z.onChange(V),M("vendorId",W||"")},disabled:!$})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[m("drawer.expense.category")," *"]}),s.jsx(Ie,{name:"categoryId",control:L.control,render:({field:Z})=>s.jsxs("select",{className:se("select",L.formState.errors.categoryId&&"input-error"),style:{width:"100%"},...Z,children:[s.jsx("option",{value:"",children:m("drawer.expense.categoryPlaceholder")}),he.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})}),L.formState.errors.categoryId&&s.jsx("p",{className:"form-error",children:m("validation.required")})]}),K==="onetime"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:m("drawer.expense.notes")}),s.jsx("textarea",{className:"textarea",placeholder:m("drawer.expense.notesPlaceholder"),...L.register("notes")})]})]})})}function xh(){return crypto.randomUUID()}function ht(){return new Date().toISOString()}function Ul(){return new Date().toISOString().split("T")[0]}function bh(a,i){const c=new Date(a),d=new Date(i).getTime()-c.getTime();return Math.floor(d/(1e3*60*60*24))}function ru(a,i){return new Date(a,i+1,0).getDate()}function Rp(a,i,c){const u=ru(a,i),d=Math.min(c,u);return`${a}-${String(i+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`}function Eb(a,i){const c=`${a}-${String(i+1).padStart(2,"0")}-01`,u=ru(a,i),d=`${a}-${String(i+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`;return{periodStart:c,periodEnd:d}}function Tb(a,i){const c=i*3,u=c+2,d=`${a}-${String(c+1).padStart(2,"0")}-01`,h=ru(a,u),b=`${a}-${String(u+1).padStart(2,"0")}-${String(h).padStart(2,"0")}`;return{periodStart:d,periodEnd:b}}const rn={async list(a={}){const i=await w.retainerAgreements.toArray(),c=await w.clients.toArray(),u=await w.projects.toArray(),d=await w.businessProfiles.toArray(),h=await w.projectedIncome.toArray(),b=new Map(c.map(v=>[v.id,v.name])),g=new Map(u.map(v=>[v.id,v.name])),p=new Map(d.map(v=>[v.id,v.name])),m=new Map;h.forEach(v=>{const j=m.get(v.sourceId)||[];j.push(v),m.set(v.sourceId,j)});let y=i.filter(v=>{if(v.archivedAt||a.profileId&&v.profileId!==a.profileId||a.status&&v.status!==a.status||a.currency&&v.currency!==a.currency||a.clientId&&v.clientId!==a.clientId||a.projectId&&v.projectId!==a.projectId)return!1;if(a.search){const j=a.search.toLowerCase(),D=b.get(v.clientId)||"",A=v.projectId&&g.get(v.projectId)||"";if(!(v.title.toLowerCase().includes(j)||D.toLowerCase().includes(j)||A.toLowerCase().includes(j)))return!1}return!0});return a.dueOnly&&(y=y.filter(v=>(m.get(v.id)||[]).some(D=>D.state==="due"))),y.sort((v,j)=>j.createdAt.localeCompare(v.createdAt)),y.map(v=>{const j=m.get(v.id)||[],D=j.filter(M=>M.state==="due"),A=j.filter(M=>M.state==="received"||M.state==="partial"),E=j.filter(M=>M.state==="upcoming"),_=D.reduce((M,k)=>M+(k.expectedAmountMinor-k.receivedAmountMinor),0),L=E.length>0?E.sort((M,k)=>M.expectedDate.localeCompare(k.expectedDate))[0].expectedDate:void 0,U=A.length>0?A.sort((M,k)=>(k.receivedAt||"").localeCompare(M.receivedAt||""))[0]:void 0;return{...v,profileName:p.get(v.profileId),clientName:b.get(v.clientId),projectName:v.projectId?g.get(v.projectId):void 0,nextExpectedDate:L,dueNowAmountMinor:_,lastReceivedDate:U?.receivedAt,lastReceivedAmountMinor:U?.receivedAmountMinor}})},async get(a){return w.retainerAgreements.get(a)},async getDisplay(a){const i=await this.get(a);if(!i)return;const c=i.profileId?await w.businessProfiles.get(i.profileId):void 0,u=i.clientId?await w.clients.get(i.clientId):void 0,d=i.projectId?await w.projects.get(i.projectId):void 0,h=await hn.getByRetainer(a),b=h.filter(j=>j.state==="due"),g=h.filter(j=>j.state==="received"||j.state==="partial"),p=h.filter(j=>j.state==="upcoming"),m=b.reduce((j,D)=>j+(D.expectedAmountMinor-D.receivedAmountMinor),0),y=p.length>0?p.sort((j,D)=>j.expectedDate.localeCompare(D.expectedDate))[0].expectedDate:void 0,v=g.length>0?g.sort((j,D)=>(D.receivedAt||"").localeCompare(j.receivedAt||""))[0]:void 0;return{...i,profileName:c?.name,clientName:u?.name,projectName:d?.name,nextExpectedDate:y,dueNowAmountMinor:m,lastReceivedDate:v?.receivedAt,lastReceivedAmountMinor:v?.receivedAmountMinor}},async create(a){const i=ht(),c={...a,id:xh(),createdAt:i,updatedAt:i};return await w.retainerAgreements.add(c),c.status==="active"&&await Oi.generateSchedule(c.id),c},async update(a,i){const c=await this.get(a);if(!c)return;await w.retainerAgreements.update(a,{...i,updatedAt:ht()}),["amountMinor","cadence","paymentDay","startDate","endDate"].some(h=>h in i)&&c.status==="active"&&await Oi.regenerateSchedule(a)},async archive(a){await w.retainerAgreements.update(a,{archivedAt:ht(),updatedAt:ht()})},async activate(a){const i=await this.get(a);!i||i.status!=="draft"||(await w.retainerAgreements.update(a,{status:"active",updatedAt:ht()}),await Oi.generateSchedule(a))},async pause(a){const i=await this.get(a);if(!i||i.status!=="active")return;await w.retainerAgreements.update(a,{status:"paused",updatedAt:ht()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await w.projectedIncome.update(u.id,{state:"canceled",updatedAt:ht()})},async resume(a){const i=await this.get(a);!i||i.status!=="paused"||(await w.retainerAgreements.update(a,{status:"active",updatedAt:ht()}),await Oi.regenerateSchedule(a))},async end(a){const i=await this.get(a);if(!i||i.status!=="active"&&i.status!=="paused")return;await w.retainerAgreements.update(a,{status:"ended",endDate:Ul(),updatedAt:ht()});const c=await hn.getByRetainer(a);for(const u of c)u.state==="upcoming"&&await w.projectedIncome.update(u.id,{state:"canceled",updatedAt:ht()})}},hn={async list(a={}){const i=await w.projectedIncome.toArray(),c=await w.clients.toArray(),u=await w.projects.toArray(),d=await w.retainerAgreements.toArray(),h=new Map(c.map(y=>[y.id,y.name])),b=new Map(u.map(y=>[y.id,y.name])),g=new Map(d.map(y=>[y.id,y.title])),p=Ul();let m=i.filter(y=>!(a.profileId&&y.profileId!==a.profileId||a.sourceId&&y.sourceId!==a.sourceId||a.clientId&&y.clientId!==a.clientId||a.currency&&y.currency!==a.currency||a.state&&!(Array.isArray(a.state)?a.state:[a.state]).includes(y.state)||a.dateFrom&&y.expectedDate<a.dateFrom||a.dateTo&&y.expectedDate>a.dateTo));return m.sort((y,v)=>y.expectedDate.localeCompare(v.expectedDate)),m.map(y=>{const v=y.state==="due"?bh(y.expectedDate,p):void 0;return{...y,clientName:h.get(y.clientId),projectName:y.projectId?b.get(y.projectId):void 0,retainerTitle:g.get(y.sourceId),daysOverdue:v!==void 0&&v>0?v:void 0}})},async getByRetainer(a){return w.projectedIncome.where("sourceId").equals(a).toArray()},async getDueItems(a){return this.list({state:"due",currency:a})},async getForForecast(a,i,c){return this.list({state:["upcoming","due","partial"],dateFrom:a,dateTo:i,currency:c})},async get(a){return w.projectedIncome.get(a)},async update(a,i){await w.projectedIncome.update(a,{...i,updatedAt:ht()})}},Oi={async generateSchedule(a){const i=await rn.get(a);if(!i||i.status!=="active")return;const c=ht(),u=Ul(),d=new Date;d.setMonth(d.getMonth()+12);const h=i.endDate&&i.endDate<d.toISOString().split("T")[0]?i.endDate:d.toISOString().split("T")[0],b=await hn.getByRetainer(a),g=new Set(b.map(y=>`${y.periodStart}-${y.periodEnd}`)),p=[];let m=new Date(i.startDate);for(;m.toISOString().split("T")[0]<=h;){const y=m.getFullYear(),v=m.getMonth();let j,D,A;if(i.cadence==="monthly"){const U=Eb(y,v);j=U.periodStart,D=U.periodEnd,A=Rp(y,v,i.paymentDay),m.setMonth(m.getMonth()+1)}else{const U=Math.floor(v/3),M=Tb(y,U);j=M.periodStart,D=M.periodEnd;const k=U*3+2;A=Rp(y,k,i.paymentDay),m.setMonth(m.getMonth()+3)}if(D<i.startDate)continue;const E=`${j}-${D}`;if(g.has(E))continue;if(i.endDate&&j>i.endDate)break;const _=A<=u?"due":"upcoming",L={id:xh(),profileId:i.profileId,sourceType:"retainer",sourceId:a,clientId:i.clientId,projectId:i.projectId,currency:i.currency,expectedAmountMinor:i.amountMinor,expectedDate:A,periodStart:j,periodEnd:D,state:_,receivedAmountMinor:0,matchedTransactionIds:[],createdAt:c,updatedAt:c};p.push(L)}p.length>0&&await w.projectedIncome.bulkAdd(p)},async regenerateSchedule(a){const i=await rn.get(a);if(!i)return;const u=(await hn.getByRetainer(a)).filter(d=>d.state==="upcoming"||d.state==="canceled");for(const d of u)await w.projectedIncome.delete(d.id);i.status==="active"&&await this.generateSchedule(a)},async updateDueStates(){const a=Ul(),i=await w.projectedIncome.where("state").equals("upcoming").toArray();for(const c of i)c.expectedDate<=a&&await w.projectedIncome.update(c.id,{state:"due",updatedAt:ht()})}},jh={async getSuggestionsForTransaction(a){const i=await w.transactions.get(a);if(!i)return[];if(i.kind!=="income"||i.status!=="paid")return[];const u=(await hn.list({state:["due","partial"],currency:i.currency})).filter(h=>h.receivedAmountMinor<h.expectedAmountMinor&&!h.matchedTransactionIds.includes(a)),d=[];for(const h of u){const b=this.calculateMatchScore(i,h);if(b>=40){let g;b>=80?g="high":b>=60?g="medium":g="low",d.push({projectedIncomeId:h.id,score:b,confidence:g,projectedIncome:h})}}return d.sort((h,b)=>b.score-h.score).slice(0,10)},calculateMatchScore(a,i){let c=0;if(a.currency!==i.currency)return 0;c+=30,a.clientId&&a.clientId===i.clientId&&(c+=30);const u=i.expectedAmountMinor-i.receivedAmountMinor,d=Math.abs(a.amountMinor-u),h=u>0?d/u:1;h<=.01?c+=25:h<=.05?c+=20:h<=.1?c+=15:h<=.2&&(c+=10);const b=a.occurredAt.split("T")[0],g=Math.abs(bh(b,i.expectedDate));return g<=3?c+=15:g<=7?c+=12:g<=14?c+=8:g<=30&&(c+=4),c},async matchTransaction(a,i){const c=await hn.get(a),u=await w.transactions.get(i);if(!c||!u)return;const d=[...c.matchedTransactionIds,i],h=c.receivedAmountMinor+u.amountMinor;let b=c.state;h>=c.expectedAmountMinor?b="received":h>0&&(b="partial"),await w.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:b==="received"?ht():c.receivedAt,state:b,updatedAt:ht()}),await w.transactions.update(i,{linkedProjectedIncomeId:a,updatedAt:ht()})},async unmatchTransaction(a,i){const c=await hn.get(a),u=await w.transactions.get(i);if(!c||!u)return;const d=c.matchedTransactionIds.filter(p=>p!==i),h=Math.max(0,c.receivedAmountMinor-u.amountMinor);let b=c.state;const g=Ul();h===0?b=c.expectedDate<=g?"due":"upcoming":b="partial",await w.projectedIncome.update(a,{matchedTransactionIds:d,receivedAmountMinor:h,receivedAt:d.length>0?c.receivedAt:void 0,state:b,updatedAt:ht()}),await w.transactions.update(i,{linkedProjectedIncomeId:void 0,updatedAt:ht()})},async getAllSuggestionsForUnlinkedTransactions(){const a=await w.transactions.filter(p=>p.kind==="income"&&p.status==="paid"&&!p.deletedAt&&!p.linkedProjectedIncomeId).toArray(),i=await w.clients.toArray(),c=await w.projects.toArray(),u=await w.categories.toArray(),d=new Map(i.map(p=>[p.id,p.name])),h=new Map(c.map(p=>[p.id,p.name])),b=new Map(u.map(p=>[p.id,p.name])),g=[];for(const p of a){const m=await this.getSuggestionsForTransaction(p.id);if(m.length>0){const y={...p,clientName:p.clientId?d.get(p.clientId):void 0,projectName:p.projectId?h.get(p.projectId):void 0,categoryName:p.categoryId?b.get(p.categoryId):void 0};g.push({transaction:y,suggestions:m})}}return g}};async function Rb(a,i){const c=await w.retainerAgreements.filter(j=>j.status==="active"&&!j.archivedAt).toArray(),u=await hn.list({profileId:a,state:"due"}),d=Ul();let h=0,b=0,g=0;for(const j of c){if(a&&j.profileId!==a||i&&j.currency!==i)continue;h++;const D=j.cadence==="quarterly"?j.amountMinor/3:j.amountMinor;j.currency==="USD"?b+=D:g+=D}let p=0,m=0,y=0,v=0;for(const j of u){if(i&&j.currency!==i)continue;const D=j.expectedAmountMinor-j.receivedAmountMinor;j.currency==="USD"?(p+=D,j.expectedDate<d&&(y+=D)):(m+=D,j.expectedDate<d&&(v+=D))}return{activeCount:h,totalExpectedMonthlyUsdMinor:b,totalExpectedMonthlyIlsMinor:g,totalDueUsdMinor:p,totalDueIlsMinor:m,totalOverdueUsdMinor:y,totalOverdueIlsMinor:v}}const Pa={retainers:a=>["retainers",a],retainer:a=>["retainer",a],retainerDisplay:a=>["retainerDisplay",a],retainerSummary:(a,i)=>["retainerSummary",a,i],projectedIncome:a=>["projectedIncome",a],retainerSchedule:a=>["retainerSchedule",a],dueItems:a=>["dueItems",a],forecastItems:(a,i,c)=>["forecastItems",a,i,c],matchSuggestions:a=>["retainerMatchSuggestions",a],allMatchSuggestions:()=>["allRetainerMatchSuggestions"]};function wh(a){a.invalidateQueries({queryKey:["retainers"]}),a.invalidateQueries({queryKey:["retainer"]}),a.invalidateQueries({queryKey:["retainerDisplay"]}),a.invalidateQueries({queryKey:["retainerSummary"]})}function Sh(a){a.invalidateQueries({queryKey:["projectedIncome"]}),a.invalidateQueries({queryKey:["retainerSchedule"]}),a.invalidateQueries({queryKey:["dueItems"]}),a.invalidateQueries({queryKey:["forecastItems"]})}function _b(a){a.invalidateQueries({queryKey:["retainerMatchSuggestions"]}),a.invalidateQueries({queryKey:["allRetainerMatchSuggestions"]})}function Ka(a){wh(a),Sh(a),_b(a)}function Nw(a={}){return fe({queryKey:Pa.retainers(a),queryFn:()=>rn.list(a)})}function Ib(a){return fe({queryKey:Pa.retainer(a),queryFn:()=>rn.get(a),enabled:!!a})}function Mw(a){return fe({queryKey:Pa.retainerDisplay(a),queryFn:()=>rn.getDisplay(a),enabled:!!a})}function Cw(a,i){return fe({queryKey:Pa.retainerSummary(a,i),queryFn:()=>Rb(a,i)})}function Ob(){const a=ce();return oe({mutationFn:i=>rn.create(i),onSuccess:()=>Ka(a)})}function zb(){const a=ce();return oe({mutationFn:({id:i,data:c})=>rn.update(i,c),onSuccess:()=>Ka(a)})}function Ub(){const a=ce();return oe({mutationFn:i=>rn.archive(i),onSuccess:()=>wh(a)})}function Ew(){const a=ce();return oe({mutationFn:i=>rn.activate(i),onSuccess:()=>Ka(a)})}function Tw(){const a=ce();return oe({mutationFn:i=>rn.pause(i),onSuccess:()=>Ka(a)})}function Rw(){const a=ce();return oe({mutationFn:i=>rn.resume(i),onSuccess:()=>Ka(a)})}function _w(){const a=ce();return oe({mutationFn:i=>rn.end(i),onSuccess:()=>Ka(a)})}function Iw(a){return fe({queryKey:Pa.retainerSchedule(a),queryFn:()=>hn.getByRetainer(a),enabled:!!a})}function Lb(a){return fe({queryKey:Pa.dueItems(a),queryFn:()=>hn.getDueItems(a)})}function Ow(){const a=ce();return oe({mutationFn:()=>Oi.updateDueStates(),onSuccess:()=>Sh(a)})}function Bb(a){return fe({queryKey:Pa.matchSuggestions(a),queryFn:()=>jh.getSuggestionsForTransaction(a),enabled:!!a})}function qb(){const a=ce();return oe({mutationFn:({projectedIncomeId:i,transactionId:c})=>jh.matchTransaction(i,c),onSuccess:()=>{Ka(a),a.invalidateQueries({queryKey:["transactions"]}),a.invalidateQueries({queryKey:["transaction"]})}})}const kb=Vn({profileId:te().min(1,"Profile is required"),clientId:te().min(1,"Client is required"),title:te().min(1,"Title is required"),amount:te().min(1,"Amount is required"),currency:St(["USD","ILS"]),cadence:St(["monthly","quarterly"]),paymentDay:Ol().min(1).max(28),startDate:te().min(1,"Start date is required"),endDate:te().optional(),projectId:te().optional(),notes:te().optional(),status:St(["draft","active","paused","ended"])});function Hb(){const{retainerDrawer:a,closeRetainerDrawer:i}=yt(),{mode:c,retainerId:u,defaultProfileId:d,defaultClientId:h,defaultProjectId:b}=a,g=Fe(),{language:p}=Yn(),m=qi(p),{data:y=[]}=Hi(),{data:v=[]}=xr(),{data:j=[]}=ih(),{data:D,isLoading:A}=Ib(u||""),E=O.useMemo(()=>d||y.find(W=>W.isDefault)?.id||y[0]?.id||"",[d,y]),_=Math.min(new Date().getDate(),28),L=Qa({resolver:Ya(kb),defaultValues:{profileId:E,clientId:h||"",title:"",amount:"",currency:"USD",cadence:"monthly",paymentDay:_,startDate:Qn(),endDate:"",projectId:b||"",notes:"",status:"draft"}}),{watch:U,setValue:M,reset:k,formState:{errors:K}}=L,$=U("clientId"),F=U("amount"),X=U("currency"),ue=U("cadence"),he=U("paymentDay"),ne=U("startDate"),ve=U("endDate"),ie=O.useMemo(()=>$?j.filter(V=>!V.clientId||V.clientId===$):j,[j,$]),ye=O.useMemo(()=>{const V=zl(F);if(!ne||!V)return[];const W=[],gt=new Date(ne),Mt=ve?new Date(ve):null,cn=new Date;cn.setMonth(cn.getMonth()+12);const Kn=Mt&&Mt<cn?Mt:cn;let Ct=new Date(gt);const Fn=ue==="quarterly"?3:1;for(;Ct<=Kn&&W.length<6;){const vn=Ct.getFullYear(),Sn=Ct.getMonth(),Fa=new Date(vn,Sn+1,0).getDate(),on=Math.min(he,Fa),je=new Date(vn,Sn,on);je>=gt&&W.push({date:je.toISOString().split("T")[0],periodLabel:ue==="quarterly"?`Q${Math.floor(Sn/3)+1} ${vn}`:je.toLocaleDateString(m,{month:"short",year:"numeric"})}),Ct.setMonth(Ct.getMonth()+Fn)}return W},[ne,ve,ue,he,F,m]),ge=Ob(),B=zb(),Y=Ub();O.useEffect(()=>{D&&k({profileId:D.profileId,clientId:D.clientId,title:D.title,amount:(D.amountMinor/100).toString(),currency:D.currency,cadence:D.cadence,paymentDay:D.paymentDay,startDate:D.startDate,endDate:D.endDate||"",projectId:D.projectId||"",notes:D.notes||"",status:D.status})},[D,k]),O.useEffect(()=>{c==="create"&&E&&!L.getValues("profileId")&&M("profileId",E)},[c,E,M,L]),O.useEffect(()=>{if(c==="create"&&$&&!L.getValues("title")){const V=v.find(W=>W.id===$);V&&M("title",`${V.name} retainer`)}},[$,v,c,M,L]);const ae=async V=>{try{const W={profileId:V.profileId,clientId:V.clientId,title:V.title,amountMinor:zl(V.amount),currency:V.currency,cadence:V.cadence,paymentDay:V.paymentDay,startDate:V.startDate,endDate:V.endDate||void 0,projectId:V.projectId||void 0,notes:V.notes||void 0,status:V.status};c==="edit"&&u?await B.mutateAsync({id:u,data:W}):await ge.mutateAsync(W),i()}catch(W){console.error("Failed to save retainer:",W)}},xe=async()=>{if(u&&confirm(g("retainers.confirmArchive")))try{await Y.mutateAsync(u),i()}catch(V){console.error("Failed to archive retainer:",V)}},G=ge.isPending||B.isPending;if(c==="edit"&&u&&A)return s.jsx(At,{title:g("common.loading"),onClose:i,children:s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})})});const Z=()=>g(c==="edit"?"drawer.retainer.edit":"drawer.retainer.new");return s.jsx(At,{title:Z(),onClose:i,footer:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"drawer-footer-left",children:c==="edit"&&s.jsx("button",{type:"button",className:"btn btn-danger",onClick:xe,disabled:Y.isPending,children:g("common.archive")})}),s.jsxs("div",{className:"drawer-footer-right",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:g("common.cancel")}),s.jsx("button",{type:"submit",form:"retainer-form",className:"btn btn-primary",disabled:G,children:g(G?"common.saving":"common.save")})]})]}),children:s.jsxs("div",{className:"retainer-drawer-layout",children:[s.jsxs("form",{id:"retainer-form",className:"retainer-drawer-form",onSubmit:L.handleSubmit(ae),children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.expense.profile")," *"]}),s.jsx(Ie,{name:"profileId",control:L.control,render:({field:V})=>s.jsxs("select",{className:se("select",K.profileId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.expense.profilePlaceholder")}),y.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),K.profileId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.client")," *"]}),s.jsx(Ie,{name:"clientId",control:L.control,render:({field:V})=>s.jsxs("select",{className:se("select",K.clientId&&"input-error"),style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.clientPlaceholder")}),v.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})}),K.clientId&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.title")," *"]}),s.jsx("input",{type:"text",className:se("input",K.title&&"input-error"),placeholder:g("drawer.retainer.titlePlaceholder"),...L.register("title")}),K.title&&s.jsx("p",{className:"form-error",children:g("validation.required")})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.amount")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",className:se("input",K.amount&&"input-error"),placeholder:g("drawer.retainer.amountPlaceholder"),...L.register("amount")}),K.amount&&s.jsx("p",{className:"form-error",children:g("validation.amountRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.currency")," *"]}),s.jsx(Ie,{name:"currency",control:L.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"ILS",children:"ILS"})]})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.cadence")," *"]}),s.jsx(Ie,{name:"cadence",control:L.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"monthly",children:g("retainers.cadence.monthly")}),s.jsx("option",{value:"quarterly",children:g("retainers.cadence.quarterly")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.paymentDay")," *"]}),s.jsx(Ie,{name:"paymentDay",control:L.control,render:({field:V})=>s.jsx("select",{className:"select",style:{width:"100%"},value:V.value,onChange:W=>V.onChange(Number(W.target.value)),children:Array.from({length:28},(W,gt)=>gt+1).map(W=>s.jsx("option",{value:W,children:W},W))})})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:[g("drawer.retainer.startDate")," *"]}),s.jsx("input",{type:"date",className:se("input",K.startDate&&"input-error"),...L.register("startDate")}),K.startDate&&s.jsx("p",{className:"form-error",children:g("validation.dateRequired")})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.endDate")}),s.jsx("input",{type:"date",className:"input",...L.register("endDate")})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.project")}),s.jsx(Ie,{name:"projectId",control:L.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"",children:g("drawer.retainer.projectPlaceholder")}),ie.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})})]}),c==="edit"&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.status")}),s.jsx(Ie,{name:"status",control:L.control,render:({field:V})=>s.jsxs("select",{className:"select",style:{width:"100%"},...V,children:[s.jsx("option",{value:"draft",children:g("retainers.status.draft")}),s.jsx("option",{value:"active",children:g("retainers.status.active")}),s.jsx("option",{value:"paused",children:g("retainers.status.paused")}),s.jsx("option",{value:"ended",children:g("retainers.status.ended")})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:g("drawer.retainer.notes")}),s.jsx("textarea",{className:"textarea",placeholder:g("drawer.retainer.notesPlaceholder"),...L.register("notes")})]})]}),s.jsxs("div",{className:"retainer-drawer-preview",children:[s.jsx("h4",{className:"preview-title",children:g("drawer.retainer.schedulePreview")}),ye.length>0?s.jsxs("div",{className:"preview-schedule",children:[ye.map((V,W)=>s.jsxs("div",{className:"preview-schedule-item",children:[s.jsx("span",{className:"preview-schedule-date",children:V.periodLabel}),s.jsx("span",{className:"preview-schedule-amount",children:Pe(zl(F),X,m)})]},W)),ye.length===6&&s.jsx("div",{className:"preview-schedule-more",children:g("drawer.retainer.andMore")})]}):s.jsx("p",{className:"preview-empty",children:g("drawer.retainer.enterDetailsForPreview")})]})]})})}function Ah({value:a,onChange:i,placeholder:c,debounceMs:u=200}){const d=Fe(),h=c??d("common.search"),[b,g]=O.useState(a),p=O.useRef(void 0);O.useEffect(()=>{g(a)},[a]);const m=y=>{g(y),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{i(y)},u)};return O.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),s.jsxs("div",{className:"search-input",children:[s.jsx(Qb,{}),s.jsx("input",{type:"text",value:b,onChange:y=>m(y.target.value),placeholder:h}),b&&s.jsx("button",{onClick:()=>{g(""),i("")},className:"btn-ghost",style:{padding:0,width:20,height:20},children:s.jsx(Vb,{})})]})}function Qb(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,style:{color:"var(--color-text-muted)",flexShrink:0},children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}function Vb(){return s.jsx("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}function Yb({value:a,onChange:i,enabledCurrencies:c=["USD","ILS"],showAll:u=!0}){const d=Fe();return s.jsxs("div",{className:"segment-control",children:[u&&s.jsx("button",{className:se("segment-button",a===void 0&&"active"),onClick:()=>i(void 0),children:d("common.all")}),c.map(h=>s.jsx("button",{className:se("segment-button",a===h&&"active"),onClick:()=>i(h),children:h},h))]})}function Pb({dateFrom:a,dateTo:i,onChange:c}){const u=Fe(),[d,h]=O.useState(!1),[b,g]=O.useState(a),[p,m]=O.useState(i),y=[{value:"this-month",labelKey:"filters.thisMonth"},{value:"last-month",labelKey:"filters.lastMonth"},{value:"this-year",labelKey:"filters.thisYear"},{value:"all",labelKey:"filters.allTime"}],j=(()=>{for(const _ of y){const L=Yo(_.value);if(L.dateFrom===a&&L.dateTo===i)return _.value}return"custom"})();O.useEffect(()=>{j==="custom"&&Promise.resolve().then(()=>{g(a),m(i)})},[a,i,j]);const D=_=>{if(_==="custom"){h(!0),g(a),m(i);return}h(!1);const L=Yo(_);c(L.dateFrom,L.dateTo)},A=(_,L)=>{_==="from"?(g(L),L&&p&&c(L,p)):(m(L),b&&L&&c(b,L))},E=j==="custom"||d;return s.jsxs("div",{className:"date-range-control",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsxs("select",{className:"select",value:E?"custom":j,onChange:_=>D(_.target.value),children:[y.map(_=>s.jsx("option",{value:_.value,children:u(_.labelKey)},_.value)),s.jsx("option",{value:"custom",children:u("filters.custom")})]}),E&&s.jsxs("div",{className:"custom-date-inputs",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[s.jsx("input",{type:"date",className:"input",value:b,onChange:_=>A("from",_.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}}),s.jsx("span",{style:{color:"var(--color-text-muted)"},children:""}),s.jsx("input",{type:"date",className:"input",value:p,onChange:_=>A("to",_.target.value),style:{width:"auto",padding:"var(--space-1) var(--space-2)",fontSize:"var(--font-size-sm)"}})]})]})}function Kb(){const{retainerMatchingDrawer:a,closeRetainerMatchingDrawer:i,setRetainerMatchingTransaction:c,openTransactionDrawer:u}=yt(),{step:d,transactionId:h}=a,b=Fe(),g=qb(),p=()=>b(d==="select-transaction"?"retainerMatching.selectTransaction":"retainerMatching.selectProjectedIncome"),m=async y=>{if(h)try{await g.mutateAsync({projectedIncomeId:y,transactionId:h}),i()}catch(v){console.error("Failed to match transaction:",v)}};return s.jsx(At,{title:p(),onClose:i,footer:s.jsx("div",{className:"drawer-footer-right",children:s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:b("common.cancel")})}),children:d==="select-transaction"?s.jsx(Fb,{onSelect:y=>c(y),onCreateNew:()=>{i(),u({mode:"create",defaultKind:"income"})}}):s.jsx(Gb,{transactionId:h,onSelect:m,isMatching:g.isPending})})}function Fb({onSelect:a,onCreateNew:i}){const c=Fe(),{language:u}=Yn(),d=qi(u),[h,b]=O.useState(""),{data:g=[],isLoading:p}=lh({kind:"income",status:"paid",sort:{by:"occurredAt",dir:"desc"},limit:50}),m=O.useMemo(()=>g.filter(v=>!v.linkedProjectedIncomeId),[g]),y=O.useMemo(()=>{if(!h)return m;const v=h.toLowerCase();return m.filter(j=>j.title?.toLowerCase().includes(v)||j.clientName?.toLowerCase().includes(v)||j.projectName?.toLowerCase().includes(v))},[m,h]);return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:c("retainerMatching.selectTransactionDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Ah,{value:h,onChange:b,placeholder:c("retainerMatching.searchTransactions")})}),s.jsx("div",{className:"matching-actions",children:s.jsxs("button",{className:"btn btn-secondary",onClick:i,children:["+ ",c("retainerMatching.createNewTransaction")]})}),p?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):y.length===0?s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:c(h?"retainerMatching.noMatchingTransactions":"retainerMatching.noUnlinkedTransactions")})}):s.jsx("div",{className:"matching-list",children:y.map(v=>s.jsxs("button",{className:"matching-item",onClick:()=>a(v.id),children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:v.title||v.clientName||c("retainerMatching.untitled")}),s.jsxs("span",{className:"matching-item-meta",children:[Yp(v.occurredAt,d),v.clientName&&`  ${v.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount amount-positive",children:Pe(v.amountMinor,v.currency,d)})]},v.id))})]})}function Gb({transactionId:a,onSelect:i,isMatching:c}){const u=Fe(),{language:d}=Yn(),h=qi(d),[b,g]=O.useState(""),{data:p=[],isLoading:m}=Bb(a),{data:y=[],isLoading:v}=Lb(),j=O.useMemo(()=>{const A=new Set(p.map(_=>_.projectedIncomeId)),E=y.filter(_=>!A.has(_.id));if(b){const _=b.toLowerCase(),L=U=>U.retainerTitle?.toLowerCase().includes(_)||U.clientName?.toLowerCase().includes(_);return{suggestions:p.filter(U=>L(U.projectedIncome)),others:E.filter(L)}}return{suggestions:p,others:E}},[p,y,b]),D=m||v;return s.jsxs("div",{className:"matching-step",children:[s.jsx("p",{className:"matching-description",children:u("retainerMatching.selectProjectedDesc")}),s.jsx("div",{className:"matching-filters",children:s.jsx(Ah,{value:b,onChange:g,placeholder:u("retainerMatching.searchProjected")})}),D?s.jsx("div",{className:"loading",children:s.jsx("div",{className:"spinner"})}):s.jsxs(s.Fragment,{children:[j.suggestions.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.suggestions")}),s.jsx("div",{className:"matching-list",children:j.suggestions.map(A=>s.jsxs("button",{className:"matching-item matching-item-suggested",onClick:()=>i(A.projectedIncomeId),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:A.projectedIncome.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(A.projectedIncome.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),A.projectedIncome.clientName&&`  ${A.projectedIncome.clientName}`]})]}),s.jsxs("div",{className:"matching-item-right",children:[s.jsx("span",{className:"matching-item-amount",children:Pe(A.projectedIncome.expectedAmountMinor-A.projectedIncome.receivedAmountMinor,A.projectedIncome.currency,h)}),s.jsx(Zb,{confidence:A.confidence})]})]},A.projectedIncomeId))})]}),j.others.length>0&&s.jsxs("div",{className:"matching-section",children:[s.jsx("h4",{className:"matching-section-title",children:u("retainerMatching.otherDueItems")}),s.jsx("div",{className:"matching-list",children:j.others.map(A=>s.jsxs("button",{className:"matching-item",onClick:()=>i(A.id),disabled:c,children:[s.jsxs("div",{className:"matching-item-main",children:[s.jsx("span",{className:"matching-item-title",children:A.retainerTitle||u("retainerMatching.untitledRetainer")}),s.jsxs("span",{className:"matching-item-meta",children:[new Date(A.expectedDate).toLocaleDateString(h,{month:"short",year:"numeric"}),A.clientName&&`  ${A.clientName}`]})]}),s.jsx("span",{className:"matching-item-amount",children:Pe(A.expectedAmountMinor-A.receivedAmountMinor,A.currency,h)})]},A.id))})]}),j.suggestions.length===0&&j.others.length===0&&s.jsx("div",{className:"matching-empty",children:s.jsx("p",{children:u(b?"retainerMatching.noMatchingProjected":"retainerMatching.noDueItems")})})]})]})}function Zb({confidence:a}){const i=Fe();return s.jsx("span",{className:se("confidence-badge",`confidence-${a}`),children:i(`retainerMatching.confidence.${a}`)})}function Xb(){const a=Fe(),{language:i}=Yn(),c=O.useRef(null),{data:u,isLoading:d,isError:h}=Hi(),b=rh(),{openBusinessProfileDrawer:g,businessProfileDrawer:p}=yt(),m=!d&&!h&&Array.isArray(u)&&u.length===0,y=p.isOpen,v=m&&!y;O.useEffect(()=>{v&&c.current&&c.current.focus()},[v]);const j=async()=>{const A=i==="ar"?"  ":"Default Profile";await b.mutateAsync({name:A,email:"",businessType:"none",defaultCurrency:"USD",defaultLanguage:i==="ar"?"ar":"en",isDefault:!0})},D=()=>{g({mode:"create"})};return v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"welcome-modal-overlay"}),s.jsx("div",{className:"welcome-modal",role:"dialog","aria-modal":"true","aria-labelledby":"welcome-modal-title",ref:c,tabIndex:-1,children:s.jsxs("div",{className:"welcome-modal-content",children:[s.jsx("div",{className:"welcome-modal-icon",children:s.jsx(Jb,{})}),s.jsx("h2",{id:"welcome-modal-title",className:"welcome-modal-title",children:a("welcome.title")}),s.jsx("p",{className:"welcome-modal-subtitle",children:a("welcome.subtitle")}),s.jsxs("div",{className:"welcome-modal-info",children:[s.jsx("h3",{className:"welcome-modal-info-title",children:a("welcome.infoTitle")}),s.jsxs("ul",{className:"welcome-modal-list",children:[s.jsx("li",{children:a("welcome.bullet1")}),s.jsx("li",{children:a("welcome.bullet2")}),s.jsx("li",{children:a("welcome.bullet3")})]}),s.jsx("p",{className:"welcome-modal-info-note",children:a("welcome.multipleProfiles")})]}),s.jsxs("div",{className:"welcome-modal-actions",children:[s.jsx("button",{className:"btn btn-primary",onClick:D,children:a("welcome.setUpNow")}),s.jsx("button",{className:"btn btn-ghost",onClick:j,disabled:b.isPending,children:b.isPending?a("common.saving"):a("welcome.skipForNow")})]}),s.jsx("p",{className:"welcome-modal-skip-note",children:a("welcome.skipNote")})]})})]}):null}function Jb(){return s.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"})})}const _p="hideDownloadBanner";function $b(){if(typeof navigator>"u")return!1;const a=navigator.platform?.toLowerCase()||"",i=navigator.userAgent?.toLowerCase()||"";return a.includes("mac")||i.includes("macintosh")}function Wb(){return typeof window<"u"&&"__TAURI_INTERNALS__"in window}function e2(){const a=Fe(),[i,c]=O.useState(!1);O.useEffect(()=>{!$b()||Wb()||localStorage.getItem(_p)==="true"||c(!0)},[]);const u=O.useCallback(()=>{localStorage.setItem(_p,"true"),c(!1)},[]);return i?s.jsxs("div",{className:"mac-download-banner",role:"banner",children:[s.jsx("span",{className:"mac-download-banner-message",children:a("downloadBanner.message")}),s.jsxs("div",{className:"mac-download-banner-actions",children:[s.jsx(Li,{to:"/download",className:"mac-download-banner-cta","data-cta":"download-banner-mac",children:a("downloadBanner.cta")}),s.jsx("button",{type:"button",className:"mac-download-banner-dismiss",onClick:u,"aria-label":a("downloadBanner.dismiss"),children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}):null}const t2="https://api.frankfurter.dev/v1/latest",$o="mutaba3a_fx_cache";function Dh(a,i){try{const c=localStorage.getItem($o);if(!c)return null;const u=JSON.parse(c),d=`${a}-${i}`;return u[d]||null}catch{return null}}function Ip(a){try{const i=localStorage.getItem($o),c=i?JSON.parse(i):{},u=`${a.base}-${a.quote}`;c[u]=a,localStorage.setItem($o,JSON.stringify(c))}catch{}}async function n2(a="USD",i="ILS"){const c=Dh(a,i),u=new Date().toISOString();if(!navigator.onLine)return c?{rate:c.rate,base:a,quote:i,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:i,date:"",source:"none",fetchedAt:u};try{const d=`${t2}?base=${a}`,h=await fetch(d);if(!h.ok)throw new Error(`HTTP ${h.status}`);const b=await h.json(),g=b.rates[i];if(typeof g!="number"||g<=0)throw new Error("Invalid rate received");const p={rate:g,base:a,quote:i,date:b.date,fetchedAt:u};Ip(p);const m={rate:1/g,base:i,quote:a,date:b.date,fetchedAt:u};return Ip(m),{rate:g,base:a,quote:i,date:b.date,source:"live",fetchedAt:u}}catch(d){return console.warn("FX fetch failed:",d),c?{rate:c.rate,base:a,quote:i,date:c.date,source:"cached",fetchedAt:c.fetchedAt}:{rate:0,base:a,quote:i,date:"",source:"none",fetchedAt:u}}}function Op(a,i,c,u){return i===c?a:Math.round(a*u)}function a2(a,i,c,u){if(u===null||u<=0)return null;if(c==="ILS"){const d=Op(a,"USD","ILS",u);return i+d}else{const d=1/u,h=Op(i,"ILS","USD",d);return a+h}}const zp={rate:(a,i)=>["fxRate",a,i]};function Nh(a="USD",i="ILS"){const c=ce(),{data:u,isLoading:d,isError:h,refetch:b}=fe({queryKey:zp.rate(a,i),queryFn:()=>n2(a,i),staleTime:14400*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0,retry:2,retryDelay:1e3,placeholderData:()=>{const p=Dh(a,i);if(p)return{rate:p.rate,base:a,quote:i,date:p.date,source:"cached",fetchedAt:p.fetchedAt}}}),g=()=>{c.invalidateQueries({queryKey:zp.rate(a,i)}),b()};return{rate:u?.rate&&u.rate>0?u.rate:null,source:u?.source??"none",isLoading:d,isError:h,rateDate:u?.date||null,lastUpdated:u?.fetchedAt||null,refetch:g}}const Mh="mutaba3a-theme";function l2(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Up(){if(typeof window>"u")return"system";const a=localStorage.getItem(Mh);return a==="light"||a==="dark"||a==="system"?a:"system"}function Lp(a){return a==="system"?l2():a}const Ch=O.createContext(null);function i2({children:a}){const[i,c]=O.useState(Up),[u,d]=O.useState(()=>Lp(Up()));O.useEffect(()=>{const g=Lp(i);d(g),i==="system"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",i),localStorage.setItem(Mh,i)},[i]),O.useEffect(()=>{if(i!=="system")return;const g=window.matchMedia("(prefers-color-scheme: dark)"),p=m=>{d(m.matches?"dark":"light")};return g.addEventListener("change",p),()=>g.removeEventListener("change",p)},[i]);const h=O.useCallback(g=>{c(g)},[]),b={theme:i,resolvedTheme:u,setTheme:h};return s.jsx(Ch.Provider,{value:b,children:a})}function s2(){const a=O.useContext(Ch);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a}const Eh="mutaba3a_fx_banner_state",r2={isMinimized:!1,position:{x:0,y:0}};function c2(){try{const a=localStorage.getItem(Eh);if(a)return JSON.parse(a)}catch{}return r2}function o2(a){try{localStorage.setItem(Eh,JSON.stringify(a))}catch{}}function u2(a){const i=["light","dark","system"],c=i.indexOf(a);return i[(c+1)%i.length]}function d2(){const a=Fe(),{rate:i,source:c,isLoading:u,lastUpdated:d,refetch:h}=Nh("USD","ILS"),{theme:b,resolvedTheme:g,setTheme:p}=s2(),[m,y]=O.useState(c2),[v,j]=O.useState(!1),[D,A]=O.useState({x:0,y:0}),E=O.useRef(null);O.useEffect(()=>{o2(m)},[m]);const _=O.useCallback(X=>{const ue=X.target;if(ue.closest(".fx-banner-actions")||ue.closest("button")||ue.tagName==="BUTTON")return;X.preventDefault(),j(!0);const he=E.current;if(he){const ne=he.getBoundingClientRect();A({x:X.clientX-ne.left,y:X.clientY-ne.top})}},[]);O.useEffect(()=>{if(!v)return;const X=he=>{const ne=E.current;if(!ne)return;const ve=he.clientX-D.x,ie=he.clientY-D.y,ye=window.innerWidth-ne.offsetWidth,ge=window.innerHeight-ne.offsetHeight;y(B=>({...B,position:{x:Math.max(0,Math.min(ve,ye)),y:Math.max(0,Math.min(ie,ge))}}))},ue=()=>{j(!1)};return document.addEventListener("mousemove",X),document.addEventListener("mouseup",ue),()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",ue)}},[v,D]);const L=O.useCallback(()=>{y(X=>({...X,isMinimized:!X.isMinimized}))},[]),U=O.useCallback(()=>{h()},[h]),M=O.useCallback(()=>{p(u2(b))},[b,p]),k=a(`settings.theme.${b}`),K=i!==null?i.toFixed(4):"",$=d?Uv(d,a):"",F=m.position.x!==0||m.position.y!==0?{left:m.position.x,top:m.position.y,right:"auto",bottom:"auto"}:{};return m.isMinimized?s.jsxs("div",{ref:E,className:se("fx-banner-minimized",v&&"dragging"),style:F,onMouseDown:_,children:[s.jsx("div",{className:"fx-banner-drag-handle fx-banner-drag-handle-mini",title:a("fx.drag"),children:s.jsxs("svg",{width:"6",height:"10",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("button",{className:"fx-banner-mini-content",onClick:L,title:a("fx.showBanner"),children:[s.jsx("span",{className:"fx-banner-mini-icon",children:"$"}),c!=="none"&&i!==null&&s.jsx("span",{className:"fx-banner-mini-rate",children:i.toFixed(2)})]}),s.jsx("button",{className:"fx-banner-mini-theme",onClick:M,title:k,"aria-label":k,children:g==="dark"?s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})})]}):s.jsxs("div",{ref:E,className:se("fx-rate-banner",v&&"dragging"),style:F,onMouseDown:_,role:"banner","aria-label":a("fx.bannerTitle"),children:[s.jsx("div",{className:"fx-banner-drag-handle",title:a("fx.drag"),children:s.jsxs("svg",{width:"8",height:"14",viewBox:"0 0 8 14",fill:"currentColor",children:[s.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"2",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"6",cy:"12",r:"1.5"})]})}),s.jsxs("div",{className:"fx-banner-content",children:[s.jsxs("div",{className:"fx-banner-rate",children:[s.jsxs("span",{className:"fx-banner-formula",children:["$1 = ",K," "]}),s.jsx("span",{className:se("fx-banner-source",`source-${c}`),children:u?s.jsx("span",{className:"fx-loading",children:"..."}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fx-source-dot"}),a(`fx.${c}`)]})})]}),$&&c!=="none"&&s.jsx("div",{className:"fx-banner-updated",children:$})]}),s.jsxs("div",{className:"fx-banner-actions",children:[s.jsx("button",{className:"fx-banner-btn",onClick:M,title:k,"aria-label":k,children:g==="dark"?s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{strokeLinecap:"round",d:"M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})}),s.jsx("button",{className:"fx-banner-btn",onClick:U,disabled:u,title:a("fx.refresh"),"aria-label":a("fx.refresh"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:u?"spinning":"",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{className:"fx-banner-btn",onClick:L,title:a("fx.minimize"),"aria-label":a("fx.minimize"),children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})]})]})}const Bp=a=>Symbol.iterator in a,qp=a=>"entries"in a,kp=(a,i)=>{const c=a instanceof Map?a:new Map(a.entries()),u=i instanceof Map?i:new Map(i.entries());if(c.size!==u.size)return!1;for(const[d,h]of c)if(!u.has(d)||!Object.is(h,u.get(d)))return!1;return!0},f2=(a,i)=>{const c=a[Symbol.iterator](),u=i[Symbol.iterator]();let d=c.next(),h=u.next();for(;!d.done&&!h.done;){if(!Object.is(d.value,h.value))return!1;d=c.next(),h=u.next()}return!!d.done&&!!h.done};function m2(a,i){return Object.is(a,i)?!0:typeof a!="object"||a===null||typeof i!="object"||i===null||Object.getPrototypeOf(a)!==Object.getPrototypeOf(i)?!1:Bp(a)&&Bp(i)?qp(a)&&qp(i)?kp(a,i):f2(a,i):kp({entries:()=>Object.entries(a)},{entries:()=>Object.entries(i)})}function cu(a){const i=Ve.useRef(void 0);return c=>{const u=a(c);return m2(i.current,u)?i.current:i.current=u}}const Gt=jr((a,i)=>({status:"idle",lastSyncAt:null,lastError:null,serverRunning:!1,serverPort:null,serverExpiresAt:null,pendingOpsCount:0,pendingConflictsCount:0,discoveredPeers:[],isDiscovering:!1,trustedPeers:[],syncProgress:null,isExportModalOpen:!1,isImportModalOpen:!1,isPairingModalOpen:!1,isConflictBannerDismissed:!1,setStatus:c=>a({status:c}),setLastSync:c=>a({lastSyncAt:c}),setLastError:c=>a({lastError:c}),setServerRunning:(c,u,d)=>a({serverRunning:c,serverPort:u??null,serverExpiresAt:d??null}),setPendingOpsCount:c=>a({pendingOpsCount:c}),setPendingConflictsCount:c=>a({pendingConflictsCount:c}),refreshCounts:async()=>{try{const c=await w.localDevice.toCollection().first();if(!c)a({pendingOpsCount:0});else{const d=await w.opLog.filter(h=>h.createdBy===c.id).count();a({pendingOpsCount:d})}const u=await w.conflictQueue.where("status").equals("open").count();a({pendingConflictsCount:u})}catch(c){console.error("Failed to refresh sync counts:",c)}},setDiscoveredPeers:c=>a({discoveredPeers:c}),setIsDiscovering:c=>a({isDiscovering:c}),startDiscovery:async()=>{const{isDiscovering:c}=i();if(!c){a({isDiscovering:!0,discoveredPeers:[]});try{if(typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{invoke:u}=await _e(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[],import.meta.url),d=await u("discover_lan_peers");a({discoveredPeers:d})}}catch(u){console.error("Failed to discover peers:",u)}finally{a({isDiscovering:!1})}}},setTrustedPeers:c=>a({trustedPeers:c}),refreshTrustedPeers:async()=>{try{const c=await w.trustedPeers.where("status").equals("verified").toArray();a({trustedPeers:c})}catch(c){console.error("Failed to refresh trusted peers:",c)}},setSyncProgress:c=>a({syncProgress:c}),updateSyncProgress:c=>{const u=i().syncProgress;u&&a({syncProgress:{...u,...c}})},openExportModal:()=>a({isExportModalOpen:!0}),closeExportModal:()=>a({isExportModalOpen:!1}),openImportModal:()=>a({isImportModalOpen:!0}),closeImportModal:()=>a({isImportModalOpen:!1}),openPairingModal:()=>a({isPairingModalOpen:!0}),closePairingModal:()=>a({isPairingModalOpen:!1}),dismissConflictBanner:()=>a({isConflictBannerDismissed:!0}),resetConflictBanner:()=>a({isConflictBannerDismissed:!1}),initialize:async()=>{await i().refreshCounts(),await i().refreshTrustedPeers();const c=await w.syncHistory.orderBy("completedAt").reverse().first();if(c&&a({lastSyncAt:c.completedAt}),typeof window<"u"&&"__TAURI_INTERNALS__"in window){const{listen:u}=await _e(async()=>{const{listen:h}=await import("./event-DXqYWlmG.js");return{listen:h}},__vite__mapDeps([0,1]),import.meta.url),{invoke:d}=await _e(async()=>{const{invoke:h}=await import("./core-BEOw45JP.js");return{invoke:h}},[],import.meta.url);await u("sync:ops_received",async h=>{console.log("[SyncStore] Received sync:ops_received event, count:",h.payload);try{const b=await d("get_pending_sync_ops");console.log("[SyncStore] Fetched pending ops:",b.length);for(const p of b)console.log("[SyncStore] Applying op:",p.id,p.opType,p.entityType),await lu(p);const g=await d("clear_pending_sync_ops");console.log("[SyncStore] Cleared pending ops:",g),await i().refreshCounts(),a({lastSyncAt:new Date().toISOString()})}catch(b){console.error("[SyncStore] Failed to process sync operations:",b),a({lastError:String(b)})}}),console.log("[SyncStore] Tauri event listener registered for sync:ops_received")}}}));function zw(){return Gt(cu(a=>({status:a.status,pendingConflicts:a.pendingConflictsCount,lastSyncAt:a.lastSyncAt,serverRunning:a.serverRunning})))}function Uw(){return Gt(cu(a=>({openExportModal:a.openExportModal,openImportModal:a.openImportModal,openPairingModal:a.openPairingModal,startDiscovery:a.startDiscovery,refreshCounts:a.refreshCounts})))}function p2(){return Gt(cu(a=>({count:a.pendingConflictsCount,isDismissed:a.isConflictBannerDismissed,dismiss:a.dismissConflictBanner,reset:a.resetConflictBanner})))}const Lt=O.forwardRef(({variant:a="primary",size:i="md",children:c,isLoading:u,disabled:d,className:h="",...b},g)=>{const p=["btn",`btn-${a}`,`btn-${i}`,u&&"btn-loading",h].filter(Boolean).join(" ");return s.jsxs("button",{ref:g,className:p,disabled:d||u,...b,children:[u&&s.jsx("span",{className:"btn-spinner","aria-hidden":"true"}),s.jsx("span",{className:u?"btn-content-hidden":"",children:c})]})});Lt.displayName="Button";const h2=O.forwardRef(({variant:a="default",padding:i="md",children:c,className:u="",...d},h)=>{const b=["card",`card-${a}`,`card-padding-${i}`,u].filter(Boolean).join(" ");return s.jsx("div",{ref:h,className:b,...d,children:c})});h2.displayName="Card";const y2=O.forwardRef(({title:a,action:i,children:c,className:u="",...d},h)=>s.jsx("div",{ref:h,className:`card-header ${u}`,...d,children:c||s.jsxs(s.Fragment,{children:[a&&s.jsx("h3",{className:"card-title",children:a}),i&&s.jsx("div",{className:"card-action",children:i})]})}));y2.displayName="CardHeader";const g2=O.forwardRef(({children:a,className:i="",...c},u)=>s.jsx("div",{ref:u,className:`card-content ${i}`,...c,children:a}));g2.displayName="CardContent";const v2=O.forwardRef(({children:a,className:i="",...c},u)=>s.jsx("div",{ref:u,className:`card-footer ${i}`,...c,children:a}));v2.displayName="CardFooter";function x2(){const{count:a,isDismissed:i,dismiss:c}=p2(),u=tu();if(a===0||i)return null;const d=()=>{u({to:"/settings",search:{section:"sync"}})},h=b=>{b.stopPropagation(),c()};return s.jsxs("div",{className:"conflict-banner",role:"alert",children:[s.jsxs("div",{className:"conflict-banner__content",children:[s.jsx("span",{className:"conflict-banner__icon",children:""}),s.jsxs("span",{className:"conflict-banner__text",children:[s.jsxs("strong",{children:[a," ",a===1?"edit":"edits"]})," detected on multiple devices"]})]}),s.jsxs("div",{className:"conflict-banner__actions",children:[s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--review",onClick:d,children:"Review"}),s.jsx("button",{className:"conflict-banner__btn conflict-banner__btn--dismiss",onClick:h,"aria-label":"Dismiss",children:""})]})]})}class Ba extends Error{code;constructor(i,c){super(c),this.code=i,this.name="SyncError"}}const Th=new Uint8Array([77,83,89,78]),Rh=1,_h=0,zi=16,Ui=12,b2=6e5;async function Ih(a,i){const c=new TextEncoder,u=await crypto.subtle.importKey("raw",c.encode(a),"PBKDF2",!1,["deriveKey"]),d=new Uint8Array(i).buffer;return crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:b2,hash:"SHA-256"},u,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function j2(a,i){const u=new TextEncoder().encode(JSON.stringify(a)),d=crypto.getRandomValues(new Uint8Array(zi)),h=crypto.getRandomValues(new Uint8Array(Ui)),b=await Ih(i,d),g=await crypto.subtle.encrypt({name:"AES-GCM",iv:h},b,u),p=12+zi+Ui,m=new Uint8Array(p+g.byteLength);let y=0;return m.set(Th,y),y+=4,new DataView(m.buffer).setUint32(y,Rh,!0),y+=4,new DataView(m.buffer).setUint32(y,_h,!0),y+=4,m.set(d,y),y+=zi,m.set(h,y),y+=Ui,m.set(new Uint8Array(g),y),m.buffer}async function Oh(a,i){const c=new DataView(a),u=new Uint8Array(a);let d=0;const h=u.slice(d,d+4);if(!A2(h,Th))throw new Ba("BUNDLE_CORRUPT","Invalid bundle file - not a valid .msync file");d+=4;const b=c.getUint32(d,!0);if(b!==Rh)throw new Ba("BUNDLE_CORRUPT",`Unsupported bundle version: ${b}`);if(d+=4,c.getUint32(d,!0)!==_h)throw new Ba("BUNDLE_CORRUPT","Unsupported key derivation function");d+=4;const p=u.slice(d,d+zi);d+=zi;const m=u.slice(d,d+Ui);d+=Ui;const y=u.slice(d),v=await Ih(i,p);let j;try{j=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},v,y)}catch{throw new Ba("BUNDLE_BAD_PASSPHRASE","Wrong passphrase or corrupted bundle")}const A=new TextDecoder().decode(j);try{const E=JSON.parse(A);if(!E.manifest||!Array.isArray(E.ops))throw new Ba("BUNDLE_CORRUPT","Invalid bundle structure");return E}catch(E){throw E instanceof Ba?E:new Ba("BUNDLE_CORRUPT","Failed to parse bundle contents")}}function w2(a){const i=[];let c=0;a.length<8?i.push("At least 8 characters"):a.length>=12?c+=2:c+=1,/[a-z]/.test(a)&&(c+=1),/[A-Z]/.test(a)&&(c+=1),/[0-9]/.test(a)&&(c+=1),/[^a-zA-Z0-9]/.test(a)&&(c+=1),(!/[a-z]/.test(a)||!/[A-Z]/.test(a))&&i.push("Mix of upper and lowercase letters"),/[0-9]/.test(a)||i.push("At least one number");const u=[/^123/,/password/i,/qwerty/i,/admin/i];for(const h of u)if(h.test(a)){c-=1,i.push("Avoid common patterns");break}let d;return c<3?d="weak":c<5?d="fair":d="strong",{valid:a.length>=8&&c>=3,strength:d,feedback:i}}function S2(a=4){const i=["apple","baker","candy","delta","eagle","frost","green","happy","index","joker","karma","lemon","maple","north","ocean","piano","queen","river","solar","tiger","ultra","vivid","water","xenon","yacht","zebra","amber","blaze","coral","dusk","ember","flame","grove","haven","ivory","jade","kayak","lunar","marble","nova","opal","prism","quartz","ridge","storm","tide","unity","valley","wave","axis","bloom","cloud","drift","echo","fern","glow","haze","iris","jewel","knot","leaf","mist","nest","orbit"],c=[],u=new Uint32Array(a);crypto.getRandomValues(u);for(let d=0;d<a;d++){const h=u[d]%i.length;c.push(i[h])}return c.join("-")}function A2(a,i){if(a.length!==i.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==i[c])return!1;return!0}async function D2(a){const i=xa();let c=a.sinceHlc||ut.zeroString();if(a.targetPeerId){const D=await w.peerCursors.get(a.targetPeerId);D?.lastSentHlc&&(c=D.lastSentHlc)}const u=await ah(c);if(u.length===0)throw new Error("No operations to export");const d=JSON.stringify(u),h=await zh(d),b=u[u.length-1].hlc,g={bundleVersion:1,createdAt:new Date().toISOString(),createdBy:i.id,createdByName:i.name,sinceHlc:c!==ut.zeroString()?c:void 0,untilHlc:b,opCount:u.length,contentHash:h},m=await j2({manifest:g,ops:u},a.passphrase),y=new Date().toISOString().split("T")[0],v=new Date().toISOString().split("T")[1].slice(0,5).replace(":",""),j=`mutaba3a-sync_${i.name.replace(/[^a-zA-Z0-9]/g,"-")}_${y}_${v}.msync`;return{data:m,filename:j,opCount:u.length,manifest:g}}async function N2(a,i){const c=await Oh(a,i),u=await C2(c.ops),d=c.ops.length-u;return{manifest:c.manifest,alreadyImported:d===0,newOpsCount:d}}async function M2(a,i){const c=await Oh(a,i),u=JSON.stringify(c.ops);if(await zh(u)!==c.manifest.contentHash)throw new Error("Bundle integrity check failed - content may be corrupted");const{applyOps:h}=await _e(async()=>{const{applyOps:p}=await Promise.resolve().then(()=>N1);return{applyOps:p}},void 0,import.meta.url),b=await h(c.ops),g={id:crypto.randomUUID(),method:"bundle_import",peerName:c.manifest.createdByName,pulledCount:b.applied,pushedCount:0,conflictCount:b.conflicts.length,startedAt:new Date().toISOString(),completedAt:new Date().toISOString(),status:b.conflicts.length>0?"partial":"success"};return await w.syncHistory.add(g),{applied:b.applied,skipped:b.skipped,conflicts:b.conflicts.length,historyId:g.id}}async function zh(a){const c=new TextEncoder().encode(a),u=await crypto.subtle.digest("SHA-256",c);return"sha256:"+Array.from(new Uint8Array(u)).map(h=>h.toString(16).padStart(2,"0")).join("")}async function C2(a){let i=0;for(const c of a)await w.opLog.get(c.id)&&i++;return i}function E2(a,i){const c=new Blob([a],{type:"application/octet-stream"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=i,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}async function T2(a){return new Promise((i,c)=>{const u=new FileReader;u.onload=()=>i(u.result),u.onerror=()=>c(new Error("Failed to read file")),u.readAsArrayBuffer(a)})}function R2(a){return a.toLowerCase().endsWith(".msync")}const yr=O.forwardRef(({label:a,error:i,hint:c,className:u="",id:d,...h},b)=>{const g=d||(a?`input-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!i;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("input",{ref:b,id:g,className:`input ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":i?`${g}-error`:c?`${g}-hint`:void 0,...h}),i&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:i}),c&&!i&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});yr.displayName="Input";const _2=O.forwardRef(({label:a,error:i,hint:c,className:u="",id:d,...h},b)=>{const g=d||(a?`textarea-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),p=!!i;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:g,className:"input-label",children:a}),s.jsx("textarea",{ref:b,id:g,className:`textarea ${p?"input-error":""} ${u}`,"aria-invalid":p,"aria-describedby":i?`${g}-error`:c?`${g}-hint`:void 0,...h}),i&&s.jsx("p",{id:`${g}-error`,className:"input-error-message",role:"alert",children:i}),c&&!i&&s.jsx("p",{id:`${g}-hint`,className:"input-hint",children:c})]})});_2.displayName="Textarea";const I2=O.forwardRef(({label:a,error:i,hint:c,children:u,className:d="",id:h,...b},g)=>{const p=h||(a?`select-${a.toLowerCase().replace(/\s+/g,"-")}`:void 0),m=!!i;return s.jsxs("div",{className:"input-wrapper",children:[a&&s.jsx("label",{htmlFor:p,className:"input-label",children:a}),s.jsxs("div",{className:"select-wrapper",children:[s.jsx("select",{ref:g,id:p,className:`select ${m?"input-error":""} ${d}`,"aria-invalid":m,"aria-describedby":i?`${p}-error`:c?`${p}-hint`:void 0,...b,children:u}),s.jsx("span",{className:"select-chevron","aria-hidden":"true",children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:s.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i&&s.jsx("p",{id:`${p}-error`,className:"input-error-message",role:"alert",children:i}),c&&!i&&s.jsx("p",{id:`${p}-hint`,className:"input-hint",children:c})]})});I2.displayName="Select";function O2(){const a=Gt(k=>k.isExportModalOpen),i=Gt(k=>k.closeExportModal),[c,u]=O.useState(""),[d,h]=O.useState(""),[b,g]=O.useState(!1),[p,m]=O.useState(!1),[y,v]=O.useState(null),[j,D]=O.useState(null);if(!a)return null;const A=w2(c),E=c===d,_=A.valid&&E&&c.length>0,L=()=>{const k=S2(4);u(k),h(k),g(!0)},U=async()=>{if(_){m(!0),v(null);try{const k=await D2({passphrase:c});E2(k.data,k.filename),D({filename:k.filename,opCount:k.opCount})}catch(k){v(k instanceof Error?k.message:"Export failed")}finally{m(!1)}}},M=()=>{u(""),h(""),g(!1),v(null),D(null),i()};return s.jsx("div",{className:"modal-overlay",onClick:M,children:s.jsxs("div",{className:"export-modal",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"export-modal__header",children:[s.jsx("h2",{className:"export-modal__title",children:"Export Sync Bundle"}),s.jsx("button",{className:"export-modal__close",onClick:M,children:""})]}),j?s.jsx("div",{className:"export-modal__body",children:s.jsxs("div",{className:"export-success",children:[s.jsx("span",{className:"export-success__icon",children:""}),s.jsx("h3",{className:"export-success__title",children:"Export Complete"}),s.jsxs("p",{className:"export-success__message",children:["Exported ",j.opCount," changes to:",s.jsx("br",{}),s.jsx("code",{children:j.filename})]}),s.jsxs("p",{className:"export-success__hint",children:["Share this file with your other device and import it there.",s.jsx("br",{}),"Keep your passphrase safe - you'll need it to import."]})]})}):s.jsxs("div",{className:"export-modal__body",children:[s.jsx("p",{className:"export-modal__description",children:"Create an encrypted file containing your recent changes. You'll need the passphrase to import this bundle on another device."}),y&&s.jsx("div",{className:"export-modal__error",children:y}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"export-modal__input-row",children:[s.jsx(yr,{type:b?"text":"password",value:c,onChange:k=>u(k.target.value),placeholder:"Enter a strong passphrase"}),s.jsx("button",{type:"button",className:"export-modal__toggle-visibility",onClick:()=>g(!b),children:b?"":""})]}),c&&!A.valid&&s.jsx("ul",{className:"export-modal__feedback",children:A.feedback.map((k,K)=>s.jsx("li",{children:k},K))}),c&&s.jsxs("div",{className:`export-modal__strength export-modal__strength--${A.strength}`,children:["Strength: ",A.strength]})]}),s.jsxs("div",{className:"export-modal__field",children:[s.jsx("label",{className:"export-modal__label",children:"Confirm Passphrase"}),s.jsx(yr,{type:b?"text":"password",value:d,onChange:k=>h(k.target.value),placeholder:"Confirm your passphrase"}),d&&!E&&s.jsx("div",{className:"export-modal__error-inline",children:"Passphrases don't match"})]}),s.jsx("button",{type:"button",className:"export-modal__generate",onClick:L,children:"Generate secure passphrase"})]}),s.jsx("div",{className:"export-modal__footer",children:j?s.jsx(Lt,{onClick:M,children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(Lt,{variant:"ghost",onClick:M,children:"Cancel"}),s.jsx(Lt,{onClick:U,disabled:!_||p,children:p?"Exporting...":"Export Bundle"})]})})]})})}function z2(){const a=Gt(G=>G.isImportModalOpen),i=Gt(G=>G.closeImportModal),c=Gt(G=>G.refreshCounts),[u,d]=O.useState("select"),[h,b]=O.useState(null),[g,p]=O.useState(null),[m,y]=O.useState(""),[v,j]=O.useState(!1),[D,A]=O.useState(!1),[E,_]=O.useState(null),[L,U]=O.useState(null),[M,k]=O.useState(null),[K,$]=O.useState(!1),F=O.useRef(null),X=O.useCallback(()=>{d("select"),b(null),p(null),y(""),j(!1),A(!1),_(null),U(null),k(null),$(!1)},[]),ue=()=>{X(),i()},he=async G=>{if(_(null),!R2(G.name)){_("Please select a .msync file");return}try{const be=await T2(G);b(G),p(be),d("decrypt")}catch(be){_(be instanceof Error?be.message:"Failed to read file")}},ne=G=>{const be=G.target.files?.[0];be&&he(be)},ve=O.useCallback(G=>{G.preventDefault(),$(!1);const be=G.dataTransfer.files[0];be&&he(be)},[]),ie=O.useCallback(G=>{G.preventDefault(),$(!0)},[]),ye=O.useCallback(G=>{G.preventDefault(),$(!1)},[]),ge=async()=>{if(!(!g||!m)){A(!0),_(null);try{const G=await N2(g,m);U(G),d("preview")}catch(G){const be=G instanceof Error?G.message:"Failed to decrypt bundle";be.includes("decrypt")||be.includes("passphrase")?_("Incorrect passphrase. Please try again."):_(be)}finally{A(!1)}}},B=async()=>{if(!(!g||!m)){A(!0),_(null);try{const G=await M2(g,m);k(G),d("success"),c()}catch(G){_(G instanceof Error?G.message:"Import failed")}finally{A(!1)}}},Y=()=>{b(null),p(null),y(""),_(null),d("select"),F.current&&(F.current.value="")},ae=G=>G<1024?`${G} B`:G<1024*1024?`${(G/1024).toFixed(1)} KB`:`${(G/(1024*1024)).toFixed(1)} MB`,xe=G=>new Date(G).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return a?s.jsx("div",{className:"modal-overlay",onClick:ue,children:s.jsxs("div",{className:"import-modal",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"import-modal__header",children:[s.jsx("h2",{className:"import-modal__title",children:"Import Sync Bundle"}),s.jsx("button",{className:"import-modal__close",onClick:ue,children:""})]}),u==="success"&&M?s.jsx("div",{className:"import-modal__body",children:s.jsxs("div",{className:"import-success",children:[s.jsx("span",{className:"import-success__icon",children:""}),s.jsx("h3",{className:"import-success__title",children:"Import Complete"}),s.jsxs("p",{className:"import-success__message",children:["Successfully imported ",M.applied," changes.",M.skipped>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),M.skipped," changes were already synced."]}),M.conflicts>0&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),M.conflicts," conflicts need review."]})]})]})}):s.jsxs("div",{className:"import-modal__body",children:[u==="select"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"import-modal__description",children:"Select a .msync file to import changes from another device."}),E&&s.jsx("div",{className:"import-modal__error",children:E}),s.jsxs("div",{className:`import-modal__dropzone ${K?"import-modal__dropzone--active":""}`,onClick:()=>F.current?.click(),onDrop:ve,onDragOver:ie,onDragLeave:ye,children:[s.jsx("p",{className:"import-modal__dropzone-text",children:"Drop .msync file here or click to browse"}),s.jsx("p",{className:"import-modal__dropzone-hint",children:"Only .msync files are supported"})]}),s.jsx("input",{ref:F,type:"file",accept:".msync",onChange:ne,style:{display:"none"}})]}),u==="decrypt"&&h&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h.name}),s.jsx("div",{className:"import-modal__file-size",children:ae(h.size)})]}),s.jsx("button",{className:"import-modal__file-remove",onClick:Y,title:"Remove file",children:""})]}),E&&s.jsx("div",{className:"import-modal__error",children:E}),s.jsxs("div",{className:"import-modal__field",children:[s.jsx("label",{className:"import-modal__label",children:"Passphrase"}),s.jsxs("div",{className:"import-modal__input-row",children:[s.jsx(yr,{type:v?"text":"password",value:m,onChange:G=>y(G.target.value),placeholder:"Enter the passphrase used to create this bundle",onKeyDown:G=>G.key==="Enter"&&m&&ge()}),s.jsx("button",{type:"button",className:"import-modal__toggle-visibility",onClick:()=>j(!v),children:v?"":""})]})]})]}),u==="preview"&&L&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"import-modal__file-info",children:[s.jsx("span",{className:"import-modal__file-icon",children:""}),s.jsxs("div",{className:"import-modal__file-details",children:[s.jsx("div",{className:"import-modal__file-name",children:h?.name}),s.jsx("div",{className:"import-modal__file-size",children:h&&ae(h.size)})]})]}),E&&s.jsx("div",{className:"import-modal__error",children:E}),L.alreadyImported&&s.jsx("div",{className:"import-modal__warning",children:"This bundle has already been imported. No new changes to apply."}),s.jsxs("div",{className:"import-modal__preview",children:[s.jsx("div",{className:"import-modal__preview-title",children:"Bundle Details"}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"From device"}),s.jsx("span",{className:"import-modal__preview-value",children:L.manifest.createdByName})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Created"}),s.jsx("span",{className:"import-modal__preview-value",children:xe(L.manifest.createdAt)})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"Total changes"}),s.jsx("span",{className:"import-modal__preview-value",children:L.manifest.opCount})]}),s.jsxs("div",{className:"import-modal__preview-item",children:[s.jsx("span",{className:"import-modal__preview-label",children:"New changes"}),s.jsx("span",{className:"import-modal__preview-value",children:L.newOpsCount})]})]})]})]}),s.jsx("div",{className:"import-modal__footer",children:u==="success"?s.jsx(Lt,{onClick:ue,children:"Done"}):u==="preview"?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{variant:"ghost",onClick:()=>d("decrypt"),children:"Back"}),s.jsx(Lt,{onClick:B,disabled:D||(L?.alreadyImported??!1),children:D?"Importing...":"Import Changes"})]}):u==="decrypt"?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{variant:"ghost",onClick:ue,children:"Cancel"}),s.jsx(Lt,{onClick:ge,disabled:!m||D,children:D?"Decrypting...":"Continue"})]}):s.jsx(Lt,{variant:"ghost",onClick:ue,children:"Cancel"})})]})}):null}var U2=Object.defineProperty,gr=Object.getOwnPropertySymbols,Uh=Object.prototype.hasOwnProperty,Lh=Object.prototype.propertyIsEnumerable,Hp=(a,i,c)=>i in a?U2(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Wo=(a,i)=>{for(var c in i||(i={}))Uh.call(i,c)&&Hp(a,c,i[c]);if(gr)for(var c of gr(i))Lh.call(i,c)&&Hp(a,c,i[c]);return a},eu=(a,i)=>{var c={};for(var u in a)Uh.call(a,u)&&i.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&gr)for(var u of gr(a))i.indexOf(u)<0&&Lh.call(a,u)&&(c[u]=a[u]);return c};var Ha;(a=>{const i=class Ae{constructor(p,m,y,v){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<Ae.MIN_VERSION||p>Ae.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let j=[];for(let A=0;A<this.size;A++)j.push(!1);for(let A=0;A<this.size;A++)this.modules.push(j.slice()),this.isFunction.push(j.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(y);if(this.drawCodewords(D),v==-1){let A=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const _=this.getPenaltyScore();_<A&&(v=E,A=_),this.applyMask(E)}}d(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(p,m){const y=a.QrSegment.makeSegments(p);return Ae.encodeSegments(y,m)}static encodeBinary(p,m){const y=a.QrSegment.makeBytes(p);return Ae.encodeSegments([y],m)}static encodeSegments(p,m,y=1,v=40,j=-1,D=!0){if(!(Ae.MIN_VERSION<=y&&y<=v&&v<=Ae.MAX_VERSION)||j<-1||j>7)throw new RangeError("Invalid value");let A,E;for(A=y;;A++){const M=Ae.getNumDataCodewords(A,m)*8,k=b.getTotalBits(p,A);if(k<=M){E=k;break}if(A>=v)throw new RangeError("Data too long")}for(const M of[Ae.Ecc.MEDIUM,Ae.Ecc.QUARTILE,Ae.Ecc.HIGH])D&&E<=Ae.getNumDataCodewords(A,M)*8&&(m=M);let _=[];for(const M of p){c(M.mode.modeBits,4,_),c(M.numChars,M.mode.numCharCountBits(A),_);for(const k of M.getData())_.push(k)}d(_.length==E);const L=Ae.getNumDataCodewords(A,m)*8;d(_.length<=L),c(0,Math.min(4,L-_.length),_),c(0,(8-_.length%8)%8,_),d(_.length%8==0);for(let M=236;_.length<L;M^=253)c(M,8,_);let U=[];for(;U.length*8<_.length;)U.push(0);return _.forEach((M,k)=>U[k>>>3]|=M<<7-(k&7)),new Ae(A,m,U,j)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let y=0;y<m;y++)for(let v=0;v<m;v++)y==0&&v==0||y==0&&v==m-1||y==m-1&&v==0||this.drawAlignmentPattern(p[y],p[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let y=m;for(let j=0;j<10;j++)y=y<<1^(y>>>9)*1335;const v=(m<<10|y)^21522;d(v>>>15==0);for(let j=0;j<=5;j++)this.setFunctionModule(8,j,u(v,j));this.setFunctionModule(8,7,u(v,6)),this.setFunctionModule(8,8,u(v,7)),this.setFunctionModule(7,8,u(v,8));for(let j=9;j<15;j++)this.setFunctionModule(14-j,8,u(v,j));for(let j=0;j<8;j++)this.setFunctionModule(this.size-1-j,8,u(v,j));for(let j=8;j<15;j++)this.setFunctionModule(8,this.size-15+j,u(v,j));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;d(m>>>18==0);for(let y=0;y<18;y++){const v=u(m,y),j=this.size-11+y%3,D=Math.floor(y/3);this.setFunctionModule(j,D,v),this.setFunctionModule(D,j,v)}}drawFinderPattern(p,m){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const j=Math.max(Math.abs(v),Math.abs(y)),D=p+v,A=m+y;0<=D&&D<this.size&&0<=A&&A<this.size&&this.setFunctionModule(D,A,j!=2&&j!=4)}}drawAlignmentPattern(p,m){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(p+v,m+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(p,m,y){this.modules[m][p]=y,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,y=this.errorCorrectionLevel;if(p.length!=Ae.getNumDataCodewords(m,y))throw new RangeError("Invalid argument");const v=Ae.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][m],j=Ae.ECC_CODEWORDS_PER_BLOCK[y.ordinal][m],D=Math.floor(Ae.getNumRawDataModules(m)/8),A=v-D%v,E=Math.floor(D/v);let _=[];const L=Ae.reedSolomonComputeDivisor(j);for(let M=0,k=0;M<v;M++){let K=p.slice(k,k+E-j+(M<A?0:1));k+=K.length;const $=Ae.reedSolomonComputeRemainder(K,L);M<A&&K.push(0),_.push(K.concat($))}let U=[];for(let M=0;M<_[0].length;M++)_.forEach((k,K)=>{(M!=E-j||K>=A)&&U.push(k[M])});return d(U.length==D),U}drawCodewords(p){if(p.length!=Math.floor(Ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let j=0;j<2;j++){const D=y-j,E=(y+1&2)==0?this.size-1-v:v;!this.isFunction[E][D]&&m<p.length*8&&(this.modules[E][D]=u(p[m>>>3],7-(m&7)),m++)}}d(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let y=0;y<this.size;y++){let v;switch(p){case 0:v=(y+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+m)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(m/2))%2==0;break;case 5:v=y*m%2+y*m%3==0;break;case 6:v=(y*m%2+y*m%3)%2==0;break;case 7:v=((y+m)%2+y*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][y]&&v&&(this.modules[m][y]=!this.modules[m][y])}}getPenaltyScore(){let p=0;for(let j=0;j<this.size;j++){let D=!1,A=0,E=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[j][_]==D?(A++,A==5?p+=Ae.PENALTY_N1:A>5&&p++):(this.finderPenaltyAddHistory(A,E),D||(p+=this.finderPenaltyCountPatterns(E)*Ae.PENALTY_N3),D=this.modules[j][_],A=1);p+=this.finderPenaltyTerminateAndCount(D,A,E)*Ae.PENALTY_N3}for(let j=0;j<this.size;j++){let D=!1,A=0,E=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][j]==D?(A++,A==5?p+=Ae.PENALTY_N1:A>5&&p++):(this.finderPenaltyAddHistory(A,E),D||(p+=this.finderPenaltyCountPatterns(E)*Ae.PENALTY_N3),D=this.modules[_][j],A=1);p+=this.finderPenaltyTerminateAndCount(D,A,E)*Ae.PENALTY_N3}for(let j=0;j<this.size-1;j++)for(let D=0;D<this.size-1;D++){const A=this.modules[j][D];A==this.modules[j][D+1]&&A==this.modules[j+1][D]&&A==this.modules[j+1][D+1]&&(p+=Ae.PENALTY_N2)}let m=0;for(const j of this.modules)m=j.reduce((D,A)=>D+(A?1:0),m);const y=this.size*this.size,v=Math.ceil(Math.abs(m*20-y*10)/y)-1;return d(0<=v&&v<=9),p+=v*Ae.PENALTY_N4,d(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let v=this.size-7;y.length<p;v-=m)y.splice(1,0,v);return y}}static getNumRawDataModules(p){if(p<Ae.MIN_VERSION||p>Ae.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;m-=(25*y-10)*y-55,p>=7&&(m-=36)}return d(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(Ae.getNumRawDataModules(p)/8)-Ae.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*Ae.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<p-1;v++)m.push(0);m.push(1);let y=1;for(let v=0;v<p;v++){for(let j=0;j<m.length;j++)m[j]=Ae.reedSolomonMultiply(m[j],y),j+1<m.length&&(m[j]^=m[j+1]);y=Ae.reedSolomonMultiply(y,2)}return m}static reedSolomonComputeRemainder(p,m){let y=m.map(v=>0);for(const v of p){const j=v^y.shift();y.push(0),m.forEach((D,A)=>y[A]^=Ae.reedSolomonMultiply(D,j))}return y}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(m>>>v&1)*p;return d(y>>>8==0),y}finderPenaltyCountPatterns(p){const m=p[1];d(m<=this.size*3);const y=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(y&&p[0]>=m*4&&p[6]>=m?1:0)+(y&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,y){return p&&(this.finderPenaltyAddHistory(m,y),m=0),m+=this.size,this.finderPenaltyAddHistory(m,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=i;function c(g,p,m){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)m.push(g>>>y&1)}function u(g,p){return(g>>>p&1)!=0}function d(g){if(!g)throw new Error("Assertion error")}const h=class $e{constructor(p,m,y){if(this.mode=p,this.numChars=m,this.bitData=y,m<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let m=[];for(const y of p)c(y,8,m);return new $e($e.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!$e.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let y=0;y<p.length;){const v=Math.min(p.length-y,3);c(parseInt(p.substring(y,y+v),10),v*3+1,m),y+=v}return new $e($e.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!$e.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],y;for(y=0;y+2<=p.length;y+=2){let v=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;v+=$e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),c(v,11,m)}return y<p.length&&c($e.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,m),new $e($e.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:$e.isNumeric(p)?[$e.makeNumeric(p)]:$e.isAlphanumeric(p)?[$e.makeAlphanumeric(p)]:[$e.makeBytes($e.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)c(p,8,m);else if(p<16384)c(2,2,m),c(p,14,m);else if(p<1e6)c(6,3,m),c(p,21,m);else throw new RangeError("ECI assignment value out of range");return new $e($e.Mode.ECI,0,m)}static isNumeric(p){return $e.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return $e.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let y=0;for(const v of p){const j=v.mode.numCharCountBits(m);if(v.numChars>=1<<j)return 1/0;y+=4+j+v.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?m.push(p.charCodeAt(y)):(m.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return m}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let b=h;a.QrSegment=h})(Ha||(Ha={}));(a=>{(i=>{const c=class{constructor(d,h){this.ordinal=d,this.formatBits=h}};c.LOW=new c(0,1),c.MEDIUM=new c(1,0),c.QUARTILE=new c(2,3),c.HIGH=new c(3,2),i.Ecc=c})(a.QrCode||(a.QrCode={}))})(Ha||(Ha={}));(a=>{(i=>{const c=class{constructor(d,h){this.modeBits=d,this.numBitsCharCount=h}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};c.NUMERIC=new c(1,[10,12,14]),c.ALPHANUMERIC=new c(2,[9,11,13]),c.BYTE=new c(4,[8,16,16]),c.KANJI=new c(8,[8,10,12]),c.ECI=new c(7,[0,0,0]),i.Mode=c})(a.QrSegment||(a.QrSegment={}))})(Ha||(Ha={}));var Il=Ha;var L2={L:Il.QrCode.Ecc.LOW,M:Il.QrCode.Ecc.MEDIUM,Q:Il.QrCode.Ecc.QUARTILE,H:Il.QrCode.Ecc.HIGH},Bh=128,qh="L",kh="#FFFFFF",Hh="#000000",Qh=!1,Vh=1,B2=4,q2=0,k2=.1;function Yh(a,i=0){const c=[];return a.forEach(function(u,d){let h=null;u.forEach(function(b,g){if(!b&&h!==null){c.push(`M${h+i} ${d+i}h${g-h}v1H${h+i}z`),h=null;return}if(g===u.length-1){if(!b)return;h===null?c.push(`M${g+i},${d+i} h1v1H${g+i}z`):c.push(`M${h+i},${d+i} h${g+1-h}v1H${h+i}z`);return}b&&h===null&&(h=g)})}),c.join("")}function Ph(a,i){return a.slice().map((c,u)=>u<i.y||u>=i.y+i.h?c:c.map((d,h)=>h<i.x||h>=i.x+i.w?d:!1))}function H2(a,i,c,u){if(u==null)return null;const d=a.length+c*2,h=Math.floor(i*k2),b=d/i,g=(u.width||h)*b,p=(u.height||h)*b,m=u.x==null?a.length/2-g/2:u.x*b,y=u.y==null?a.length/2-p/2:u.y*b,v=u.opacity==null?1:u.opacity;let j=null;if(u.excavate){let A=Math.floor(m),E=Math.floor(y),_=Math.ceil(g+m-A),L=Math.ceil(p+y-E);j={x:A,y:E,w:_,h:L}}const D=u.crossOrigin;return{x:m,y,h:p,w:g,excavation:j,opacity:v,crossOrigin:D}}function Q2(a,i){return i!=null?Math.max(Math.floor(i),0):a?B2:q2}function Kh({value:a,level:i,minVersion:c,includeMargin:u,marginSize:d,imageSettings:h,size:b,boostLevel:g}){let p=Ve.useMemo(()=>{const A=(Array.isArray(a)?a:[a]).reduce((E,_)=>(E.push(...Il.QrSegment.makeSegments(_)),E),[]);return Il.QrCode.encodeSegments(A,L2[i],c,void 0,void 0,g)},[a,i,c,g]);const{cells:m,margin:y,numCells:v,calculatedImageSettings:j}=Ve.useMemo(()=>{let D=p.getModules();const A=Q2(u,d),E=D.length+A*2,_=H2(D,b,A,h);return{cells:D,margin:A,numCells:E,calculatedImageSettings:_}},[p,b,h,u,d]);return{qrcode:p,margin:y,cells:m,numCells:v,calculatedImageSettings:j}}var V2=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Y2=Ve.forwardRef(function(i,c){const u=i,{value:d,size:h=Bh,level:b=qh,bgColor:g=kh,fgColor:p=Hh,includeMargin:m=Qh,minVersion:y=Vh,boostLevel:v,marginSize:j,imageSettings:D}=u,E=eu(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:_}=E,L=eu(E,["style"]),U=D?.src,M=Ve.useRef(null),k=Ve.useRef(null),K=Ve.useCallback(ye=>{M.current=ye,typeof c=="function"?c(ye):c&&(c.current=ye)},[c]),[$,F]=Ve.useState(!1),{margin:X,cells:ue,numCells:he,calculatedImageSettings:ne}=Kh({value:d,level:b,minVersion:y,boostLevel:v,includeMargin:m,marginSize:j,imageSettings:D,size:h});Ve.useEffect(()=>{if(M.current!=null){const ye=M.current,ge=ye.getContext("2d");if(!ge)return;let B=ue;const Y=k.current,ae=ne!=null&&Y!==null&&Y.complete&&Y.naturalHeight!==0&&Y.naturalWidth!==0;ae&&ne.excavation!=null&&(B=Ph(ue,ne.excavation));const xe=window.devicePixelRatio||1;ye.height=ye.width=h*xe;const G=h/he*xe;ge.scale(G,G),ge.fillStyle=g,ge.fillRect(0,0,he,he),ge.fillStyle=p,V2?ge.fill(new Path2D(Yh(B,X))):ue.forEach(function(be,Z){be.forEach(function(V,W){V&&ge.fillRect(W+X,Z+X,1,1)})}),ne&&(ge.globalAlpha=ne.opacity),ae&&ge.drawImage(Y,ne.x+X,ne.y+X,ne.w,ne.h)}}),Ve.useEffect(()=>{F(!1)},[U]);const ve=Wo({height:h,width:h},_);let ie=null;return U!=null&&(ie=Ve.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{F(!0)},ref:k,crossOrigin:ne?.crossOrigin})),Ve.createElement(Ve.Fragment,null,Ve.createElement("canvas",Wo({style:ve,height:h,width:h,ref:K,role:"img"},L)),ie)});Y2.displayName="QRCodeCanvas";var Fh=Ve.forwardRef(function(i,c){const u=i,{value:d,size:h=Bh,level:b=qh,bgColor:g=kh,fgColor:p=Hh,includeMargin:m=Qh,minVersion:y=Vh,boostLevel:v,title:j,marginSize:D,imageSettings:A}=u,E=eu(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:_,cells:L,numCells:U,calculatedImageSettings:M}=Kh({value:d,level:b,minVersion:y,boostLevel:v,includeMargin:m,marginSize:D,imageSettings:A,size:h});let k=L,K=null;A!=null&&M!=null&&(M.excavation!=null&&(k=Ph(L,M.excavation)),K=Ve.createElement("image",{href:A.src,height:M.h,width:M.w,x:M.x+_,y:M.y+_,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const $=Yh(k,_);return Ve.createElement("svg",Wo({height:h,width:h,viewBox:`0 0 ${U} ${U}`,ref:c,role:"img"},E),!!j&&Ve.createElement("title",null,j),Ve.createElement("path",{fill:g,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),Ve.createElement("path",{fill:p,d:$,shapeRendering:"crispEdges"}),K)});Fh.displayName="QRCodeSVG";const P2=2e3,Qo=typeof window<"u"&&"__TAURI_INTERNALS__"in window;function K2(){const[a,i]=O.useState(null),[c,u]=O.useState(null),[d,h]=O.useState(!1),[b,g]=O.useState(null),p=O.useRef(null),{refreshTrustedPeers:m}=Gt(),y=O.useCallback(async()=>{if(!Qo){g("Pairing is only available in the desktop app");return}h(!0),g(null),u(null);try{const{invoke:M}=await _e(async()=>{const{invoke:K}=await import("./core-BEOw45JP.js");return{invoke:K}},[],import.meta.url),k=await M("start_pairing_session");i(k),D(k.pairingId)}catch(M){const k=M instanceof Error?M.message:String(M);g(k),i(null)}finally{h(!1)}},[]),v=O.useCallback(async()=>{if(A(),a&&Qo)try{const{invoke:M}=await _e(async()=>{const{invoke:k}=await import("./core-BEOw45JP.js");return{invoke:k}},[],import.meta.url);await M("cancel_pairing_session",{pairingId:a.pairingId})}catch(M){console.error("Failed to cancel pairing session:",M)}i(null),u(null),g(null)},[a]),j=O.useCallback(async()=>{await v(),await y()},[v,y]),D=O.useCallback(M=>{A();const k=async()=>{if(Qo)try{const{invoke:K}=await _e(async()=>{const{invoke:F}=await import("./core-BEOw45JP.js");return{invoke:F}},[],import.meta.url),$=await K("get_pairing_status",{pairingId:M});u($),$.status!=="pending"&&(A(),$.status==="verified"&&await m())}catch(K){console.error("Status poll failed:",K),A(),u($=>$?{...$,status:"expired"}:null)}};k(),p.current=window.setInterval(k,P2)},[m]),A=O.useCallback(()=>{p.current!==null&&(clearInterval(p.current),p.current=null)},[]);O.useEffect(()=>()=>{A()},[A]);const E=c?.status==="expired",_=c?.status==="verified",L=c?.status==="failed",U=c?.status==="pending"||!c&&a!==null;return{session:a,status:c,isLoading:d,error:b,isExpired:E,isVerified:_,isFailed:L,isPending:U,startSession:y,cancelSession:v,regenerateSession:j}}function F2(a){return a.length!==6?a:`${a.slice(0,3)} ${a.slice(3)}`}function G2(a){const[i,c]=O.useState(0);return O.useEffect(()=>{if(!a){c(0);return}const u=()=>{const h=new Date(a).getTime(),b=Date.now(),g=Math.max(0,Math.floor((h-b)/1e3));c(g)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)},[a]),i}function Z2(a){const i=Math.floor(a/60),c=a%60;return`${i}:${c.toString().padStart(2,"0")}`}function X2(){const a=Gt(M=>M.isPairingModalOpen),i=Gt(M=>M.closePairingModal),c=Gt(M=>M.serverRunning),{session:u,status:d,isLoading:h,error:b,isExpired:g,isVerified:p,isFailed:m,startSession:y,cancelSession:v,regenerateSession:j}=K2(),D=G2(u?.expiresAt),[A,E]=O.useState(null);O.useEffect(()=>{a&&!u&&!h&&c&&y()},[a,u,h,c,y]),O.useEffect(()=>{if(A){const M=setTimeout(()=>E(null),2e3);return()=>clearTimeout(M)}},[A]);const _=()=>{v(),i()},L=async()=>{if(u?.code)try{await navigator.clipboard.writeText(u.code),E("code")}catch(M){console.error("Failed to copy code:",M)}},U=async()=>{if(!u)return;const k=`${u.hostCandidates[0]}:${u.port}`;try{await navigator.clipboard.writeText(k),E("host")}catch(K){console.error("Failed to copy address:",K)}};return a?s.jsx("div",{className:"modal-overlay",onClick:_,children:s.jsxs("div",{className:"pairing-modal",onClick:M=>M.stopPropagation(),children:[s.jsxs("div",{className:"pairing-modal__header",children:[s.jsx("h2",{className:"pairing-modal__title",children:"Pair Mobile Device"}),s.jsx("button",{className:"pairing-modal__close",onClick:_,children:""})]}),s.jsx("div",{className:"pairing-modal__body",children:c?h?s.jsxs("div",{className:"pairing-modal__loading",children:[s.jsx("div",{className:"pairing-modal__spinner"}),s.jsx("p",{children:"Starting pairing session..."})]}):b?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:b}),s.jsx(Lt,{onClick:y,variant:"secondary",children:"Try Again"})]}):p?s.jsxs("div",{className:"pairing-success",children:[s.jsx("span",{className:"pairing-success__icon",children:""}),s.jsx("h3",{className:"pairing-success__title",children:"Device Paired!"}),s.jsx("p",{className:"pairing-success__message",children:"Your mobile device has been successfully paired."})]}):m?s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"Too many failed attempts. Please try again."}),s.jsx(Lt,{onClick:j,variant:"secondary",children:"Start New Session"})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pairing-modal__qr-section",children:[s.jsxs("div",{className:"pairing-modal__qr-container",children:[s.jsx(Fh,{value:u.qrPayload,size:180,level:"M",includeMargin:!0,className:g?"pairing-modal__qr--expired":""}),g&&s.jsx("div",{className:"pairing-modal__qr-overlay",children:s.jsx("span",{children:"Expired"})})]}),s.jsx("p",{className:"pairing-modal__qr-hint",children:"Scan with your phone's camera"})]}),s.jsx("div",{className:"pairing-modal__divider",children:s.jsx("span",{children:"or enter code manually"})}),s.jsxs("div",{className:"pairing-modal__code-section",children:[s.jsx("button",{className:"pairing-modal__code",onClick:L,disabled:g,title:"Click to copy",children:s.jsx("span",{className:g?"pairing-modal__code--expired":"",children:F2(u.code)})}),A==="code"&&s.jsx("span",{className:"pairing-modal__copied",children:"Copied!"})]}),s.jsxs("div",{className:"pairing-modal__countdown",children:[g?s.jsx("span",{className:"pairing-modal__countdown--expired",children:"Session expired"}):s.jsxs("span",{children:["Expires in ",Z2(D)]}),d?.attemptsRemaining!==void 0&&d.attemptsRemaining<5&&s.jsxs("span",{className:"pairing-modal__attempts",children:[d.attemptsRemaining," attempts remaining"]})]}),!g&&s.jsx("div",{className:"pairing-modal__progress",children:s.jsx("div",{className:"pairing-modal__progress-bar",style:{width:`${D/120*100}%`}})}),s.jsxs("div",{className:"pairing-modal__connection-info",children:[s.jsxs("div",{className:"pairing-modal__host",children:[s.jsx("span",{className:"pairing-modal__host-label",children:"Server address:"}),s.jsxs("code",{className:"pairing-modal__host-value",children:[u.hostCandidates[0],":",u.port]}),s.jsx("button",{className:"pairing-modal__copy-btn",onClick:U,title:"Copy address",children:A==="host"?"":""})]}),u.hostCandidates.length>1&&s.jsxs("details",{className:"pairing-modal__alt-hosts",children:[s.jsxs("summary",{children:["Alternative addresses (",u.hostCandidates.length-1,")"]}),s.jsx("ul",{children:u.hostCandidates.slice(1).map((M,k)=>s.jsxs("li",{children:[M,":",u.port]},k))})]})]})]}):null:s.jsxs("div",{className:"pairing-modal__error",children:[s.jsx("p",{children:"The sync server is not running."}),s.jsx("p",{children:"Please start the Wi-Fi server in Settings before pairing."})]})}),s.jsxs("div",{className:"pairing-modal__footer",children:[s.jsx(Lt,{onClick:_,variant:"secondary",children:p?"Done":"Cancel"}),u&&!p&&s.jsx(Lt,{onClick:j,variant:"ghost",children:"Regenerate"})]})]})}):null}let Qp=!1;async function J2(){if(Qp)return;const a=await Wp();u1(a.id),await Gt.getState().initialize(),Qp=!0,console.log("[Sync] Initialized with device:",a.name)}function $2({children:a}){const{transactionDrawer:i,clientDrawer:c,projectDrawer:u,businessProfileDrawer:d,documentDrawer:h,expenseDrawer:b,retainerDrawer:g,retainerMatchingDrawer:p}=yt();return O.useEffect(()=>{J2().catch(m=>{console.error("Failed to initialize sync:",m)})},[]),s.jsxs("div",{className:"app-shell",children:[s.jsx(fx,{}),s.jsxs("main",{className:"main-content",children:[s.jsx(x2,{}),a]}),i.isOpen&&s.jsx(Tx,{}),c.isOpen&&s.jsx(_x,{}),u.isOpen&&s.jsx(zx,{}),d.isOpen&&s.jsx(Bx,{}),h.isOpen&&s.jsx(Fx,{}),b.isOpen&&s.jsx(Cb,{}),g.isOpen&&s.jsx(Hb,{}),p.isOpen&&s.jsx(Kb,{}),s.jsx(d2,{}),s.jsx(e2,{}),s.jsx(O2,{}),s.jsx(z2,{}),s.jsx(X2,{}),s.jsx(Xb,{})]})}function W2({title:a,breadcrumbs:i,filterSlot:c,rightSlot:u,hideAddMenu:d}){const b=Z0()==="rtl"?" \\ ":" / ";return s.jsxs("header",{className:"topbar",children:[s.jsxs("div",{className:"topbar-left",children:[s.jsxs("div",{children:[i&&i.length>0&&s.jsx("div",{className:"breadcrumbs",children:i.map((g,p)=>s.jsxs("span",{children:[g.href?s.jsx(Li,{to:g.href,className:"breadcrumb-link",children:g.label}):s.jsx("span",{className:"breadcrumb-current",children:g.label}),p<i.length-1&&s.jsx("span",{className:"breadcrumb-separator",children:b})]},p))}),s.jsx("h1",{className:"topbar-title",children:a})]}),c]}),s.jsxs("div",{className:"topbar-right",children:[u,!d&&s.jsx(ej,{})]})]})}function ej(){const[a,i]=O.useState(!1),c=O.useRef(null),{openTransactionDrawer:u,openClientDrawer:d,openProjectDrawer:h}=yt(),b=tu(),g=Fe();return O.useEffect(()=>{function p(m){c.current&&!c.current.contains(m.target)&&i(!1)}return a&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[a]),O.useEffect(()=>{function p(m){m.key==="Escape"&&i(!1)}return a&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[a]),s.jsxs("div",{className:"add-menu-container",ref:c,children:[s.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!a),children:[s.jsx(tj,{}),g("common.add")]}),a&&s.jsxs("div",{className:"add-menu",children:[s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"income"}),i(!1)},children:[s.jsx(nj,{className:"nav-icon"}),g("addMenu.income")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{u({mode:"create",defaultKind:"expense"}),i(!1)},children:[s.jsx(aj,{className:"nav-icon"}),g("addMenu.expense")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{h({mode:"create"}),i(!1)},children:[s.jsx(lj,{className:"nav-icon"}),g("addMenu.project")]}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{d({mode:"create"}),i(!1)},children:[s.jsx(ij,{className:"nav-icon"}),g("addMenu.client")]}),s.jsx("div",{className:"add-menu-divider"}),s.jsxs("button",{className:"add-menu-item",onClick:()=>{b({to:"/documents/new"}),i(!1)},children:[s.jsx(sj,{className:"nav-icon"}),g("addMenu.document")]})]})]})}function tj(){return s.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}function nj({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function aj({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function lj({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})})}function ij({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})})}function sj({className:a}){return s.jsx("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}function rj({size:a=16,className:i}){return s.jsx("svg",{width:a,height:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:i,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}function cj({kind:a,status:i,className:c}){const u=Fe(),d=a==="income"&&i==="unpaid";return s.jsx("span",{className:se("type-badge",a==="expense"&&"expense",a==="income"&&i==="paid"&&"income",d&&"receivable",c),children:u(d?"transactions.type.receivable":a==="income"?"transactions.type.income":"transactions.type.expense")})}function dr({usdAmountMinor:a,ilsAmountMinor:i,unifiedCurrency:c="ILS",variant:u="default",type:d="neutral",showSource:h=!0,className:b}){const{rate:g,source:p}=Nh("USD","ILS"),{language:m}=Yn(),y=qi(m),v=Fe(),j=O.useMemo(()=>a2(a,i,c,g),[a,i,c,g]),A=d==="income"?"amount-positive":d==="expense"?"amount-negative":d==="net"?j!==null?j>=0?"amount-positive":"amount-negative":a+i>=0?"amount-positive":"amount-negative":"";if(u==="compact")return s.jsx("span",{className:se("unified-amount-compact",A,b),children:j!==null?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"unified-total",children:Pe(j,c,y)}),h&&p!=="live"&&s.jsx("span",{className:se("fx-indicator",`source-${p}`),title:v(`fx.${p}`),children:"*"})]}):s.jsxs("span",{className:"unified-fallback",children:[Pe(a,"USD",y)," + ",Pe(i,"ILS",y)]})});if(u==="table"){const E=`USD: ${Pe(a,"USD",y)} + ILS: ${Pe(i,"ILS",y)}`;return j!==null?s.jsx("span",{className:se(A,b),title:E,style:{cursor:"help"},children:Pe(j,c,y)}):s.jsxs("span",{className:se(A,b),title:E,children:[Pe(a,"USD",y)," + ",Pe(i,"ILS",y)]})}return u==="kpi"?s.jsxs("div",{className:se("unified-amount-kpi",b),children:[j!==null?s.jsxs("div",{className:se("unified-total",A),children:[Pe(j,c,y),h&&s.jsx("span",{className:se("fx-source-badge",`source-${p}`),children:v(`fx.${p}`)})]}):s.jsx("div",{className:se("unified-total",A),children:""}),s.jsxs("div",{className:"unified-breakdown",children:[s.jsxs("span",{className:"breakdown-item",children:[s.jsx("span",{className:"breakdown-currency",children:"USD:"})," ",Pe(a,"USD",y)]}),s.jsx("span",{className:"breakdown-separator",children:"+"}),s.jsxs("span",{className:"breakdown-item",children:[s.jsx("span",{className:"breakdown-currency",children:"ILS:"})," ",Pe(i,"ILS",y)]})]})]}):s.jsxs("div",{className:se("unified-amount",b),children:[j!==null&&s.jsxs("div",{className:se("unified-total",A),children:[Pe(j,c,y),h&&s.jsx("span",{className:se("fx-source-badge",`source-${p}`),children:v(`fx.${p}`)})]}),s.jsxs("div",{className:"unified-breakdown",children:[s.jsx("span",{className:"breakdown-item",children:Pe(a,"USD",y)}),s.jsx("span",{className:"breakdown-separator",children:"+"}),s.jsx("span",{className:"breakdown-item",children:Pe(i,"ILS",y)})]})]})}function oj(){const{openTransactionDrawer:a}=yt(),i=U1(),c=Fe(),{language:u}=Yn(),d=qi(u),[h,b]=O.useState(()=>Yo("all")),[g,p]=O.useState(void 0),{data:m,isLoading:y}=R1(h.dateFrom,h.dateTo,g),{data:v,isLoading:j}=_1(h.dateFrom,h.dateTo),D=g?y:j,{data:A=[]}=I1(g),{data:E=[]}=lh({dateFrom:h.dateFrom,dateTo:h.dateTo,currency:g,limit:10,sort:{by:"occurredAt",dir:"desc"}}),_=O.useMemo(()=>{if(g){if(!m)return null;const M=m.paidIncomeMinor-m.expensesMinor;return{mode:"single",currency:g,paidIncome:Pe(m.paidIncomeMinor,g,d),unpaid:Pe(m.unpaidIncomeMinor,g,d),expenses:Pe(m.expensesMinor,g,d),net:Pe(M,g,d),netValue:M}}else return v?{mode:"unified",usd:v.USD,ils:v.ILS}:null},[m,v,g,d]),L=M=>{a({mode:"edit",transactionId:M})},U=async(M,k)=>{M.stopPropagation(),await i.mutateAsync(k)};return s.jsxs(s.Fragment,{children:[s.jsx(W2,{title:c("overview.title"),filterSlot:s.jsxs("div",{className:"filters-row",style:{marginBottom:0,marginInlineStart:24,flexWrap:"nowrap"},children:[s.jsx(Pb,{dateFrom:h.dateFrom,dateTo:h.dateTo,onChange:(M,k)=>b({dateFrom:M,dateTo:k})}),s.jsx(Yb,{value:g,onChange:p})]})}),s.jsxs("div",{className:"page-content",children:[D?s.jsx("div",{className:"kpi-row",children:[1,2,3,4].map(M=>s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("common.loading")}),s.jsx("div",{className:"kpi-value",children:"-"})]},M))}):_?.mode==="single"?s.jsxs("div",{className:"kpi-row",children:[s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.paidIncome")}),s.jsx("div",{className:"kpi-value positive",children:_.paidIncome})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.unpaidReceivables")}),s.jsx("div",{className:"kpi-value warning",children:_.unpaid})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.expenses")}),s.jsx("div",{className:"kpi-value",children:_.expenses})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.net")}),s.jsx("div",{className:se("kpi-value",_.netValue>=0?"positive":"negative"),children:_.net})]})]}):_?.mode==="unified"?s.jsxs("div",{className:"kpi-row",children:[s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.paidIncome")}),s.jsx(dr,{usdAmountMinor:_.usd.paidIncomeMinor,ilsAmountMinor:_.ils.paidIncomeMinor,variant:"kpi",type:"income"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.unpaidReceivables")}),s.jsx(dr,{usdAmountMinor:_.usd.unpaidIncomeMinor,ilsAmountMinor:_.ils.unpaidIncomeMinor,variant:"kpi",type:"neutral"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.expenses")}),s.jsx(dr,{usdAmountMinor:_.usd.expensesMinor,ilsAmountMinor:_.ils.expensesMinor,variant:"kpi",type:"expense"})]}),s.jsxs("div",{className:"kpi-card",children:[s.jsx("div",{className:"kpi-label",children:c("overview.kpi.net")}),s.jsx(dr,{usdAmountMinor:_.usd.paidIncomeMinor-_.usd.expensesMinor,ilsAmountMinor:_.ils.paidIncomeMinor-_.ils.expensesMinor,variant:"kpi",type:"net"})]})]}):null,s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[s.jsxs("div",{className:"attention-list",children:[s.jsx("div",{className:"attention-header",children:s.jsx("h3",{className:"attention-title",children:c("overview.needsAttention")})}),A.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noAttention")}):A.slice(0,5).map(M=>{const k=M.dueDate?Lv(M.dueDate):0,K=k<0;return s.jsxs("div",{className:"attention-item",style:{cursor:"pointer"},onClick:()=>L(M.id),children:[s.jsxs("div",{className:"attention-info",children:[s.jsx("span",{className:"attention-client",children:M.clientName||c("common.noClient")}),s.jsxs("span",{className:"attention-meta",children:[M.projectName||c("common.noProject")," "," ",K?s.jsx("span",{className:"text-danger",children:c("time.daysOverdue",{days:Math.abs(k)})}):k===0?s.jsx("span",{className:"text-warning",children:c("transactions.status.dueToday")}):s.jsx("span",{className:"text-warning",children:c("time.dueInDays",{days:k})})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("span",{className:se("attention-amount",K?"text-danger":"text-warning"),children:Pe(M.amountMinor,M.currency,d)}),s.jsx("button",{className:"btn btn-sm btn-ghost",onClick:$=>U($,M.id),title:c("common.markPaid"),children:s.jsx(rj,{})})]})]},M.id)})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:c("overview.recentActivity")})}),E.length===0?s.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--color-text-muted)"},children:c("overview.noRecent")}):s.jsx("div",{className:"data-table",style:{border:"none"},children:s.jsx("table",{children:s.jsx("tbody",{children:E.map(M=>s.jsxs("tr",{className:"clickable",onClick:()=>L(M.id),children:[s.jsx("td",{style:{width:80},children:Yp(M.occurredAt,d)}),s.jsx("td",{children:s.jsx(cj,{kind:M.kind,status:M.status})}),s.jsx("td",{className:"text-secondary",style:{maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:M.clientName||M.title||"-"}),s.jsxs("td",{className:se("amount-cell",M.kind==="income"&&"amount-positive",M.kind==="expense"&&"amount-negative"),children:[M.kind==="expense"?"-":"",Pe(M.amountMinor,M.currency,d)]})]},M.id))})})})]})]})]})]})}const uj=()=>s.jsx("div",{style:{padding:"2rem",opacity:.5},children:"Loading..."});function We(a,i){const c=Ve.lazy(()=>a().then(u=>({default:u[i]})));return()=>s.jsx(O.Suspense,{fallback:s.jsx(uj,{}),children:s.jsx(c,{})})}const Ge=yv({component:()=>s.jsx($2,{children:s.jsx(vv,{})})}),dj=Ze({getParentRoute:()=>Ge,path:"/",component:oj}),fj=Ze({getParentRoute:()=>Ge,path:"/transactions",component:We(()=>_e(()=>import("./TransactionsPage-D61rnQwN.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),"TransactionsPage"),validateSearch:a=>({dateFrom:typeof a.dateFrom=="string"?a.dateFrom:void 0,dateTo:typeof a.dateTo=="string"?a.dateTo:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,kind:a.kind==="income"||a.kind==="expense"?a.kind:void 0,status:a.status==="paid"||a.status==="unpaid"||a.status==="overdue"?a.status:void 0})}),mj=Ze({getParentRoute:()=>Ge,path:"/projects",component:We(()=>_e(()=>import("./ProjectsPage-BpmY7TZw.js"),__vite__mapDeps([14,3,4,10,11,12]),import.meta.url),"ProjectsPage")}),pj=Ze({getParentRoute:()=>Ge,path:"/projects/$projectId",component:We(()=>_e(()=>import("./ProjectDetailPage-zakcODeT.js"),__vite__mapDeps([15,3,4,5,7,8,9,10,11,12,13]),import.meta.url),"ProjectDetailPage")}),hj=Ze({getParentRoute:()=>Ge,path:"/clients",component:We(()=>_e(()=>import("./ClientsPage-NGSzOaKI.js"),__vite__mapDeps([16,3,4,10,11,12]),import.meta.url),"ClientsPage")}),yj=Ze({getParentRoute:()=>Ge,path:"/clients/$clientId",component:We(()=>_e(()=>import("./ClientDetailPage-BTf3kxER.js"),__vite__mapDeps([17,3,4,5,7,8,9,10,11,12,13]),import.meta.url),"ClientDetailPage")}),gj=Ze({getParentRoute:()=>Ge,path:"/reports",component:We(()=>_e(()=>import("./ReportsPage-Xi5KPZ0s.js"),__vite__mapDeps([18,3,4,10,11,12]),import.meta.url),"ReportsPage")}),vj=Ze({getParentRoute:()=>Ge,path:"/documents",component:We(()=>_e(()=>import("./index-D2pQwVWV.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13]),import.meta.url),"DocumentsPage")}),xj=Ze({getParentRoute:()=>Ge,path:"/documents/new",component:We(()=>_e(()=>import("./index-D2pQwVWV.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13]),import.meta.url),"DocumentFormPage")}),bj=Ze({getParentRoute:()=>Ge,path:"/documents/$documentId",component:We(()=>_e(()=>import("./index-D2pQwVWV.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13]),import.meta.url),"DocumentDetailPage")}),jj=Ze({getParentRoute:()=>Ge,path:"/documents/$documentId/edit",component:We(()=>_e(()=>import("./index-D2pQwVWV.js"),__vite__mapDeps([19,3,4,6,7,8,20,12,10,11,21,13]),import.meta.url),"DocumentFormPage")}),wj=Ze({getParentRoute:()=>Ge,path:"/settings",component:We(()=>_e(()=>import("./SettingsPage-UPrFm91F.js"),__vite__mapDeps([22,3,4,10,11,12]),import.meta.url),"SettingsPage")}),Sj=Ze({getParentRoute:()=>Ge,path:"/settings/profiles/$profileId",component:We(()=>_e(()=>import("./ProfileDetailPage-cclv5kKA.js"),__vite__mapDeps([23,3,4,12,10,11]),import.meta.url),"ProfileDetailPage")}),Aj=Ze({getParentRoute:()=>Ge,path:"/download",component:We(()=>_e(()=>import("./DownloadPage-Bi2j9KdP.js"),__vite__mapDeps([24,3,4,10,11,12,25]),import.meta.url),"DownloadPage")}),Dj=Ze({getParentRoute:()=>Ge,path:"/theme-demo",component:We(()=>_e(()=>import("./ThemeDemo-DrjQyfao.js"),__vite__mapDeps([26,3,4,10,11,12,27,13]),import.meta.url),"ThemeDemo")}),Nj=Ze({getParentRoute:()=>Ge,path:"/expenses",component:We(()=>_e(()=>import("./ExpensesPage-Bng9C3qL.js"),__vite__mapDeps([28,3,4,10,11,12,29]),import.meta.url),"ExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Mj=Ze({getParentRoute:()=>Ge,path:"/expenses/profile/$profileId",component:We(()=>_e(()=>import("./ProfileExpensesPage-BDCNXo5f.js"),__vite__mapDeps([30,3,4,7,8,9,10,11,12,31,13]),import.meta.url),"ProfileExpensesPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,categoryId:typeof a.categoryId=="string"?a.categoryId:void 0})}),Cj=Ze({getParentRoute:()=>Ge,path:"/expenses/profile/$profileId/receipts",component:We(()=>_e(()=>import("./ReceiptsPage-DM_hj-Ic.js"),__vite__mapDeps([32,3,4,33,20,10,11,12,34]),import.meta.url),"ReceiptsPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0,month:typeof a.month=="number"?a.month:void 0})}),Ej=Ze({getParentRoute:()=>Ge,path:"/expenses/overview",component:We(()=>_e(()=>import("./ExpensesOverviewPage-DWYnnL3k.js"),__vite__mapDeps([35,3,4,10,11,12,36]),import.meta.url),"ExpensesOverviewPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Tj=Ze({getParentRoute:()=>Ge,path:"/expenses/forecast",component:We(()=>_e(()=>import("./ExpensesForecastPage-DYXABofk.js"),__vite__mapDeps([37,3,4,10,11,12,38]),import.meta.url),"ExpensesForecastPage"),validateSearch:a=>({year:typeof a.year=="number"?a.year:void 0})}),Rj=Ze({getParentRoute:()=>Ge,path:"/retainers",component:We(()=>_e(()=>import("./RetainersPage-CjBQEQPW.js"),__vite__mapDeps([39,3,4,6,40,10,11,12,41,13,8]),import.meta.url),"RetainersPage"),validateSearch:a=>({status:a.status==="draft"||a.status==="active"||a.status==="paused"||a.status==="ended"?a.status:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,clientId:typeof a.clientId=="string"?a.clientId:void 0})}),_j=Ze({getParentRoute:()=>Ge,path:"/money-answers",component:We(()=>_e(()=>import("./index-CjPrZYqC.js"),__vite__mapDeps([42,3,4,10,40,11,12,43]),import.meta.url),"MoneyAnswersPage"),validateSearch:a=>({mode:a.mode==="month"||a.mode==="year"?a.mode:void 0,month:typeof a.month=="string"?a.month:void 0,year:typeof a.year=="number"?a.year:void 0,currency:a.currency==="USD"||a.currency==="ILS"?a.currency:void 0,includeReceivables:typeof a.includeReceivables=="boolean"?a.includeReceivables:void 0,includeProjections:typeof a.includeProjections=="boolean"?a.includeProjections:void 0})}),Ij=Ze({getParentRoute:()=>Ge,path:"/expenses/close/profile/$profileId",component:We(()=>_e(()=>import("./MonthCloseChecklistPage-u5CEViZ1.js"),__vite__mapDeps([44,3,4,33,20,10,11,12,45]),import.meta.url),"MonthCloseChecklistPage"),validateSearch:a=>({month:typeof a.month=="string"?a.month:void 0})}),Oj=Ge.addChildren([dj,fj,mj,pj,hj,yj,vj,xj,bj,jj,Nj,Mj,Cj,Ej,Tj,Ij,Rj,_j,gj,wj,Sj,Aj,Dj]),zj=gv({routeTree:Oj,basepath:void 0});function Uj(){const{toasts:a,removeToast:i}=fh(),c=O.useRef(new Map);return O.useEffect(()=>{a.forEach(u=>{if(!c.current.has(u.id)&&u.duration>0){const d=setTimeout(()=>{i(u.id),c.current.delete(u.id)},u.duration);c.current.set(u.id,d)}}),c.current.forEach((u,d)=>{a.find(h=>h.id===d)||(clearTimeout(u),c.current.delete(d))})},[a,i]),O.useEffect(()=>()=>{c.current.forEach(u=>clearTimeout(u)),c.current.clear()},[]),a.length===0?null:s.jsx("div",{className:"toast-container",children:a.map(u=>s.jsxs("div",{className:"toast",role:"status","aria-live":"polite",children:[s.jsx("span",{className:"toast-message",children:u.message}),u.action&&s.jsx("button",{type:"button",className:"toast-action",onClick:()=>{u.action?.onClick(),i(u.id)},children:u.action.label})]},u.id))})}const Lj=new wv({defaultOptions:{queries:{staleTime:1e3*60,gcTime:1e3*60*5}}});function Bj(){return s.jsx(i2,{children:s.jsx(G0,{children:s.jsxs(Sv,{client:Lj,children:[s.jsx(xv,{router:zj}),s.jsx(Uj,{})]})})})}o1().catch(console.error);Iv.createRoot(document.getElementById("root")).render(s.jsx(O.StrictMode,{children:s.jsx(Bj,{})}));export{Wj as $,Cx as A,G1 as B,Yb as C,Pb as D,bp as E,J1 as F,xr as G,Hi as H,sh as I,F1 as J,X1 as K,Qn as L,Ya as M,kx as N,w as O,Kj as P,Fj as Q,zw as R,Ah as S,W2 as T,dr as U,Uw as V,Gt as W,h2 as X,Lt as Y,$j as Z,_e as _,yt as a,s2 as a0,i1 as a1,W1 as a2,ex as a3,$1 as a4,nw as a5,aw as a6,Pj as a7,g2 as a8,yr as a9,Mw as aA,Iw as aB,Tw as aC,Rw as aD,_w as aE,Ew as aF,Nh as aG,a2 as aH,jw as aI,ww as aJ,Sw as aK,Aw as aL,Dw as aM,yn as aN,N1 as aO,I2 as aa,sw as ab,iw as ac,Sb as ad,rw as ae,gb as af,ow as ag,uw as ah,jb as ai,lw as aj,gw as ak,wb as al,bw as am,xw as an,At as ao,fw as ap,dw as aq,vw as ar,mw as as,pw as at,hw as au,yw as av,cw as aw,Ow as ax,Nw as ay,Cw as az,U1 as b,se as c,Yn as d,Yo as e,lh as f,Lv as g,Yj as h,Yp as i,cj as j,Pe as k,rj as l,qi as m,Xj as n,Uv as o,Q1 as p,Jj as q,Gj as r,B1 as s,Zj as t,Fe as u,ih as v,ew as w,Z1 as x,tw as y,K1 as z};
