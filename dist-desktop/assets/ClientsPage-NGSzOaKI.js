import{r as c,j as e,L as x}from"./vendor-router-D4Yqsbqz.js";import{a as j,u as p,d as y,r as v,T as g,C as N,S,U as A,k as C,i as f,o as I,m as P}from"./index-C9T1eVUk.js";import"./vendor-react-BdxwsYZ-.js";import"./vendor-query-CI0tl4qS.js";import"./vendor-db-BMy7eggi.js";import"./vendor-forms-CPtPuEGg.js";function U(){const{openClientDrawer:l}=j(),t=p(),{language:o}=y(),i=P(o),[a,d]=c.useState(void 0),[n,m]=c.useState(""),{data:r=[],isLoading:h}=v(a,n),u=!a;return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:t("clients.title"),filterSlot:e.jsx("div",{className:"filters-row",style:{marginBottom:0,marginInlineStart:24},children:e.jsx(N,{value:a,onChange:d})})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"filters-row",children:e.jsx(S,{value:n,onChange:m,placeholder:t("clients.searchPlaceholder")})}),h?e.jsx("div",{className:"loading",children:e.jsx("div",{className:"spinner"})}):r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:t("clients.empty")}),e.jsx("p",{className:"empty-state-description",children:t(n?"clients.emptySearch":"clients.emptyHint")}),e.jsx("button",{className:"btn btn-primary",onClick:()=>l({mode:"create"}),children:t("clients.addClient")})]}):e.jsx("div",{className:"data-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:t("clients.columns.client")}),e.jsx("th",{children:t("clients.columns.activeProjects")}),e.jsx("th",{style:{textAlign:"end"},children:t("clients.columns.unpaid")}),e.jsx("th",{children:t("clients.columns.lastPayment")}),e.jsx("th",{children:t("clients.columns.lastActivity")})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(x,{to:"/clients/$clientId",params:{clientId:s.id},style:{fontWeight:500},children:s.name})}),e.jsx("td",{className:"text-secondary",children:s.activeProjectCount}),e.jsx("td",{className:"amount-cell",children:u&&s.unpaidIncomeMinorUSD!==void 0?e.jsx(A,{usdAmountMinor:s.unpaidIncomeMinorUSD,ilsAmountMinor:s.unpaidIncomeMinorILS??0,variant:"compact",type:"neutral"}):e.jsx("span",{style:{color:"var(--color-warning)"},children:C(s.unpaidIncomeMinor,a,i)})}),e.jsx("td",{className:"text-muted",children:s.lastPaymentAt?f(s.lastPaymentAt,i):"-"}),e.jsx("td",{className:"text-muted",children:s.lastActivityAt?I(s.lastActivityAt,t):"-"})]},s.id))})]})})]})]})}export{U as ClientsPage};
